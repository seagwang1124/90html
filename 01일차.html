<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>통큰통독-01일차</title>
    <link rel="apple-touch-icon" type="image/png" href="https://i.postimg.cc/Qtnq0gFJ/Ezra-icon.png">
    <meta name="apple-mobile-web-app-title" content="통큰통독">
    <link rel="shortcut icon" type="image/png" href="https://i.postimg.cc/Qtnq0gFJ/Ezra-icon.png">
    <link rel="mask-icon" type="image/png" href="https://i.postimg.cc/Qtnq0gFJ/Ezra-icon.png">
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700&display=swap');

        body {
            font-family: 'Inter', sans-serif;
            background-color: #f8fafc;
        }

        /* 검색 하이라이트 스타일 */
        .search-highlight {
            background-color: #fde047;
            color: #1f2937;
            border-radius: 4px;
            padding: 2px 4px;
        }

        /* 스크롤 마커 컨테이너 */
        .scroll-marker-container {
            position: fixed;
            top: 0;
            right: 0;
            width: 8px;
            height: 100vh;
            z-index: 99;
            pointer-events: none;
        }

        /* 스크롤 마커 */
        .scroll-marker {
            position: absolute;
            right: 0;
            width: 8px;
            height: 8px;
            background-color: #ef4444;
            border-radius: 50%;
            box-shadow: 0 0 5px rgba(255, 0, 0, 0.7);
            cursor: pointer;
            pointer-events: auto;
            transition: transform 0.2s ease;
        }

        .scroll-marker:hover {
            transform: scale(1.5);
        }

        /* 로딩 스피너 */
        .loader {
            border: 4px solid #f3f3f3;
            border-top: 4px solid #3b82f6;
            border-radius: 50%;
            width: 24px;
            height: 24px;
            animation: spin 1s linear infinite;
            display: inline-block;
            vertical-align: middle;
            margin-right: 8px;
        }
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        /* 구절 설명 버튼 애니메이션 */
        .explanation-button-wrapper {
            transition: all 0.3s ease-in-out;
        }

        .explanation-sub-buttons {
            display: flex;
            align-items: center;
            gap: 8px;
            opacity: 0;
            visibility: hidden;
            transform: translateY(10px) scale(0.8);
            transition: all 0.3s ease-in-out;
        }

        .explanation-icon-button {
            opacity: 1;
            visibility: visible;
            transition: all 0.3s ease-in-out;
        }

        /* 'show' 클래스가 있을 때의 스타일 */
        .explanation-button-wrapper.show .explanation-sub-buttons {
            opacity: 1;
            visibility: visible;
            transform: translateY(0) scale(1);
        }
        
        .explanation-button-wrapper.show .explanation-icon-button {
            opacity: 0;
            visibility: hidden;
            pointer-events: none; /* 하위 버튼 클릭을 방해하지 않도록 함 */
        }

        /* 모달 애니메이션 */
        .modal-enter {
            opacity: 0;
            transform: scale(0.95);
        }
        .modal-enter-active {
            opacity: 1;
            transform: scale(1);
            transition: all 0.3s ease;
        }
        .modal-leave-active {
            transition: all 0.3s ease;
        }
        .modal-leave-to {
            opacity: 0;
            transform: scale(0.95);
        }
        
        /* 모달 이미지 스타일 */
        .modal-image-container {
            position: relative;
            width: 100%;
            padding-bottom: 75%; /* 4:3 비율 유지 */
            overflow: hidden;
            border-radius: 0.5rem; /* rounded-lg */
            margin-bottom: 1rem; /* mb-4 */
        }

        .modal-image {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            object-fit: contain; /* 이미지가 잘리지 않고 전체 보이도록 수정 */
            object-position: center;
        }

        /* 모달 텍스트 스타일 */
        .modal-text-container {
            max-height: 80vh;
            overflow-y: auto;
            padding-bottom: 1rem;
        }

        .modal-title {
            font-weight: bold;
            font-size: 1.5rem;
            margin-bottom: 1rem;
            position: sticky;
            top: 0;
            background-color: white;
            padding-bottom: 0.5rem;
            z-index: 10;
        }
        
        /* 새로운 CSS: 줄 간격을 글자 높이와 비슷하게 좁게 만듭니다. */
        .leading-extra-tight {
            line-height: 1.1;
        }
    </style>
</head>
<body class="bg-gray-50 text-gray-900">
    <!-- 상단 고정 헤더 -->
    <div class="fixed top-0 left-0 w-full bg-white bg-opacity-95 backdrop-blur-sm shadow-md p-4 z-50">
        <div class="flex flex-col md:flex-row items-center justify-between space-y-4 md:space-y-0">
            <!-- 검색 폼 -->
            <div class="w-full md:w-1/3">
                <form id="search-form" class="flex items-center space-x-2 w-full">
                    <button type="button" id="reset-btn" class="p-2 bg-gray-200 rounded-full text-sm font-bold w-8 h-8 flex items-center justify-center">X</button>
                    <input type="text" id="search-input" placeholder="검색어를 입력하세요" class="flex-grow p-2 rounded-lg border border-gray-300 focus:outline-none focus:ring-2 focus:ring-blue-500">
                    <button type="submit" class="p-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors">검색</button>
                </form>
                <div id="search-count-container" class="flex items-center mt-2 pl-12 text-sm text-gray-600">
                    <span id="search-count" class="font-semibold"></span>
                    <button type="button" id="next-location-btn" class="ml-2 px-3 py-1 bg-gray-200 text-gray-800 rounded-md text-xs font-medium hover:bg-gray-300 transition-colors hidden">다음 위치</button>
                </div>
            </div>

            <!-- 오디오 플레이어 -->
            <div class="w-full md:w-2/3 flex flex-col items-center justify-center">
                <audio id="audio-file" preload="auto">
                    <source src="https://vod47.anyline.co.kr/vod_ezra/%EC%9D%BD%EA%B8%B0%2001.mp3" type="audio/mp3">
                </audio>
                <div class="player-controls flex items-center justify-center gap-2 mb-2">
                    <span id="current-time" class="text-sm font-mono text-gray-500">0:00</span>
                    <button id="play-btn" class="p-2 bg-green-200 rounded-full hover:bg-green-300 transition-colors shadow-md">▶</button>
                    <button id="pause-btn" class="p-2 bg-yellow-200 rounded-full hover:bg-yellow-300 transition-colors shadow-md">⏸</button>
                    <button id="stop-btn" class="p-2 bg-red-200 rounded-full hover:bg-red-300 transition-colors shadow-md">■</button>
                    <span id="remaining-time" class="text-sm font-mono text-gray-500">0:00</span>
                </div>
                <div class="speed-volume-controls flex items-center justify-center gap-4">
                    <div class="speed-controls flex items-center gap-1">
                        <button id="speed-down-02" class="px-2 py-1 text-sm bg-gray-200 rounded-md hover:bg-gray-300 transition-colors">&lt;&lt;</button>
                        <button id="speed-down-01" class="px-2 py-1 text-sm bg-gray-200 rounded-md hover:bg-gray-300 transition-colors">&lt;</button>
                        <span id="speed-display" class="text-blue-600 font-bold text-sm w-12 text-center">1.0x</span>
                        <button id="speed-up-01" class="px-2 py-1 text-sm bg-gray-200 rounded-md hover:bg-gray-300 transition-colors">&gt;</button>
                        <button id="speed-up-02" class="px-2 py-1 text-sm bg-gray-200 rounded-md hover:bg-gray-300 transition-colors">&gt;&gt;</button>
                    </div>
                    <div class="volume-control flex items-center gap-1">
                        <span class="text-xs text-gray-500">볼륨</span>
                        <input type="range" id="volume-slider" min="0" max="1" step="0.01" value="1" class="w-24">
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- 본문 내용 컨테이너 -->
    <div class="relative max-w-3xl mx-auto px-4 mt-[250px] pb-32">
        <!-- 구절 설명 버튼 컨테이너 -->
        <div class="explanation-button-container fixed top-[120px] md:top-[140px] left-1/2 -translate-x-1/2 z-40 w-full flex justify-center p-2 box-border">
            <div class="explanation-button-wrapper relative flex items-center justify-center">
                <!-- 책 모양 아이콘 버튼 -->
                <button class="explanation-icon-button absolute w-12 h-12 md:w-14 md:h-14 bg-pink-300 rounded-full shadow-md flex items-center justify-center text-4xl cursor-pointer" id="explanation-icon-button">
                    <span>📖</span>
                </button>
                <!-- 하위 버튼들: '전체 간단'과 '전체 상세' 버튼 추가 -->
                <div class="explanation-sub-buttons absolute top-0 left-1/2 -translate-x-1/2">
                    <button class="explanation-sub-button bg-pink-300 text-gray-800 text-xs md:text-sm px-3 py-2 rounded-md shadow-md hover:scale-105 transition-transform" id="full-simple-explanation-button">전체본문 간단</button>
                    <button class="explanation-sub-button bg-pink-300 text-gray-800 text-xs md:text-sm px-3 py-2 rounded-md shadow-md hover:scale-105 transition-transform" id="full-detailed-explanation-button">전체본문 상세</button>
                    <button class="explanation-sub-button bg-pink-300 text-gray-800 text-xs md:text-sm px-3 py-2 rounded-md shadow-md hover:scale-105 transition-transform" id="detailed-explanation-button">선택문장 간단</button>
                    <button class="explanation-sub-button bg-pink-300 text-gray-800 text-xs md:text-sm px-3 py-2 rounded-md shadow-md hover:scale-105 transition-transform" id="simple-explanation-button">선택문장상세</button>
                    <button class="explanation-sub-button bg-pink-300 text-gray-800 text-xs md:text-sm px-3 py-2 rounded-md shadow-md hover:scale-105 transition-transform" id="image-explanation-button">선택문장 그림</button>
                </div>
            </div>
        </div>

        <!-- 폰트 크기 조절 -->
        <div class="flex items-center justify-center mb-6">
            <span class="text-lg font-bold text-blue-600 mr-4">글꼴 크기</span>
            <button id="down" class="w-10 h-10 text-2xl font-normal text-red-500 bg-white border border-gray-300 rounded-lg shadow-sm hover:bg-gray-100">-</button>
            <span id="font-size" class="text-2xl font-bold text-red-500 mx-4 w-10 text-center">20</span>
            <button id="up" class="w-10 h-10 text-2xl font-normal text-red-500 bg-white border border-gray-300 rounded-lg shadow-sm hover:bg-gray-100">+</button>
        </div>

        <!-- 성경 본문 -->
        <div id="bible-text" class="text-xl leading-extra-tight text-left text-gray-800 word-break-keep-all whitespace-pre-line">
            <strong>

통독 1일차
<br>범위: 창세기 1장- 11장</br>
<br>&nbsp;</br>

</strong>
<strong><br><font color="#4682b4">창세기 1 장</font></br></strong>
<br><i><font color="#808080">*천지 창조*</font></i></br>
<br>1 태초에 하나님이 천지를 창조하시니라</br>
<br>2 땅이 혼돈하고 공허하며 흑암이 깊음 위에 있고 하나님의 영은 수면 위에 운행하시니라</br>
<br>3 하나님이 이르시되 빛이 있으라 하시니 빛이 있었고</br>
<br>4 빛이 하나님이 보시기에 좋았더라 하나님이 빛과 어둠을 나누사</br>
<br>5 하나님이 빛을 낮이라 부르시고 어둠을 밤이라 부르시니라 저녁이 되고 아침이 되니 이는 첫째 날이니라</br>
<br>6 하나님이 이르시되 물 가운데에 궁창이 있어 물과 물로 나뉘라 하시고</br>
<br>7 하나님이 궁창을 만드사 궁창 아래의 물과 궁창 위의 물로 나뉘게 하시니 그대로 되니라</br>
<br>8 하나님이 궁창을 하늘이라 부르시니라 저녁이 되고 아침이 되니 이는 둘째 날이니라</br>
<br>9 하나님이 이르시되 천하의 물이 한 곳으로 모이고 뭍이 드러나라 하시니 그대로 되니라</br>
<br>10 하나님이 뭍을 땅이라 부르시고 모인 물을 바다라 부르시니 하나님이 보시기에 좋았더라</br>
<br>11 하나님이 이르시되 땅은 풀과 씨 맺는 채소와 각기 종류대로 씨 가진 열매 맺는 나무를 내라 하시니 그대로 되어</br>
<br>12 땅이 풀과 각기 종류대로 씨 맺는 채소와 각기 종류대로 씨 가진 열매 맺는 나무를 내니 하나님이 보시기에 좋았더라</br>
<br>13 저녁이 되고 아침이 되니 이는 셋째 날이니라</br>
<br>14 하나님이 이르시되 하늘의 궁창에 광명체들이 있어 낮과 밤을 나뉘게 하고 그것들로 징조와 계절과 날과 해를 이루게 하라</br>
<br>15 또 광명체들이 하늘의 궁창에 있어 땅을 비추라 하시니 그대로 되니라</br>
<br>16 하나님이 두 큰 광명체를 만드사 큰 광명체로 낮을 주관하게 하시고 작은 광명체로 밤을 주관하게 하시며 또 별들을 만드시고</br>
<br>17 하나님이 그것들을 하늘의 궁창에 두어 땅을 비추게 하시며</br>
<br>18 낮과 밤을 주관하게 하시고 빛과 어둠을 나뉘게 하시니 하나님이 보시기에 좋았더라</br>
<br>19 저녁이 되고 아침이 되니 이는 넷째 날이니라</br>
<br>20 하나님이 이르시되 물들은 생물을 번성하게 하라 땅 위 하늘의 궁창에는 새가 날으라 하시고</br>
<br>21 하나님이 큰 바다 짐승들과 물에서 번성하여 움직이는 모든 생물을 그 종류대로, 날개 있는 모든 새를 그 종류대로 창조하시니 하나님이 보시기에 좋았더라</br>
<br>22 하나님이 그들에게 복을 주시며 이르시되 생육하고 번성하여 여러 바닷물에 충만하라 새들도 땅에 번성하라 하시니라</br>
<br>23 저녁이 되고 아침이 되니 이는 다섯째 날이니라</br>
<br>24 하나님이 이르시되 땅은 생물을 그 종류대로 내되 가축과 기는 것과 땅의 짐승을 종류대로 내라 하시니 그대로 되니라</br>
<br>25 하나님이 땅의 짐승을 그 종류대로, 가축을 그 종류대로, 땅에 기는 모든 것을 그 종류대로 만드시니 하나님이 보시기에 좋았더라</br>
<br>26 하나님이 이르시되 우리의 형상을 따라 우리의 모양대로 우리가 사람을 만들고 그들로 바다의 물고기와 하늘의 새와 가축과 온 땅과 땅에 기는 모든 것을 다스리게 하자 하시고</br>
<br>27 하나님이 자기 형상 곧 하나님의 형상대로 사람을 창조하시되 남자와 여자를 창조하시고</br>
<br>28 하나님이 그들에게 복을 주시며 하나님이 그들에게 이르시되 생육하고 번성하여 땅에 충만하라, 땅을 정복하라, 바다의 물고기와 하늘의 새와 땅에 움직이는 모든 생물을 다스리라 하시니라</br>
<br>29 하나님이 이르시되 내가 온 지면의 씨 맺는 모든 채소와 씨 가진 열매 맺는 모든 나무를 너희에게 주노니 너희의 먹을 거리가 되리라</br>
<br>30 또 땅의 모든 짐승과 하늘의 모든 새와 생명이 있어 땅에 기는 모든 것에게는 내가 모든 푸른 풀을 먹을 거리로 주노라 하시니 그대로 되니라</br>
<br>31 하나님이 지으신 그 모든 것을 보시니 보시기에 심히 좋았더라 저녁이 되고 아침이 되니 이는 여섯째 날이니라</br>
<br>&nbsp;</br>
<strong><br><font color="#4682b4">창세기 2 장</font></br></strong>
<br>1 천지와 만물이 다 이루어지니라</br>
<br>2 하나님이 그가 하시던 일을 일곱째 날에 마치시니 그가 하시던 모든 일을 그치고 일곱째 날에 안식하시니라</br>
<br>3 하나님이 그 일곱째 날을 복되게 하사 거룩하게 하셨으니 이는 하나님이 그 창조하시며 만드시던 모든 일을 마치시고 그 날에 안식하셨음이니라</br>
<br><i><font color="#808080">*에덴 동산*</font></i></br>
<br>4 이것이 천지가 창조될 때에 하늘과 땅의 내력이니 여호와 하나님이 땅과 하늘을 만드시던 날에</br>
<br>5 여호와 하나님이 땅에 비를 내리지 아니하셨고 땅을 갈 사람도 없었으므로 들에는 초목이 아직 없었고 밭에는 채소가 나지 아니하였으며</br>
<br>6 안개만 땅에서 올라와 온 지면을 적셨더라</br>
<br>7 여호와 하나님이 땅의 흙으로 사람을 지으시고 생기를 그 코에 불어넣으시니 사람이 생령이 되니라</br>
<br>8 여호와 하나님이 동방의 에덴에 동산을 창설하시고 그 지으신 사람을 거기 두시니라</br>
<br>9 여호와 하나님이 그 땅에서 보기에 아름답고 먹기에 좋은 나무가 나게 하시니 동산 가운데에는 생명 나무와 선악을 알게 하는 나무도 있더라</br>
<br>10 강이 에덴에서 흘러 나와 동산을 적시고 거기서부터 갈라져 네 근원이 되었으니</br>
<br>11 첫째의 이름은 비손이라 금이 있는 하윌라 온 땅을 둘렀으며</br>
<br>12 그 땅의 금은 순금이요 그 곳에는 베델리엄과 호마노도 있으며</br>
<br>13 둘째 강의 이름은 기혼이라 구스 온 땅을 둘렀고</br>
<br>14 셋째 강의 이름은 힛데겔이라 앗수르 동쪽으로 흘렀으며 넷째 강은 유브라데더라</br>
<br>15 여호와 하나님이 그 사람을 이끌어 에덴 동산에 두어 그것을 경작하며 지키게 하시고</br>
<br>16 여호와 하나님이 그 사람에게 명하여 이르시되 동산 각종 나무의 열매는 네가 임의로 먹되</br>
<br>17 선악을 알게 하는 나무의 열매는 먹지 말라 네가 먹는 날에는 반드시 죽으리라 하시니라</br>
<br>18 여호와 하나님이 이르시되 사람이 혼자 사는 것이 좋지 아니하니 내가 그를 위하여 돕는 배필을 지으리라 하시니라</br>
<br>19 여호와 하나님이 흙으로 각종 들짐승과 공중의 각종 새를 지으시고 아담이 무엇이라고 부르나 보시려고 그것들을 그에게로 이끌어 가시니 아담이 각 생물을 부르는 것이 곧 그 이름이 되었더라</br>
<br>20 아담이 모든 가축과 공중의 새와 들의 모든 짐승에게 이름을 주니라 아담이 돕는 배필이 없으므로</br>
<br>21 여호와 하나님이 아담을 깊이 잠들게 하시니 잠들매 그가 그 갈빗대 하나를 취하고 살로 대신 채우시고</br>
<br>22 여호와 하나님이 아담에게서 취하신 그 갈빗대로 여자를 만드시고 그를 아담에게로 이끌어 오시니</br>
<br>23 아담이 이르되 이는 내 뼈 중의 뼈요 살 중의 살이라 이것을 남자에게서 취하였은즉 여자라 부르리라 하니라</br>
<br>24 이러므로 남자가 부모를 떠나 그의 아내와 합하여 둘이 한 몸을 이룰지로다</br>
<br>25 아담과 그의 아내 두 사람이 벌거벗었으나 부끄러워하지 아니하니라</br>
<br>&nbsp;</br>
<strong><br><font color="#4682b4">창세기 3 장</font></br></strong>
<br><i><font color="#808080">*사람의 불순종과 하나님의 심판 선언*</font></i></br>
<br>1 그런데 뱀은 여호와 하나님이 지으신 들짐승 중에 가장 간교하니라 뱀이 여자에게 물어 이르되 하나님이 참으로 너희에게 동산 모든 나무의 열매를 먹지 말라 하시더냐</br>
<br>2 여자가 뱀에게 말하되 동산 나무의 열매를 우리가 먹을 수 있으나</br>
<br>3 동산 중앙에 있는 나무의 열매는 하나님의 말씀에 너희는 먹지도 말고 만지지도 말라 너희가 죽을까 하노라 하셨느니라</br>
<br>4 뱀이 여자에게 이르되 너희가 결코 죽지 아니하리라</br>
<br>5 너희가 그것을 먹는 날에는 너희 눈이 밝아져 하나님과 같이 되어 선악을 알 줄 하나님이 아심이니라</br>
<br>6 여자가 그 나무를 본즉 먹음직도 하고 보암직도 하고 지혜롭게 할 만큼 탐스럽기도 한 나무인지라 여자가 그 열매를 따먹고 자기와 함께 있는 남편에게도 주매 그도 먹은지라</br>
<br>7 이에 그들의 눈이 밝아져 자기들이 벗은 줄을 알고 무화과나무 잎을 엮어 치마로 삼았더라</br>
<br>8 그들이 그 날 바람이 불 때 동산에 거니시는 여호와 하나님의 소리를 듣고 아담과 그의 아내가 여호와 하나님의 낯을 피하여 동산 나무 사이에 숨은지라</br>
<br>9 여호와 하나님이 아담을 부르시며 그에게 이르시되 네가 어디 있느냐</br>
<br>10 이르되 내가 동산에서 하나님의 소리를 듣고 내가 벗었으므로 두려워하여 숨었나이다</br>
<br>11 이르시되 누가 너의 벗었음을 네게 알렸느냐 내가 네게 먹지 말라 명한 그 나무 열매를 네가 먹었느냐</br>
<br>12 아담이 이르되 하나님이 주셔서 나와 함께 있게 하신 여자 그가 그 나무 열매를 내게 주므로 내가 먹었나이다</br>
<br>13 여호와 하나님이 여자에게 이르시되 네가 어찌하여 이렇게 하였느냐 여자가 이르되 뱀이 나를 꾀므로 내가 먹었나이다</br>
<br>14 여호와 하나님이 뱀에게 이르시되 네가 이렇게 하였으니 네가 모든 가축과 들의 모든 짐승보다 더욱 저주를 받아 배로 다니고 살아 있는 동안 흙을 먹을지니라</br>
<br>15 내가 너로 여자와 원수가 되게 하고 네 후손도 여자의 후손과 원수가 되게 하리니 여자의 후손은 네 머리를 상하게 할 것이요 너는 그의 발꿈치를 상하게 할 것이니라 하시고</br>
<br>16 또 여자에게 이르시되 내가 네게 임신하는 고통을 크게 더하리니 네가 수고하고 자식을 낳을 것이며 너는 남편을 원하고 남편은 너를 다스릴 것이니라 하시고</br>
<br>17 아담에게 이르시되 네가 네 아내의 말을 듣고 내가 네게 먹지 말라 한 나무의 열매를 먹었은즉 땅은 너로 말미암아 저주를 받고 너는 네 평생에 수고하여야 그 소산을 먹으리라</br>
<br>18 땅이 네게 가시덤불과 엉겅퀴를 낼 것이라 네가 먹을 것은 밭의 채소인즉</br>
<br>19 네가 흙으로 돌아갈 때까지 얼굴에 땀을 흘려야 먹을 것을 먹으리니 네가 그것에서 취함을 입었음이라 너는 흙이니 흙으로 돌아갈 것이니라 하시니라</br>
<br>20 아담이 그의 아내의 이름을 하와라 불렀으니 그는 모든 산 자의 어머니가 됨이더라</br>
<br>21 여호와 하나님이 아담과 그의 아내를 위하여 가죽옷을 지어 입히시니라</br>
<br><i><font color="#808080">*아담과 하와를 쫓아내시다*</font></i></br>
<br>22 여호와 하나님이 이르시되 보라 이 사람이 선악을 아는 일에 우리 중 하나 같이 되었으니 그가 그의 손을 들어 생명 나무 열매도 따먹고 영생할까 하노라 하시고</br>
<br>23 여호와 하나님이 에덴 동산에서 그를 내보내어 그의 근원이 된 땅을 갈게 하시니라</br>
<br>24 이같이 하나님이 그 사람을 쫓아내시고 에덴 동산 동쪽에 그룹들과 두루 도는 불 칼을 두어 생명 나무의 길을 지키게 하시니라</br>
<br>&nbsp;</br>
<strong><br><font color="#4682b4">창세기 4 장</font></br></strong>
<br><i><font color="#808080">*가인과 아벨*</font></i></br>
<br>1 아담이 그의 아내 하와와 동침하매 하와가 임신하여 가인을 낳고 이르되 내가 여호와로 말미암아 득남하였다 하니라</br>
<br>2 그가 또 가인의 아우 아벨을 낳았는데 아벨은 양 치는 자였고 가인은 농사하는 자였더라</br>
<br>3 세월이 지난 후에 가인은 땅의 소산으로 제물을 삼아 여호와께 드렸고</br>
<br>4 아벨은 자기도 양의 첫 새끼와 그 기름으로 드렸더니 여호와께서 아벨과 그의 제물은 받으셨으나</br>
<br>5 가인과 그의 제물은 받지 아니하신지라 가인이 몹시 분하여 안색이 변하니</br>
<br>6 여호와께서 가인에게 이르시되 네가 분하여 함은 어찌 됨이며 안색이 변함은 어찌 됨이냐</br>
<br>7 네가 선을 행하면 어찌 낯을 들지 못하겠느냐 선을 행하지 아니하면 죄가 문에 엎드려 있느니라 죄가 너를 원하나 너는 죄를 다스릴지니라</br>
<br>8 가인이 그의 아우 아벨에게 말하고 그들이 들에 있을 때에 가인이 그의 아우 아벨을 쳐죽이니라</br>
<br>9 여호와께서 가인에게 이르시되 네 아우 아벨이 어디 있느냐 그가 이르되 내가 알지 못하나이다 내가 내 아우를 지키는 자니이까</br>
<br>10 이르시되 네가 무엇을 하였느냐 네 아우의 핏소리가 땅에서부터 내게 호소하느니라</br>
<br>11 땅이 그 입을 벌려 네 손에서부터 네 아우의 피를 받았은즉 네가 땅에서 저주를 받으리니</br>
<br>12 네가 밭을 갈아도 땅이 다시는 그 효력을 네게 주지 아니할 것이요 너는 땅에서 피하며 유리하는 자가 되리라</br>
<br>13 가인이 여호와께 아뢰되 내 죄벌이 지기가 너무 무거우니이다</br>
<br>14 주께서 오늘 이 지면에서 나를 쫓아내시온즉 내가 주의 낯을 뵈옵지 못하리니 내가 땅에서 피하며 유리하는 자가 될지라 무릇 나를 만나는 자마다 나를 죽이겠나이다</br>
<br>15 여호와께서 그에게 이르시되 그렇지 아니하다 가인을 죽이는 자는 벌을 칠 배나 받으리라 하시고 가인에게 표를 주사 그를 만나는 모든 사람에게서 죽임을 면하게 하시니라</br>
<br><i><font color="#808080">*가인의 자손*</font></i></br>
<br>16 가인이 여호와 앞을 떠나서 에덴 동쪽 놋 땅에 거주하더니</br>
<br>17 아내와 동침하매 그가 임신하여 에녹을 낳은지라 가인이 성을 쌓고 그의 아들의 이름으로 성을 이름하여 에녹이라 하니라</br>
<br>18 에녹이 이랏을 낳고 이랏은 므후야엘을 낳고 므후야엘은 므드사엘을 낳고 므드사엘은 라멕을 낳았더라</br>
<br>19 라멕이 두 아내를 맞이하였으니 하나의 이름은 아다요 하나의 이름은 씰라였더라</br>
<br>20 아다는 야발을 낳았으니 그는 장막에 거주하며 가축을 치는 자의 조상이 되었고</br>
<br>21 그의 아우의 이름은 유발이니 그는 수금과 퉁소를 잡는 모든 자의 조상이 되었으며</br>
<br>22 씰라는 두발가인을 낳았으니 그는 구리와 쇠로 여러 가지 기구를 만드는 자요 두발가인의 누이는 나아마였더라</br>
<br>23 라멕이 아내들에게 이르되 아다와 씰라여 내 목소리를 들으라 라멕의 아내들이여 내 말을 들으라 나의 상처로 말미암아 내가 사람을 죽였고 나의 상함으로 말미암아 소년을 죽였도다</br>
<br>24 가인을 위하여는 벌이 칠 배일진대 라멕을 위하여는 벌이 칠십칠 배이리로다 하였더라</br>
<br><i><font color="#808080">*셋과 에노스*</font></i></br>
<br>25 아담이 다시 자기 아내와 동침하매 그가 아들을 낳아 그의 이름을 셋이라 하였으니 이는 하나님이 내게 가인이 죽인 아벨 대신에 다른 씨를 주셨다 함이며</br>
<br>26 셋도 아들을 낳고 그의 이름을 에노스라 하였으며 그 때에 사람들이 비로소 여호와의 이름을 불렀더라</br>
<br>&nbsp;</br>
<strong><br><font color="#4682b4">창세기 5 장</font></br></strong>
<br><i><font color="#808080">*아담의 계보*</font></i></br>
<br>1 이것은 아담의 계보를 적은 책이니라 하나님이 사람을 창조하실 때에 하나님의 모양대로 지으시되</br>
<br>2 남자와 여자를 창조하셨고 그들이 창조되던 날에 하나님이 그들에게 복을 주시고 그들의 이름을 사람이라 일컬으셨더라</br>
<br>3 아담은 백삼십 세에 자기의 모양 곧 자기의 형상과 같은 아들을 낳아 이름을 셋이라 하였고</br>
<br>4 아담은 셋을 낳은 후 팔백 년을 지내며 자녀들을 낳았으며</br>
<br>5 그는 구백삼십 세를 살고 죽었더라</br>
<br>6 셋은 백오 세에 에노스를 낳았고</br>
<br>7 에노스를 낳은 후 팔백칠 년을 지내며 자녀들을 낳았으며</br>
<br>8 그는 구백십이 세를 살고 죽었더라</br>
<br>9 에노스는 구십 세에 게난을 낳았고</br>
<br>10 게난을 낳은 후 팔백십오 년을 지내며 자녀들을 낳았으며</br>
<br>11 그는 구백오 세를 살고 죽었더라</br>
<br>12 게난은 칠십 세에 마할랄렐을 낳았고</br>
<br>13 마할랄렐을 낳은 후 팔백사십 년을 지내며 자녀들을 낳았으며</br>
<br>14 그는 구백십 세를 살고 죽었더라</br>
<br>15 마할랄렐은 육십오 세에 야렛을 낳았고</br>
<br>16 야렛을 낳은 후 팔백삼십 년을 지내며 자녀를 낳았으며</br>
<br>17 그는 팔백구십오 세를 살고 죽었더라</br>
<br>18 야렛은 백육십이 세에 에녹을 낳았고</br>
<br>19 에녹을 낳은 후 팔백 년을 지내며 자녀들을 낳았으며</br>
<br>20 그는 구백육십이 세를 살고 죽었더라</br>
<br>21 에녹은 육십오 세에 므두셀라를 낳았고</br>
<br>22 므두셀라를 낳은 후 삼백 년을 하나님과 동행하며 자녀들을 낳았으며</br>
<br>23 그는 삼백육십오 세를 살았더라</br>
<br>24 에녹이 하나님과 동행하더니 하나님이 그를 데려가시므로 세상에 있지 아니하였더라</br>
<br>25 므두셀라는 백팔십칠 세에 라멕을 낳았고</br>
<br>26 라멕을 낳은 후 칠백팔십이 년을 지내며 자녀를 낳았으며</br>
<br>27 그는 구백육십구 세를 살고 죽었더라</br>
<br>28 라멕은 백팔십이 세에 아들을 낳고</br>
<br>29 이름을 노아라 하여 이르되 여호와께서 땅을 저주하시므로 수고롭게 일하는 우리를 이 아들이 안위하리라 하였더라</br>
<br>30 라멕은 노아를 낳은 후 오백구십오 년을 지내며 자녀들을 낳았으며</br>
<br>31 그는 칠백칠십칠 세를 살고 죽었더라</br>
<br>32 노아는 오백 세 된 후에 셈과 함과 야벳을 낳았더라</br>
<br>&nbsp;</br>
<strong><br><font color="#4682b4">창세기 6 장</font></br></strong>
<br><i><font color="#808080">*사람의 죄악*</font></i></br>
<br>1 사람이 땅 위에 번성하기 시작할 때에 그들에게서 딸들이 나니</br>
<br>2 하나님의 아들들이 사람의 딸들의 아름다움을 보고 자기들이 좋아하는 모든 여자를 아내로 삼는지라</br>
<br>3 여호와께서 이르시되 나의 영이 영원히 사람과 함께 하지 아니하리니 이는 그들이 육신이 됨이라 그러나 그들의 날은 백이십 년이 되리라 하시니라</br>
<br>4 당시에 땅에는 네피림이 있었고 그 후에도 하나님의 아들들이 사람의 딸들에게로 들어와 자식을 낳았으니 그들은 용사라 고대에 명성이 있는 사람들이었더라</br>
<br>5 여호와께서 사람의 죄악이 세상에 가득함과 그의 마음으로 생각하는 모든 계획이 항상 악할 뿐임을 보시고</br>
<br>6 땅 위에 사람 지으셨음을 한탄하사 마음에 근심하시고</br>
<br>7 이르시되 내가 창조한 사람을 내가 지면에서 쓸어버리되 사람으로부터 가축과 기는 것과 공중의 새까지 그리하리니 이는 내가 그것들을 지었음을 한탄함이니라 하시니라</br>
<br>8 그러나 노아는 여호와께 은혜를 입었더라</br>
<br><i><font color="#808080">*노아의 족보*</font></i></br>
<br>9 이것이 노아의 족보니라 노아는 의인이요 당대에 완전한 자라 그는 하나님과 동행하였으며</br>
<br>10 세 아들을 낳았으니 셈과 함과 야벳이라</br>
<br>11 그 때에 온 땅이 하나님 앞에 부패하여 포악함이 땅에 가득한지라</br>
<br>12 하나님이 보신즉 땅이 부패하였으니 이는 땅에서 모든 혈육 있는 자의 행위가 부패함이었더라</br>
<br>13 하나님이 노아에게 이르시되 모든 혈육 있는 자의 포악함이 땅에 가득하므로 그 끝 날이 내 앞에 이르렀으니 내가 그들을 땅과 함께 멸하리라</br>
<br>14 너는 고페르 나무로 너를 위하여 방주를 만들되 그 안에 칸들을 막고 역청을 그 안팎에 칠하라</br>
<br>15 네가 만들 방주는 이러하니 그 길이는 삼백 규빗, 너비는 오십 규빗, 높이는 삼십 규빗이라</br>
<br>16 거기에 창을 내되 위에서부터 한 규빗에 내고 그 문은 옆으로 내고 상 중 하 삼층으로 할지니라</br>
<br>17 내가 홍수를 땅에 일으켜 무릇 생명의 기운이 있는 모든 육체를 천하에서 멸절하리니 땅에 있는 것들이 다 죽으리라</br>
<br>18 그러나 너와는 내가 내 언약을 세우리니 너는 네 아들들과 네 아내와 네 며느리들과 함께 그 방주로 들어가고</br>
<br>19 혈육 있는 모든 생물을 너는 각기 암수 한 쌍씩 방주로 이끌어들여 너와 함께 생명을 보존하게 하되</br>
<br>20 새가 그 종류대로, 가축이 그 종류대로, 땅에 기는 모든 것이 그 종류대로 각기 둘씩 네게로 나아오리니 그 생명을 보존하게 하라</br>
<br>21 너는 먹을 모든 양식을 네게로 가져다가 저축하라 이것이 너와 그들의 먹을 것이 되리라</br>
<br>22 노아가 그와 같이 하여 하나님이 자기에게 명하신 대로 다 준행하였더라</br>
<br>&nbsp;</br>
<strong><br><font color="#4682b4">창세기 7 장</font></br></strong>
<br><i><font color="#808080">*홍수*</font></i></br>
<br>1 여호와께서 노아에게 이르시되 너와 네 온 집은 방주로 들어가라 이 세대에서 네가 내 앞에 의로움을 내가 보았음이니라</br>
<br>2 너는 모든 정결한 짐승은 암수 일곱씩, 부정한 것은 암수 둘씩을 네게로 데려오며</br>
<br>3 공중의 새도 암수 일곱씩을 데려와 그 씨를 온 지면에 유전하게 하라</br>
<br>4 지금부터 칠 일이면 내가 사십 주야를 땅에 비를 내려 내가 지은 모든 생물을 지면에서 쓸어버리리라</br>
<br>5 노아가 여호와께서 자기에게 명하신 대로 다 준행하였더라</br>
<br>6 홍수가 땅에 있을 때에 노아가 육백 세라</br>
<br>7 노아는 아들들과 아내와 며느리들과 함께 홍수를 피하여 방주에 들어갔고</br>
<br>8 정결한 짐승과 부정한 짐승과 새와 땅에 기는 모든 것은</br>
<br>9 하나님이 노아에게 명하신 대로 암수 둘씩 노아에게 나아와 방주로 들어갔으며</br>
<br>10 칠 일 후에 홍수가 땅에 덮이니</br>
<br>11 노아가 육백 세 되던 해 둘째 달 곧 그 달 열이렛날이라 그 날에 큰 깊음의 샘들이 터지며 하늘의 창문들이 열려</br>
<br>12 사십 주야를 비가 땅에 쏟아졌더라</br>
<br>13 곧 그 날에 노아와 그의 아들 셈, 함, 야벳과 노아의 아내와 세 며느리가 다 방주로 들어갔고</br>
<br>14 그들과 모든 들짐승이 그 종류대로, 모든 가축이 그 종류대로, 땅에 기는 모든 것이 그 종류대로, 모든 새가 그 종류대로</br>
<br>15 무릇 생명의 기운이 있는 육체가 둘씩 노아에게 나아와 방주로 들어갔으니</br>
<br>16 들어간 것들은 모든 것의 암수라 하나님이 그에게 명하신 대로 들어가매 여호와께서 그를 들여보내고 문을 닫으시니라</br>
<br>17 홍수가 땅에 사십 일 동안 계속된지라 물이 많아져 방주가 땅에서 떠올랐고</br>
<br>18 물이 더 많아져 땅에 넘치매 방주가 물 위에 떠 다녔으며</br>
<br>19 물이 땅에 더욱 넘치매 천하의 높은 산이 다 잠겼더니</br>
<br>20 물이 불어서 십오 규빗이나 오르니 산들이 잠긴지라</br>
<br>21 땅 위에 움직이는 생물이 다 죽었으니 곧 새와 가축과 들짐승과 땅에 기는 모든 것과 모든 사람이라</br>
<br>22 육지에 있어 그 코에 생명의 기운의 숨이 있는 것은 다 죽었더라</br>
<br>23 지면의 모든 생물을 쓸어버리시니 곧 사람과 가축과 기는 것과 공중의 새까지라 이들은 땅에서 쓸어버림을 당하였으되 오직 노아와 그와 함께 방주에 있던 자들만 남았더라</br>
<br>24 물이 백오십 일을 땅에 넘쳤더라</br>
<br>&nbsp;</br>
<strong><br><font color="#4682b4">창세기 8 장</font></br></strong>
<br><i><font color="#808080">*홍수가 그치다*</font></i></br>
<br>1 하나님이 노아와 그와 함께 방주에 있는 모든 들짐승과 가축을 기억하사 하나님이 바람을 땅 위에 불게 하시매 물이 줄어들었고</br>
<br>2 깊음의 샘과 하늘의 창문이 닫히고 하늘에서 비가 그치매</br>
<br>3 물이 땅에서 물러가고 점점 물러가서 백오십 일 후에 줄어들고</br>
<br>4 일곱째 달 곧 그 달 열이렛날에 방주가 아라랏 산에 머물렀으며</br>
<br>5 물이 점점 줄어들어 열째 달 곧 그 달 초하룻날에 산들의 봉우리가 보였더라</br>
<br>6 사십 일을 지나서 노아가 그 방주에 낸 창문을 열고</br>
<br>7 까마귀를 내놓으매 까마귀가 물이 땅에서 마르기까지 날아 왕래하였더라</br>
<br>8 그가 또 비둘기를 내놓아 지면에서 물이 줄어들었는지를 알고자 하매</br>
<br>9 온 지면에 물이 있으므로 비둘기가 발 붙일 곳을 찾지 못하고 방주로 돌아와 그에게로 오는지라 그가 손을 내밀어 방주 안 자기에게로 받아들이고</br>
<br>10 또 칠 일을 기다려 다시 비둘기를 방주에서 내놓으매</br>
<br>11 저녁때에 비둘기가 그에게로 돌아왔는데 그 입에 감람나무 새 잎사귀가 있는지라 이에 노아가 땅에 물이 줄어든 줄을 알았으며</br>
<br>12 또 칠 일을 기다려 비둘기를 내놓으매 다시는 그에게로 돌아오지 아니하였더라</br>
<br>13 육백일 년 첫째 달 곧 그 달 초하룻날에 땅 위에서 물이 걷힌지라 노아가 방주 뚜껑을 제치고 본즉 지면에서 물이 걷혔더니</br>
<br>14 둘째 달 스무이렛날에 땅이 말랐더라</br>
<br>15 하나님이 노아에게 말씀하여 이르시되</br>
<br>16 너는 네 아내와 네 아들들과 네 며느리들과 함께 방주에서 나오고</br>
<br>17 너와 함께 한 모든 혈육 있는 생물 곧 새와 가축과 땅에 기는 모든 것을 다 이끌어내라 이것들이 땅에서 생육하고 땅에서 번성하리라 하시매</br>
<br>18 노아가 그 아들들과 그의 아내와 그 며느리들과 함께 나왔고</br>
<br>19 땅 위의 동물 곧 모든 짐승과 모든 기는 것과 모든 새도 그 종류대로 방주에서 나왔더라</br>
<br><i><font color="#808080">*노아가 번제를 드리다*</font></i></br>
<br>20 노아가 여호와께 제단을 쌓고 모든 정결한 짐승과 모든 정결한 새 중에서 제물을 취하여 번제로 제단에 드렸더니</br>
<br>21 여호와께서 그 향기를 받으시고 그 중심에 이르시되 내가 다시는 사람으로 말미암아 땅을 저주하지 아니하리니 이는 사람의 마음이 계획하는 바가 어려서부터 악함이라 내가 전에 행한 것 같이 모든 생물을 다시 멸하지 아니하리니</br>
<br>22 땅이 있을 동안에는 심음과 거둠과 추위와 더위와 여름과 겨울과 낮과 밤이 쉬지 아니하리라</br>
<br>&nbsp;</br>
<strong><br><font color="#4682b4">창세기 9 장</font></br></strong>
<br><i><font color="#808080">*하나님이 노아와 언약을 세우시다*</font></i></br>
<br>1 하나님이 노아와 그 아들들에게 복을 주시며 그들에게 이르시되 생육하고 번성하여 땅에 충만하라</br>
<br>2 땅의 모든 짐승과 공중의 모든 새와 땅에 기는 모든 것과 바다의 모든 물고기가 너희를 두려워하며 너희를 무서워하리니 이것들은 너희의 손에 붙였음이니라</br>
<br>3 모든 산 동물은 너희의 먹을 것이 될지라 채소 같이 내가 이것을 다 너희에게 주노라</br>
<br>4 그러나 고기를 그 생명 되는 피째 먹지 말 것이니라</br>
<br>5 내가 반드시 너희의 피 곧 너희의 생명의 피를 찾으리니 짐승이면 그 짐승에게서, 사람이나 사람의 형제면 그에게서 그의 생명을 찾으리라</br>
<br>6 다른 사람의 피를 흘리면 그 사람의 피도 흘릴 것이니 이는 하나님이 자기 형상대로 사람을 지으셨음이니라</br>
<br>7 너희는 생육하고 번성하며 땅에 가득하여 그 중에서 번성하라 하셨더라</br>
<br>8 하나님이 노아와 그와 함께 한 아들들에게 말씀하여 이르시되</br>
<br>9 내가 내 언약을 너희와 너희 후손과</br>
<br>10 너희와 함께 한 모든 생물 곧 너희와 함께 한 새와 가축과 땅의 모든 생물에게 세우리니 방주에서 나온 모든 것 곧 땅의 모든 짐승에게니라</br>
<br>11 내가 너희와 언약을 세우리니 다시는 모든 생물을 홍수로 멸하지 아니할 것이라 땅을 멸할 홍수가 다시 있지 아니하리라</br>
<br>12 하나님이 이르시되 내가 나와 너희와 및 너희와 함께 하는 모든 생물 사이에 대대로 영원히 세우는 언약의 증거는 이것이니라</br>
<br>13 내가 내 무지개를 구름 속에 두었나니 이것이 나와 세상 사이의 언약의 증거니라</br>
<br>14 내가 구름으로 땅을 덮을 때에 무지개가 구름 속에 나타나면</br>
<br>15 내가 나와 너희와 및 육체를 가진 모든 생물 사이의 내 언약을 기억하리니 다시는 물이 모든 육체를 멸하는 홍수가 되지 아니할지라</br>
<br>16 무지개가 구름 사이에 있으리니 내가 보고 나 하나님과 모든 육체를 가진 땅의 모든 생물 사이의 영원한 언약을 기억하리라</br>
<br>17 하나님이 노아에게 또 이르시되 내가 나와 땅에 있는 모든 생물 사이에 세운 언약의 증거가 이것이라 하셨더라</br>
<br><i><font color="#808080">*노아와 그 아들들*</font></i></br>
<br>18 방주에서 나온 노아의 아들들은 셈과 함과 야벳이며 함은 가나안의 아버지라</br>
<br>19 노아의 이 세 아들로부터 사람들이 온 땅에 퍼지니라</br>
<br>20 노아가 농사를 시작하여 포도나무를 심었더니</br>
<br>21 포도주를 마시고 취하여 그 장막 안에서 벌거벗은지라</br>
<br>22 가나안의 아버지 함이 그의 아버지의 하체를 보고 밖으로 나가서 그의 두 형제에게 알리매</br>
<br>23 셈과 야벳이 옷을 가져다가 자기들의 어깨에 메고 뒷걸음쳐 들어가서 그들의 아버지의 하체를 덮었으며 그들이 얼굴을 돌이키고 그들의 아버지의 하체를 보지 아니하였더라</br>
<br>24 노아가 술이 깨어 그의 작은 아들이 자기에게 행한 일을 알고</br>
<br>25 이에 이르되 가나안은 저주를 받아 그의 형제의 종들의 종이 되기를 원하노라 하고</br>
<br>26 또 이르되 셈의 하나님 여호와를 찬송하리로다 가나안은 셈의 종이 되고</br>
<br>27 하나님이 야벳을 창대하게 하사 셈의 장막에 거하게 하시고 가나안은 그의 종이 되게 하시기를 원하노라 하였더라</br>
<br>28 홍수 후에 노아가 삼백오십 년을 살았고</br>
<br>29 그의 나이가 구백오십 세가 되어 죽었더라</br>
<br>&nbsp;</br>
<strong><br><font color="#4682b4">창세기 10 장</font></br></strong>
<br><i><font color="#808080">*노아의 아들들의 족보*</font></i></br>
<br>1 노아의 아들 셈과 함과 야벳의 족보는 이러하니라 홍수 후에 그들이 아들들을 낳았으니</br>
<br>2 야벳의 아들은 고멜과 마곡과 마대와 야완과 두발과 메섹과 디라스요</br>
<br>3 고멜의 아들은 아스그나스와 리밧과 도갈마요</br>
<br>4 야완의 아들은 엘리사와 달시스와 깃딤과 도다님이라</br>
<br>5 이들로부터 여러 나라 백성으로 나뉘어서 각기 언어와 종족과 나라대로 바닷가의 땅에 머물렀더라</br>
<br>6 함의 아들은 구스와 미스라임과 붓과 가나안이요</br>
<br>7 구스의 아들은 스바와 하윌라와 삽다와 라아마와 삽드가요 라아마의 아들은 스바와 드단이며</br>
<br>8 구스가 또 니므롯을 낳았으니 그는 세상에 첫 용사라</br>
<br>9 그가 여호와 앞에서 용감한 사냥꾼이 되었으므로 속담에 이르기를 아무는 여호와 앞에 니므롯 같이 용감한 사냥꾼이로다 하더라</br>
<br>10 그의 나라는 시날 땅의 바벨과 에렉과 악갓과 갈레에서 시작되었으며</br>
<br>11 그가 그 땅에서 앗수르로 나아가 니느웨와 르호보딜과 갈라와</br>
<br>12 및 니느웨와 갈라 사이의 레센을 건설하였으니 이는 큰 성읍이라</br>
<br>13 미스라임은 루딤과 아나밈과 르하빔과 납두힘과</br>
<br>14 바드루심과 가슬루힘과 갑도림을 낳았더라 (가슬루힘에게서 블레셋이 나왔더라)</br>
<br>15 가나안은 장자 시돈과 헷을 낳고</br>
<br>16 또 여부스 족속과 아모리 족속과 기르가스 족속과</br>
<br>17 히위 족속과 알가 족속과 신 족속과</br>
<br>18 아르왓 족속과 스말 족속과 하맛 족속을 낳았더니 이 후로 가나안 자손의 족속이 흩어져 나아갔더라</br>
<br>19 가나안의 경계는 시돈에서부터 그랄을 지나 가사까지와 소돔과 고모라와 아드마와 스보임을 지나 라사까지였더라</br>
<br>20 이들은 함의 자손이라 각기 족속과 언어와 지방과 나라대로였더라</br>
<br>21 셈은 에벨 온 자손의 조상이요 야벳의 형이라 그에게도 자녀가 출생하였으니</br>
<br>22 셈의 아들은 엘람과 앗수르와 아르박삿과 룻과 아람이요</br>
<br>23 아람의 아들은 우스와 훌과 게델과 마스며</br>
<br>24 아르박삿은 셀라를 낳고 셀라는 에벨을 낳았으며</br>
<br>25 에벨은 두 아들을 낳고 하나의 이름을 벨렉이라 하였으니 그 때에 세상이 나뉘었음이요 벨렉의 아우의 이름은 욕단이며</br>
<br>26 욕단은 알모닷과 셀렙과 하살마웻과 예라와</br>
<br>27 하도람과 우살과 디글라와</br>
<br>28 오발과 아비마엘과 스바와</br>
<br>29 오빌과 하윌라와 요밥을 낳았으니 이들은 다 욕단의 아들이며</br>
<br>30 그들이 거주하는 곳은 메사에서부터 스발로 가는 길의 동쪽 산이었더라</br>
<br>31 이들은 셈의 자손이니 그 족속과 언어와 지방과 나라대로였더라</br>
<br>32 이들은 그 백성들의 족보에 따르면 노아 자손의 족속들이요 홍수 후에 이들에게서 그 땅의 백성들이 나뉘었더라</br>
<br>&nbsp;</br>
<strong><br><font color="#4682b4">창세기 11 장</font></br></strong>
<br><i><font color="#808080">*바벨*</font></i></br>
<br>1 온 땅의 언어가 하나요 말이 하나였더라</br>
<br>2 이에 그들이 동방으로 옮기다가 시날 평지를 만나 거기 거류하며</br>
<br>3 서로 말하되 자, 벽돌을 만들어 견고히 굽자 하고 이에 벽돌로 돌을 대신하며 역청으로 진흙을 대신하고</br>
<br>4 또 말하되 자, 성읍과 탑을 건설하여 그 탑 꼭대기를 하늘에 닿게 하여 우리 이름을 내고 온 지면에 흩어짐을 면하자 하였더니</br>
<br>5 여호와께서 사람들이 건설하는 그 성읍과 탑을 보려고 내려오셨더라</br>
<br>6 여호와께서 이르시되 이 무리가 한 족속이요 언어도 하나이므로 이같이 시작하였으니 이 후로는 그 하고자 하는 일을 막을 수 없으리로다</br>
<br>7 자, 우리가 내려가서 거기서 그들의 언어를 혼잡하게 하여 그들이 서로 알아듣지 못하게 하자 하시고</br>
<br>8 여호와께서 거기서 그들을 온 지면에 흩으셨으므로 그들이 그 도시를 건설하기를 그쳤더라</br>
<br>9 그러므로 그 이름을 바벨이라 하니 이는 여호와께서 거기서 온 땅의 언어를 혼잡하게 하셨음이니라 여호와께서 거기서 그들을 온 지면에 흩으셨더라</br>
<br><i><font color="#808080">*셈의 족보*</font></i></br>
<br>10 셈의 족보는 이러하니라 셈은 백 세 곧 홍수 후 이 년에 아르박삿을 낳았고</br>
<br>11 아르박삿을 낳은 후에 오백 년을 지내며 자녀를 낳았으며</br>
<br>12 아르박삿은 삼십오 세에 셀라를 낳았고</br>
<br>13 셀라를 낳은 후에 사백삼 년을 지내며 자녀를 낳았으며</br>
<br>14 셀라는 삼십 세에 에벨을 낳았고</br>
<br>15 에벨을 낳은 후에 사백삼 년을 지내며 자녀를 낳았으며</br>
<br>16 에벨은 삼십사 세에 벨렉을 낳았고</br>
<br>17 벨렉을 낳은 후에 사백삼십 년을 지내며 자녀를 낳았으며</br>
<br>18 벨렉은 삼십 세에 르우를 낳았고</br>
<br>19 르우를 낳은 후에 이백구 년을 지내며 자녀를 낳았으며</br>
<br>20 르우는 삼십이 세에 스룩을 낳았고</br>
<br>21 스룩을 낳은 후에 이백칠 년을 지내며 자녀를 낳았으며</br>
<br>22 스룩은 삼십 세에 나홀을 낳았고</br>
<br>23 나홀을 낳은 후에 이백 년을 지내며 자녀를 낳았으며</br>
<br>24 나홀은 이십구 세에 데라를 낳았고</br>
<br>25 데라를 낳은 후에 백십구 년을 지내며 자녀를 낳았으며</br>
<br>26 데라는 칠십 세에 아브람과 나홀과 하란을 낳았더라</br>
<br><i><font color="#808080">*데라의 족보*</font></i></br>
<br>27 데라의 족보는 이러하니라 데라는 아브람과 나홀과 하란을 낳고 하란은 롯을 낳았으며</br>
<br>28 하란은 그 아비 데라보다 먼저 고향 갈대아인의 우르에서 죽었더라</br>
<br>29 아브람과 나홀이 장가 들었으니 아브람의 아내의 이름은 사래며 나홀의 아내의 이름은 밀가니 하란의 딸이요 하란은 밀가의 아버지이며 또 이스가의 아버지더라</br>
<br>30 사래는 임신하지 못하므로 자식이 없었더라</br>
<br>31 데라가 그 아들 아브람과 하란의 아들인 그의 손자 롯과 그의 며느리 아브람의 아내 사래를 데리고 갈대아인의 우르를 떠나 가나안 땅으로 가고자 하더니 하란에 이르러 거기 거류하였으며</br>
<br>32 데라는 나이가 이백오 세가 되어 하란에서 죽었더라</br>
<br>&nbsp;</br>
<br>    1일차 끝</br>
<br>&nbsp;</br>
        </div>
    </div>

    <!-- 모달 -->
    <div id="explanation-modal" class="fixed inset-0 z-[100] bg-gray-900 bg-opacity-50 hidden flex items-center justify-center">
        <!-- 모달 컨텐츠: 높이 제한 및 스크롤 가능하게 수정 -->
        <div class="modal-content relative w-11/12 max-w-lg bg-white p-6 rounded-lg shadow-2xl text-left transition-all duration-300 modal-enter">
            <button class="absolute top-2 right-2 text-gray-700 hover:text-gray-900 text-3xl font-bold" id="close-modal">&times;</button>
            
            <!-- 모달 내용을 담을 스크롤 가능 컨테이너 -->
            <div class="modal-text-container">
                <h3 id="modal-title" class="modal-title"></h3>
                <div id="modal-image-container" class="modal-image-container hidden">
                    <img id="modal-image" src="" alt="설명 관련 이미지" class="modal-image">
                </div>
                <p id="modal-text" class="text-gray-700 leading-relaxed">구절을 드래그하여 선택하고 '구절설명' 버튼을 누르세요.</p>
            </div>
        </div>
    </div>

    <!-- 스크롤 마커 컨테이너 -->
    <div id="scroll-marker-container" class="scroll-marker-container"></div>
    
    <script>
        // ------------------------------
        // 설정: API 키는 런타임에 자동으로 제공됩니다.
        const geminiApiKey = "AIzaSyDUlSQlSPgnrFBXpnUJMDoUO3s_KsaoFRU";
        // ------------------------------
        // DOM 요소
        const bibleTextEl = document.getElementById('bible-text');
        const searchInput = document.getElementById('search-input');
        const searchForm = document.getElementById('search-form');
        const searchCountEl = document.getElementById('search-count');
        const nextLocationBtn = document.getElementById('next-location-btn');
        const resetBtn = document.getElementById('reset-btn');
        const scrollMarkerContainer = document.getElementById('scroll-marker-container');
        const explanationIconButton = document.getElementById('explanation-icon-button');
        const detailedExplanationButton = document.getElementById('detailed-explanation-button');
        const simpleExplanationButton = document.getElementById('simple-explanation-button');
        const imageExplanationButton = document.getElementById('image-explanation-button');
        
        // 새로 추가된 버튼
        const fullSimpleExplanationButton = document.getElementById('full-simple-explanation-button');
        const fullDetailedExplanationButton = document.getElementById('full-detailed-explanation-button');

        const modal = document.getElementById('explanation-modal');
        const modalContent = document.querySelector('.modal-content');
        const closeModalButton = document.getElementById('close-modal');
        const modalTitle = document.getElementById('modal-title');
        const modalImageContainer = document.getElementById('modal-image-container');
        const modalImage = document.getElementById('modal-image');
        const modalText = document.getElementById('modal-text');
        const audio = document.getElementById('audio-file');
        const playBtn = document.getElementById('play-btn');
        const pauseBtn = document.getElementById('pause-btn');
        const stopBtn = document.getElementById('stop-btn');
        const speedDisplay = document.getElementById('speed-display');
        const speedDown02Btn = document.getElementById('speed-down-02');
        const speedDown01Btn = document.getElementById('speed-down-01');
        const speedUp01Btn = document.getElementById('speed-up-01');
        const speedUp02Btn = document.getElementById('speed-up-02');
        const volumeSlider = document.getElementById('volume-slider');
        const currentTimeEl = document.getElementById('current-time');
        const remainingTimeEl = document.getElementById('remaining-time');
        const upBtn = document.getElementById('up');
        const downBtn = document.getElementById('down');
        const fontSizeEl = document.getElementById('font-size');
        const explanationButtonWrapper = document.querySelector('.explanation-button-wrapper');

        // 상태값
        let selectedVerse = "";
        let originalText = "";
        let foundSentences = [];
        let currentSearchIndex = -1;
        let currentSpeed = 1.0;

        // 유틸: RegExp 특수문자 이스케이프
        function escapeRegExp(string) {
            return string.replace(/[.*+?^${}()|[\]\\]/g, '\\$&');
        }

        // 페이지 초기화
        window.addEventListener('DOMContentLoaded', () => {
            originalText = bibleTextEl.innerHTML;
            updateFontSizeDisplay();
            updateSpeed();
        
            // 텍스트 드래그/선택 이벤트
            document.addEventListener('mouseup', () => {
                const selection = window.getSelection();
                selectedVerse = selection ? selection.toString().trim() : '';
            });

            // 검색 폼
            if (searchForm) {
                searchForm.addEventListener('submit', (event) => {
                    event.preventDefault();
                    findString(searchInput.value);
                });
            }
            if (resetBtn) resetBtn.addEventListener('click', clearHighlight);
            if (nextLocationBtn) nextLocationBtn.addEventListener('click', nextLocation);
        
            // 폰트 크기 조절
            if (upBtn) upBtn.addEventListener('click', () => {
                let currentSize = parseFloat(window.getComputedStyle(bibleTextEl).fontSize);
                if (currentSize + 2 <= 40) {
                    bibleTextEl.style.fontSize = (currentSize + 2) + 'px';
                    updateFontSizeDisplay();
                }
            });
            if (downBtn) downBtn.addEventListener('click', () => {
                let currentSize = parseFloat(window.getComputedStyle(bibleTextEl).fontSize);
                if (currentSize - 2 >= 12) {
                    bibleTextEl.style.fontSize = (currentSize - 2) + 'px';
                    updateFontSizeDisplay();
                }
            });
        
            // 오디오 컨트롤
            playBtn.addEventListener('click', () => { audio.play(); });
            pauseBtn.addEventListener('click', () => { audio.pause(); });
            stopBtn.addEventListener('click', () => { audio.pause(); audio.currentTime = 0; });
        
            speedDown02Btn.addEventListener('click', () => { currentSpeed = Math.max(0.5, currentSpeed - 0.2); updateSpeed(); });
            speedDown01Btn.addEventListener('click', () => { currentSpeed = Math.max(0.5, currentSpeed - 0.1); updateSpeed(); });
            speedUp01Btn.addEventListener('click', () => { currentSpeed = Math.min(2.0, currentSpeed + 0.1); updateSpeed(); });
            speedUp02Btn.addEventListener('click', () => { currentSpeed = Math.min(2.0, currentSpeed + 0.2); updateSpeed(); });
        
            volumeSlider.addEventListener('input', () => { audio.volume = volumeSlider.value; });
        
            audio.addEventListener('timeupdate', () => {
                const currentTime = audio.currentTime;
                const duration = audio.duration;
                currentTimeEl.textContent = formatTime(currentTime);
                if (isFinite(duration)) {
                    const remainingTime = duration - currentTime;
                    remainingTimeEl.textContent = '-' + formatTime(remainingTime);
                }
            });
        
            // 아이콘 클릭 -> 서브버튼 표시/숨기기
            explanationIconButton.addEventListener('click', (event) => {
                event.stopPropagation(); // 버튼 클릭 시 body 클릭 이벤트 전파 방지
                explanationButtonWrapper.classList.add('show');
            });
        
            // 상세/간단/그림 설명 버튼 클릭 시 모달 열기
            detailedExplanationButton.addEventListener('click', (event) => {
                event.stopPropagation();
                const trimmedVerse = selectedVerse.trim();
                if (!trimmedVerse) {
                    showModal("구절을 먼저 선택하세요", "본문에서 구절이나 단어를 드래그하여 선택한 후 다시 버튼을 눌러주세요.");
                } else {
                    fetchExplanation(trimmedVerse, 'detailed');
                }
                explanationButtonWrapper.classList.remove('show');
            });
        
            simpleExplanationButton.addEventListener('click', (event) => {
                event.stopPropagation();
                const trimmedVerse = selectedVerse.trim();
                if (!trimmedVerse) {
                    showModal("구절을 먼저 선택하세요", "본문에서 구절이나 단어를 드래그하여 선택한 후 다시 버튼을 눌러주세요.");
                } else {
                    fetchExplanation(trimmedVerse, 'simple');
                }
                explanationButtonWrapper.classList.remove('show');
            });
        
            imageExplanationButton.addEventListener('click', async (event) => {
                event.stopPropagation();
                const trimmedVerse = selectedVerse.trim();
                if (!trimmedVerse) {
                    showModal("구절을 먼저 선택하세요", "본문에서 구절이나 단어를 드래그하여 선택한 후 다시 버튼을 눌러주세요.");
                } else {
                    await fetchImageAndExplanation(trimmedVerse);
                }
                explanationButtonWrapper.classList.remove('show');
            });

            // 새로 추가된 '전체 간단' 버튼 클릭 이벤트 리스너
            fullSimpleExplanationButton.addEventListener('click', (event) => {
                event.stopPropagation();
                const fullText = bibleTextEl.innerText;
                if (!fullText.trim()) {
                    showModal("본문 내용이 없습니다", "분석할 성경 본문이 없습니다.");
                } else {
                    fetchOverallExplanation(fullText, 'full_simple');
                }
                explanationButtonWrapper.classList.remove('show');
            });
            
            // 새로 추가된 '전체 상세' 버튼 클릭 이벤트 리스너
            fullDetailedExplanationButton.addEventListener('click', (event) => {
                event.stopPropagation();
                const fullText = bibleTextEl.innerText;
                if (!fullText.trim()) {
                    showModal("본문 내용이 없습니다", "분석할 성경 본문이 없습니다.");
                } else {
                    fetchOverallExplanation(fullText, 'full_detailed');
                }
                explanationButtonWrapper.classList.remove('show');
            });


            // body 외부 클릭 시 하위 버튼 닫기
            document.body.addEventListener('click', (event) => {
                if (!explanationButtonWrapper.contains(event.target)) {
                    explanationButtonWrapper.classList.remove('show');
                }
            });
        
            // 모달 닫기
            closeModalButton.addEventListener('click', hideModal);
            modal.addEventListener('click', (event) => {
                if (event.target === modal) {
                    hideModal();
                }
            });
        });

        // 폰트 크기 표시 업데이트
        function updateFontSizeDisplay() {
            const currentSize = parseFloat(window.getComputedStyle(bibleTextEl).fontSize);
            fontSizeEl.textContent = Math.round(currentSize);
        }
        
        // 재생 속도 업데이트
        function updateSpeed() {
            audio.playbackRate = currentSpeed;
            speedDisplay.textContent = currentSpeed.toFixed(1) + 'x';
        }
        
        // 시간 포맷
        function formatTime(seconds) {
            const minutes = Math.floor(seconds / 60);
            const remainingSeconds = Math.floor(seconds % 60);
            return `${minutes}:${remainingSeconds.toString().padStart(2, '0')}`;
        }
        
        // 검색 및 하이라이트
        function findString(searchText) {
            clearHighlight();
            if (!searchText || searchText.trim() === '') {
                searchCountEl.textContent = '';
                nextLocationBtn.classList.add('hidden');
                return;
            }
            const escaped = escapeRegExp(searchText);
            const regex = new RegExp(escaped, 'gi');
            
            const tempDiv = document.createElement('div');
            tempDiv.innerHTML = originalText;
            
            const walker = document.createTreeWalker(tempDiv, NodeFilter.SHOW_TEXT, null, false);
            let node;
            const textNodesToReplace = [];
            while ((node = walker.nextNode())) {
                textNodesToReplace.push(node);
            }

            for (const textNode of textNodesToReplace) {
                const text = textNode.nodeValue;
                if (text.match(regex)) {
                    const parent = textNode.parentNode;
                    const newContent = text.replace(regex, (match) => `<span class="search-highlight">${match}</span>`);
                    const tempSpan = document.createElement('span');
                    tempSpan.innerHTML = newContent;
                    while (tempSpan.firstChild) {
                        parent.insertBefore(tempSpan.firstChild, textNode);
                    }
                    parent.removeChild(textNode);
                }
            }
            
            bibleTextEl.innerHTML = tempDiv.innerHTML;
            foundSentences = Array.from(bibleTextEl.getElementsByClassName('search-highlight'));
            
            searchCountEl.textContent = `총 ${foundSentences.length}개 검색됨`;
            if (foundSentences.length > 0) {
                currentSearchIndex = 0;
                foundSentences[currentSearchIndex].scrollIntoView({ behavior: 'smooth', block: 'center' });
                nextLocationBtn.classList.remove('hidden');
                updateScrollMarkers();
            } else {
                showModal("검색 결과 없음", `"${searchText}"에 대한 검색 결과가 없습니다.`);
                nextLocationBtn.classList.add('hidden');
            }
        }
        
        // 다음 검색 위치
        function nextLocation() {
            if (foundSentences.length > 0) {
                currentSearchIndex = (currentSearchIndex + 1) % foundSentences.length;
                foundSentences[currentSearchIndex].scrollIntoView({ behavior: 'smooth', block: 'center' });
            }
        }
        
        // 하이라이트 초기화
        function clearHighlight() {
            bibleTextEl.innerHTML = originalText;
            searchInput.value = '';
            searchCountEl.textContent = '';
            nextLocationBtn.classList.add('hidden');
            while (scrollMarkerContainer.firstChild) scrollMarkerContainer.removeChild(scrollMarkerContainer.firstChild);
            foundSentences = [];
            currentSearchIndex = -1;
        }
        
        // 스크롤 마커 업데이트
        function updateScrollMarkers() {
            while (scrollMarkerContainer.firstChild) scrollMarkerContainer.removeChild(scrollMarkerContainer.firstChild);
            const documentHeight = bibleTextEl.scrollHeight;
            const viewportHeight = window.innerHeight;
            for (let i = 0; i < foundSentences.length; i++) {
                const el = foundSentences[i];
                const marker = document.createElement('div');
                marker.className = 'scroll-marker';
                const topPosition = el.getBoundingClientRect().top + window.scrollY;
                const markerPosition = (topPosition / documentHeight) * viewportHeight;
                marker.style.top = `${markerPosition}px`;
                marker.addEventListener('click', () => {
                    el.scrollIntoView({ behavior: 'smooth', block: 'center' });
                });
                scrollMarkerContainer.appendChild(marker);
            }
        }
        
        /**
         * showModal: 모달을 열고 내용을 표시
         * @param {string} title 모달 제목
         * @param {string} text 모달 텍스트 내용
         * @param {string} [imageUrl=null] 모달 이미지 URL
         * @param {boolean} [isLoading=false] 로딩 상태 여부
         */
        function showModal(title, text, imageUrl = null, isLoading = false) {
            modalTitle.textContent = title;
            modalText.innerHTML = (text || '').toString().replace(/\n/g, '<br>');
            
            // 로딩 상태에 따라 이미지와 텍스트를 제어
            if (isLoading) {
                modalImageContainer.classList.add('hidden');
                modalText.innerHTML = `<span class="text-xl font-semibold flex items-center justify-center text-blue-500">${imageUrl ? '<span class="loader"></span> 그림 생성 중...' : '<span class="loader"></span> 설명 생성 중...'}</span>`;
            } else {
                if (imageUrl) {
                    modalImage.src = imageUrl;
                    modalImageContainer.classList.remove('hidden');
                } else {
                    modalImage.src = '';
                    modalImageContainer.classList.add('hidden');
                }
            }

            modal.classList.remove('hidden');
            modal.classList.add('flex');
            modalContent.classList.remove('modal-enter');
            modalContent.classList.add('modal-enter-active');
        }

        // 모달 닫기
        function hideModal() {
            modalContent.classList.add('modal-leave-to');
            modalContent.classList.remove('modal-enter-active');
            setTimeout(() => {
                modal.classList.add('hidden');
                modal.classList.remove('flex');
                modalContent.classList.remove('modal-leave-to');
                modalContent.classList.add('modal-enter');
            }, 300); // CSS transition time과 맞춤
        }
        
        /**
         * fetchExplanation: 상세/간단 설명 생성
         * type: 'detailed' 또는 'simple'
         */
        async function fetchExplanation(promptText, type) {
            showModal(promptText, '', null, true); // 로딩 메시지 표시

            let prompt;
            const model = "gemini-2.5-flash-preview-05-20";
            const systemPrompt = "당신은 성경 지식에 해박한 전문가입니다. 성경에 나오는 단어나 구절에 대해 질문을 받으면, 해당 용어의 배경과 의미를 깊이 있게 설명해주세요. 한국어로 답변해 주세요.";

            if (type === 'simple') {
                prompt = `다음 성경 용어/구절에 대해 300자에서 500자 사이의 짧고 간결한 설명을 한국어로 작성해 주세요. 핵심 내용을 중심으로 요약해 주세요. 요청 용어/구절: "${promptText}"`;
            } else { // detailed
                prompt = `다음 성경 용어/구절에 대해 성경적 관점에서 자세히 설명해 주세요. 답변은 최소 100자 이상으로 한국어로 작성해 주세요. 필요한 경우 표 또는 간단한 지도를 포함하거나 참조해 주세요. 요청 용어/구절: "${promptText}"`;
            }
            
            const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/${model}:generateContent?key=${geminiApiKey}`;
            const payload = {
                contents: [{ parts: [{ text: prompt }] }],
                systemInstruction: { parts: [{ text: systemPrompt }] }
            };

            try {
                const response = await fetch(apiUrl, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(payload)
                });

                if (!response.ok) {
                    throw new Error(`API 호출에 실패했습니다. (상태 코드: ${response.status})`);
                }

                const result = await response.json();
                const explanation =
                    result?.candidates?.[0]?.content?.parts?.[0]?.text ||
                    "요청하신 내용에 대한 설명을 찾을 수 없습니다.";
                
                showModal(promptText, explanation);
            } catch (err) {
                showModal("오류 발생", `설명을 가져오는 중 오류가 발생했습니다: ${err.message}`);
            }
        }
        
        /**
         * fetchOverallExplanation: 본문 전체를 대상으로 한 요약 생성
         * type: 'full_simple' 또는 'full_detailed'
         */
        async function fetchOverallExplanation(fullText, type) {
            showModal("전체 본문 분석", '', null, true); // 로딩 메시지 표시

            let prompt;
            const model = "gemini-2.5-flash-preview-05-20";
            const systemPrompt = "당신은 성경 주석가이자 성경 연구자입니다. 사용자가 제공한 성경 본문을 학문적·신학적 배경에서 분석하여, 핵심 주제와 메시지에 집중하여 답변해주세요. 한국어로 답변해 주세요.";
            
            // 공백과 줄바꿈을 제거하여 텍스트를 정제합니다.
            const cleanedText = fullText.replace(/\s+/g, ' ').trim();

            if (type === 'full_simple') {
                prompt = `성경 본문을 학문적·신학적 배경에서 분석하여, 핵심 주제와 메시지를 500자 미만으로 간단하게 요약해 주세요. 불필요한 장황한 설명은 피하고, 성경 본문의 핵심 의미와 교훈에 집중하세요. 성경 본문: "${cleanedText}"`;
            } else { // full_detailed
                prompt = `성경 본문을 학문적·신학적 배경에서 분석하여, 핵심 주제와 메시지를 3000자 미만으로 상세하게 요약해 주세요. 불필요한 장황한 설명은 피하고, 성경 본문의 핵심 의미와 교훈에 집중하세요. 성경 본문: "${cleanedText}"`;
            }

            const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/${model}:generateContent?key=${geminiApiKey}`;
            const payload = {
                contents: [{ parts: [{ text: prompt }] }],
                systemInstruction: { parts: [{ text: systemPrompt }] },
            };

            try {
                const response = await fetch(apiUrl, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(payload)
                });

                if (!response.ok) {
                    throw new Error(`API 호출에 실패했습니다. (상태 코드: ${response.status})`);
                }

                const result = await response.json();
                const explanation =
                    result?.candidates?.[0]?.content?.parts?.[0]?.text ||
                    "요청하신 내용에 대한 설명을 찾을 수 없습니다.";
                
                showModal("전체 본문 분석", explanation);
            } catch (err) {
                showModal("오류 발생", `설명을 가져오는 중 오류가 발생했습니다: ${err.message}`);
            }
        }
        
        /**
         * fetchImageAndExplanation: 이미지 생성 및 설명 가져오기
         * @param {string} promptText 이미지 및 설명을 위한 프롬프트 텍스트
         */
        async function fetchImageAndExplanation(promptText) {
            showModal("그림 생성 및 설명", '', null, true);

            const prompt = `Create a visually striking, artistic illustration of the following biblical concept or verse. Use a distinct, powerful art style that captures the spiritual or historical essence, and avoid modern or photorealistic styles. The artwork should be an evocative interpretation, not a literal one. Do not include any text or labels in the image itself. The illustration should represent "${promptText}"`;
            const explanationPrompt = `Generate a concise explanation (in Korean, less than 200 characters) of the biblical context or meaning of "${promptText}" to be displayed with the image.`;

            try {
                // 병렬 API 호출을 위한 Promise.all
                const [imageResponse, textResponse] = await Promise.all([
                    fetch(`https://generativelanguage.googleapis.com/v1beta/models/imagen-3.0-generate-002:predict?key=${geminiApiKey}`, {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify({
                            instances: [{ prompt: prompt }],
                            parameters: { sampleCount: 1 }
                        })
                    }),
                    fetch(`https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-05-20:generateContent?key=${geminiApiKey}`, {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify({
                            contents: [{ parts: [{ text: explanationPrompt }] }],
                        })
                    })
                ]);
                
                const imageData = await imageResponse.json();
                const textData = await textResponse.json();
                
                const base64Data = imageData?.predictions?.[0]?.bytesBase64Encoded;
                const textExplanation = textData?.candidates?.[0]?.content?.parts?.[0]?.text;

                if (base64Data && textExplanation) {
                    const imageUrl = `data:image/png;base64,${base64Data}`;
                    showModal(promptText, textExplanation, imageUrl);
                } else {
                    showModal("결과 없음", "그림과 설명을 가져오는 데 실패했습니다.");
                }

            } catch (err) {
                showModal("오류 발생", `그림과 설명을 가져오는 중 오류가 발생했습니다: ${err.message}`);
            }
        }

    </script>
</body>
</html>


