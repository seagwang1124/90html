<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
  <title>통큰통독-60일차</title>
  <link rel="apple-touch-icon" type="image/png" href="https://i.postimg.cc/Qtnq0gFJ/Ezra-icon.png">
  <meta name="apple-mobile-web-app-title" content="통큰통독">
  <link rel="shortcut icon" type="image/png" href="https://i.postimg.cc/Qtnq0gFJ/Ezra-icon.png">
  <link rel="mask-icon" type="image/png" href="https://i.postimg.cc/Qtnq0gFJ/Ezra-icon.png">

  <style>
    :root{
      --blue:#007BFF;
      --pink:#ff99cc;
      --shadow: 0 2px 5px rgba(0,0,0,0.2);
    }
    * { box-sizing: border-box; -webkit-tap-highlight-color: transparent; }
    html,body { height:100%; margin:0; padding:0; font-family: Arial, sans-serif; -webkit-font-smoothing:antialiased; }
    body { padding-top:150px; background:#fdfdf8; color:#222; }

    a:link { color:#0000FF; } a:visited{ color:#660099; }

    /* 상단 고정 테이블 */
    .top-fixed-table {
      position: fixed; top:0; left:0; width:100%; background:transparent; border-bottom:none; z-index:100;
      table-layout: fixed; padding:10px 0; box-sizing:border-box;
    }
    .search-cell { text-align:left; padding-left:10px; vertical-align:top; width:30%; }
    .search-cell input[type="text"]{ width:50%; font-size:12pt; }
    .search-cell input[type="submit"], .search-cell input[type="reset"]{ font-size:10pt; padding:5px 8px; height:auto; }

    .audio-cell { text-align:right; padding-right:50px; vertical-align:top; width:30%; }
    #custom-audio-player { display:flex; flex-direction:column; align-items:center; }
    .player-controls{ display:flex; align-items:center; justify-content:center; gap:10px; margin-bottom:5px; }
    .time-display{ font-size:16px; font-weight:bold; color:black; margin:0 5px; min-width:44px; text-align:center; }

    .progress-container { display: flex; align-items: center; justify-content: center; gap: 6px; margin: 6px 0; }
    .skip-btn { width: 48px; height: 28px; font-size: 13px; cursor: pointer; border: 1px solid #ccc; border-radius: 5px; background: #fff; }
    .skip-btn:hover { background: #e0e0e0; }

    .control-btn{ width:28px; height:28px; font-size:14px; cursor:pointer; border:1px solid #ccc; background:#fff; border-radius:5px; }
    .control-btn:hover{ background:#e0e0e0; }
    #play-btn{ background:#d1f3d4; } #pause-btn{ background:#fff6d6; } #stop-btn{ background:#fddddd; }

    .speed-controls{ display:flex; align-items:center; justify-content:center; gap:5px; margin-bottom:5px; }
    .speed-btn{ width:21px; height:21px; font-size:10px; cursor:pointer; border:1px solid #ccc; border-radius:3px; background:#fff; }
    .speed-btn:hover{ background:#e0e0e0; }
    .speed-display{ font-weight:bold; color:var(--blue); width:50px; text-align:center; }

    .volume-control{ display:flex; align-items:center; justify-content:center; gap:5px; }
    input[type="range"]{ -webkit-appearance:none; width:160px; height:5px; background:#d3d3d3; outline:none; opacity:0.9; transition:opacity .2s; border-radius:3px;}
    input[type="range"]::-webkit-slider-thumb{ -webkit-appearance:none; appearance:none; width:15px; height:15px; background:var(--blue); border-radius:50%; cursor:pointer; }

    /* progress */
    #progress-bar { width: 60%; max-width: 100px; }

    /* volume */
    #volume-slider { width: 80%; max-width: 120px; }

    /* 설명 버튼 컨테이너 (플로팅) */
    .explanation-button-container{ position:fixed; top:100px; left:30%;  transform:translateX(-50%);  padding:0 10px; transition:top .2s ease,left .2s ease,transform .2s ease; }
    .explanation-button-wrapper{ position:relative; display:inline-block; cursor:pointer; }
    .explanation-icon-button{ width:50px; height:50px; border-radius:50%; background:var(--pink); box-shadow:var(--shadow); border:none; display:flex; align-items:center; justify-content:center; font-size:40px; z-index:2; }
    .explanation-sub-buttons{ display:flex; flex-direction:column; gap:10px; opacity:0; visibility:hidden; transition:opacity .3s ease,visibility .3s ease, transform .3s ease; position:absolute; left:45%; transform:translateX(-50%) translateY(25px); z-index:1; }
    .explanation-button-wrapper.active .explanation-sub-buttons{ opacity:1; visibility:visible; transform:translateX(-50%) translateY(0); }
    .explanation-sub-button{ padding:5px 10px; font-size:18px; background:var(--pink); border:none; border-radius:5px; cursor:pointer; box-shadow:var(--shadow); white-space:nowrap; }
    .explanation-sub-button:hover{ transform:scale(1.03); }

    /* 폰트 사이즈 및 본문 요약 버튼 (항상 표시) */
    .container{ width:100%; text-align:center; margin-top:8px; }
    .font-size-label{ font-size:20px !important; margin-right:12px; font-weight:bold; color:blue; display:inline-block; vertical-align:middle; }
    #font-size{ font-size:20px !important; margin:0 8px; font-weight:bold; color:red; display:inline-block; vertical-align:middle; width:48px; }
    #down,#up{ width:27px; height:27px; font-size:20px; color:red; background:#fff; border:1px solid #ccc; border-radius:5px; cursor:pointer; display:inline-block; vertical-align:middle; }

    .summary-buttons { display:inline-block; margin-left:16px; vertical-align:middle; }
    .summary-btn { padding:6px 10px; margin-left:6px; font-size:14px; border-radius:6px; border:1px solid #ccc; background:#fff; cursor:pointer; }
    .summary-btn:hover{ background:#f2f2f2; }

    /* 일차 내비게이션 */
.day-nav{
  display:flex; align-items:center; justify-content:flex-start; gap:10px;
  margin: 10px 15px 0;
}
.day-nav .day-btn{
  text-decoration:none; background:#fff; color:#333;
  padding:6px 12px; border:1px solid #ccc; border-radius:8px;
  box-shadow: var(--shadow); font-weight:700; line-height:1;
}
.day-nav .day-btn:hover{ background:#f7f7f7; }
.day-nav .day-title{
  font-weight:900; letter-spacing:.2px; color:#222;
}
@media (max-width:480px){
  .day-nav .day-title{ font-size:16px; }
  .day-nav .day-btn{ padding:6px 10px; font-size:14px; }
}

    /* 본문 */
    h2{ padding:0; text-align:left; margin-left:15px; margin-right:15px; }
    p{ display:inline-block; }

    /* 본문 중앙 두 줄 강조 */
    .highlight {
      background-color:#fdf6e3;
      -webkit-text-stroke:0.2px #76d6c6;
      border-left:4px solid #c0a060;
      font-weight:bold;
      box-shadow:0 0 8px rgba(0,0,0,0.1);
      padding:2px 6px;
    }

    /* 📖 구절설명 버튼: 기본 표시 */
    #explanation-button-container{
      position:fixed; z-index:150; display:block;
    }
    body.modal-open #explanation-button-container{ display:none !important; }

    /* 모달 */
    .modal{
      display:none; position:fixed; z-index:200; inset:0; width:100%; height:100%;
      background:rgba(0,0,0,0.4);
    }
    .modal-content{
      background:#fff; margin:12% auto; padding:20px; border-radius:10px; width:80%; max-width:900px;
      max-height:80vh; overflow:auto; overscroll-behavior:contain;
      box-shadow:0 4px 8px rgba(0,0,0,0.2); text-align:left; line-height:1.6; word-break:keep-all; white-space:pre-wrap;
    }
    body.modal-open{ overflow:hidden; }

    /* 로딩 스피너 */
    .loader{ border:4px solid #f3f3f3; border-top:4px solid #3498db; border-radius:50%; width:20px; height:20px; animation:spin 1s linear infinite; display:inline-block; vertical-align:middle; margin-right:8px; }
    @keyframes spin{ 0%{transform:rotate(0deg);} 100%{transform:rotate(360deg);} }

    /* 검색 하이라이트 & 스크롤 마커 */
    .search-highlight{ background:yellow; color:#000; }
    .scroll-marker-container{ position:fixed; top:0; right:0; width:8px; height:100vh; z-index:99; pointer-events:none; }
    .scroll-marker{ position:absolute; right:0; width:8px; height:8px; background:red; border-radius:50%; box-shadow:0 0 5px rgba(255,0,0,0.7); cursor:pointer; pointer-events:auto; }
    .scroll-marker:hover{ transform:scale(1.5); transition:transform .2s ease; }

    /* 선택 관련 (iOS) */
    #bible-text{ -webkit-user-select:text; user-select:text; -webkit-touch-callout:none; }

    /* 반응형 */
    @media (max-width:800px){
      .search-cell{ width:55%; } .audio-cell{ width:45%; } .search-cell input[type="text"]{ width:60%; } #progress-bar{ width:160px; }
    }
    @media (max-width:600px){
  /* 좌/우 칸 비율 + 오른쪽 패딩 확보 */
  .search-cell{ width:30%; }
  .audio-cell{ width:34%; padding-right:12px; } /* 8px → 14px */

  /* 검색창을 뷰포트 기준으로 더 줄이기 */
  .search-cell input[type="text"]{
    width:32vw;          /* 45vw → 35vw */
    max-width:32vw;
    font-size:12pt;
  }
  /* 검색 버튼들도 살짝 컴팩트 */
  .search-cell input[type="submit"],
  .search-cell input[type="reset"]{
    padding:4px 6px;
    font-size:10pt;
  }

  /* 오디오 컨트롤이 덜 퍼지도록 */
  .player-controls{ gap:6px; }           /* 10px → 6px */
  .time-display{
    font-size:14px;                       /* 16px → 14px */
    min-width:56px;                       /* 44px → 56px 로 고정폭 확보 */
  }

  #progress-bar{ width:140px; }
  .explanation-sub-button{ font-size:16px; padding:6px 8px; }
  .explanation-icon-button{ width:46px; height:46px; font-size:34px; }
  .summary-btn{ padding:5px 8px; font-size:13px; }
}

    .toggle-buttons {
      display:flex; justify-content:center; gap:8px; margin-bottom:6px;
    }
    .toggle-buttons button {
      padding:4px 8px; font-size:13px; border:1px solid #ccc; border-radius:5px; background:#fff; cursor:pointer;
    }
    .toggle-buttons button:hover { background:#f0f0f0; }

    /* ============ 기도문 팝업 ============ */
    .prayer-toast {
      position: fixed; right: 18px; bottom: 18px; z-index: 190;
      width: 360px; max-width: calc(100vw - 24px);
      background: #ffffff; border: 1px solid #e9e6d8;
      border-radius: 14px; box-shadow: 0 10px 26px rgba(0,0,0,.18);
      overflow: hidden; transform: translateY(20px); opacity: 0;
      animation: prayerSlideUp .35s ease-out forwards; display:none;
      font-family: inherit;
    }
    @keyframes prayerSlideUp { to { transform: translateY(0); opacity: 1; } }

    .prayer-header {
      display:flex; align-items:center; justify-content:space-between;
      padding:10px 12px; background:#fff6dd; border-bottom:1px solid #f3e9c3;
    }
    .prayer-title { display:flex; align-items:center; gap:8px; font-weight:700; color:#8a6d1e; }
    .prayer-badge { background:#ffe9a8; color:#6b560f; font-size:12px; padding:2px 8px; border-radius:999px; }

    .prayer-close {
      border:0; background:transparent; font-size:20px; line-height:1; color:#7c7c7c;
      cursor:pointer; padding:2px 6px; border-radius:8px;
    }
    .prayer-close:hover { background: rgba(0,0,0,.05); }

    .prayer-body {
      padding:12px 14px 4px; color:#333; line-height:1.6; max-height:220px; overflow:auto;
    }
    .prayer-body h4 { margin:0 0 6px 0; font-size:15px; color:#444; }
    .prayer-body p { margin:0; white-space: pre-wrap; }

    .prayer-footer {
      display:flex; align-items:center; justify-content: space-between; gap:8px; padding:8px 12px 12px;
    }
    .prayer-actions { display:flex; gap:8px; }
    .prayer-btn {
      border:1px solid #e0dccc; background:#fff; color:#5a4d1b; padding:6px 10px; border-radius:10px; cursor:pointer; font-size:13px;
    }
    .prayer-btn:hover { background:#faf7ea; }
    .prayer-btn-primary { background:#f9d86b; border-color:#e5c458; color:#3e320e; font-weight:700; }
    .prayer-btn-primary:hover { filter: brightness(.98); }
    .prayer-checkbox { display:flex; align-items:center; gap:6px; color:#555; font-size:13px; }

    @media (max-width: 480px) {
      .prayer-toast { left:12px; right:12px; bottom:12px; width:auto; }
      .prayer-body { max-height:40vh; }
    }
  </style>
</head>
<body>
  <!-- 상단: 검색 + 오디오 -->
  <table class="top-fixed-table" id="main-table" cellpadding="0" cellspacing="0">
    <tr>
      <td class="search-cell">
        <form name="f1" action="">
          <input type="reset" name="b2" value="X">
          <input type="text" placeholder="검색어 입력" name="t1" value="">
          <input type="submit" name="b1" value="검색">
          <div id="search-count-container">
            <span id="search-count"></span>
            <button type="button" id="next-location-btn" style="display:none;">다음 위치</button>
          </div>
        </form>
      </td>

      <td class="audio-cell">
        <div id="custom-audio-player" role="region" aria-label="오디오 플레이어">
          <audio id="audio-file" preload="auto" playsinline>
            <source src="https://vod47.anyline.co.kr/vod_ezra/%EC%9D%BD%EA%B8%B0%2060.mp3" type="audio/mpeg">
            브라우저가 오디오 요소를 지원하지 않습니다.
          </audio>

          <div class="player-controls">
            <strong><span style="font-size:16px; background-color:#fcfcfc;" id="current-time" class="time-display">0:00</span></strong>
            <button id="play-btn" class="control-btn" aria-label="재생">▶</button>
            <button id="pause-btn" class="control-btn" aria-label="일시정지">⏸</button>
            <button id="stop-btn" class="control-btn" aria-label="정지">■</button>
            <strong><span style="font-size:16px; background-color:#fcfcfc;" id="remaining-time" class="time-display">0:00</span></strong>
          </div>

          <div class="toggle-buttons">
            <button id="show-progress">재생 위치</button>
            <button id="show-speed">재생 속도</button>
            <button id="show-volume">볼륨 조절</button>
          </div>

          <div class="progress-container" style="display:none;">
            <button id="rewind-10" class="skip-btn">⏪10s</button>
            <input type="range" id="progress-bar" min="0" max="100" value="0" step="0.01" aria-label="재생 위치">
            <button id="forward-10" class="skip-btn">10s⏩</button>
          </div>

          <div class="speed-controls" style="display:none;">
            <button id="speed-down-02" class="speed-btn">&laquo;</button>
            <button id="speed-down-01" class="speed-btn">&lt;</button>
            <span id="speed-display" class="speed-display">1.0x</span>
            <button id="speed-up-01" class="speed-btn">&gt;</button>
            <button id="speed-up-02" class="speed-btn">&raquo;</button>
            <button id="speed-reset">1.0</button>
          </div>

          <div class="volume-control" style="display:none;">
            <span style="font-size:14px;">볼륨</span>
            <button id="mute-btn">🔊</button>
            <input type="range" id="volume-slider" min="0" max="1" step="0.01" value="1">
          </div>
        </div>
      </td>
    </tr>
  </table>

  <!-- 플로팅 책 버튼 (구절설명 토글) -->
  <div class="explanation-button-container" id="explanation-button-container">
    <div class="explanation-button-wrapper" id="explanation-button-wrapper">
      <button class="explanation-icon-button" id="explanation-icon-button" aria-label="구절설명 열기" title="단어나 문장을 선택하면 ‘간단설명’ 또는 ‘상세설명’을 볼 수 있어요.">
        <span>📖</span>
      </button>
      <div class="explanation-sub-buttons" id="explanation-sub-buttons" role="menu">
        <button class="explanation-sub-button" id="detailed-explanation-button">상세 구절설명</button>
        <button class="explanation-sub-button" id="simple-explanation-button">간단 구절설명</button>
      </div>
    </div>
  </div>

  <!-- 폰트 크기 + 본문 요약 버튼 -->
  <div class="container" style="margin-top:6px;">
    <p class="font-size-label">Font Size</p>
    <button id="down">-</button>
    <p id="font-size">20</p>
    <button id="up">+</button>

    <span class="summary-buttons" aria-hidden="false">
      <button class="summary-btn" id="summary-simple-main">본문요약 간단</button>
      <button class="summary-btn" id="summary-detailed-main">본문요약 상세</button>
    </span>
  </div>

  <!-- 본문 -->
  <div>
    <h2 id="bible-text" style="line-height:1.2em;margin-left:15px;margin-right:15px;font-style:normal;font-weight:normal;color:black;font-size:20px;word-break:break-all;">
    <strong>
<!-- 일차 내비게이션 -->
<nav class="day-nav" aria-label="일차 이동">
  <a class="day-btn" href="https://seagwang1124.github.io/90html/59%EC%9D%BC%EC%B0%A8.html" aria-label="통독 59일차로 이동">≪</a>
  <span class="day-title"> 통독 60일차 </span>
  <a class="day-btn" href="https://seagwang1124.github.io/90html/61%EC%9D%BC%EC%B0%A8.html" aria-label="통독 61일차로 이동">≫</a>
  <a class="day-btn" href="https://seagwang1124.github.io/90html" aria-label="통독 목록으로 이동">통독 목록</a>
</nav>

<br>범위: 슥1-8장/ 에스라5:2절-6장/ 단6장</br></strong>
<br>&nbsp;</br>


<strong><br><font color="#4682b4">스가랴 1장- 8장</font></br></strong>
<strong><br><font color="#4682b4">스가랴 1 장</font></br></strong>
<br><i><font color="#808080">*악한 길에서 돌아오라고 명령하시다*</font></i></br>
<br>1 다리오 왕 제이년 여덟째 달에 여호와의 말씀이 잇도의 손자 베레갸의 아들 선지자 스가랴에게 임하니라 이르시되</br>
<br>2 여호와가 너희의 조상들에게 심히 진노하였느니라</br>
<br>3 그러므로 너는 그들에게 말하기를 만군의 여호와께서 이처럼 이르시되 너희는 내게로 돌아오라 만군의 여호와의 말이니라 그리하면 내가 너희에게로 돌아가리라 만군의 여호와의 말이니라</br>
<br>4 너희 조상들을 본받지 말라 옛적 선지자들이 그들에게 외쳐 이르되 만군의 여호와께서 이같이 말씀하시기를 너희가 악한 길, 악한 행위를 떠나서 돌아오라 하셨다 하나 그들이 듣지 아니하고 내게 귀를 기울이지 아니하였느니라 여호와의 말이니라</br>
<br>5 너희 조상들이 어디 있느냐 또 선지자들이 영원히 살겠느냐</br>
<br>6 내가 나의 종 선지자들에게 명령한 내 말과 내 법도들이 어찌 너희 조상들에게 임하지 아니하였느냐 그러므로 그들이 돌이켜 이르기를 만군의 여호와께서 우리 길대로, 우리 행위대로 우리에게 행하시려고 뜻하신 것을 우리에게 행하셨도다 하였느니라</br>
<br><i><font color="#808080">*화석류나무 사이에 선 자*</font></i></br>
<br>7 다리오 왕 제이년 열한째 달 곧 스밧월 이십사일에 잇도의 손자 베레갸의 아들 선지자 스가랴에게 여호와의 말씀이 임하니라</br>
<br>8 내가 밤에 보니 한 사람이 붉은 말을 타고 골짜기 속 화석류나무 사이에 섰고 그 뒤에는 붉은 말과 자줏빛 말과 백마가 있기로</br>
<br>9 내가 말하되 내 주여 이들이 무엇이니이까 하니 내게 말하는 천사가 내게 이르되 이들이 무엇인지 내가 네게 보이리라 하니</br>
<br>10 화석류나무 사이에 선 자가 대답하여 이르되 이는 여호와께서 땅에 두루 다니라고 보내신 자들이니라</br>
<br>11 그들이 화석류나무 사이에 선 여호와의 천사에게 말하되 우리가 땅에 두루 다녀 보니 온 땅이 평안하고 조용하더이다 하더라</br>
<br>12 여호와의 천사가 대답하여 이르되 만군의 여호와여 여호와께서 언제까지 예루살렘과 유다 성읍들을 불쌍히 여기지 아니하시려 하나이까 이를 노하신 지 칠십 년이 되었나이다 하매</br>
<br>13 여호와께서 내게 말하는 천사에게 선한 말씀, 위로하는 말씀으로 대답하시더라</br>
<br>14 내게 말하는 천사가 내게 이르되 너는 외쳐 이르기를 만군의 여호와의 말씀에 내가 예루살렘을 위하며 시온을 위하여 크게 질투하며</br>
<br>15 안일한 여러 나라들 때문에 심히 진노하나니 나는 조금 노하였거늘 그들은 힘을 내어 고난을 더하였음이라</br>
<br>16 그러므로 여호와가 이처럼 말하노라 내가 불쌍히 여기므로 예루살렘에 돌아왔은즉 내 집이 그 가운데에 건축되리니 예루살렘 위에 먹줄이 쳐지리라 만군의 여호와의 말이니라</br>
<br>17 그가 다시 외쳐 이르기를 만군의 여호와의 말씀에 나의 성읍들이 넘치도록 다시 풍부할 것이라 여호와가 다시 시온을 위로하며 다시 예루살렘을 택하리라 하라 하니라</br>
<br><i><font color="#808080">*네 뿔과 대장장이 네 명*</font></i></br>
<br>18 내가 눈을 들어 본즉 네 개의 뿔이 보이기로</br>
<br>19 이에 내게 말하는 천사에게 묻되 이들이 무엇이니이까 하니 내게 대답하되 이들은 유다와 이스라엘과 예루살렘을 흩뜨린 뿔이니라</br>
<br>20 그 때에 여호와께서 대장장이 네 명을 내게 보이시기로</br>
<br>21 내가 말하되 그들이 무엇하러 왔나이까 하니 대답하여 이르시되 그 뿔들이 유다를 흩뜨려서 사람들이 능히 머리를 들지 못하게 하니 이 대장장이들이 와서 그것들을 두렵게 하고 이전의 뿔들을 들어 유다 땅을 흩뜨린 여러 나라의 뿔들을 떨어뜨리려 하느니라 하시더라</br>
<br>&nbsp;</br>
<strong><br><font color="#4682b4">스가랴 2 장</font></br></strong>
<br><i><font color="#808080">*측량줄을 잡은 사람*</font></i></br>
<br>1 내가 또 눈을 들어 본즉 한 사람이 측량줄을 그의 손에 잡았기로</br>
<br>2 네가 어디로 가느냐 물은즉 그가 내게 대답하되 예루살렘을 측량하여 그 너비와 길이를 보고자 하노라 하고 말할 때에</br>
<br>3 내게 말하는 천사가 나가고 다른 천사가 나와서 그를 맞으며</br>
<br>4 이르되 너는 달려가서 그 소년에게 말하여 이르기를 예루살렘은 그 가운데 사람과 가축이 많으므로 성곽 없는 성읍이 될 것이라 하라</br>
<br>5 여호와의 말씀에 내가 불로 둘러싼 성곽이 되며 그 가운데에서 영광이 되리라</br>
<br>6 오호라 너희는 북방 땅에서 도피할지어다 여호와의 말씀이니라 이는 내가 너희를 하늘 사방에 바람 같이 흩어지게 하였음이니라 여호와의 말씀이니라</br>
<br>7 바벨론 성에 거주하는 시온아 이제 너는 피할지니라</br>
<br>8 만군의 여호와께서 이같이 말씀하시되 영광을 위하여 나를 너희를 노략한 여러 나라로 보내셨나니 너희를 범하는 자는 그의 눈동자를 범하는 것이라</br>
<br>9 내가 손을 그들 위에 움직인즉 그들이 자기를 섬기던 자들에게 노략거리가 되리라 하셨나니 너희가 만군의 여호와께서 나를 보내신 줄 알리라</br>
<br>10 여호와의 말씀에 시온의 딸아 노래하고 기뻐하라 이는 내가 와서 네 가운데에 머물 것임이라</br>
<br>11 그 날에 많은 나라가 여호와께 속하여 내 백성이 될 것이요 나는 네 가운데에 머물리라 네가 만군의 여호와께서 나를 네게 보내신 줄 알리라</br>
<br>12 여호와께서 장차 유다를 거룩한 땅에서 자기 소유를 삼으시고 다시 예루살렘을 택하시리니</br>
<br>13 모든 육체가 여호와 앞에서 잠잠할 것은 여호와께서 그의 거룩한 처소에서 일어나심이니라 하라 하더라</br>
<br>&nbsp;</br>
<strong><br><font color="#4682b4">스가랴 3 장</font></br></strong>
<br><i><font color="#808080">*여호와의 천사 앞에 선 여호수아*</font></i></br>
<br>1 대제사장 여호수아는 여호와의 천사 앞에 섰고 사탄은 그의 오른쪽에 서서 그를 대적하는 것을 여호와께서 내게 보이시니라</br>
<br>2 여호와께서 사탄에게 이르시되 사탄아 여호와께서 너를 책망하노라 예루살렘을 택한 여호와께서 너를 책망하노라 이는 불에서 꺼낸 그슬린 나무가 아니냐 하실 때에</br>
<br>3 여호수아가 더러운 옷을 입고 천사 앞에 서 있는지라</br>
<br>4 여호와께서 자기 앞에 선 자들에게 명령하사 그 더러운 옷을 벗기라 하시고 또 여호수아에게 이르시되 내가 네 죄악을 제거하여 버렸으니 네게 아름다운 옷을 입히리라 하시기로</br>
<br>5 내가 말하되 정결한 관을 그의 머리에 씌우소서 하매 곧 정결한 관을 그 머리에 씌우며 옷을 입히고 여호와의 천사는 곁에 섰더라</br>
<br>6 여호와의 천사가 여호수아에게 증언하여 이르되</br>
<br>7 만군의 여호와의 말씀에 네가 만일 내 도를 행하며 내 규례를 지키면 네가 내 집을 다스릴 것이요 내 뜰을 지킬 것이며 내가 또 너로 여기 섰는 자들 가운데에 왕래하게 하리라</br>
<br>8 대제사장 여호수아야 너와 네 앞에 앉은 네 동료들은 내 말을 들을 것이니라 이들은 예표의 사람들이라 내가 내 종 싹을 나게 하리라</br>
<br>9 만군의 여호와가 말하노라 내가 너 여호수아 앞에 세운 돌을 보라 한 돌에 일곱 눈이 있느니라 내가 거기에 새길 것을 새기며 이 땅의 죄악을 하루에 제거하리라</br>
<br>10 만군의 여호와가 말하노라 그 날에 너희가 각각 포도나무와 무화과나무 아래로 서로 초대하리라 하셨느니라</br>
<br>&nbsp;</br>
<strong><br><font color="#4682b4">스가랴 4 장</font></br></strong>
<br><i><font color="#808080">*순금 등잔대와 두 감람나무*</font></i></br>
<br>1 내게 말하던 천사가 다시 와서 나를 깨우니 마치 자는 사람이 잠에서 깨어난 것 같더라</br>
<br>2 그가 내게 묻되 네가 무엇을 보느냐 내가 대답하되 내가 보니 순금 등잔대가 있는데 그 위에는 기름 그릇이 있고 또 그 기름 그릇 위에 일곱 등잔이 있으며 그 기름 그릇 위에 있는 등잔을 위해서 일곱 관이 있고</br>
<br>3 그 등잔대 곁에 두 감람나무가 있는데 하나는 그 기름 그릇 오른쪽에 있고 하나는 그 왼쪽에 있나이다 하고</br>
<br>4 내게 말하는 천사에게 물어 이르되 내 주여 이것들이 무엇이니이까 하니</br>
<br>5 내게 말하는 천사가 대답하여 이르되 네가 이것들이 무엇인지 알지 못하느냐 하므로 내가 대답하되 내 주여 내가 알지 못하나이다 하니</br>
<br>6 그가 내게 대답하여 이르되 여호와께서 스룹바벨에게 하신 말씀이 이러하니라 만군의 여호와께서 말씀하시되 이는 힘으로 되지 아니하며 능력으로 되지 아니하고 오직 나의 영으로 되느니라</br>
<br>7 큰 산아 네가 무엇이냐 네가 스룹바벨 앞에서 평지가 되리라 그가 머릿돌을 내놓을 때에 무리가 외치기를 은총, 은총이 그에게 있을지어다 하리라 하셨고</br>
<br>8 여호와의 말씀이 또 내게 임하여 이르시되</br>
<br>9 스룹바벨의 손이 이 성전의 기초를 놓았은즉 그의 손이 또한 그 일을 마치리라 하셨나니 만군의 여호와께서 나를 너희에게 보내신 줄을 네가 알리라 하셨느니라</br>
<br>10 작은 일의 날이라고 멸시하는 자가 누구냐 사람들이 스룹바벨의 손에 다림줄이 있음을 보고 기뻐하리라 이 일곱은 온 세상에 두루 다니는 여호와의 눈이라 하니라</br>
<br>11 내가 그에게 물어 이르되 등잔대 좌우의 두 감람나무는 무슨 뜻이니이까 하고</br>
<br>12 다시 그에게 물어 이르되 금 기름을 흘리는 두 금관 옆에 있는 이 감람나무 두 가지는 무슨 뜻이니이까 하니</br>
<br>13 그가 내게 대답하여 이르되 네가 이것이 무엇인지 알지 못하느냐 하는지라 내가 대답하되 내 주여 알지 못하나이다 하니</br>
<br>14 이르되 이는 기름 부음 받은 자 둘이니 온 세상의 주 앞에 서 있는 자니라 하더라</br>
<br>&nbsp;</br>
<strong><br><font color="#4682b4">스가랴 5 장</font></br></strong>
<br><i><font color="#808080">*날아가는 두루마리*</font></i></br>
<br>1 내가 다시 눈을 들어 본즉 날아가는 두루마리가 있더라</br>
<br>2 그가 내게 묻되 네가 무엇을 보느냐 하기로 내가 대답하되 날아가는 두루마리를 보나이다 그 길이가 이십 규빗이요 너비가 십 규빗이니이다</br>
<br>3 그가 내게 이르되 이는 온 땅 위에 내리는 저주라 도둑질하는 자는 그 이쪽 글대로 끊어지고 맹세하는 자는 그 저쪽 글대로 끊어지리라 하니</br>
<br>4 만군의 여호와께서 이르시되 내가 이것을 보냈나니 도둑의 집에도 들어가며 내 이름을 가리켜 망령되이 맹세하는 자의 집에도 들어가서 그의 집에 머무르며 그 집을 나무와 돌과 아울러 사르리라 하셨느니라 하니라</br>
<br><i><font color="#808080">*에바 속의 여인*</font></i></br>
<br>5 내게 말하던 천사가 나아와서 내게 이르되 너는 눈을 들어 나오는 이것이 무엇인가 보라 하기로</br>
<br>6 내가 묻되 이것이 무엇이니이까 하니 그가 이르되 나오는 이것이 에바이니라 하시고 또 이르되 온 땅에서 그들의 모양이 이러하니라</br>
<br>7 이 에바 가운데에는 한 여인이 앉았느니라 하니 그 때에 둥근 납 한 조각이 들리더라</br>
<br>8 그가 이르되 이는 악이라 하고 그 여인을 에바 속으로 던져 넣고 납 조각을 에바 아귀 위에 던져 덮더라</br>
<br>9 내가 또 눈을 들어 본즉 두 여인이 나오는데 학의 날개 같은 날개가 있고 그 날개에 바람이 있더라 그들이 그 에바를 천지 사이에 들었기로</br>
<br>10 내가 내게 말하는 천사에게 묻되 그들이 에바를 어디로 옮겨 가나이까 하니</br>
<br>11 그가 내게 이르되 그들이 시날 땅으로 가서 그것을 위하여 집을 지으려 함이니라 준공되면 그것이 제 처소에 머물게 되리라 하더라</br>
<br>&nbsp;</br>
<strong><br><font color="#4682b4">스가랴 6 장</font></br></strong>
<br><i><font color="#808080">*네 병거*</font></i></br>
<br>1 내가 또 눈을 들어 본즉 네 병거가 두 산 사이에서 나오는데 그 산은 구리 산이더라</br>
<br>2 첫째 병거는 붉은 말들이, 둘째 병거는 검은 말들이,</br>
<br>3 셋째 병거는 흰 말들이, 넷째 병거는 어룽지고 건장한 말들이 메었는지라</br>
<br>4 내가 내게 말하는 천사에게 물어 이르되 내 주여 이것들이 무엇이니이까 하니</br>
<br>5 천사가 대답하여 이르되 이는 하늘의 네 바람인데 온 세상의 주 앞에 서 있다가 나가는 것이라 하더라</br>
<br>6 검은 말은 북쪽 땅으로 나가고 흰 말은 그 뒤를 따르고 어룽진 말은 남쪽 땅으로 나가고</br>
<br>7 건장한 말은 나가서 땅에 두루 다니고자 하니 그가 이르되 너희는 여기서 나가서 땅에 두루 다니라 하매 곧 땅에 두루 다니더라</br>
<br>8 그가 내게 외쳐 말하여 이르되 북쪽으로 나간 자들이 북쪽에서 내 영을 쉬게 하였느니라 하더라</br>
<br><i><font color="#808080">*면류관을 여호수아의 머리에 씌우다*</font></i></br>
<br>9 여호와의 말씀이 내게 임하여 이르시되</br>
<br>10 사로잡힌 자 가운데 바벨론에서부터 돌아온 헬대와 도비야와 여다야가 스바냐의 아들 요시아의 집에 들어갔나니 너는 이 날에 그 집에 들어가서 그들에게서 받되</br>
<br>11 은과 금을 받아 면류관을 만들어 여호사닥의 아들 대제사장 여호수아의 머리에 씌우고</br>
<br>12 말하여 이르기를 만군의 여호와께서 이같이 말씀하시되 보라 싹이라 이름하는 사람이 자기 곳에서 돋아나서 여호와의 전을 건축하리라</br>
<br>13 그가 여호와의 전을 건축하고 영광도 얻고 그 자리에 앉아서 다스릴 것이요 또 제사장이 자기 자리에 있으리니 이 둘 사이에 평화의 의논이 있으리라 하셨다 하고</br>
<br>14 그 면류관은 헬렘과 도비야와 여다야와 스바냐의 아들 헨을 기념하기 위하여 여호와의 전 안에 두라 하시니라</br>
<br>15 먼 데 사람들이 와서 여호와의 전을 건축하리니 만군의 여호와께서 나를 너희에게 보내신 줄을 너희가 알리라 너희가 만일 너희의 하나님 여호와의 말씀을 들을진대 이같이 되리라</br>
<br>&nbsp;</br>
<strong><br><font color="#4682b4">스가랴 7 장</font></br></strong>
<br><i><font color="#808080">*여호와께서는 금식보다 청종을 원하신다*</font></i></br>
<br>1 다리오 왕 제사년 아홉째 달 곧 기슬래월 사일에 여호와의 말씀이 스가랴에게 임하니라</br>
<br>2 그 때에 벧엘 사람이 사레셀과 레겜멜렉과 그의 부하들을 보내어 여호와께 은혜를 구하고</br>
<br>3 만군의 여호와의 전에 있는 제사장들과 선지자들에게 물어 이르되 내가 여러 해 동안 행한 대로 오월 중에 울며 근신하리이까 하매</br>
<br>4 만군의 여호와의 말씀이 내게 임하여 이르시되</br>
<br>5 온 땅의 백성과 제사장들에게 이르라 너희가 칠십 년 동안 다섯째 달과 일곱째 달에 금식하고 애통하였거니와 그 금식이 나를 위하여, 나를 위하여 한 것이냐</br>
<br>6 너희가 먹고 마실 때에 그것은 너희를 위하여 먹고 너희를 위하여 마시는 것이 아니냐</br>
<br>7 예루살렘과 사면 성읍에 백성이 평온히 거주하며 남방과 평원에 사람이 거주할 때에 여호와가 옛 선지자들을 통하여 외친 말씀이 있지 않으냐 하시니라</br>
<br><i><font color="#808080">*사로잡혀 가는 까닭*</font></i></br>
<br>8 여호와의 말씀이 스가랴에게 임하여 이르시되</br>
<br>9 만군의 여호와가 이같이 말하여 이르시기를 너희는 진실한 재판을 행하며 서로 인애와 긍휼을 베풀며</br>
<br>10 과부와 고아와 나그네와 궁핍한 자를 압제하지 말며 서로 해하려고 마음에 도모하지 말라 하였으나</br>
<br>11 그들이 듣기를 싫어하여 등을 돌리며 듣지 아니하려고 귀를 막으며</br>
<br>12 그 마음을 금강석 같게 하여 율법과 만군의 여호와가 그의 영으로 옛 선지자들을 통하여 전한 말을 듣지 아니하므로 큰 진노가 만군의 여호와께로부터 나왔도다</br>
<br>13 내가 불러도 그들이 듣지 아니한 것처럼 그들이 불러도 내가 듣지 아니하리라 만군의 여호와가 말하였느니라</br>
<br>14 내가 그들을 바람으로 불어 알지 못하던 여러 나라에 흩었느니라 그 후에 이 땅이 황폐하여 오고 가는 사람이 없었나니 이는 그들이 아름다운 땅을 황폐하게 하였음이니라 하시니라</br>
<br>&nbsp;</br>
<strong><br><font color="#4682b4">스가랴 8 장</font></br></strong>
<br><i><font color="#808080">*예루살렘 회복에 대한 약속*</font></i></br>
<br>1 만군의 여호와의 말씀이 임하여 이르시되</br>
<br>2 만군의 여호와가 이같이 말하노라 내가 시온을 위하여 크게 질투하며 그를 위하여 크게 분노함으로 질투하노라</br>
<br>3 여호와가 이같이 말하노라 내가 시온에 돌아와 예루살렘 가운데에 거하리니 예루살렘은 진리의 성읍이라 일컫겠고 만군의 여호와의 산은 성산이라 일컫게 되리라</br>
<br>4 만군의 여호와가 이같이 말하노라 예루살렘 길거리에 늙은 남자들과 늙은 여자들이 다시 앉을 것이라 다 나이가 많으므로 저마다 손에 지팡이를 잡을 것이요</br>
<br>5 그 성읍 거리에 소년과 소녀들이 가득하여 거기에서 뛰놀리라</br>
<br>6 만군의 여호와가 이같이 말하노라 이 일이 그 날에 남은 백성의 눈에는 기이하려니와 내 눈에야 어찌 기이하겠느냐 만군의 여호와의 말이니라</br>
<br>7 만군의 여호와가 이같이 말하노라 보라, 내가 내 백성을 해가 뜨는 땅과 해가 지는 땅에서부터 구원하여 내고</br>
<br>8 인도하여다가 예루살렘 가운데에 거주하게 하리니 그들은 내 백성이 되고 나는 진리와 공의로 그들의 하나님이 되리라</br>
<br>9 만군의 여호와가 이같이 말하노라 만군의 여호와의 집 곧 성전을 건축하려고 그 지대를 쌓던 날에 있었던 선지자들의 입의 말을 이 날에 듣는 너희는 손을 견고히 할지어다</br>
<br>10 이 날 전에는 사람도 삯을 얻지 못하였고 짐승도 삯을 받지 못하였으며 사람이 원수로 말미암아 평안히 출입하지 못하였으나 내가 모든 사람을 풀어 서로 치게 하였느니라</br>
<br>11 만군의 여호와의 말씀이니라 이제는 내가 이 남은 백성을 대하기를 옛날과 같이 아니할 것인즉</br>
<br>12 곧 평강의 씨앗을 얻을 것이라 포도나무가 열매를 맺으며 땅이 산물을 내며 하늘은 이슬을 내리리니 내가 이 남은 백성으로 이 모든 것을 누리게 하리라</br>
<br>13 유다 족속아, 이스라엘 족속아, 너희가 이방인 가운데에서 저주가 되었었으나 이제는 내가 너희를 구원하여 너희가 복이 되게 하리니 두려워하지 말지니라 손을 견고히 할지니라</br>
<br>14 만군의 여호와가 이같이 말하노라 너희 조상들이 나를 격노하게 하였을 때에 내가 그들에게 재앙을 내리기로 뜻하고 뉘우치지 아니하였으나</br>
<br>15 이제 내가 다시 예루살렘과 유다 족속에게 은혜를 베풀기로 뜻하였나니 너희는 두려워하지 말지니라</br>
<br>16 너희가 행할 일은 이러하니라 너희는 이웃과 더불어 진리를 말하며 너희 성문에서 진실하고 화평한 재판을 베풀고</br>
<br>17 마음에 서로 해하기를 도모하지 말며 거짓 맹세를 좋아하지 말라 이 모든 일은 내가 미워하는 것이니라 여호와의 말이니라</br>
<br><i><font color="#808080">*금식에 관하여 말씀하시다*</font></i></br>
<br>18 만군의 여호와의 말씀이 내게 임하여 이르시되</br>
<br>19 만군의 여호와가 이같이 말하노라 넷째 달의 금식과 다섯째 달의 금식과 일곱째 달의 금식과 열째 달의 금식이 변하여 유다 족속에게 기쁨과 즐거움과 희락의 절기들이 되리니 오직 너희는 진리와 화평을 사랑할지니라</br>
<br>20 만군의 여호와가 이와 같이 말하노라 다시 여러 백성과 많은 성읍의 주민이 올 것이라</br>
<br>21 이 성읍 주민이 저 성읍에 가서 이르기를 우리가 속히 가서 만군의 여호와를 찾고 여호와께 은혜를 구하자 하면 나도 가겠노라 하겠으며</br>
<br>22 많은 백성과 강대한 나라들이 예루살렘으로 와서 만군의 여호와를 찾고 여호와께 은혜를 구하리라</br>
<br>23 만군의 여호와가 이와 같이 말하노라 그 날에는 말이 다른 이방 백성 열 명이 유다 사람 하나의 옷자락을 잡을 것이라 곧 잡고 말하기를 하나님이 너희와 함께 하심을 들었나니 우리가 너희와 함께 가려 하노라 하리라 하시니라</br>
<br>&nbsp;</br>
<strong><br><font color="#4682b4">에스라 5장 2절- 6장</font></br></strong>
<strong><br><font color="#4682b4">에스라 5장 2절- 17절</font></br></strong>
<br><i><font color="#808080">*성전 건축을 다시 시작하다*</font></i></br>
<br>2 이에 스알디엘의 아들 스룹바벨과 요사닥의 아들 예수아가 일어나 예루살렘에 있던 하나님의 성전을 다시 건축하기 시작하매 하나님의 선지자들이 함께 있어 그들을 돕더니</br>
<br>3 그 때에 유브라데 강 건너편 총독 닷드내와 스달보스내와 그들의 동관들이 다 나아와 그들에게 이르되 누가 너희에게 명령하여 이 성전을 건축하고 이 성곽을 마치게 하였느냐 하기로</br>
<br>4 우리가 이 건축하는 자의 이름을 아뢰었으나</br>
<br>5 하나님이 유다 장로들을 돌보셨으므로 그들이 능히 공사를 막지 못하고 이 일을 다리오에게 아뢰고 그 답장이 오기를 기다렸더라</br>
<br>6 유브라데 강 건너편 총독 닷드내와 스달보스내와 그들의 동관인 유브라데 강 건너편 아바삭 사람이 다리오 왕에게 올린 글의 초본은 이러하니라</br>
<br>7 그 글에 일렀으되 다리오 왕은 평안하옵소서</br>
<br>8 왕께 아뢰옵나이다 우리가 유다 도에 가서 지극히 크신 하나님의 성전에 나아가 본즉 성전을 큰 돌로 세우며 벽에 나무를 얹고 부지런히 일하므로 공사가 그 손에서 형통하옵기에</br>
<br>9 우리가 그 장로들에게 물어보기를 누가 너희에게 명령하여 이 성전을 건축하고 이 성곽을 마치라고 하였느냐 하고</br>
<br>10 우리가 또 그 우두머리들의 이름을 적어 왕에게 아뢰고자 하여 그들의 이름을 물은즉</br>
<br>11 그들이 우리에게 대답하여 이르기를 우리는 천지의 하나님의 종이라 예전에 건축되었던 성전을 우리가 다시 건축하노라 이는 본래 이스라엘의 큰 왕이 건축하여 완공한 것이었으나</br>
<br>12 우리 조상들이 하늘에 계신 하나님을 노엽게 하였으므로 하나님이 그들을 갈대아 사람 바벨론 왕 느부갓네살의 손에 넘기시매 그가 이 성전을 헐며 이 백성을 사로잡아 바벨론으로 옮겼더니</br>
<br>13 바벨론 왕 고레스 원년에 고레스 왕이 조서를 내려 하나님의 이 성전을 다시 건축하게 하고</br>
<br>14 또 느부갓네살이 예루살렘 하나님의 성전 안에서 금, 은 그릇을 옮겨다가 바벨론 신당에 두었던 것을 고레스 왕이 그 신당에서 꺼내어 그가 세운 총독 세스바살이라고 부르는 자에게 내주고</br>
<br>15 일러 말하되 너는 이 그릇들을 가지고 가서 예루살렘 성전에 두고 하나님의 전을 제자리에 건축하라 하매</br>
<br>16 이에 이 세스바살이 이르러 예루살렘 하나님의 성전 지대를 놓았고 그 때로부터 지금까지 건축하여 오나 아직도 마치지 못하였다 하였사오니</br>
<br>17 이제 왕께서 좋게 여기시거든 바벨론에서 왕의 보물전각에서 조사하사 과연 고레스 왕이 조서를 내려 하나님의 이 성전을 예루살렘에 다시 건축하라 하셨는지 보시고 왕은 이 일에 대하여 왕의 기쁘신 뜻을 우리에게 보이소서 하였더라</br>
<br>&nbsp;</br>
<strong><br><font color="#4682b4">에스라 6장</font></br></strong>
<br><i><font color="#808080">*고레스의 조서와 다리오 왕의 명령*</font></i></br>
<br>1 이에 다리오 왕이 조서를 내려 문서창고 곧 바벨론의 보물을 쌓아둔 보물전각에서 조사하게 하여</br>
<br>2 메대도 악메다 궁성에서 한 두루마리를 찾았으니 거기에 기록하였으되</br>
<br>3 고레스 왕 원년에 조서를 내려 이르기를 예루살렘에 있는 하나님의 성전에 대하여 이르노니 이 성전 곧 제사 드리는 처소를 건축하되 지대를 견고히 쌓고 그 성전의 높이는 육십 규빗으로, 너비도 육십 규빗으로 하고</br>
<br>4 큰 돌 세 켜에 새 나무 한 켜를 놓으라 그 경비는 다 왕실에서 내리라</br>
<br>5 또 느부갓네살이 예루살렘 성전에서 탈취하여 바벨론으로 옮겼던 하나님의 성전 금, 은 그릇들을 돌려보내어 예루살렘 성전에 가져다가 하나님의 성전 안 각기 제자리에 둘지니라 하였더라</br>
<br>6 이제 유브라데 강 건너편 총독 닷드내와 스달보스내와 너희 동관 유브라데 강 건너편 아바삭 사람들은 그 곳을 멀리하여</br>
<br>7 하나님의 성전 공사를 막지 말고 유다 총독과 장로들이 하나님의 이 성전을 제자리에 건축하게 하라</br>
<br>8 내가 또 조서를 내려서 하나님의 이 성전을 건축함에 대하여 너희가 유다 사람의 장로들에게 행할 것을 알리노니 왕의 재산 곧 유브라데 강 건너편에서 거둔 세금 중에서 그 경비를 이 사람들에게 끊임없이 주어 그들로 멈추지 않게 하라</br>
<br>9 또 그들이 필요로 하는 것 곧 하늘의 하나님께 드릴 번제의 수송아지와 숫양과 어린 양과 또 밀과 소금과 포도주와 기름을 예루살렘 제사장의 요구대로 어김없이 날마다 주어</br>
<br>10 그들이 하늘의 하나님께 향기로운 제물을 드려 왕과 왕자들의 생명을 위하여 기도하게 하라</br>
<br>11 내가 또 명령을 내리노니 누구를 막론하고 이 명령을 변조하면 그의 집에서 들보를 빼내고 그를 그 위에 매어달게 하고 그의 집은 이로 말미암아 거름더미가 되게 하라</br>
<br>12 만일 왕들이나 백성이 이 명령을 변조하고 손을 들어 예루살렘 하나님의 성전을 헐진대 그 곳에 이름을 두신 하나님이 그들을 멸하시기를 원하노라 나 다리오가 조서를 내렸노니 신속히 행할지어다 하였더라</br>
<br><i><font color="#808080">*성전 봉헌*</font></i></br>
<br>13 다리오 왕의 조서가 내리매 유브라데 강 건너편 총독 닷드내와 스달보스내와 그들의 동관들이 신속히 준행하니라</br>
<br>14 유다 사람의 장로들이 선지자 학개와 잇도의 손자 스가랴의 권면을 따랐으므로 성전 건축하는 일이 형통한지라 이스라엘 하나님의 명령과 바사 왕 고레스와 다리오와 아닥사스다의 조서를 따라 성전을 건축하며 일을 끝내되</br>
<br>15 다리오 왕 제육년 아달월 삼일에 성전 일을 끝내니라</br>
<br>16 이스라엘 자손과 제사장들과 레위 사람들과 기타 사로잡혔던 자의 자손이 즐거이 하나님의 성전 봉헌식을 행하니</br>
<br>17 하나님의 성전 봉헌식을 행할 때에 수소 백 마리와 숫양 이백 마리와 어린 양 사백 마리를 드리고 또 이스라엘 지파의 수를 따라 숫염소 열두 마리로 이스라엘 전체를 위하여 속죄제를 드리고</br>
<br>18 제사장을 그 분반대로, 레위 사람을 그 순차대로 세워 예루살렘에서 하나님을 섬기게 하되 모세의 책에 기록된 대로 하게 하니라</br>
<br><i><font color="#808080">*유월절*</font></i></br>
<br>19 사로잡혔던 자의 자손이 첫째 달 십사일에 유월절을 지키되</br>
<br>20 제사장들과 레위 사람들이 일제히 몸을 정결하게 하여 다 정결하매 사로잡혔던 자들의 모든 자손과 자기 형제 제사장들과 자기를 위하여 유월절 양을 잡으니</br>
<br>21 사로잡혔다가 돌아온 이스라엘 자손과 자기 땅에 사는 이방 사람의 더러운 것으로부터 스스로를 구별한 모든 이스라엘 사람들에게 속하여 이스라엘의 하나님 여호와를 찾는 자들이 다 먹고</br>
<br>22 즐거움으로 이레 동안 무교절을 지켰으니 이는 여호와께서 그들을 즐겁게 하시고 또 앗수르 왕의 마음을 그들에게로 돌려 이스라엘의 하나님이신 하나님의 성전 건축하는 손을 힘 있게 하도록 하셨음이었더라</br>
<br>&nbsp;</br>
<strong><br><font color="#4682b4">다니엘 6장</font></br></strong>
<br><i><font color="#808080">*사자 굴 속의 다니엘*</font></i></br>
<br>1 다리오가 자기의 뜻대로 고관 백이십 명을 세워 전국을 통치하게 하고</br>
<br>2 또 그들 위에 총리 셋을 두었으니 다니엘이 그 중의 하나이라 이는 고관들로 총리에게 자기의 직무를 보고하게 하여 왕에게 손해가 없게 하려 함이었더라</br>
<br>3 다니엘은 마음이 민첩하여 총리들과 고관들 위에 뛰어나므로 왕이 그를 세워 전국을 다스리게 하고자 한지라</br>
<br>4 이에 총리들과 고관들이 국사에 대하여 다니엘을 고발할 근거를 찾고자 하였으나 아무 근거, 아무 허물도 찾지 못하였으니 이는 그가 충성되어 아무 그릇됨도 없고 아무 허물도 없음이었더라</br>
<br>5 그들이 이르되 이 다니엘은 그 하나님의 율법에서 근거를 찾지 못하면 그를 고발할 수 없으리라 하고</br>
<br>6 이에 총리들과 고관들이 모여 왕에게 나아가서 그에게 말하되 다리오 왕이여 만수무강 하옵소서</br>
<br>7 나라의 모든 총리와 지사와 총독과 법관과 관원이 의논하고 왕에게 한 법률을 세우며 한 금령을 정하실 것을 구하나이다 왕이여 그것은 곧 이제부터 삼십일 동안에 누구든지 왕 외의 어떤 신에게나 사람에게 무엇을 구하면 사자 굴에 던져 넣기로 한 것이니이다</br>
<br>8 그런즉 왕이여 원하건대 금령을 세우시고 그 조서에 왕의 도장을 찍어 메대와 바사의 고치지 아니하는 규례를 따라 그것을 다시 고치지 못하게 하옵소서 하매</br>
<br>9 이에 다리오 왕이 조서에 왕의 도장을 찍어 금령을 내니라</br>
<br>10 다니엘이 이 조서에 왕의 도장이 찍힌 것을 알고도 자기 집에 돌아가서는 윗방에 올라가 예루살렘으로 향한 창문을 열고 전에 하던 대로 하루 세 번씩 무릎을 꿇고 기도하며 그의 하나님께 감사하였더라</br>
<br>11 그 무리들이 모여서 다니엘이 자기 하나님 앞에 기도하며 간구하는 것을 발견하고</br>
<br>12 이에 그들이 나아가서 왕의 금령에 관하여 왕께 아뢰되 왕이여 왕이 이미 금령에 왕의 도장을 찍어서 이제부터 삼십 일 동안에는 누구든지 왕 외의 어떤 신에게나 사람에게 구하면 사자 굴에 던져 넣기로 하지 아니하였나이까 하니 왕이 대답하여 이르되 이 일이 확실하니 메대와 바사의 고치지 못하는 규례니라 하는지라</br>
<br>13 그들이 왕 앞에서 말하여 이르되 왕이여 사로잡혀 온 유다 자손 중에 다니엘이 왕과 왕의 도장이 찍힌 금령을 존중하지 아니하고 하루 세 번씩 기도하나이다 하니</br>
<br>14 왕이 이 말을 듣고 그로 말미암아 심히 근심하여 다니엘을 구원하려고 마음을 쓰며 그를 건져내려고 힘을 다하다가 해가 질 때에 이르렀더라</br>
<br>15 그 무리들이 또 모여 왕에게로 나아와서 왕께 말하되 왕이여 메대와 바사의 규례를 아시거니와 왕께서 세우신 금령과 법도는 고치지 못할 것이니이다 하니</br>
<br>16 이에 왕이 명령하매 다니엘을 끌어다가 사자 굴에 던져 넣는지라 왕이 다니엘에게 이르되 네가 항상 섬기는 너의 하나님이 너를 구원하시리라 하니라</br>
<br>17 이에 돌을 굴려다가 굴 어귀를 막으매 왕이 그의 도장과 귀족들의 도장으로 봉하였으니 이는 다니엘에 대한 조치를 고치지 못하게 하려 함이었더라</br>
<br>18 왕이 궁에 돌아가서는 밤이 새도록 금식하고 그 앞에 오락을 그치고 잠자기를 마다하니라</br>
<br>19 이튿날에 왕이 새벽에 일어나 급히 사자 굴로 가서</br>
<br>20 다니엘이 든 굴에 가까이 이르러서 슬피 소리 질러 다니엘에게 묻되 살아 계시는 하나님의 종 다니엘아 네가 항상 섬기는 네 하나님이 사자들에게서 능히 너를 구원하셨느냐 하니라</br>
<br>21 다니엘이 왕에게 아뢰되 왕이여 원하건대 왕은 만수무강 하옵소서</br>
<br>22 나의 하나님이 이미 그의 천사를 보내어 사자들의 입을 봉하셨으므로 사자들이 나를 상해하지 못하였사오니 이는 나의 무죄함이 그 앞에 명백함이오며 또 왕이여 나는 왕에게도 해를 끼치지 아니하였나이다 하니라</br>
<br>23 왕이 심히 기뻐서 명하여 다니엘을 굴에서 올리라 하매 그들이 다니엘을 굴에서 올린즉 그의 몸이 조금도 상하지 아니하였으니 이는 그가 자기의 하나님을 믿음이었더라</br>
<br>24 왕이 말하여 다니엘을 참소한 사람들을 끌어오게 하고 그들을 그들의 처자들과 함께 사자 굴에 던져 넣게 하였더니 그들이 굴 바닥에 닿기도 전에 사자들이 곧 그들을 움켜서 그 뼈까지도 부서뜨렸더라</br>
<br>25 이에 다리오 왕이 온 땅에 있는 모든 백성과 나라들과 언어가 다른 모든 사람들에게 조서를 내려 이르되 원하건대 너희에게 큰 평강이 있을지어다</br>
<br>26 내가 이제 조서를 내리노라 내 나라 관할 아래에 있는 사람들은 다 다니엘의 하나님 앞에서 떨며 두려워할지니 그는 살아 계시는 하나님이시요 영원히 변하지 않으실 이시며 그의 나라는 멸망하지 아니할 것이요 그의 권세는 무궁할 것이며</br>
<br>27 그는 구원도 하시며 건져내기도 하시며 하늘에서든지 땅에서든지 이적과 기사를 행하시는 이로서 다니엘을 구원하여 사자의 입에서 벗어나게 하셨음이라 하였더라</br>
<br>28 이 다니엘이 다리오 왕의 시대와 바사 사람 고레스 왕의 시대에 형통하였더라</br>
<br>&nbsp;</br>
<br>    60 일차 끝</br>
       <br>&nbsp;</br>
      <br>&nbsp;</br>
      <br>&nbsp;</br>
      <br>&nbsp;</br>
      <br>&nbsp;</br>
      <br>&nbsp;</br>
    </h2>
  </div>

  <!-- 모달 (설명/요약 출력) -->
  <div id="explanation-modal" class="modal" role="dialog" aria-modal="true" aria-labelledby="modal-title">
    <div class="modal-content">
      <span class="close-button" id="close-modal" aria-label="닫기">&times;</span>
      <h3 id="modal-title">구절 설명</h3>
      <img id="modal-image" src="" alt="설명 관련 이미지" />
      <div id="modal-text">구절을 드래그하여 선택하고 '구절설명' 버튼을 누르세요.</div>
    </div>
  </div>

  <div id="scroll-marker-container" class="scroll-marker-container" aria-hidden="true"></div>

  <!-- 기도문 팝업 -->
  <div id="prayerToast" class="prayer-toast" role="dialog" aria-modal="false" aria-label="성경 읽기 전 기도문">
    <div class="prayer-header">
      <div class="prayer-title">
        <span>🙏</span>
        <span>기도하고 읽기</span>
        <span class="prayer-badge">90일 성경통톡</span>
      </div>
      <button class="prayer-close" id="prayerCloseBtn" aria-label="기도문 닫기">×</button>
    </div>

    <div class="prayer-body" id="prayerBody" tabindex="0">
   <style>
  .cross-red {
    color: red;
    font-weight: 900;
    -webkit-text-stroke: 0.6px currentColor; /* 윤곽선으로 두께 보강 */
    text-shadow:
      0 0 0 currentColor,         /* 기본 채움 */
      0.02em 0 currentColor, -0.02em 0 currentColor,
      0 0.02em currentColor,  0 -0.02em currentColor; /* 가장자리 두껍게 */
  }
</style>

<h4>
  <p>👀<span class="cross-red">✝︎</span> "하나님나라 관점" <span class="cross-red">✝︎</span>👀으로</p>
  <p>읽는 📖"90일 통큰통독"📖</p>
</h4>
<p>— 👦🏻 성경 읽기 전 1분 기도 🙏—</p>
<p>내 삶의 주인이 되시는 하나님, 성경을 읽게 하시니 감사합니다. 이 성경이 하나님의 말씀임을 믿습니다. 특별히 나에게 주시는 하나님의 말씀임을 믿습니다. 주시는 말씀을 내 관점으로 읽게 하지 마시고 하나님의 관점으로 읽어 하나님의 마음을 알게 하시고, 그 마음을 받아 나의 중심성을 하나님의 뜻 앞에 내려놓게 하시고 순종하게 하시어 변화되게 하옵소서, 말씀을 삶으로 이루는 성경 읽기가 되게 역사하여 주시옵소서. 예수님의 이름으로 기도합니다. 아멘.</p>
    
    </div>

    <div class="prayer-footer">
  <div></div> <!-- 좌측 자리 균형용(선택) -->
  <div class="prayer-actions">
    <button class="prayer-btn" id="prayerReadAlone">기도 드렸습니다</button>
    <button class="prayer-btn prayer-btn-primary" id="prayerAmen">확인</button>
  </div>
</div>

  <script>
    // ------------------------------
    // API KEY (사용자 입력 상태)
    const apiKey = "AIzaSyDUlSQlSPgnrFBXpnUJMDoUO3s_KsaoFRU";
    // ------------------------------

    // DOM
    const bibleTextEl = document.getElementById('bible-text');
    const searchCountEl = document.getElementById('search-count');
    const nextLocationBtn = document.getElementById('next-location-btn');
    const scrollMarkerContainer = document.getElementById('scroll-marker-container');

    const explanationIconButton = document.getElementById('explanation-icon-button');
    const explanationButtonWrapper = document.getElementById('explanation-button-wrapper');
    const explanationSubButtons = document.getElementById('explanation-sub-buttons');
    const detailedExplanationButton = document.getElementById('detailed-explanation-button');
    const simpleExplanationButton = document.getElementById('simple-explanation-button');

    const summarySimpleMain = document.getElementById('summary-simple-main');
    const summaryDetailedMain = document.getElementById('summary-detailed-main');

    const modal = document.getElementById('explanation-modal');
    const closeModalButton = document.getElementById('close-modal');
    const modalTitle = document.getElementById('modal-title');
    const modalImage = document.getElementById('modal-image');
    const modalText = document.getElementById('modal-text');

    const audio = document.getElementById('audio-file');
    const playBtn = document.getElementById('play-btn');
    const pauseBtn = document.getElementById('pause-btn');
    const stopBtn = document.getElementById('stop-btn');
    const progressBar = document.getElementById('progress-bar');
    const rewindBtn = document.getElementById('rewind-10');
    const forwardBtn = document.getElementById('forward-10');
    const speedDisplay = document.getElementById('speed-display');
    const speedDown02Btn = document.getElementById('speed-down-02');
    const speedDown01Btn = document.getElementById('speed-down-01');
    const speedUp01Btn = document.getElementById('speed-up-01');
    const speedUp02Btn = document.getElementById('speed-up-02');
    const speedResetBtn = document.getElementById('speed-reset');
    const volumeSlider = document.getElementById('volume-slider');
    const muteBtn = document.getElementById('mute-btn');
    const currentTimeEl = document.getElementById('current-time');
    const remainingTimeEl = document.getElementById('remaining-time');

    const upBtn = document.getElementById('up');
    const downBtn = document.getElementById('down');
    const fontSizeEl = document.getElementById('font-size');

    // 상태
    let originalText = "";
    let selectedVerse = "";
    let selectionRange = null;
    let foundSentences = [];
    let currentSearchIndex = -1;
    let currentSpeed = 1.0;
    let isMuted = false;
    let selectionDebounce = null;

    function escapeRegExp(s) { return s.replace(/[.*+?^${}()|[\]\\]/g, '\\$&'); }
    function formatTime(sec) { if (!isFinite(sec) || sec < 0) return '0:00'; const m = Math.floor(sec/60); const s = Math.floor(sec%60); return `${m}:${String(s).padStart(2,'0')}`; }

    window.addEventListener('DOMContentLoaded', () => {
      originalText = bibleTextEl.innerHTML;
      updateFontSizeDisplay();
      updateSpeed();

      // 본문 줄 단위 분리
      const lines = originalText.split(/<br\s*\/?>/i);
      bibleTextEl.innerHTML = lines.map(line => {
        if (line.trim() === "") return "<br>";
        return `<span class="line">${line}</span><br>`;
      }).join("");
      const lineElements = document.querySelectorAll("#bible-text .line");

            // 스크롤 시 중앙 강조 줄 수(2줄/3줄) 반응형으로 처리
function highlightCenterLines() {
  const viewportCenter = window.innerHeight / 2 + window.scrollY;
  const linesToHighlight = window.innerWidth >= 768 ? 3 : 2;

  let closestIndex = -1, minDistance = Infinity;
  lineElements.forEach((line, i) => {
    const rect = line.getBoundingClientRect();
    const lineCenter = rect.top + window.scrollY + rect.height / 2;
    const distance = Math.abs(lineCenter - viewportCenter);
    if (distance < minDistance) { minDistance = distance; closestIndex = i; }
  });

  lineElements.forEach(line => line.classList.remove("highlight"));
  if (closestIndex < 0) return;

  const indices = linesToHighlight === 3
    ? [closestIndex - 1, closestIndex, closestIndex + 1]
    : [closestIndex, closestIndex + 1];

  indices.forEach(idx => {
    if (idx >= 0 && idx < lineElements.length) {
      lineElements[idx].classList.add("highlight");
    }
  });
}

// rAF 스로틀
let ticking = false;
function onScrollOrResize() {
  if (ticking) return;
  ticking = true;
  requestAnimationFrame(() => {
    highlightCenterLines();
    ticking = false;
  });
}

// 이벤트 등록
window.addEventListener("scroll", onScrollOrResize, { passive: true });
window.addEventListener("resize", onScrollOrResize);
// (옵션) 기기 회전 이벤트도 묶어서 처리하면 좋아요
window.addEventListener("orientationchange", onScrollOrResize);

// 최초 1회 적용
highlightCenterLines();

      // PC에서 2줄씩 부드럽게 스크롤
      window.addEventListener("wheel", function(e) {
        if (e.ctrlKey) return;
        const modal = document.getElementById('explanation-modal');
        if (modal && modal.style.display === 'block' && modal.contains(e.target)) return;
        const firstLine = document.querySelector("#bible-text .line");
        if (!firstLine) return;
        const lineHeight = firstLine.getBoundingClientRect().height;
        e.preventDefault();
        window.scrollBy({ top: e.deltaY > 0 ? lineHeight * 2 : -lineHeight * 2, behavior: "smooth" });
      }, { passive: false });

      // 폰트 버튼
      upBtn.addEventListener('click', () => {
        const current = parseFloat(getComputedStyle(bibleTextEl).fontSize);
        if (current + 4 <= 80) { bibleTextEl.style.fontSize = (current + 4) + 'px'; updateFontSizeDisplay(); }
      });
      downBtn.addEventListener('click', () => {
        const current = parseFloat(getComputedStyle(bibleTextEl).fontSize);
        if (current - 4 >= 12) { bibleTextEl.style.fontSize = (current - 4) + 'px'; updateFontSizeDisplay(); }
      });

      // 검색
      const searchForm = document.forms.f1;
      searchForm.addEventListener('submit', (e) => { e.preventDefault(); findString(searchForm.t1.value); });
      searchForm.b2.addEventListener('click', () => { clearHighlight(); });
      nextLocationBtn.addEventListener('click', nextLocation);

      // 오디오
      playBtn.addEventListener('click', () => { audio.play().catch(()=>{}); });
      pauseBtn.addEventListener('click', () => audio.pause());
      stopBtn.addEventListener('click', () => { audio.pause(); audio.currentTime = 0; });
      speedDown02Btn.addEventListener('click', () => { currentSpeed = Math.max(0.5, currentSpeed - 0.2); updateSpeed(); });
      speedDown01Btn.addEventListener('click', () => { currentSpeed = Math.max(0.5, currentSpeed - 0.1); updateSpeed(); });
      speedUp01Btn.addEventListener('click', () => { currentSpeed = Math.min(2.0, currentSpeed + 0.1); updateSpeed(); });
      speedUp02Btn.addEventListener('click', () => { currentSpeed = Math.min(2.0, currentSpeed + 0.2); updateSpeed(); });
      speedResetBtn.addEventListener('click', () => { currentSpeed = 1.0; updateSpeed(); });
      volumeSlider.addEventListener('input', () => { audio.volume = Number(volumeSlider.value); });
      muteBtn.addEventListener('click', () => { isMuted = !isMuted; audio.muted = isMuted; muteBtn.textContent = isMuted ? '🔇' : '🔊'; });

      audio.addEventListener('timeupdate', () => {
        if (!isFinite(audio.duration) || audio.duration <= 0) return;
        const pct = (audio.currentTime / audio.duration) * 100;
        progressBar.value = pct;
        currentTimeEl.textContent = formatTime(audio.currentTime);
        remainingTimeEl.textContent = '-' + formatTime(audio.duration - audio.currentTime);
      }, { passive: true });
      audio.addEventListener('loadedmetadata', () => {
        currentTimeEl.textContent = '0:00';
        remainingTimeEl.textContent = '-' + formatTime(audio.duration || 0);
      });
      progressBar.addEventListener('input', () => {
        if (!isFinite(audio.duration) || audio.duration <= 0) return;
        const pct = progressBar.value / 100;
        audio.currentTime = audio.duration * pct;
      }, { passive: true });
      rewindBtn.addEventListener('click', () => { audio.currentTime = Math.max(0, audio.currentTime - 10); });
      forwardBtn.addEventListener('click', () => { if (isFinite(audio.duration)) audio.currentTime = Math.min(audio.duration, audio.currentTime + 10); });

      // 책 버튼 토글 & 선택 복원
      explanationIconButton.addEventListener('pointerdown', () => {
        const sel = window.getSelection();
        try { if (sel && sel.rangeCount > 0) selectionRange = sel.getRangeAt(0).cloneRange(); } catch(e) { selectionRange = null; }
      }, { passive: true });
      explanationIconButton.addEventListener('click', (ev) => {
        ev.stopPropagation();
        const sel = window.getSelection();
        try { if (sel && sel.rangeCount > 0) selectionRange = sel.getRangeAt(0).cloneRange(); } catch(e){ selectionRange = null; }
        explanationButtonWrapper.classList.toggle('active');
        setTimeout(() => {
          if (selectionRange) {
            const sel2 = window.getSelection();
            sel2.removeAllRanges();
            try { sel2.addRange(selectionRange); } catch(e){}
            updateSelectedVerseFromRange(selectionRange);
          }
        }, 60);
      });
      document.body.addEventListener('click', (ev) => {
        if (!explanationButtonWrapper.contains(ev.target)) explanationButtonWrapper.classList.remove('active');
      });

      // 구절 설명 버튼
      detailedExplanationButton.addEventListener('click', () => {
        const v = (selectedVerse || '').trim();
        if (!v) { showModal("구절을 먼저 선택하세요","본문에서 구절이나 단어를 드래그하여 선택한 후 다시 버튼을 눌러주세요."); }
        else { fetchExplanation(v, 'detailed'); }
        explanationButtonWrapper.classList.remove('active');
      });
      simpleExplanationButton.addEventListener('click', () => {
        const v = (selectedVerse || '').trim();
        if (!v) { showModal("구절을 먼저 선택하세요","본문에서 구절이나 단어를 드래그하여 선택한 후 다시 버튼을 눌러주세요."); }
        else { fetchExplanation(v, 'simple'); }
        explanationButtonWrapper.classList.remove('active');
      });

      // 본문 요약 버튼
      summarySimpleMain.addEventListener('click', () => {
        const full = getFullBibleText();
        if (!full.trim()) { showModal("본문이 없습니다","요약할 성경 본문이 없습니다."); }
        else { fetchSummary(full, 'simple'); }
      });
      summaryDetailedMain.addEventListener('click', () => {
        const full = getFullBibleText();
        if (!full.trim()) { showModal("본문이 없습니다","요약할 성경 본문이 없습니다."); }
        else { fetchSummary(full, 'detailed'); }
      });

      // 설명 모달 닫기
      closeModalButton.addEventListener('click', () => {
        modal.style.display = 'none';
        document.body.classList.remove('modal-open');
      });
      window.addEventListener('click', (ev) => {
        if (ev.target === modal) {
          modal.style.display = 'none';
          document.body.classList.remove('modal-open');
        }
      });

      // 선택 이벤트(디바운스)
      const scheduleSelectionUpdate = () => {
        clearTimeout(selectionDebounce);
        selectionDebounce = setTimeout(handleSelectionChange, 160);
      };
      document.addEventListener('mouseup', scheduleSelectionUpdate, { passive:true });
      document.addEventListener('touchend', scheduleSelectionUpdate, { passive:true });
      document.addEventListener('selectionchange', scheduleSelectionUpdate);

      // 기도문 팝업 초기화
      initPrayerToast();
    });

    // 선택 관리
    function handleSelectionChange(){
      const sel = window.getSelection();
      if (!sel) return clearSelectionState();
      const text = (sel.toString() || "").trim();

      const modalEl = document.getElementById('explanation-modal');
      if (modalEl && modalEl.style.display === 'block') {
        const sel2 = window.getSelection();
        if (sel2 && (modalEl.contains(sel2.anchorNode) || modalEl.contains(sel2.focusNode))) return;
      }

      let isInBible = false;
      try {
        if (sel.anchorNode && sel.focusNode) {
          isInBible = bibleTextEl.contains(sel.anchorNode) && bibleTextEl.contains(sel.focusNode);
        }
      } catch(e){ isInBible = false; }

      if (text && isInBible) {
        selectedVerse = text;
        try { selectionRange = sel.getRangeAt(0).cloneRange(); } catch(e){ selectionRange = null; }
        try {
          const range = sel.getRangeAt(0);
          const rects = Array.from(range.getClientRects());
          const rect = rects.length
            ? rects.reduce((u, r) => ({
                top: Math.min(u.top, r.top),
                left: Math.min(u.left, r.left),
                right: Math.max(u.right, r.right),
                bottom: Math.max(u.bottom, r.bottom),
                width: 0, height: 0
              }), { top:Infinity, left:Infinity, right:-Infinity, bottom:-Infinity })
            : range.getBoundingClientRect();
          rect.width  = rect.right - rect.left;
          rect.height = rect.bottom - rect.top;
          positionExplanationButton(rect);
        } catch(e){ resetExplanationButton(); }
      } else {
        clearSelectionState();
      }
    }
    function updateSelectedVerseFromRange(range) {
      if (!range) return;
      const txt = (range.toString() || "").trim();
      if (txt) selectedVerse = txt;
      try {
        const rect = range.getBoundingClientRect();
        positionExplanationButton(rect);
      } catch(e){ resetExplanationButton(); }
    }
    function resetExplanationButton(){
      const container = document.getElementById('explanation-button-container');
      if (!container) return;
      container.style.position = 'fixed';
      container.style.left = '30%';
      container.style.top = '100px';
      container.style.transform = 'translateX(-50%)';
      container.style.display = 'block';
      explanationButtonWrapper.classList.remove('active');
    }
    function clearSelectionState(){ selectedVerse = ""; selectionRange = null; resetExplanationButton(); }

    // 책 버튼 위치
    function positionExplanationButton(rect){
      const container = document.getElementById('explanation-button-container');
      if (!container) return;

      const vw = window.innerWidth;
      const vh = window.innerHeight;
      const margin = 8;
      const pad = 10;
      const viewportCenter = vw / 2;

      const isWide = rect.width >= vw * 0.6 || (rect.left <= margin*2 && rect.right >= vw - margin*2);

      let baseX, transformX;
      if (isWide) { baseX = rect.left + rect.width / 2; transformX = 'translateX(-50%)'; }
      else if (rect.left < viewportCenter * 0.4) { baseX = rect.right; transformX = 'translateX(0)'; }
      else if (rect.right > viewportCenter * 1.6) { baseX = rect.left; transformX = 'translateX(-100%)'; }
      else { baseX = rect.left + rect.width / 2; transformX = 'translateX(-50%)'; }

      const cw = container.offsetWidth || 60;
      const ch = container.offsetHeight || 60;

      const leftEdge =
        transformX === 'translateX(0)'     ? baseX :
        transformX === 'translateX(-50%)'  ? baseX - cw/2 :
                                             baseX - cw;

      let clampedLeftEdge = Math.min(Math.max(leftEdge, margin), vw - margin - cw);

      let finalLeft;
      if (transformX === 'translateX(0)')        finalLeft = clampedLeftEdge;
      else if (transformX === 'translateX(-50%)') finalLeft = clampedLeftEdge + cw/2;
      else                                        finalLeft = clampedLeftEdge + cw;

      let finalTop = rect.bottom + pad;
      if (finalTop + ch + margin > vh) finalTop = Math.max(rect.top - pad - ch, margin);
      finalTop = Math.min(Math.max(finalTop, margin), vh - margin - ch);

      container.style.position = 'fixed';
      container.style.left = `${finalLeft}px`;
      container.style.top  = `${finalTop}px`;
      container.style.transform = transformX;
      container.style.display = 'block';
    }

    // 검색
    function findString(searchText){
      clearHighlight();
      if (searchText == null || searchText.trim() === '') { searchCountEl.textContent = ''; nextLocationBtn.style.display = 'none'; return; }
      const escaped = escapeRegExp(searchText.trim());
      const regex = new RegExp(escaped, 'gi');
      const newContent = originalText.replace(regex, (match) => `<span class="search-highlight">${match}</span>`);
      bibleTextEl.innerHTML = newContent;
      foundSentences = Array.from(bibleTextEl.getElementsByClassName('search-highlight'));
      searchCountEl.textContent = `총 ${foundSentences.length}개 검색됨`;
      if (foundSentences.length > 0) {
        currentSearchIndex = 0;
        foundSentences[currentSearchIndex].scrollIntoView({ behavior:'smooth', block:'center' });
        nextLocationBtn.style.display = 'inline-block';
        updateScrollMarkers();
      } else {
        showModal("검색 결과 없음", `"${searchText}"에 대한 검색 결과가 없습니다.`);
        nextLocationBtn.style.display = 'none';
      }
    }
    function nextLocation(){
      if (!foundSentences.length) return;
      currentSearchIndex = (currentSearchIndex + 1) % foundSentences.length;
      foundSentences[currentSearchIndex].scrollIntoView({ behavior:'smooth', block:'center' });
      updateScrollMarkers();
    }
    function clearHighlight(){
      bibleTextEl.innerHTML = originalText;
      searchCountEl.textContent = '';
      nextLocationBtn.style.display = 'none';
      while (scrollMarkerContainer.firstChild) scrollMarkerContainer.removeChild(scrollMarkerContainer.firstChild);
      foundSentences = [];
      currentSearchIndex = -1;
    }
    function updateScrollMarkers(){
      while (scrollMarkerContainer.firstChild) scrollMarkerContainer.removeChild(scrollMarkerContainer.firstChild);
      const docH = document.documentElement.scrollHeight;
      const vh = window.innerHeight;
      foundSentences.forEach((el) => {
        const marker = document.createElement('div');
        marker.className = 'scroll-marker';
        const topPos = el.getBoundingClientRect().top + window.scrollY;
        const markerPos = Math.min(Math.max((topPos / docH) * vh, 2), vh - 10);
        marker.style.top = markerPos + 'px';
        marker.addEventListener('click', () => { el.scrollIntoView({ behavior:'smooth', block:'center' }); });
        scrollMarkerContainer.appendChild(marker);
      });
    }

    // 모달
    function showModal(title, text, imageUrl=null){
      modalTitle.textContent = title || '';
      modalText.innerHTML = (text || '').toString().replace(/\n/g, '<br>');
      if (imageUrl) { modalImage.src = imageUrl; modalImage.style.display = 'block'; } else { modalImage.src=''; modalImage.style.display='none'; }
      modal.style.display = 'block';
      document.body.classList.add('modal-open');
      setTimeout(() => {
        if (selectionRange) {
          const sel = window.getSelection();
          sel.removeAllRanges();
          try { sel.addRange(selectionRange); } catch(e) {}
        }
      }, 60);
    }
    function showLoadingModal(isImage=false){
      modalTitle.innerHTML = `<span class="loader"></span> ${isImage ? '그림 생성 중...' : '설명 생성 중...'}`;
      modalText.textContent = '설명을 생성 중입니다. 잠시만 기다려 주세요...';
      modalImage.style.display = 'none';
      modal.style.display = 'block';
    }

    modal.addEventListener('wheel', (e) => {
      if (modal.style.display === 'block') e.stopPropagation();
    }, { passive: true });

    function getFullBibleText(){
      const tmp = document.createElement('div');
      tmp.innerHTML = originalText;
      return tmp.textContent.replace(/\s+/g,' ').trim();
    }

    // Generative API 호출
    async function callGenerativeAPI(modalTitleText, prompt){
      const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-05-20:generateContent?key=${apiKey}`;
      const payload = { contents: [ { parts: [ { text: prompt } ] } ] };

      let retryCount = 0; const maxRetries = 3;
      let response = null;
      while (retryCount < maxRetries) {
        try {
          response = await fetch(apiUrl, {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify(payload)
          });
          if (response.ok) break;
          if (response.status === 429) {
            retryCount++;
            const delay = Math.pow(2, retryCount)*1000 + Math.random()*1000;
            await new Promise(r=>setTimeout(r, delay));
          } else throw new Error(`API Error: ${response.status} ${response.statusText}`);
        } catch (err) {
          console.error('API call failed:', err);
          showModal("오류 발생", "API 호출 중 오류가 발생했습니다. 다시 시도해 주세요.");
          return;
        }
      }
      if (!response || !response.ok) { showModal("오류", "설명을 불러오는 데 실패했습니다. 잠시 후 다시 시도해 주세요."); return; }

      try {
        const data = await response.json();
        const content = data?.candidates?.[0]?.content?.parts?.[0]?.text || "응답을 가져오지 못했습니다.";
        showModal(modalTitleText, content);
      } catch (err) {
        console.error('Error processing response:', err);
        showModal("오류", "응답을 처리하는 중 오류가 발생했습니다.");
      }
    }

    async function fetchExplanation(promptText, type){
      let prompt;
      if (type === 'simple') {
        prompt = `[역할] 성경 주석가.
[작업] 선택한 용어/구절을 350–500자 한국어로 간결 설명.
[유형 규칙]
- 지명: 위치·시대·관련 사건
- 인물: 이름의 뜻·역할·연관 지명
- 제사/성물: 용도·상징적 의미
- 동·식물·광물: 상징성
필요 시 대비/유사 2–12가지만 간단히. (이름↔지명 직접 연결이 있으면 함께 언급)
[금지] 장황함·추측·인용.
[입력] "${promptText}"`;
      } else {
        prompt = `[역할] 성경 주석가.
[작업] 선택 구절을 2,500–3,500자 한국어 해설로 심화 분석.
[구성] 개요 → 배경(역사·지리·문화) → 본문 주제·핵심 논지 → 핵심 단어/도상 해석
→ 인물·사건·장소의 기능 → 성경 전체 맥락과의 연결(언약/교리, 유사·대조 2–12가지)
→ (선택) 3–6행 표로 요점 정리.
[규칙] 본문 근거 중심, 난해한 부분은 간명히, 과도한 인용/주석어/반복 금지, 분량 준수.
[긴 입력 시] 절/단락 단위로 요약 후 통합(최종 분량 준수).
[입력] "${promptText}"`;
      }
      showLoadingModal(false);
      await callGenerativeAPI('구절 설명', prompt);
    }

    async function fetchSummary(fullText, type){
      let prompt;
      if (type === 'simple') {
        prompt = `[역할] 성경 주석가.
[작업] 입력된 성경 본문 전체를 450–650자 한국어 한 단락으로 간결 요약.
[중점] 핵심 주제·메시지, 주요 사건 흐름, 하나님 행위/인간 반응. 배경은 한두 문장만. 삶 적용 2–3문장 추가.
[금지] 장황함·추측·인용·소제목·서론/결론 문구. 분량 엄수.
[긴 입력 시] 장 단위로 요약→최종 450–650자로 통합.
[입력] "${fullText}"`;
      } else {
        prompt = `[역할] 성경 주석가.
[작업] 입력 본문을 3,500–5,000자 한국어 해설로 정리.
[구성] 1) 개요  2) 배경(역사·지리·문화)  3) 핵심 주제/신학적 의미
4) 인물·사건·장소의 역할  5) 성경 전체 맥락과 연결(필요 시 유사/대조 2–12가지)
6) (선택) 3–12행 표로 핵심 정리.  7) 결론  8) 삶 적용 4–5문장.
[규칙] 사실 기반, 과장/추측/설교체 금지, 불필요한 반복 금지, 분량 준수.
[긴 입력 시] 장 단위로 개요→통합(최종 분량 준수).
[입력] "${fullText}"`;
      }
      showLoadingModal(false);
      await callGenerativeAPI('본문 요약', prompt);
    }

    function updateSpeed(){ audio.playbackRate = currentSpeed; speedDisplay.textContent = currentSpeed.toFixed(1) + 'x'; }
    function updateFontSizeDisplay(){ const cur = parseFloat(getComputedStyle(bibleTextEl).fontSize); fontSizeEl.textContent = Math.round(cur); }

    // 토글 버튼 로직
    const progressContainer = document.querySelector('.progress-container');
    const speedControls = document.querySelector('.speed-controls');
    const volumeControl = document.querySelector('.volume-control');
    const showProgressBtn = document.getElementById('show-progress');
    const showSpeedBtn = document.getElementById('show-speed');
    const showVolumeBtn = document.getElementById('show-volume');
    let hideTimeout;
    function showOnly(target) {
      progressContainer.style.display = "none";
      speedControls.style.display = "none";
      volumeControl.style.display = "none";
      target.style.display = "flex";
      if (hideTimeout) clearTimeout(hideTimeout);
      hideTimeout = setTimeout(() => { target.style.display = "none"; }, 10000);
    }
    showProgressBtn.addEventListener('click', () => showOnly(progressContainer));
    showSpeedBtn.addEventListener('click', () => showOnly(speedControls));
    showVolumeBtn.addEventListener('click', () => showOnly(volumeControl));

    // ===== 기도문 팝업 제어 =====
  function initPrayerToast(){
  const toast = document.getElementById('prayerToast');
  const closeBtn = document.getElementById('prayerCloseBtn');
  const amenBtn = document.getElementById('prayerAmen');
  const readBtn = document.getElementById('prayerReadAlone');

  const isSiteModalOpen = () => document.body.classList.contains('modal-open');

  function openToast(){
    if (!toast) return;
    if (isSiteModalOpen()) return;            // 사이트 모달이 열려 있으면 숨김
    toast.style.display = 'block';
    document.getElementById('prayerBody')?.focus({ preventScroll:true });
  }
  function closeToast(){
    if (!toast) return;
    toast.style.display = 'none';             // 저장/기억 없음 → 다음 방문 시 다시 표시
  }

  // 페이지 로드 시 항상 표시 (약간 지연)
  setTimeout(openToast, 700);

  // 버튼 동작: 전부 단순 닫기
  closeBtn?.addEventListener('click', () => closeToast());
  amenBtn?.addEventListener('click', () => closeToast());
  readBtn?.addEventListener('click', () => closeToast());

  // 사이트 모달 열림/닫힘에 따라 토스트 표시/숨김
  const observer = new MutationObserver(() => {
    if (isSiteModalOpen()) {
      toast.style.display = 'none';
    } else {
      // 모달이 닫히면 다시 보여줌(사용자가 이미 닫았더라도 새로고침/재방문 시 다시 뜨게 하려면 유지)
      if (toast.style.display !== 'block') toast.style.display = 'block';
    }
  });
  observer.observe(document.body, { attributes:true, attributeFilter:['class'] });
}
  </script>
</body>
</html>

