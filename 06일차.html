<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>통큰통독-06일차</title>
    <link rel="apple-touch-icon" type="image/png" href="https://i.postimg.cc/Qtnq0gFJ/Ezra-icon.png">
    <!-- 수정: 올바른 메타 이름 -->
    <meta name="apple-mobile-web-app-title" content="통큰통독">
    <link rel="shortcut icon" type="image/png" href="https://i.postimg.cc/Qtnq0gFJ/Ezra-icon.png">
    <link rel="mask-icon" type="image/png" href="https://i.postimg.cc/Qtnq0gFJ/Ezra-icon.png">
    <style>
        /* 페이지 기본 스타일 (body 속성은 CSS로 처리) */
        body {
            margin: 0;
            padding-top: 150px;
            font-family: Arial, sans-serif;
            background-color: #FFFFFF;
            color: #000000;
        }

        a:link { color: #0000FF; }
        a:visited { color: #660099; }

        /* 상단 고정 테이블 스타일 */
        .top-fixed-table {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            background-color: transparent;
            border-bottom: none;
            z-index: 100;
            table-layout: fixed;
            padding: 10px 0;
            box-sizing: border-box;
        }
        
        /* 1. 검색 창 스타일 변경 (모바일 최적화) */
        .search-cell { 
            text-align: left; 
            padding-left: 10px; 
            vertical-align: top; 
            width: 30%; 
        }

        .search-cell input[type="text"] {
            /* 검색어 입력창 길이를 50%로 줄임 */
            width: 50%; 
            /* 폰트 크기를 80%로 줄임 (15pt * 0.8 = 12pt) */
            font-size: 12pt;
        }

        .search-cell input[type="submit"],
        .search-cell input[type="reset"] {
            /* 검색 버튼 및 'X' 버튼 크기를 80%로 줄임 */
            font-size: 10pt; /* 13pt * 0.8 = 10.4pt -> 10pt로 조정 */
            padding: 5px 8px;
            height: auto;
        }

        .audio-cell { 
            text-align: right; 
            padding-right: 10px; 
            vertical-align: top; 
            width: 30%; 
        }

        #custom-audio-player { 
            display: flex; 
            flex-direction: column; 
            align-items: center; 
        }

        .player-controls { 
            display: flex; 
            align-items: center; 
            justify-content: center; 
            gap: 10px; 
            margin-bottom: 5px; 
        }

        .time-display { 
            font-size: 14px; 
            color: #555; 
            margin: 0 5px; 
        }

        /* 2. 오디오 컨트롤 버튼 크기 변경 (70%로 줄임) */
        .control-btn { 
            /* 40px * 0.7 = 28px */
            width: 28px; 
            height: 28px; 
            font-size: 14px; /* 18px * 0.7 = 12.6px -> 14px로 조정 */
            cursor: pointer; 
            border: 1px solid #ccc; 
            background-color: #fff; 
            border-radius: 5px; 
        }

        .control-btn:hover { 
            background-color: #e0e0e0; 
        }

        #play-btn { background-color: #d1f3d4; }
        #pause-btn { background-color: #fff6d6; }
        #stop-btn { background-color: #fddddd; }

        .speed-controls { 
            display: flex; 
            align-items: center; 
            justify-content: center; 
            gap: 5px; 
            margin-bottom: 5px; 
        }

        .speed-btn { 
            /* 30px * 0.7 = 21px */
            width: 21px; 
            height: 21px; 
            font-size: 10px; /* 14px * 0.7 = 9.8px -> 10px로 조정 */
            cursor: pointer; 
            border: 1px solid #ccc; 
            border-radius: 3px; 
            background-color: #fff; 
        }

        .speed-btn:hover { 
            background-color: #e0e0e0; 
        }

        .speed-display { 
            font-weight: bold; 
            color: #007BFF; 
            width: 50px; 
            text-align: center; 
        }

        .volume-control { 
            display: flex; 
            align-items: center; 
            justify-content: center; 
            gap: 5px; 
        }

        input[type="range"] { 
            -webkit-appearance: none; 
            width: 160px; 
            height: 5px; 
            background: #d3d3d3; 
            outline: none; 
            opacity: 0.7; 
            transition: opacity .2s; 
        }

/* 🎵 오디오 타임바 전용 */
#progress-bar {
    width: 190px; /* 150% 확대 */
}

        input[type="range"]::-webkit-slider-thumb { 
            -webkit-appearance: none; 
            appearance: none; 
            width: 15px; 
            height: 15px; 
            background: #007BFF; 
            cursor: pointer; 
            border-radius: 50%; 
        }

        /* 3. 구절 설명 버튼 컨테이너 스타일 */
        /* 초기 위치는 고정으로 유지하고, 선택 시 위치는 JS에서 동적으로 변경 */
        .explanation-button-container {
            position: fixed;
            top: 130px; /* 폰트 크기 조절 버튼 위로 배치 */
            left: 50%;
            transform: translateX(-50%);
            z-index: 100;
            display: block;
            justify-content: center;
            align-items: center;
            padding: 0 10px;
            /* 부드러운 이동을 위한 transition 추가 */
            transition: top 0.2s ease, left 0.2s ease, transform 0.2s ease;
        }

        .explanation-button-wrapper {
            position: relative;
            display: inline-block;
            cursor: pointer;
        }

        .explanation-icon-button {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background-color: #ff99cc;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);
            border: none;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 40px;
            z-index: 2;
            position: relative;
        }

        /* 하위 버튼이 세로로 나타나도록 변경 */
        .explanation-sub-buttons {
            display: flex;
            flex-direction: column; /* 세로 배열로 변경 */
            justify-content: center;
            align-items: center; /* 버튼을 중앙에 정렬 */
            gap: 10px;
            opacity: 0;
            visibility: hidden;
            transition: opacity 0.3s ease, visibility 0.3s ease;
            position: absolute;
            left: 50%;
            transform: translateX(-50%) translateY(25px);
            z-index: 1;
        }

        /* 'active' 클래스가 추가되면 서브 버튼이 나타남 */
        .explanation-button-wrapper.active .explanation-sub-buttons {
            opacity: 1;
            visibility: visible;
            transform: translateX(-50%) translateY(0);
        }

        .explanation-sub-button {
            padding: 5px 10px;
            font-size: 24px;
            height: auto;
            background-color: #ff99cc;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);
            transition: transform 0.2s;
            white-space: nowrap; 
        }

        .explanation-sub-button:hover { transform: scale(1.05); }
        
        /* 4. Font Size 컨트롤 크기 변경 (50%로 줄임) */
        .container { 
            width: 100%; 
            text-align: center; 
        }

        .font-size-label {
            /* 40px * 0.5 = 20px */
            font-size: 20px !important;
            margin-right: 20px; 
            font-style: normal; 
            font-weight: bold;
            color: blue;
        }
        
        #font-size { 
            /* 40px * 0.5 = 20px */
            font-size: 20px !important;
            margin: 0 5px; 
            font-style: normal; 
            font-weight: bold; 
            color: red;
        }
        
        #down, #up {
            /* 40px * 0.5 = 20px */
            width: 27px; /* 54px * 0.5 */
            height: 27px; /* 54px * 0.5 */
            font-size: 20px;
            font-weight: normal; 
            color: red; 
            background-color: #fff; 
            border: 1px solid #ccc; 
            border-radius: 5px; 
            cursor: pointer;
        }

        h2 { 
            padding: 0; 
            text-align: left; 
            margin-left: 15px; 
            margin-right: 15px; 
        }

        p { display: inline-block; }

        /* 모달 */
        .modal { display: none; position: fixed; z-index: 200; left: 0; top: 0; width: 100%; height: 100%; overflow: auto; background-color: rgba(0,0,0,0.4); }
        .modal-content { background-color: #fefefe; margin: 15% auto; padding: 20px; border: 1px solid #888; width: 80%; border-radius: 10px; box-shadow: 0 4px 8px rgba(0,0,0,0.2); text-align: left; }
        #modal-image { max-width: 100%; height: auto; margin-bottom: 20px; border-radius: 8px; display: none; }
        .close-button { color: #aaa; float: right; font-size: 28px; font-weight: bold; }
        .close-button:hover, .close-button:focus { color: black; text-decoration: none; cursor: pointer; }

        /* 로딩 스피너 */
        .loader { border: 4px solid #f3f3f3; border-top: 4px solid #3498db; border-radius: 50%; width: 20px; height: 20px; animation: spin 2s linear infinite; display: inline-block; vertical-align: middle; margin-right: 5px; }
        @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }

        .search-highlight { background-color: yellow; color: black; }
        .scroll-marker-container { position: fixed; top: 0; right: 0; width: 8px; height: 100vh; z-index: 99; pointer-events: none; }
        .scroll-marker { position: absolute; right: 0; width: 8px; height: 8px; background-color: red; border-radius: 50%; box-shadow: 0 0 5px rgba(255, 0, 0, 0.7); cursor: pointer; pointer-events: auto; }
        .scroll-marker:hover { transform: scale(1.5); transition: transform 0.2s ease; }

        #search-count-container { display: flex; align-items: center; gap: 10px; }
        #search-count { font-size: 15pt; color: #007BFF; font-weight: bold; margin-left: 10px; white-space: nowrap; }
        #next-location-btn { padding: 5px 10px; font-size: 12pt; cursor: pointer; border: 1px solid #ccc; background-color: #f0f0f0; border-radius: 5px; display: none; }
    
        /* iOS 길게 눌렀을 때 "복사/메뉴" 방지 */
         #bible-text {
         -webkit-user-select: text; /* iOS Safari에서 텍스트 선택 허용 */
         user-select: text;          /* 다른 브라우저에서도 동일 */
         -webkit-touch-callout: none; /* 📱 iOS에서 길게 눌렀을 때 복사/공유 메뉴 비활성화 */
     }
    </style>
</head>
<body>
    <table class="top-fixed-table" id="main-table" cellpadding="0" cellspacing="0">
        <tr>
            <td class="search-cell">
                <form name="f1" action="" onsubmit="findString(this.t1.value); return false">
                    <input type="reset" name="b2" value="X">
                    <input type="text" placeholder="검색어를 입력하세요" name="t1" value="">
                    <input type="submit" name="b1" value="검색">
                    <div id="search-count-container">
                        <span id="search-count"></span>
                        <button type="button" id="next-location-btn" onclick="nextLocation()">다음 위치</button>
                    </div>
                </form>
            </td>
            <td class="audio-cell">
                <div id="custom-audio-player">
    <audio id="audio-file" preload="auto">
        <source src="https://vod47.anyline.co.kr/vod_ezra/%EC%9D%BD%EA%B8%B0%2006.mp3" type="audio/mp3">
    </audio>
    <div class="player-controls">
        <span id="current-time" class="time-display">0:00</span>
        <button id="play-btn" class="control-btn">▶</button>
        <button id="pause-btn" class="control-btn">⏸</button>
        <button id="stop-btn" class="control-btn">■</button>
        <span id="remaining-time" class="time-display">0:00</span>
    </div>
    <input type="range" id="progress-bar" min="0" max="100" value="0" step="0.01">
    <div class="speed-controls">
        <button id="speed-down-02" class="speed-btn">&lt;&lt;</button>
        <button id="speed-down-01" class="speed-btn">&lt;</button>
        <span id="speed-display" class="speed-display">1.0x</span>
        <button id="speed-up-01" class="speed-btn">&gt;</button>
        <button id="speed-up-02" class="speed-btn">&gt;&gt;</button>
    </div>
    <div class="volume-control">
        <span style="font-size:12px;">볼륨</span>
        <input type="range" id="volume-slider" min="0" max="1" step="0.01" value="1">
    </div>
                </div>
            </td>
        </tr>
    </table>
    
    <!-- 3. 구절 설명 버튼 컨테이너: 초기부터 보이게 됩니다 -->
    <div class="explanation-button-container" id="explanation-button-container">
        <div class="explanation-button-wrapper">
            <button class="explanation-icon-button" id="explanation-icon-button">
                <span>📖</span>
            </button>
            <div class="explanation-sub-buttons">
                <!-- 기존 버튼 유지 -->
                <button class="explanation-sub-button" id="detailed-explanation-button">상세 구절설명</button>
                <button class="explanation-sub-button" id="simple-explanation-button">간단 구절설명</button>
                <!-- 새로운 버튼 추가 -->
                <button class="explanation-sub-button" id="summary-simple-button">본문요약 간단</button>
                <button class="explanation-sub-button" id="summary-detailed-button">본문요약 상세</button>
            </div>
        </div>
    </div>

    <div class="container">
        <br>
        <p class="font-size-label">Font Size</p>
        <button id="down">-</button>
        <p id="font-size">20</p>
        <button id="up">+</button>
    </div>

    <!-- 5. 줄 간격 유지를 위해 <br></br> 태그 유지 -->
    <div>
    <h2 id="bible-text" style="line-height: 1.2em;margin-left:15px;margin-right:15px;font-style: normal; font-weight: normal; color: black;font-size: 20px;word-break: break-all;">
      <strong>

통독 6일차
<br>범위: 출애굽기 13장- 24장</br>
<br>&nbsp;</br>

</strong>
<strong><br><font color="#4682b4">출애굽기 13 장</font></br></strong>
<br><i><font color="#808080">*무교절*</font></i></br>
<br>1 여호와께서 모세에게 일러 이르시되</br>
<br>2 이스라엘 자손 중에서 사람이나 짐승을 막론하고 태에서 처음 난 모든 것은 다 거룩히 구별하여 내게 돌리라 이는 내 것이니라 하시니라</br>
<br>3 모세가 백성에게 이르되 너희는 애굽 곧 종 되었던 집에서 나온 그 날을 기념하여 유교병을 먹지 말라 여호와께서 그 손의 권능으로 너희를 그 곳에서 인도해 내셨음이니라</br>
<br>4 아빕월 이 날에 너희가 나왔으니</br>
<br>5 여호와께서 너를 인도하여 가나안 사람과 헷 사람과 아모리 사람과 히위 사람과 여부스 사람의 땅 곧 네게 주시려고 네 조상들에게 맹세하신 바 젖과 꿀이 흐르는 땅에 이르게 하시거든 너는 이 달에 이 예식을 지켜</br>
<br>6 이레 동안 무교병을 먹고 일곱째 날에는 여호와께 절기를 지키라</br>
<br>7 이레 동안에는 무교병을 먹고 유교병을 네게 보이지 아니하게 하며 네 땅에서 누룩을 네게 보이지 아니하게 하라</br>
<br>8 너는 그 날에 네 아들에게 보여 이르기를 이 예식은 내가 애굽에서 나올 때에 여호와께서 나를 위하여 행하신 일로 말미암음이라 하고</br>
<br>9 이것으로 네 손의 기호와 네 미간의 표를 삼고 여호와의 율법이 네 입에 있게 하라 이는 여호와께서 강하신 손으로 너를 애굽에서 인도하여 내셨음이니</br>
<br>10 해마다 절기가 되면 이 규례를 지킬지니라</br>
<br><i><font color="#808080">*태에서 처음 난 것*</font></i></br>
<br>11 여호와께서 너와 네 조상에게 맹세하신 대로 너를 가나안 사람의 땅에 인도하시고 그 땅을 네게 주시거든</br>
<br>12 너는 태에서 처음 난 모든 것과 네게 있는 가축의 태에서 처음 난 것을 다 구별하여 여호와께 돌리라 수컷은 여호와의 것이니라</br>
<br>13 나귀의 첫 새끼는 다 어린 양으로 대속할 것이요 그렇게 하지 아니하려면 그 목을 꺾을 것이며 네 아들 중 처음 난 모든 자는 대속할지니라</br>
<br>14 후일에 네 아들이 네게 묻기를 이것이 어찌 됨이냐 하거든 너는 그에게 이르기를 여호와께서 그 손의 권능으로 우리를 애굽에서 곧 종이 되었던 집에서 인도하여 내실새</br>
<br>15 그 때에 바로가 완악하여 우리를 보내지 아니하매 여호와께서 애굽 나라 가운데 처음 난 모든 것은 사람의 장자로부터 가축의 처음 난 것까지 다 죽이셨으므로 태에서 처음 난 모든 수컷들은 내가 여호와께 제사를 드려서 내 아들 중에 모든 처음 난 자를 다 대속하리니</br>
<br>16 이것이 네 손의 기호와 네 미간의 표가 되리라 이는 여호와께서 그 손의 권능으로 우리를 애굽에서 인도하여 내셨음이니라 할지니라</br>
<br><i><font color="#808080">*구름 기둥과 불 기둥*</font></i></br>
<br>17 바로가 백성을 보낸 후에 블레셋 사람의 땅의 길은 가까울지라도 하나님이 그들을 그 길로 인도하지 아니하셨으니 이는 하나님이 말씀하시기를 이 백성이 전쟁을 하게 되면 마음을 돌이켜 애굽으로 돌아갈까 하셨음이라</br>
<br>18 그러므로 하나님이 홍해의 광야 길로 돌려 백성을 인도하시매 이스라엘 자손이 애굽 땅에서 대열을 지어 나올 때에</br>
<br>19 모세가 요셉의 유골을 가졌으니 이는 요셉이 이스라엘 자손으로 단단히 맹세하게 하여 이르기를 하나님이 반드시 너희를 찾아오시리니 너희는 내 유골을 여기서 가지고 나가라 하였음이더라</br>
<br>20 그들이 숙곳을 떠나서 광야 끝 에담에 장막을 치니</br>
<br>21 여호와께서 그들 앞에서 가시며 낮에는 구름 기둥으로 그들의 길을 인도하시고 밤에는 불 기둥을 그들에게 비추사 낮이나 밤이나 진행하게 하시니</br>
<br>22 낮에는 구름 기둥, 밤에는 불 기둥이 백성 앞에서 떠나지 아니하니라</br>
<br>&nbsp;</br>
<strong><br><font color="#4682b4">출애굽기 14 장</font></br></strong>
<br><i><font color="#808080">*홍해를 건너다*</font></i></br>
<br>1 여호와께서 모세에게 말씀하여 이르시되</br>
<br>2 이스라엘 자손에게 명령하여 돌이켜 바다와 믹돌 사이의 비하히롯 앞 곧 바알스본 맞은편 바닷가에 장막을 치게 하라</br>
<br>3 바로가 이스라엘 자손에 대하여 말하기를 그들이 그 땅에서 멀리 떠나 광야에 갇힌 바 되었다 하리라</br>
<br>4 내가 바로의 마음을 완악하게 한즉 바로가 그들의 뒤를 따르리니 내가 그와 그의 온 군대로 말미암아 영광을 얻어 애굽 사람들이 나를 여호와인 줄 알게 하리라 하시매 무리가 그대로 행하니라</br>
<br>5 그 백성이 도망한 사실이 애굽 왕에게 알려지매 바로와 그의 신하들이 그 백성에 대하여 마음이 변하여 이르되 우리가 어찌 이같이 하여 이스라엘을 우리를 섬김에서 놓아 보내었는가 하고</br>
<br>6 바로가 곧 그의 병거를 갖추고 그의 백성을 데리고 갈새</br>
<br>7 선발된 병거 육백 대와 애굽의 모든 병거를 동원하니 지휘관들이 다 거느렸더라</br>
<br>8 여호와께서 애굽 왕 바로의 마음을 완악하게 하셨으므로 그가 이스라엘 자손의 뒤를 따르니 이스라엘 자손이 담대히 나갔음이라</br>
<br>9 애굽 사람들과 바로의 말들, 병거들과 그 마병과 그 군대가 그들의 뒤를 따라 바알스본 맞은편 비하히롯 곁 해변 그들이 장막 친 데에 미치니라</br>
<br>10 바로가 가까이 올 때에 이스라엘 자손이 눈을 들어 본즉 애굽 사람들이 자기들 뒤에 이른지라 이스라엘 자손이 심히 두려워하여 여호와께 부르짖고</br>
<br>11 그들이 또 모세에게 이르되 애굽에 매장지가 없어서 당신이 우리를 이끌어 내어 이 광야에서 죽게 하느냐 어찌하여 당신이 우리를 애굽에서 이끌어 내어 우리에게 이같이 하느냐</br>
<br>12 우리가 애굽에서 당신에게 이른 말이 이것이 아니냐 이르기를 우리를 내버려 두라 우리가 애굽 사람을 섬길 것이라 하지 아니하더냐 애굽 사람을 섬기는 것이 광야에서 죽는 것보다 낫겠노라</br>
<br>13 모세가 백성에게 이르되 너희는 두려워하지 말고 가만히 서서 여호와께서 오늘 너희를 위하여 행하시는 구원을 보라 너희가 오늘 본 애굽 사람을 영원히 다시 보지 아니하리라</br>
<br>14 여호와께서 너희를 위하여 싸우시리니 너희는 가만히 있을지니라</br>
<br>15 여호와께서 모세에게 이르시되 너는 어찌하여 내게 부르짖느냐 이스라엘 자손에게 명령하여 앞으로 나아가게 하고</br>
<br>16 지팡이를 들고 손을 바다 위로 내밀어 그것이 갈라지게 하라 이스라엘 자손이 바다 가운데서 마른 땅으로 행하리라</br>
<br>17 내가 애굽 사람들의 마음을 완악하게 할 것인즉 그들이 그 뒤를 따라 들어갈 것이라 내가 바로와 그의 모든 군대와 그의 병거와 마병으로 말미암아 영광을 얻으리니</br>
<br>18 내가 바로와 그의 병거와 마병으로 말미암아 영광을 얻을 때에야 애굽 사람들이 나를 여호와인 줄 알리라 하시더니</br>
<br>19 이스라엘 진 앞에 가던 하나님의 사자가 그들의 뒤로 옮겨 가매 구름 기둥도 앞에서 그 뒤로 옮겨</br>
<br>20 애굽 진과 이스라엘 진 사이에 이르러 서니 저쪽에는 구름과 흑암이 있고 이쪽에는 밤이 밝으므로 밤새도록 저쪽이 이쪽에 가까이 못하였더라</br>
<br>21 모세가 바다 위로 손을 내밀매 여호와께서 큰 동풍이 밤새도록 바닷물을 물러가게 하시니 물이 갈라져 바다가 마른 땅이 된지라</br>
<br>22 이스라엘 자손이 바다 가운데를 육지로 걸어가고 물은 그들의 좌우에 벽이 되니</br>
<br>23 애굽 사람들과 바로의 말들, 병거들과 그 마병들이 다 그들의 뒤를 추격하여 바다 가운데로 들어오는지라</br>
<br>24 새벽에 여호와께서 불과 구름 기둥 가운데서 애굽 군대를 보시고 애굽 군대를 어지럽게 하시며</br>
<br>25 그들의 병거 바퀴를 벗겨서 달리기가 어렵게 하시니 애굽 사람들이 이르되 이스라엘 앞에서 우리가 도망하자 여호와가 그들을 위하여 싸워 애굽 사람들을 치는도다</br>
<br>26 여호와께서 모세에게 이르시되 네 손을 바다 위로 내밀어 물이 애굽 사람들과 그들의 병거들과 마병들 위에 다시 흐르게 하라 하시니</br>
<br>27 모세가 곧 손을 바다 위로 내밀매 새벽이 되어 바다의 힘이 회복된지라 애굽 사람들이 물을 거슬러 도망하나 여호와께서 애굽 사람들을 바다 가운데 엎으시니</br>
<br>28 물이 다시 흘러 병거들과 기병들을 덮되 그들의 뒤를 따라 바다에 들어간 바로의 군대를 다 덮으니 하나도 남지 아니하였더라</br>
<br>29 그러나 이스라엘 자손은 바다 가운데를 육지로 행하였고 물이 좌우에 벽이 되었더라</br>
<br>30 그 날에 여호와께서 이같이 이스라엘을 애굽 사람의 손에서 구원하시매 이스라엘이 바닷가에서 애굽 사람들이 죽어 있는 것을 보았더라</br>
<br>31 이스라엘이 여호와께서 애굽 사람들에게 행하신 그 큰 능력을 보았으므로 백성이 여호와를 경외하며 여호와와 그의 종 모세를 믿었더라</br>
<br>&nbsp;</br>
<strong><br><font color="#4682b4">출애굽기 16 장</font></br></strong>
<br><i><font color="#808080">*만나와 메추라기*</font></i></br>
<br>1 이스라엘 자손의 온 회중이 엘림에서 떠나 엘림과 시내 산 사이에 있는 신 광야에 이르니 애굽에서 나온 후 둘째 달 십오일이라</br>
<br>2 이스라엘 자손 온 회중이 그 광야에서 모세와 아론을 원망하여</br>
<br>3 이스라엘 자손이 그들에게 이르되 우리가 애굽 땅에서 고기 가마 곁에 앉아 있던 때와 떡을 배불리 먹던 때에 여호와의 손에 죽었더라면 좋았을 것을 너희가 이 광야로 우리를 인도해 내어 이 온 회중이 주려 죽게 하는도다</br>
<br>4 그 때에 여호와께서 모세에게 이르시되 보라 내가 너희를 위하여 하늘에서 양식을 비 같이 내리리니 백성이 나가서 일용할 것을 날마다 거둘 것이라 이같이 하여 그들이 내 율법을 준행하나 아니하나 내가 시험하리라</br>
<br>5 여섯째 날에는 그들이 그 거둔 것을 준비할지니 날마다 거두던 것의 갑절이 되리라</br>
<br>6 모세와 아론이 온 이스라엘 자손에게 이르되 저녁이 되면 너희가 여호와께서 너희를 애굽 땅에서 인도하여 내셨음을 알 것이요</br>
<br>7 아침에는 너희가 여호와의 영광을 보리니 이는 여호와께서 너희가 자기를 향하여 원망함을 들으셨음이라 우리가 누구이기에 너희가 우리에게 대하여 원망하느냐</br>
<br>8 모세가 또 이르되 여호와께서 저녁에는 너희에게 고기를 주어 먹이시고 아침에는 떡으로 배불리시리니 이는 여호와께서 자기를 향하여 너희가 원망하는 그 말을 들으셨음이라 우리가 누구냐 너희의 원망은 우리를 향하여 함이 아니요 여호와를 향하여 함이로다</br>
<br>9 모세가 또 아론에게 이르되 이스라엘 자손의 온 회중에게 말하기를 여호와께 가까이 나아오라 여호와께서 너희의 원망함을 들으셨느니라 하라</br>
<br>10 아론이 이스라엘 자손의 온 회중에게 말하매 그들이 광야를 바라보니 여호와의 영광이 구름 속에 나타나더라</br>
<br>11 여호와께서 모세에게 말씀하여 이르시되</br>
<br>12 내가 이스라엘 자손의 원망함을 들었노라 그들에게 말하여 이르기를 너희가 해 질 때에는 고기를 먹고 아침에는 떡으로 배부르리니 내가 여호와 너희의 하나님인 줄 알리라 하라 하시니라</br>
<br>13 저녁에는 메추라기가 와서 진에 덮이고 아침에는 이슬이 진 주위에 있더니</br>
<br>14 그 이슬이 마른 후에 광야 지면에 작고 둥글며 서리 같이 가는 것이 있는지라</br>
<br>15 이스라엘 자손이 보고 그것이 무엇인지 알지 못하여 서로 이르되 이것이 무엇이냐 하니 모세가 그들에게 이르되 이는 여호와께서 너희에게 주어 먹게 하신 양식이라</br>
<br>16 여호와께서 이같이 명령하시기를 너희 각 사람은 먹을 만큼만 이것을 거둘지니 곧 너희 사람 수효대로 한 사람에 한 오멜씩 거두되 각 사람이 그의 장막에 있는 자들을 위하여 거둘지니라 하셨느니라</br>
<br>17 이스라엘 자손이 그같이 하였더니 그 거둔 것이 많기도 하고 적기도 하나</br>
<br>18 오멜로 되어 본즉 많이 거둔 자도 남음이 없고 적게 거둔 자도 부족함이 없이 각 사람은 먹을 만큼만 거두었더라</br>
<br>19 모세가 그들에게 이르기를 아무든지 아침까지 그것을 남겨두지 말라 하였으나</br>
<br>20 그들이 모세에게 순종하지 아니하고 더러는 아침까지 두었더니 벌레가 생기고 냄새가 난지라 모세가 그들에게 노하니라</br>
<br>21 무리가 아침마다 각 사람은 먹을 만큼만 거두었고 햇볕이 뜨겁게 쬐면 그것이 스러졌더라</br>
<br>22 여섯째 날에는 각 사람이 갑절의 식물 곧 하나에 두 오멜씩 거둔지라 회중의 모든 지도자가 와서 모세에게 알리매</br>
<br>23 모세가 그들에게 이르되 여호와께서 이같이 말씀하셨느니라 내일은 휴일이니 여호와께 거룩한 안식일이라 너희가 구울 것은 굽고 삶을 것은 삶고 그 나머지는 다 너희를 위하여 아침까지 간수하라</br>
<br>24 그들이 모세의 명령대로 아침까지 간수하였으나 냄새도 나지 아니하고 벌레도 생기지 아니한지라</br>
<br>25 모세가 이르되 오늘은 그것을 먹으라 오늘은 여호와의 안식일인즉 오늘은 너희가 들에서 그것을 얻지 못하리라</br>
<br>26 엿새 동안은 너희가 그것을 거두되 일곱째 날은 안식일인즉 그 날에는 없으리라 하였으나</br>
<br>27 일곱째 날에 백성 중 어떤 사람들이 거두러 나갔다가 얻지 못하니라</br>
<br>28 여호와께서 모세에게 이르시되 어느 때까지 너희가 내 계명과 내 율법을 지키지 아니하려느냐</br>
<br>29 볼지어다 여호와가 너희에게 안식일을 줌으로 여섯째 날에는 이틀 양식을 너희에게 주는 것이니 너희는 각기 처소에 있고 일곱째 날에는 아무도 그의 처소에서 나오지 말지니라</br>
<br>30 그러므로 백성이 일곱째 날에 안식하니라</br>
<br>31 이스라엘 족속이 그 이름을 만나라 하였으며 깟씨 같이 희고 맛은 꿀 섞은 과자 같았더라</br>
<br>32 모세가 이르되 여호와께서 이같이 명령하시기를 이것을 오멜에 채워서 너희의 대대 후손을 위하여 간수하라 이는 내가 너희를 애굽 땅에서 인도하여 낼 때에 광야에서 너희에게 먹인 양식을 그들에게 보이기 위함이니라 하셨다 하고</br>
<br>33 또 모세가 아론에게 이르되 항아리를 가져다가 그 속에 만나 한 오멜을 담아 여호와 앞에 두어 너희 대대로 간수하라</br>
<br>34 아론이 여호와께서 모세에게 명령하신 대로 그것을 증거판 앞에 두어 간수하게 하였고</br>
<br>35 사람이 사는 땅에 이르기까지 이스라엘 자손이 사십 년 동안 만나를 먹었으니 곧 가나안 땅 접경에 이르기까지 그들이 만나를 먹었더라</br>
<br>36 오멜은 십분의 일 에바이더라</br>
<br>&nbsp;</br>
<strong><br><font color="#4682b4">출애굽기 17 장</font></br></strong>
<br><i><font color="#808080">*반석에서 물이 나오다*</font></i></br>
<br>1 이스라엘 자손의 온 회중이 여호와의 명령대로 신 광야에서 떠나 그 노정대로 행하여 르비딤에 장막을 쳤으나 백성이 마실 물이 없는지라</br>
<br>2 백성이 모세와 다투어 이르되 우리에게 물을 주어 마시게 하라 모세가 그들에게 이르되 너희가 어찌하여 나와 다투느냐 너희가 어찌하여 여호와를 시험하느냐</br>
<br>3 거기서 백성이 목이 말라 물을 찾으매 그들이 모세에게 대하여 원망하여 이르되 당신이 어찌하여 우리를 애굽에서 인도해 내어서 우리와 우리 자녀와 우리 가축이 목말라 죽게 하느냐</br>
<br>4 모세가 여호와께 부르짖어 이르되 내가 이 백성에게 어떻게 하리이까 그들이 조금 있으면 내게 돌을 던지겠나이다</br>
<br>5 여호와께서 모세에게 이르시되 백성 앞을 지나서 이스라엘 장로들을 데리고 나일 강을 치던 네 지팡이를 손에 잡고 가라</br>
<br>6 내가 호렙 산에 있는 그 반석 위 거기서 네 앞에 서리니 너는 그 반석을 치라 그것에서 물이 나오리니 백성이 마시리라 모세가 이스라엘 장로들의 목전에서 그대로 행하니라</br>
<br>7 그가 그 곳 이름을 맛사 또는 므리바라 불렀으니 이는 이스라엘 자손이 다투었음이요 또는 그들이 여호와를 시험하여 이르기를 여호와께서 우리 중에 계신가 안 계신가 하였음이더라</br>
<br><i><font color="#808080">*아말렉과 싸우다*</font></i></br>
<br>8 그 때에 아말렉이 와서 이스라엘과 르비딤에서 싸우니라</br>
<br>9 모세가 여호수아에게 이르되 우리를 위하여 사람들을 택하여 나가서 아말렉과 싸우라 내일 내가 하나님의 지팡이를 손에 잡고 산 꼭대기에 서리라</br>
<br>10 여호수아가 모세의 말대로 행하여 아말렉과 싸우고 모세와 아론과 훌은 산 꼭대기에 올라가서</br>
<br>11 모세가 손을 들면 이스라엘이 이기고 손을 내리면 아말렉이 이기더니</br>
<br>12 모세의 팔이 피곤하매 그들이 돌을 가져다가 모세의 아래에 놓아 그가 그 위에 앉게 하고 아론과 훌이 한 사람은 이쪽에서, 한 사람은 저쪽에서 모세의 손을 붙들어 올렸더니 그 손이 해가 지도록 내려오지 아니한지라</br>
<br>13 여호수아가 칼날로 아말렉과 그 백성을 쳐서 무찌르니라</br>
<br>14 여호와께서 모세에게 이르시되 이것을 책에 기록하여 기념하게 하고 여호수아의 귀에 외워 들리라 내가 아말렉을 없이하여 천하에서 기억도 못 하게 하리라</br>
<br>15 모세가 제단을 쌓고 그 이름을 여호와 닛시라 하고</br>
<br>16 이르되 여호와께서 맹세하시기를 여호와가 아말렉과 더불어 대대로 싸우리라 하셨다 하였더라</br>
<br>&nbsp;</br>
<strong><br><font color="#4682b4">출애굽기 18 장</font></br></strong>
<br><i><font color="#808080">*이드로가 모세를 방문하다*</font></i></br>
<br>1 모세의 장인이며 미디안 제사장인 이드로가 하나님이 모세에게와 자기 백성 이스라엘에게 하신 일 곧 여호와께서 이스라엘을 애굽에서 인도하여 내신 모든 일을 들으니라</br>
<br>2 모세의 장인 이드로가 모세가 돌려 보냈던 그의 아내 십보라와</br>
<br>3 그의 두 아들을 데리고 왔으니 그 하나의 이름은 게르솜이라 이는 모세가 이르기를 내가 이방에서 나그네가 되었다 함이요</br>
<br>4 하나의 이름은 엘리에셀이라 이는 내 아버지의 하나님이 나를 도우사 바로의 칼에서 구원하셨다 함이더라</br>
<br>5 모세의 장인 이드로가 모세의 아들들과 그의 아내와 더불어 광야에 들어와 모세에게 이르니 곧 모세가 하나님의 산에 진 친 곳이라</br>
<br>6 그가 모세에게 말을 전하되 네 장인 나 이드로가 네 아내와 그와 함께 한 그의 두 아들과 더불어 네게 왔노라</br>
<br>7 모세가 나가서 그의 장인을 맞아 절하고 그에게 입 맞추고 그들이 서로 문안하고 함께 장막에 들어가서</br>
<br>8 모세가 여호와께서 이스라엘을 위하여 바로와 애굽 사람에게 행하신 모든 일과 길에서 그들이 당한 모든 고난과 여호와께서 그들을 구원하신 일을 다 그 장인에게 말하매</br>
<br>9 이드로가 여호와께서 이스라엘에게 큰 은혜를 베푸사 애굽 사람의 손에서 구원하심을 기뻐하여</br>
<br>10 이드로가 이르되 여호와를 찬송하리로다 너희를 애굽 사람의 손에서와 바로의 손에서 건져내시고 백성을 애굽 사람의 손 아래에서 건지셨도다</br>
<br>11 이제 내가 알았도다 여호와는 모든 신보다 크시므로 이스라엘에게 교만하게 행하는 그들을 이기셨도다 하고</br>
<br>12 모세의 장인 이드로가 번제물과 희생제물들을 하나님께 가져오매 아론과 이스라엘 모든 장로가 와서 모세의 장인과 함께 하나님 앞에서 떡을 먹으니라</br>
<br><i><font color="#808080">*우두머리를 세워 재판하게 하다*</font></i></br>
<br>13 이튿날 모세가 백성을 재판하느라고 앉아 있고 백성은 아침부터 저녁까지 모세 곁에 서 있는지라</br>
<br>14 모세의 장인이 모세가 백성에게 행하는 모든 일을 보고 이르되 네가 이 백성에게 행하는 이 일이 어찌 됨이냐 어찌하여 네가 홀로 앉아 있고 백성은 아침부터 저녁까지 네 곁에 서 있느냐</br>
<br>15 모세가 그의 장인에게 대답하되 백성이 하나님께 물으려고 내게로 옴이라</br>
<br>16 그들이 일이 있으면 내게로 오나니 내가 그 양쪽을 재판하여 하나님의 율례와 법도를 알게 하나이다</br>
<br>17 모세의 장인이 그에게 이르되 네가 하는 것이 옳지 못하도다</br>
<br>18 너와 또 너와 함께 한 이 백성이 필경 기력이 쇠하리니 이 일이 네게 너무 중함이라 네가 혼자 할 수 없으리라</br>
<br>19 이제 내 말을 들으라 내가 네게 방침을 가르치리니 하나님이 너와 함께 계실지로다 너는 하나님 앞에서 그 백성을 위하여 그 사건들을 하나님께 가져오며</br>
<br>20 그들에게 율례와 법도를 가르쳐서 마땅히 갈 길과 할 일을 그들에게 보이고</br>
<br>21 너는 또 온 백성 가운데서 능력 있는 사람들 곧 하나님을 두려워하며 진실하며 불의한 이익을 미워하는 자를 살펴서 백성 위에 세워 천부장과 백부장과 오십부장과 십부장을 삼아</br>
<br>22 그들이 때를 따라 백성을 재판하게 하라 큰 일은 모두 네게 가져갈 것이요 작은 일은 모두 그들이 스스로 재판할 것이니 그리하면 그들이 너와 함께 담당할 것인즉 일이 네게 쉬우리라</br>
<br>23 네가 만일 이 일을 하고 하나님께서도 네게 허락하시면 네가 이 일을 감당하고 이 모든 백성도 자기 곳으로 평안히 가리라</br>
<br>24 이에 모세가 자기 장인의 말을 듣고 그 모든 말대로 하여</br>
<br>25 모세가 이스라엘 무리 중에서 능력 있는 사람들을 택하여 그들을 백성의 우두머리 곧 천부장과 백부장과 오십부장과 십부장을 삼으매</br>
<br>26 그들이 때를 따라 백성을 재판하되 어려운 일은 모세에게 가져오고 모든 작은 일은 스스로 재판하더라</br>
<br>27 모세가 그의 장인을 보내니 그가 자기 땅으로 가니라</br>
<br>&nbsp;</br>
<strong><br><font color="#4682b4">출애굽기 19 장</font></br></strong>
<br><i><font color="#808080">*이스라엘 자손이 시내 산에 이르다*</font></i></br>
<br>1 이스라엘 자손이 애굽 땅을 떠난 지 삼 개월이 되던 날 그들이 시내 광야에 이르니라</br>
<br>2 그들이 르비딤을 떠나 시내 광야에 이르러 그 광야에 장막을 치되 이스라엘이 거기 산 앞에 장막을 치니라</br>
<br>3 모세가 하나님 앞에 올라가니 여호와께서 산에서 그를 불러 말씀하시되 너는 이같이 야곱의 집에 말하고 이스라엘 자손들에게 말하라</br>
<br>4 내가 애굽 사람에게 어떻게 행하였음과 내가 어떻게 독수리 날개로 너희를 업어 내게로 인도하였음을 너희가 보았느니라</br>
<br>5 세계가 다 내게 속하였나니 너희가 내 말을 잘 듣고 내 언약을 지키면 너희는 모든 민족 중에서 내 소유가 되겠고</br>
<br>6 너희가 내게 대하여 제사장 나라가 되며 거룩한 백성이 되리라 너는 이 말을 이스라엘 자손에게 전할지니라</br>
<br>7 모세가 내려와서 백성의 장로들을 불러 여호와께서 자기에게 명령하신 그 모든 말씀을 그들 앞에 진술하니</br>
<br>8 백성이 일제히 응답하여 이르되 여호와께서 명령하신 대로 우리가 다 행하리이다 모세가 백성의 말을 여호와께 전하매</br>
<br>9 여호와께서 모세에게 이르시되 내가 빽빽한 구름 가운데서 네게 임함은 내가 너와 말하는 것을 백성들이 듣게 하며 또한 너를 영영히 믿게 하려 함이니라 모세가 백성의 말을 여호와께 아뢰었으므로</br>
<br>10 여호와께서 모세에게 이르시되 너는 백성에게로 가서 오늘과 내일 그들을 성결하게 하며 그들에게 옷을 빨게 하고</br>
<br>11 준비하게 하여 셋째 날을 기다리게 하라 이는 셋째 날에 나 여호와가 온 백성의 목전에서 시내 산에 강림할 것임이니</br>
<br>12 너는 백성을 위하여 주위에 경계를 정하고 이르기를 너희는 삼가 산에 오르거나 그 경계를 침범하지 말지니 산을 침범하는 자는 반드시 죽임을 당할 것이라</br>
<br>13 그런 자에게는 손을 대지 말고 돌로 쳐죽이거나 화살로 쏘아 죽여야 하리니 짐승이나 사람을 막론하고 살아남지 못하리라 하고 나팔을 길게 불거든 산 앞에 이를 것이니라 하라</br>
<br>14 모세가 산에서 내려와 백성에게 이르러 백성을 성결하게 하니 그들이 자기 옷을 빨더라</br>
<br>15 모세가 백성에게 이르되 준비하여 셋째 날을 기다리고 여인을 가까이 하지 말라 하니라</br>
<br>16 셋째 날 아침에 우레와 번개와 빽빽한 구름이 산 위에 있고 나팔 소리가 매우 크게 들리니 진중에 있는 모든 백성이 다 떨더라</br>
<br>17 모세가 하나님을 맞으려고 백성을 거느리고 진에서 나오매 그들이 산 기슭에 서 있는데</br>
<br>18 시내 산에 연기가 자욱하니 여호와께서 불 가운데서 거기 강림하심이라 그 연기가 옹기 가마 연기 같이 떠오르고 온 산이 크게 진동하며</br>
<br>19 나팔 소리가 점점 커질 때에 모세가 말한즉 하나님이 음성으로 대답하시더라</br>
<br>20 여호와께서 시내 산 곧 그 산 꼭대기에 강림하시고 모세를 그리로 부르시니 모세가 올라가매</br>
<br>21 여호와께서 모세에게 이르시되 내려가서 백성을 경고하라 백성이 밀고 들어와 나 여호와에게로 와서 보려고 하다가 많이 죽을까 하노라</br>
<br>22 또 여호와에게 가까이 하는 제사장들에게 그 몸을 성결히 하게 하라 나 여호와가 그들을 칠까 하노라</br>
<br>23 모세가 여호와께 아뢰되 주께서 우리에게 명령하여 이르시기를 산 주위에 경계를 세워 산을 거룩하게 하라 하셨사온즉 백성이 시내 산에 오르지 못하리이다</br>
<br>24 여호와께서 그에게 이르시되 가라 너는 내려가서 아론과 함께 올라오고 제사장들과 백성에게는 경계를 넘어 나 여호와에게로 올라오지 못하게 하라 내가 그들을 칠까 하노라</br>
<br>25 모세가 백성에게 내려가서 그들에게 알리니라</br>
<br>&nbsp;</br>
<strong><br><font color="#4682b4">출애굽기 20 장</font></br></strong>
<br><i><font color="#808080">*십계명*</font></i></br>
<br>1 하나님이 이 모든 말씀으로 말씀하여 이르시되</br>
<br>2 나는 너를 애굽 땅, 종 되었던 집에서 인도하여 낸 네 하나님 여호와니라</br>
<br>3 너는 나 외에는 다른 신들을 네게 두지 말라</br>
<br>4 너를 위하여 새긴 우상을 만들지 말고 또 위로 하늘에 있는 것이나 아래로 땅에 있는 것이나 땅 아래 물 속에 있는 것의 어떤 형상도 만들지 말며</br>
<br>5 그것들에게 절하지 말며 그것들을 섬기지 말라 나 네 하나님 여호와는 질투하는 하나님인즉 나를 미워하는 자의 죄를 갚되 아버지로부터 아들에게로 삼사 대까지 이르게 하거니와</br>
<br>6 나를 사랑하고 내 계명을 지키는 자에게는 천 대까지 은혜를 베푸느니라</br>
<br>7 너는 네 하나님 여호와의 이름을 망령되게 부르지 말라 여호와는 그의 이름을 망령되게 부르는 자를 죄 없다 하지 아니하리라</br>
<br>8 안식일을 기억하여 거룩하게 지키라</br>
<br>9 엿새 동안은 힘써 네 모든 일을 행할 것이나</br>
<br>10 일곱째 날은 네 하나님 여호와의 안식일인즉 너나 네 아들이나 네 딸이나 네 남종이나 네 여종이나 네 가축이나 네 문안에 머무는 객이라도 아무 일도 하지 말라</br>
<br>11 이는 엿새 동안에 나 여호와가 하늘과 땅과 바다와 그 가운데 모든 것을 만들고 일곱째 날에 쉬었음이라 그러므로 나 여호와가 안식일을 복되게 하여 그 날을 거룩하게 하였느니라</br>
<br>12 네 부모를 공경하라 그리하면 네 하나님 여호와가 네게 준 땅에서 네 생명이 길리라</br>
<br>13 살인하지 말라</br>
<br>14 간음하지 말라</br>
<br>15 도둑질하지 말라</br>
<br>16 네 이웃에 대하여 거짓 증거하지 말라</br>
<br>17 네 이웃의 집을 탐내지 말라 네 이웃의 아내나 그의 남종이나 그의 여종이나 그의 소나 그의 나귀나 무릇 네 이웃의 소유를 탐내지 말라</br>
<br><i><font color="#808080">*백성이 두려워 떨다*</font></i></br>
<br>18 뭇 백성이 우레와 번개와 나팔 소리와 산의 연기를 본지라 그들이 볼 때에 떨며 멀리 서서</br>
<br>19 모세에게 이르되 당신이 우리에게 말씀하소서 우리가 들으리이다 하나님이 우리에게 말씀하시지 말게 하소서 우리가 죽을까 하나이다</br>
<br>20 모세가 백성에게 이르되 두려워하지 말라 하나님이 임하심은 너희를 시험하고 너희로 경외하여 범죄하지 않게 하려 하심이니라</br>
<br>21 백성은 멀리 서 있고 모세는 하나님이 계신 흑암으로 가까이 가니라</br>
<br><i><font color="#808080">*제단에 관한 법*</font></i></br>
<br>22 여호와께서 모세에게 이르시되 너는 이스라엘 자손에게 이같이 이르라 내가 하늘로부터 너희에게 말하는 것을 너희 스스로 보았으니</br>
<br>23 너희는 나를 비겨서 은으로나 금으로나 너희를 위하여 신상을 만들지 말고</br>
<br>24 내게 토단을 쌓고 그 위에 네 양과 소로 네 번제와 화목제를 드리라 내가 내 이름을 기념하게 하는 모든 곳에서 네게 임하여 복을 주리라</br>
<br>25 네가 내게 돌로 제단을 쌓거든 다듬은 돌로 쌓지 말라 네가 정으로 그것을 쪼면 부정하게 함이니라</br>
<br>26 너는 층계로 내 제단에 오르지 말라 네 하체가 그 위에서 드러날까 함이니라</br>
<br>&nbsp;</br>
<strong><br><font color="#4682b4">출애굽기 21 장</font></br></strong>
<br><i><font color="#808080">*종에 관한 법*</font></i></br>
<br>1 네가 백성 앞에 세울 법규는 이러하니라</br>
<br>2 네가 히브리 종을 사면 그는 여섯 해 동안 섬길 것이요 일곱째 해에는 몸값을 물지 않고 나가 자유인이 될 것이며</br>
<br>3 만일 그가 단신으로 왔으면 단신으로 나갈 것이요 장가 들었으면 그의 아내도 그와 함께 나가려니와</br>
<br>4 만일 상전이 그에게 아내를 주어 그의 아내가 아들이나 딸을 낳았으면 그의 아내와 그의 자식들은 상전에게 속할 것이요 그는 단신으로 나갈 것이로되</br>
<br>5 만일 종이 분명히 말하기를 내가 상전과 내 처자를 사랑하니 나가서 자유인이 되지 않겠노라 하면</br>
<br>6 상전이 그를 데리고 재판장에게로 갈 것이요 또 그를 문이나 문설주 앞으로 데리고 가서 그것에다가 송곳으로 그의 귀를 뚫을 것이라 그는 종신토록 그 상전을 섬기리라</br>
<br>7 사람이 자기의 딸을 여종으로 팔았으면 그는 남종 같이 나오지 못할지며</br>
<br>8 만일 상전이 그를 기뻐하지 아니하여 상관하지 아니하면 그를 속량하게 할 것이나 상전이 그 여자를 속인 것이 되었으니 외국인에게는 팔지 못할 것이요</br>
<br>9 만일 그를 자기 아들에게 주기로 하였으면 그를 딸 같이 대우할 것이요</br>
<br>10 만일 상전이 다른 여자에게 장가 들지라도 그 여자의 음식과 의복과 동침하는 것은 끊지 말 것이요</br>
<br>11 그가 이 세 가지를 시행하지 아니하면, 여자는 속전을 내지 않고 거저 나가게 할 것이니라</br>
<br><i><font color="#808080">*폭행에 관한 법*</font></i></br>
<br>12 사람을 쳐죽인 자는 반드시 죽일 것이나</br>
<br>13 만일 사람이 고의적으로 한 것이 아니라 나 하나님이 사람을 그의 손에 넘긴 것이면 내가 그를 위하여 한 곳을 정하리니 그 사람이 그리로 도망할 것이며</br>
<br>14 사람이 그의 이웃을 고의로 죽였으면 너는 그를 내 제단에서라도 잡아내려 죽일지니라</br>
<br>15 자기 아버지나 어머니를 치는 자는 반드시 죽일지니라</br>
<br>16 사람을 납치한 자가 그 사람을 팔았든지 자기 수하에 두었든지 그를 반드시 죽일지니라</br>
<br>17 자기의 아버지나 어머니를 저주하는 자는 반드시 죽일지니라</br>
<br>18 사람이 서로 싸우다가 하나가 돌이나 주먹으로 그의 상대방을 쳤으나 그가 죽지 않고 자리에 누웠다가</br>
<br>19 지팡이를 짚고 일어나 걸으면 그를 친 자가 형벌은 면하되 그간의 손해를 배상하고 그가 완치되게 할 것이니라</br>
<br>20 사람이 매로 그 남종이나 여종을 쳐서 당장에 죽으면 반드시 형벌을 받으려니와</br>
<br>21 그가 하루나 이틀을 연명하면 형벌을 면하리니 그는 상전의 재산임이라</br>
<br>22 사람이 서로 싸우다가 임신한 여인을 쳐서 낙태하게 하였으나 다른 해가 없으면 그 남편의 청구대로 반드시 벌금을 내되 재판장의 판결을 따라 낼 것이니라</br>
<br>23 그러나 다른 해가 있으면 갚되 생명은 생명으로,</br>
<br>24 눈은 눈으로, 이는 이로, 손은 손으로, 발은 발로,</br>
<br>25 덴 것은 덴 것으로, 상하게 한 것은 상함으로, 때린 것은 때림으로 갚을지니라</br>
<br>26 사람이 그 남종의 한 눈이나 여종의 한 눈을 쳐서 상하게 하면 그 눈에 대한 보상으로 그를 놓아 줄 것이며</br>
<br>27 그 남종의 이나 여종의 이를 쳐서 빠뜨리면 그 이에 대한 보상으로 그를 놓아 줄지니라</br>
<br><i><font color="#808080">*임자의 책임*</font></i></br>
<br>28 소가 남자나 여자를 받아서 죽이면 그 소는 반드시 돌로 쳐서 죽일 것이요 그 고기는 먹지 말 것이며 임자는 형벌을 면하려니와</br>
<br>29 소가 본래 받는 버릇이 있고 그 임자는 그로 말미암아 경고를 받았으되 단속하지 아니하여 남녀를 막론하고 받아 죽이면 그 소는 돌로 쳐죽일 것이고 임자도 죽일 것이며</br>
<br>30 만일 그에게 속죄금을 부과하면 무릇 그 명령한 것을 생명의 대가로 낼 것이요</br>
<br>31 아들을 받든지 딸을 받든지 이 법규대로 그 임자에게 행할 것이며</br>
<br>32 소가 만일 남종이나 여종을 받으면 소 임자가 은 삼십 세겔을 그의 상전에게 줄 것이요 소는 돌로 쳐서 죽일지니라</br>
<br>33 사람이 구덩이를 열어두거나 구덩이를 파고 덮지 아니하므로 소나 나귀가 거기에 빠지면</br>
<br>34 그 구덩이 주인이 잘 보상하여 짐승의 임자에게 돈을 줄 것이요 죽은 것은 그가 차지할 것이니라</br>
<br>35 이 사람의 소가 저 사람의 소를 받아 죽이면 살아 있는 소를 팔아 그 값을 반으로 나누고 또한 죽은 것도 반으로 나누려니와</br>
<br>36 그 소가 본래 받는 버릇이 있는 줄을 알고도 그 임자가 단속하지 아니하였으면 그는 소로 소를 갚을 것이요 죽은 것은 그가 차지할지니라</br>
<br>&nbsp;</br>
<strong><br><font color="#4682b4">출애굽기 22 장</font></br></strong>
<br><i><font color="#808080">*배상에 관한 법*</font></i></br>
<br>1 사람이 소나 양을 도둑질하여 잡거나 팔면 그는 소 한 마리에 소 다섯 마리로 갚고 양 한 마리에 양 네 마리로 갚을지니라</br>
<br>2 도둑이 뚫고 들어오는 것을 보고 그를 쳐죽이면 피 흘린 죄가 없으나</br>
<br>3 해 돋은 후에는 피 흘린 죄가 있으리라 도둑은 반드시 배상할 것이나 배상할 것이 없으면 그 몸을 팔아 그 도둑질한 것을 배상할 것이요</br>
<br>4 도둑질한 것이 살아 그의 손에 있으면 소나 나귀나 양을 막론하고 갑절을 배상할지니라</br>
<br>5 사람이 밭에서나 포도원에서 짐승을 먹이다가 자기의 짐승을 놓아 남의 밭에서 먹게 하면 자기 밭의 가장 좋은 것과 자기 포도원의 가장 좋은 것으로 배상할지니라</br>
<br>6 불이 나서 가시나무에 댕겨 낟가리나 거두지 못한 곡식이나 밭을 태우면 불 놓은 자가 반드시 배상할지니라</br>
<br>7 사람이 돈이나 물품을 이웃에게 맡겨 지키게 하였다가 그 이웃 집에서 도둑을 맞았는데 그 도둑이 잡히면 갑절을 배상할 것이요</br>
<br>8 도둑이 잡히지 아니하면 그 집 주인이 재판장 앞에 가서 자기가 그 이웃의 물품에 손 댄 여부의 조사를 받을 것이며</br>
<br>9 어떤 잃은 물건 즉 소나 나귀나 양이나 의복이나 또는 다른 잃은 물건에 대하여 어떤 사람이 이르기를 이것이 그것이라 하면 양편이 재판장 앞에 나아갈 것이요 재판장이 죄 있다고 하는 자가 그 상대편에게 갑절을 배상할지니라</br>
<br>10 사람이 나귀나 소나 양이나 다른 짐승을 이웃에게 맡겨 지키게 하였다가 죽거나 상하거나 끌려가도 본 사람이 없으면</br>
<br>11 두 사람 사이에 맡은 자가 이웃의 것에 손을 대지 아니하였다고 여호와께 맹세할 것이요 그 임자는 그대로 믿을 것이며 그 사람은 배상하지 아니하려니와</br>
<br>12 만일 자기에게서 도둑 맞았으면 그 임자에게 배상할 것이며</br>
<br>13 만일 찢겼으면 그것을 가져다가 증언할 것이요 그 찢긴 것에 대하여 배상하지 아니할지니라</br>
<br>14 만일 이웃에게 빌려온 것이 그 임자가 함께 있지 아니할 때에 상하거나 죽으면 반드시 배상하려니와</br>
<br>15 그 임자가 그것과 함께 있었으면 배상하지 아니할지니라 만일 세 낸 것이면 세로 족하니라</br>
<br><i><font color="#808080">*도덕에 관한 법*</font></i></br>
<br>16 사람이 약혼하지 아니한 처녀를 꾀어 동침하였으면 납폐금을 주고 아내로 삼을 것이요</br>
<br>17 만일 처녀의 아버지가 딸을 그에게 주기를 거절하면 그는 처녀에게 납폐금으로 돈을 낼지니라</br>
<br>18 너는 무당을 살려두지 말라</br>
<br>19 짐승과 행음하는 자는 반드시 죽일지니라</br>
<br>20 여호와 외에 다른 신에게 제사를 드리는 자는 멸할지니라</br>
<br>21 너는 이방 나그네를 압제하지 말며 그들을 학대하지 말라 너희도 애굽 땅에서 나그네였음이라</br>
<br>22 너는 과부나 고아를 해롭게 하지 말라</br>
<br>23 네가 만일 그들을 해롭게 하므로 그들이 내게 부르짖으면 내가 반드시 그 부르짖음을 들으리라</br>
<br>24 나의 노가 맹렬하므로 내가 칼로 너희를 죽이리니 너희의 아내는 과부가 되고 너희 자녀는 고아가 되리라</br>
<br>25 네가 만일 너와 함께 한 내 백성 중에서 가난한 자에게 돈을 꾸어 주면 너는 그에게 채권자 같이 하지 말며 이자를 받지 말 것이며</br>
<br>26 네가 만일 이웃의 옷을 전당 잡거든 해가 지기 전에 그에게 돌려보내라</br>
<br>27 그것이 유일한 옷이라 그것이 그의 알몸을 가릴 옷인즉 그가 무엇을 입고 자겠느냐 그가 내게 부르짖으면 내가 들으리니 나는 자비로운 자임이니라</br>
<br>28 너는 재판장을 모독하지 말며 백성의 지도자를 저주하지 말지니라</br>
<br>29 너는 네가 추수한 것과 네가 짜낸 즙을 바치기를 더디하지 말지며 네 처음 난 아들들을 내게 줄지며</br>
<br>30 네 소와 양도 그와 같이 하되 이레 동안 어미와 함께 있게 하다가 여드레 만에 내게 줄지니라</br>
<br>31 너희는 내게 거룩한 사람이 될지니 들에서 짐승에게 찢긴 동물의 고기를 먹지 말고 그것을 개에게 던질지니라</br>
<br>&nbsp;</br>
<strong><br><font color="#4682b4">출애굽기 23 장</font></br></strong>
<br><i><font color="#808080">*공평에 관한 법*</font></i></br>
<br>1 너는 거짓된 풍설을 퍼뜨리지 말며 악인과 연합하여 위증하는 증인이 되지 말며</br>
<br>2 다수를 따라 악을 행하지 말며 송사에 다수를 따라 부당한 증언을 하지 말며</br>
<br>3 가난한 자의 송사라고 해서 편벽되이 두둔하지 말지니라</br>
<br>4 네가 만일 네 원수의 길 잃은 소나 나귀를 보거든 반드시 그 사람에게로 돌릴지며</br>
<br>5 네가 만일 너를 미워하는 자의 나귀가 짐을 싣고 엎드러짐을 보거든 그것을 버려두지 말고 그것을 도와 그 짐을 부릴지니라</br>
<br>6 너는 가난한 자의 송사라고 정의를 굽게 하지 말며</br>
<br>7 거짓 일을 멀리 하며 무죄한 자와 의로운 자를 죽이지 말라 나는 악인을 의롭다 하지 아니하겠노라</br>
<br>8 너는 뇌물을 받지 말라 뇌물은 밝은 자의 눈을 어둡게 하고 의로운 자의 말을 굽게 하느니라</br>
<br>9 너는 이방 나그네를 압제하지 말라 너희가 애굽 땅에서 나그네 되었었은즉 나그네의 사정을 아느니라</br>
<br><i><font color="#808080">*안식년과 안식일에 관한 법*</font></i></br>
<br>10 너는 여섯 해 동안은 너의 땅에 파종하여 그 소산을 거두고</br>
<br>11 일곱째 해에는 갈지 말고 묵혀두어서 네 백성의 가난한 자들이 먹게 하라 그 남은 것은 들짐승이 먹으리라 네 포도원과 감람원도 그리할지니라</br>
<br>12 너는 엿새 동안에 네 일을 하고 일곱째 날에는 쉬라 네 소와 나귀가 쉴 것이며 네 여종의 자식과 나그네가 숨을 돌리리라</br>
<br>13 내가 네게 이른 모든 일을 삼가 지키고 다른 신들의 이름은 부르지도 말며 네 입에서 들리게도 하지 말지니라</br>
<br><i><font color="#808080">*세 가지 절기에 관한 법*</font></i></br>
<br>14 너는 매년 세 번 내게 절기를 지킬지니라</br>
<br>15 너는 무교병의 절기를 지키라 내가 네게 명령한 대로 아빕월의 정한 때에 이레 동안 무교병을 먹을지니 이는 그 달에 네가 애굽에서 나왔음이라 빈 손으로 내 앞에 나오지 말지니라</br>
<br>16 맥추절을 지키라 이는 네가 수고하여 밭에 뿌린 것의 첫 열매를 거둠이니라 수장절을 지키라 이는 네가 수고하여 이룬 것을 연말에 밭에서부터 거두어 저장함이니라</br>
<br>17 네 모든 남자는 매년 세 번씩 주 여호와께 보일지니라</br>
<br>18 너는 네 제물의 피를 유교병과 함께 드리지 말며 내 절기 제물의 기름을 아침까지 남겨두지 말지니라</br>
<br>19 네 토지에서 처음 거둔 열매의 가장 좋은 것을 가져다가 너의 하나님 여호와의 전에 드릴지니라 너는 염소 새끼를 그 어미의 젖으로 삶지 말지니라</br>
<br><i><font color="#808080">*명령과 약속*</font></i></br>
<br>20 내가 사자를 네 앞서 보내어 길에서 너를 보호하여 너를 내가 예비한 곳에 이르게 하리니</br>
<br>21 너희는 삼가 그의 목소리를 청종하고 그를 노엽게 하지 말라 그가 너희의 허물을 용서하지 아니할 것은 내 이름이 그에게 있음이니라</br>
<br>22 네가 그의 목소리를 잘 청종하고 내 모든 말대로 행하면 내가 네 원수에게 원수가 되고 네 대적에게 대적이 될지라</br>
<br>23 내 사자가 네 앞서 가서 너를 아모리 사람과 헷 사람과 브리스 사람과 가나안 사람과 히위 사람과 여부스 사람에게로 인도하고 나는 그들을 끊으리니</br>
<br>24 너는 그들의 신을 경배하지 말며 섬기지 말며 그들의 행위를 본받지 말고 그것들을 다 깨뜨리며 그들의 주상을 부수고</br>
<br>25 네 하나님 여호와를 섬기라 그리하면 여호와가 너희의 양식과 물에 복을 내리고 너희 중에서 병을 제하리니</br>
<br>26 네 나라에 낙태하는 자가 없고 임신하지 못하는 자가 없을 것이라 내가 너의 날 수를 채우리라</br>
<br>27 내가 내 위엄을 네 앞서 보내어 네가 이를 곳의 모든 백성을 물리치고 네 모든 원수들이 네게 등을 돌려 도망하게 할 것이며</br>
<br>28 내가 왕벌을 네 앞에 보내리니 그 벌이 히위 족속과 가나안 족속과 헷 족속을 네 앞에서 쫓아내리라</br>
<br>29 그러나 그 땅이 황폐하게 됨으로 들짐승이 번성하여 너희를 해할까 하여 일 년 안에는 그들을 네 앞에서 쫓아내지 아니하고</br>
<br>30 네가 번성하여 그 땅을 기업으로 얻을 때까지 내가 그들을 네 앞에서 조금씩 쫓아내리라</br>
<br>31 내가 네 경계를 홍해에서부터 블레셋 바다까지, 광야에서부터 강까지 정하고 그 땅의 주민을 네 손에 넘기리니 네가 그들을 네 앞에서 쫓아낼지라</br>
<br>32 너는 그들과 그들의 신들과 언약하지 말라</br>
<br>33 그들이 네 땅에 머무르지 못할 것은 그들이 너를 내게 범죄하게 할까 두려움이라 네가 그 신들을 섬기면 그것이 너의 올무가 되리라</br>
<br>&nbsp;</br>
<strong><br><font color="#4682b4">출애굽기 24 장</font></br></strong>
<br><i><font color="#808080">*시내 산에서 언약을 세우다*</font></i></br>
<br>1 또 모세에게 이르시되 너는 아론과 나답과 아비후와 이스라엘 장로 칠십 명과 함께 여호와께로 올라와 멀리서 경배하고</br>
<br>2 너 모세만 여호와께 가까이 나아오고 그들은 가까이 나아오지 말며 백성은 너와 함께 올라오지 말지니라</br>
<br>3 모세가 와서 여호와의 모든 말씀과 그의 모든 율례를 백성에게 전하매 그들이 한 소리로 응답하여 이르되 여호와께서 말씀하신 모든 것을 우리가 준행하리이다</br>
<br>4 모세가 여호와의 모든 말씀을 기록하고 이른 아침에 일어나 산 아래에 제단을 쌓고 이스라엘 열두 지파대로 열두 기둥을 세우고</br>
<br>5 이스라엘 자손의 청년들을 보내어 여호와께 소로 번제와 화목제를 드리게 하고</br>
<br>6 모세가 피를 가지고 반은 여러 양푼에 담고 반은 제단에 뿌리고</br>
<br>7 언약서를 가져다가 백성에게 낭독하여 듣게 하니 그들이 이르되 여호와의 모든 말씀을 우리가 준행하리이다</br>
<br>8 모세가 그 피를 가지고 백성에게 뿌리며 이르되 이는 여호와께서 이 모든 말씀에 대하여 너희와 세우신 언약의 피니라</br>
<br>9 모세와 아론과 나답과 아비후와 이스라엘 장로 칠십 인이 올라가서</br>
<br>10 이스라엘의 하나님을 보니 그의 발 아래에는 청옥을 편 듯하고 하늘 같이 청명하더라</br>
<br>11 하나님이 이스라엘 자손들의 존귀한 자들에게 손을 대지 아니하셨고 그들은 하나님을 뵙고 먹고 마셨더라</br>
<br><i><font color="#808080">*시내 산에서 사십 일을 있다*</font></i></br>
<br>12 여호와께서 모세에게 이르시되 너는 산에 올라 내게로 와서 거기 있으라 네가 그들을 가르치도록 내가 율법과 계명을 친히 기록한 돌판을 네게 주리라</br>
<br>13 모세가 그의 부하 여호수아와 함께 일어나 모세가 하나님의 산으로 올라가며</br>
<br>14 장로들에게 이르되 너희는 여기서 우리가 너희에게로 돌아오기까지 기다리라 아론과 훌이 너희와 함께 하리니 무릇 일이 있는 자는 그들에게로 나아갈지니라 하고</br>
<br>15 모세가 산에 오르매 구름이 산을 가리며</br>
<br>16 여호와의 영광이 시내 산 위에 머무르고 구름이 엿새 동안 산을 가리더니 일곱째 날에 여호와께서 구름 가운데서 모세를 부르시니라</br>
<br>17 산 위의 여호와의 영광이 이스라엘 자손의 눈에 맹렬한 불 같이 보였고</br>
<br>18 모세는 구름 속으로 들어가서 산 위에 올랐으며 모세가 사십 일 사십 야를 산에 있으니라</br>
<br>&nbsp;</br>
<br>    6일차 끝</br>
<br>&nbsp;</br>
        </h2>
        </div>
    <div id="explanation-modal" class="modal">
        <div class="modal-content">
            <span class="close-button" id="close-modal">&times;</span>
            <h3 id="modal-title">구절 설명</h3>
            <img id="modal-image" src="" alt="설명 관련 이미지">
            <p id="modal-text">구절을 드래그하여 선택하고 '구절설명' 버튼을 누르세요.</p>
        </div>
    </div>
    <div id="scroll-marker-container" class="scroll-marker-container"></div>
    <script>
        // ------------------------------
        // 설정: API 키를 여기에 넣으세요 (빈 문자열이면 호출은 실패합니다)
        const apiKey = "AIzaSyDUlSQlSPgnrFBXpnUJMDoUO3s_KsaoFRU"; // <-- 여기에 Google API Key를 넣으세요
        // ------------------------------

        // DOM 요소
        const bibleTextEl = document.getElementById('bible-text');
        const searchCountEl = document.getElementById('search-count');
        const nextLocationBtn = document.getElementById('next-location-btn');
        const scrollMarkerContainer = document.getElementById('scroll-marker-container');
        const explanationIconButton = document.getElementById('explanation-icon-button');
        const detailedExplanationButton = document.getElementById('detailed-explanation-button');
        const simpleExplanationButton = document.getElementById('simple-explanation-button');
        const summarySimpleButton = document.getElementById('summary-simple-button');
        const summaryDetailedButton = document.getElementById('summary-detailed-button');
        const explanationButtonContainer = document.getElementById('explanation-button-container');
        const modal = document.getElementById('explanation-modal');
        const closeModalButton = document.getElementById('close-modal');
        const modalTitle = document.getElementById('modal-title');
        const modalImage = document.getElementById('modal-image');
        const modalText = document.getElementById('modal-text');
        const audio = document.getElementById('audio-file');
        const playBtn = document.getElementById('play-btn');
        const pauseBtn = document.getElementById('pause-btn');
        const stopBtn = document.getElementById('stop-btn');
        const speedDisplay = document.getElementById('speed-display');
        const speedDown02Btn = document.getElementById('speed-down-02');
        const speedDown01Btn = document.getElementById('speed-down-01');
        const speedUp01Btn = document.getElementById('speed-up-01');
        const speedUp02Btn = document.getElementById('speed-up-02');
        const volumeSlider = document.getElementById('volume-slider');
        const currentTimeEl = document.getElementById('current-time');
        const remainingTimeEl = document.getElementById('remaining-time');
        const upBtn = document.getElementById('up');
        const downBtn = document.getElementById('down');
        const fontSizeEl = document.getElementById('font-size');
        const explanationButtonWrapper = document.querySelector('.explanation-button-wrapper');

        // 상태값
        let selectedVerse = "";
        let originalText = "";
        let foundSentences = [];
        let currentSearchIndex = -1;
        let currentSpeed = 1.0;

        // 유틸: RegExp 특수문자 이스케이프
        function escapeRegExp(string) {
            return string.replace(/[.*+?^${}()|[\]\\]/g, '\\$&');
        }

        // 페이지 초기화
        window.addEventListener('DOMContentLoaded', () => {
            originalText = bibleTextEl.innerHTML; // 원본 저장 (요청대로 <br></br> 등은 그대로 유지)
            updateFontSizeDisplay();
            updateSpeed();

            // ✅ 선택 이벤트 (iOS 대응)
        function updateSelectedVerse() {
            const selection = window.getSelection();
            const trimmedSelection = selection.toString().trim();

            const isSelectionInBibleText =
                bibleTextEl.contains(selection.anchorNode) &&
                bibleTextEl.contains(selection.focusNode);

            if (trimmedSelection && isSelectionInBibleText) {
                selectedVerse = trimmedSelection;  // ✅ iOS에서 안 잡히던 부분 고침

                const range = selection.getRangeAt(0);
                const rect = range.getBoundingClientRect();
                const scrollY = window.scrollY || window.pageYOffset;

                explanationButtonContainer.style.position = 'absolute';
                explanationButtonContainer.style.left = `${rect.left}px`;
                explanationButtonContainer.style.top = `${rect.bottom + scrollY + 10}px`;
                explanationButtonContainer.style.transform = 'none';
                explanationButtonContainer.style.display = 'block';
            } else {
                selectedVerse = ""; // 선택 해제 시 초기화
                explanationButtonContainer.style.position = 'fixed';
                explanationButtonContainer.style.left = '50%';
                explanationButtonContainer.style.top = '130px';
                explanationButtonContainer.style.transform = 'translateX(-50%)';
            }
        }

            // 📱 모바일 + PC 모두 대응 (지연 처리)
            document.addEventListener('mouseup', () => setTimeout(updateSelectedVerse, 100));
            document.addEventListener('touchend', () => setTimeout(updateSelectedVerse, 150));

            // 📌 selectionchange 보조 이벤트 (iOS 안정성 강화 - 디바운스 적용)
            let selectionTimeout;
            document.addEventListener('selectionchange', () => {
                clearTimeout(selectionTimeout);
                selectionTimeout = setTimeout(updateSelectedVerse, 200);
            });

            // 검색 폼
            const searchForm = document.querySelector('form[name="f1"]');
            if (searchForm) {
                searchForm.addEventListener('submit', (event) => {
                    event.preventDefault();
                    const searchText = event.target.t1.value;
                    findString(searchText);
                });
            }
            const resetBtn = document.querySelector('input[name="b2"]');
            if (resetBtn) resetBtn.addEventListener('click', clearHighlight);
            nextLocationBtn.addEventListener('click', nextLocation);

            // 폰트 크기
            if (upBtn) upBtn.addEventListener('click', () => {
                let currentSize = parseFloat(window.getComputedStyle(bibleTextEl).fontSize);
                if (currentSize + 4 <= 80) {
                    bibleTextEl.style.fontSize = (currentSize + 4) + 'px';
                    updateFontSizeDisplay();
                }
            });
            if (downBtn) downBtn.addEventListener('click', () => {
                let currentSize = parseFloat(window.getComputedStyle(bibleTextEl).fontSize);
                if (currentSize - 4 >= 12) {
                    bibleTextEl.style.fontSize = (currentSize - 4) + 'px';
                    updateFontSizeDisplay();
                }
            });

            // 오디오 컨트롤
            playBtn.addEventListener('click', () => { audio.play(); });
            pauseBtn.addEventListener('click', () => { audio.pause(); });
            stopBtn.addEventListener('click', () => { audio.pause(); audio.currentTime = 0; });

            speedDown02Btn.addEventListener('click', () => { currentSpeed = Math.max(0.5, currentSpeed - 0.2); updateSpeed(); });
            speedDown01Btn.addEventListener('click', () => { currentSpeed = Math.max(0.5, currentSpeed - 0.1); updateSpeed(); });
            speedUp01Btn.addEventListener('click', () => { currentSpeed = Math.min(2.0, currentSpeed + 0.1); updateSpeed(); });
            speedUp02Btn.addEventListener('click', () => { currentSpeed = Math.min(2.0, currentSpeed + 0.2); updateSpeed(); });

            volumeSlider.addEventListener('input', () => { audio.volume = volumeSlider.value; });

            audio.addEventListener('timeupdate', () => {
                const currentTime = audio.currentTime;
                const duration = audio.duration;
                currentTimeEl.textContent = formatTime(currentTime);
                if (isFinite(duration)) {
                    const remainingTime = duration - currentTime;
                    remainingTimeEl.textContent = '-' + formatTime(remainingTime);
                }
            });

            // 아이콘 클릭 -> 서브버튼 표시
            explanationIconButton.addEventListener('click', (event) => {
                event.stopPropagation();
                explanationButtonWrapper.classList.toggle('active');
            });

            // 상세 설명
            detailedExplanationButton.addEventListener('click', () => {
                const trimmedVerse = selectedVerse.trim();
                if (!trimmedVerse) {
                    showModal("구절을 먼저 선택하세요", "본문에서 구절이나 단어를 드래그하여 선택한 후 다시 버튼을 눌러주세요.");
                } else {
                    showLoadingModal(false);
                    fetchExplanation(trimmedVerse, 'detailed');
                }
                explanationButtonWrapper.classList.remove('active');
            });

            // 간단 설명
            simpleExplanationButton.addEventListener('click', () => {
                const trimmedVerse = selectedVerse.trim();
                if (!trimmedVerse) {
                    showModal("구절을 먼저 선택하세요", "본문에서 구절이나 단어를 드래그하여 선택한 후 다시 버튼을 눌러주세요.");
                } else {
                    showLoadingModal(false);
                    fetchExplanation(trimmedVerse, 'simple');
                }
                explanationButtonWrapper.classList.remove('active');
            });

            // 본문요약 간단 (새로운 기능)
            summarySimpleButton.addEventListener('click', () => {
                const fullText = getFullBibleText();
                if (!fullText.trim()) {
                    showModal("본문이 없습니다", "요약할 성경 본문이 없습니다.");
                } else {
                    showLoadingModal(false);
                    fetchSummary(fullText, 'simple');
                }
                explanationButtonWrapper.classList.remove('active');
            });

            // 본문요약 상세 (새로운 기능)
            summaryDetailedButton.addEventListener('click', () => {
                const fullText = getFullBibleText();
                if (!fullText.trim()) {
                    showModal("본문이 없습니다", "요약할 성경 본문이 없습니다.");
                } else {
                    showLoadingModal(false);
                    fetchSummary(fullText, 'detailed');
                }
                explanationButtonWrapper.classList.remove('active');
            });

            // body 외부 클릭 시 서브 버튼 닫기
            document.body.addEventListener('click', (event) => {
                if (!explanationButtonWrapper.contains(event.target)) {
                    explanationButtonWrapper.classList.remove('active');
                }
            });

            // 모달 닫기
            closeModalButton.addEventListener('click', () => { modal.style.display = 'none'; });
            window.addEventListener('click', (event) => { if (event.target === modal) modal.style.display = 'none'; });
        });

        // 성경 본문 전체를 가져오는 함수
        function getFullBibleText() {
            // 원본 텍스트에서 태그와 불필요한 공백 제거
            const tempDiv = document.createElement('div');
            tempDiv.innerHTML = originalText;
            return tempDiv.textContent.replace(/\s+/g, ' ').trim();
        }

        // 폰트 크기 표시 업데이트
        function updateFontSizeDisplay() {
            const currentSize = parseFloat(window.getComputedStyle(bibleTextEl).fontSize);
            fontSizeEl.textContent = Math.round(currentSize);
        }

        // 재생 속도 업데이트
        function updateSpeed() {
            audio.playbackRate = currentSpeed;
            speedDisplay.textContent = currentSpeed.toFixed(1) + 'x';
        }

        // 시간 포맷
        function formatTime(seconds) {
            const minutes = Math.floor(seconds / 60);
            const remainingSeconds = Math.floor(seconds % 60);
            return `${minutes}:${remainingSeconds.toString().padStart(2, '0')}`;
        }

        // 검색 및 하이라이트
        function findString(searchText) {
            clearHighlight();
            if (searchText === null || searchText.trim() === '') {
                searchCountEl.textContent = '';
                nextLocationBtn.style.display = 'none';
                return;
            }
            const escaped = escapeRegExp(searchText);
            const regex = new RegExp(escaped, 'gi');
            // replace safely by match callback to preserve original matched casing
            const newContent = originalText.replace(regex, (match) => `<span class="search-highlight">${match}</span>`);
            bibleTextEl.innerHTML = newContent;
            foundSentences = Array.from(bibleTextEl.getElementsByClassName('search-highlight'));
            searchCountEl.textContent = `총 ${foundSentences.length}개 검색됨`;
            if (foundSentences.length > 0) {
                currentSearchIndex = 0;
                foundSentences[currentSearchIndex].scrollIntoView({ behavior: 'smooth', block: 'center' });
                nextLocationBtn.style.display = 'inline-block';
                updateScrollMarkers();
            } else {
                showModal("검색 결과 없음", `"${searchText}"에 대한 검색 결과가 없습니다.`);
                nextLocationBtn.style.display = 'none';
            }
        }

        // 다음 검색 위치
        function nextLocation() {
            if (foundSentences.length > 0) {
                currentSearchIndex = (currentSearchIndex + 1) % foundSentences.length;
                foundSentences[currentSearchIndex].scrollIntoView({ behavior: 'smooth', block: 'center' });
            }
        }

        // 하이라이트 초기화
        function clearHighlight() {
            bibleTextEl.innerHTML = originalText;
            searchCountEl.textContent = '';
            nextLocationBtn.style.display = 'none';
            while (scrollMarkerContainer.firstChild) scrollMarkerContainer.removeChild(scrollMarkerContainer.firstChild);
            foundSentences = [];
            currentSearchIndex = -1;
        }

        // 스크롤 마커 업데이트
        function updateScrollMarkers() {
            while (scrollMarkerContainer.firstChild) scrollMarkerContainer.removeChild(scrollMarkerContainer.firstChild);
            const documentHeight = document.documentElement.scrollHeight;
            const viewportHeight = window.innerHeight;
            for (let i = 0; i < foundSentences.length; i++) {
                const el = foundSentences[i];
                const marker = document.createElement('div');
                marker.className = 'scroll-marker';
                const topPosition = el.getBoundingClientRect().top + window.scrollY;
                const markerPosition = (topPosition / documentHeight) * viewportHeight;
                marker.style.top = `${markerPosition}px`;
                marker.addEventListener('click', () => {
                    el.scrollIntoView({ behavior: 'smooth', block: 'center' });
                });
                scrollMarkerContainer.appendChild(marker);
            }
        }

        // 모달 공통
        function showModal(title, text, imageUrl = null) {
            modalTitle.textContent = title;
            modalText.innerHTML = (text || '').toString().replace(/\n/g, '<br>');
            if (imageUrl) {
                modalImage.src = imageUrl;
                modalImage.style.display = 'block';
            } else {
                modalImage.src = '';
                modalImage.style.display = 'none';
            }
            modal.style.display = 'block';
        }

        // 로딩 모달
        function showLoadingModal(isImage = false) {
            modalTitle.innerHTML = `<span class="loader"></span> ${isImage ? '그림 생성 중...' : '설명 생성 중...'}`;
            modalText.textContent = `설명을 생성 중입니다. 잠시만 기다려 주세요...`;
            modalImage.style.display = 'none';
            modal.style.display = 'block';
        }              

        /**
         * fetchExplanation: 상세/간단 설명 생성
         * type: 'detailed' 또는 'simple'
         */
        async function fetchExplanation(promptText, type) {
            // build prompt according to user's specification
            let prompt;
            if (type === 'simple') {
                prompt = `**명령:**다음 성경 용어/구절에 대해 모두 합쳐서 300자에서 500자 사이의 짧고 간결한 설명을 작성해 주세요. 만약에 선택어가 지명이름 또는 사람이름이면 (예를들면 단, 가나안, 하란, 브니엘, 세겜, 등 수많은 동일 이름들) 지명이면 인물을 검색하고 인물이면 지명을 검색해서 두가지 다 설명해 주세요. 핵심 내용을 중심으로 요약해 주세요.**요청 용어/구절:** "${promptText}"**지침(요약):**- 지명/족속/민족: 거주지와 위치 간단 설명(필요하면 지도 언급)- 이름(인물): 이름의 뜻/주요활동/간단한 배경- 제사 도구/성물 등: 간단한 설명- 동물/식물/광물: 성경적 의미 간단 설명- 비교 가능한 개념(선택적): 핵심 비교 항목 간단 나열
                `;
            } else { // detailed
                prompt = `**명령:**다음 성경 용어/구절에 대해 성경적 관점에서 자세히 설명해 주세요. 답변은 모두 합쳐서 2,000자에서 3,000자 사이로 작성해 주세요. 만약에 선택어가 지명이름 또는 사람이름이면 (예를들면 단, 가나안, 하란, 브니엘, 세겜, 등 수많은 동일 이름들) 지명이면 인물을 검색하고 인물이면 지명을 검색해서 두가지 다 설명해 주세요. 필요한 경우 표 또는 간단한 지도를 포함하거나 참조해 주세요.**요청 용어/구절:** "${promptText}"**지침:**A. 지명, 족속, 민족, 나라: - 지명: 지리적 위치, 역사적 배경, 성경 관련 사건, (간단한 지도 설명 권장) - 족속/민족/나라: 거주 지역, 주요 이주/이동, 성경 내 역할B. 인물: - 이름의 뜻, 생몰 시기(가능하면), 주 활동 지역 및 이동 경로, 주요 사건, (성화/그림이 있으면 언급)C. 제사 도구/성물: - 사용 목적, 방식, 역사적·신학적 의미, (성화/그림이 있으면 언급)D. 동물/생물/식물/광물: - 성경적 상징성, 관련 구절, 비교 가능한 항목(표 권장)E. 비교 가능한 개념: - 필요 시 표로 비교(예: 창조의 날별 순서, 제사의 종류, 12지파 상징 등)출력은 한국어로 명확하고 읽기 쉬운 문장으로 작성하세요.
                `;
            }

            await callGenerativeAPI(promptText, prompt);
        }

        /**
         * fetchSummary: 본문요약 간단/상세
         * type: 'simple' 또는 'detailed'
         */
        async function fetchSummary(fullText, type) {
            let prompt;
            if (type === 'simple') {
                prompt = `당신은 성경 주석가이자 성경 연구자입니다. 사용자가 선택한 성경 구절을 학문적·신학적 배경에서 분석하여, 핵심 주제와 메시지를 모두 합쳐서 300자에서 500자 사이로 간단하게 요약해 주세요. 불필요한 장황한 설명은 피하고, 성경 본문의 핵심 의미와 교훈에 집중해 주세요. 만약에 선택어가 지명이름 또는 사람이름이면 (예를들면 단, 가나안, 하란, 브니엘, 세겜, 등 수많은 동일 이름들) 지명이면 인물을 검색하고 인물이면 지명을 검색해서 두가지 다 설명해 주세요. 한국어로 답변해 주세요.`;
            } else {
                prompt = `당신은 성경 주석가이자 성경 연구자입니다. 다음 성경 본문을 학문적·신학적 배경에서 분석하여, 본문의 주요 주제와 등장인물의 역할, 시대적 배경, 신학적 의미 등을 포함하여 자세히 설명해 주세요. 답변은 모두 합쳐서 2,500자에서 3,500자 사이로 작성해 주세요. 만약에 선택어가 지명이름 또는 사람이름이면 (예를들면 단, 가나안, 하란, 브니엘, 세겜, 등 수많은 동일 이름들) 지명이면 인물을 검색하고 인물이면 지명을 검색해서 두가지 다 설명해 주세요. 한국어로 답변해 주세요.`;
            }

            await callGenerativeAPI('본문 요약', prompt);
        }

        async function callGenerativeAPI(modalTitleText, prompt) {
            const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-05-20:generateContent?key=${apiKey}`;
            const payload = {
                contents: [
                    { parts: [{ text: prompt }] }
                ]
            };
            
            let retryCount = 0;
            const maxRetries = 3;
            let response = null;
            while (retryCount < maxRetries) {
                try {
                    response = await fetch(apiUrl, {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify(payload)
                    });
                    
                    if (response.ok) {
                        break;
                    } else if (response.status === 429) {
                        retryCount++;
                        const delay = Math.pow(2, retryCount) * 1000 + Math.random() * 1000;
                        await new Promise(resolve => setTimeout(resolve, delay));
                    } else {
                        throw new Error(`API Error: ${response.statusText}`);
                    }
                } catch (error) {
                    showModal("오류 발생", "API 호출 중 오류가 발생했습니다. 다시 시도해 주세요.");
                    console.error("API call failed:", error);
                    return;
                }
            }
            if (!response || !response.ok) {
                showModal("오류", "설명을 불러오는 데 실패했습니다. 잠시 후 다시 시도해 주세요.");
                return;
            }

            try {
                const data = await response.json();
                const content = data.candidates[0].content.parts[0].text;
                showModal(modalTitleText, content);
            } catch (error) {
                showModal("오류", "응답을 처리하는 중 오류가 발생했습니다.");
                console.error("Error processing response:", error);
            }
        } 
    </script>
</body>
</html>


