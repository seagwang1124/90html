<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
  <title>통큰통독-29일차</title>
  <link rel="apple-touch-icon" type="image/png" href="https://i.postimg.cc/Qtnq0gFJ/Ezra-icon.png">
  <meta name="apple-mobile-web-app-title" content="통큰통독">
  <link rel="shortcut icon" type="image/png" href="https://i.postimg.cc/Qtnq0gFJ/Ezra-icon.png">
  <link rel="mask-icon" type="image/png" href="https://i.postimg.cc/Qtnq0gFJ/Ezra-icon.png">

  <style>
    :root{
      --blue:#007BFF;
      --pink:#ff99cc;
      --shadow: 0 2px 5px rgba(0,0,0,0.2);
    }
    * { box-sizing: border-box; -webkit-tap-highlight-color: transparent; }
    html,body { height:100%; margin:0; padding:0; font-family: Arial, sans-serif; -webkit-font-smoothing:antialiased; }
    body { padding-top:150px; background:#fdfdf8; color:#222; }

    a:link { color:#0000FF; } a:visited{ color:#660099; }

    /* 상단 고정 테이블 */
    .top-fixed-table {
      position: fixed; top:0; left:0; width:100%; background:transparent; border-bottom:none; z-index:100;
      table-layout: fixed; padding:10px 0; box-sizing:border-box;
    }
    .search-cell { text-align:left; padding-left:10px; vertical-align:top; width:30%; }
    .search-cell input[type="text"]{ width:50%; font-size:12pt; }
    .search-cell input[type="submit"], .search-cell input[type="reset"]{ font-size:10pt; padding:5px 8px; height:auto; }

    .audio-cell { text-align:right; padding-right:50px; vertical-align:top; width:30%; }
    #custom-audio-player { display:flex; flex-direction:column; align-items:center; }
    .player-controls{ display:flex; align-items:center; justify-content:center; gap:10px; margin-bottom:5px; }
    .time-display{ font-size:16px; font-weight:bold; color:black; margin:0 5px; min-width:44px; text-align:center; }

    .progress-container { display: flex; align-items: center; justify-content: center; gap: 6px; margin: 6px 0; }
    .skip-btn { width: 48px; height: 28px; font-size: 13px; cursor: pointer; border: 1px solid #ccc; border-radius: 5px; background: #fff; }
    .skip-btn:hover { background: #e0e0e0; }

    .control-btn{ width:28px; height:28px; font-size:14px; cursor:pointer; border:1px solid #ccc; background:#fff; border-radius:5px; }
    .control-btn:hover{ background:#e0e0e0; }
    #play-btn{ background:#d1f3d4; } #pause-btn{ background:#fff6d6; } #stop-btn{ background:#fddddd; }

    .speed-controls{ display:flex; align-items:center; justify-content:center; gap:5px; margin-bottom:5px; }
    .speed-btn{ width:21px; height:21px; font-size:10px; cursor:pointer; border:1px solid #ccc; border-radius:3px; background:#fff; }
    .speed-btn:hover{ background:#e0e0e0; }
    .speed-display{ font-weight:bold; color:var(--blue); width:50px; text-align:center; }

    .volume-control{ display:flex; align-items:center; justify-content:center; gap:5px; }
    input[type="range"]{ -webkit-appearance:none; width:160px; height:5px; background:#d3d3d3; outline:none; opacity:0.9; transition:opacity .2s; border-radius:3px;}
    input[type="range"]::-webkit-slider-thumb{ -webkit-appearance:none; appearance:none; width:15px; height:15px; background:var(--blue); border-radius:50%; cursor:pointer; }

    /* progress */
    #progress-bar { width: 60%; max-width: 100px; }

    /* volume */
    #volume-slider { width: 80%; max-width: 120px; }

    /* 설명 버튼 컨테이너 (플로팅) */
    .explanation-button-container{ position:fixed; top:100px; left:30%;  transform:translateX(-50%);  padding:0 10px; transition:top .2s ease,left .2s ease,transform .2s ease; }
    .explanation-button-wrapper{ position:relative; display:inline-block; cursor:pointer; }
    .explanation-icon-button{ width:50px; height:50px; border-radius:50%; background:var(--pink); box-shadow:var(--shadow); border:none; display:flex; align-items:center; justify-content:center; font-size:40px; z-index:2; }
    .explanation-sub-buttons{ display:flex; flex-direction:column; gap:10px; opacity:0; visibility:hidden; transition:opacity .3s ease,visibility .3s ease, transform .3s ease; position:absolute; left:45%; transform:translateX(-50%) translateY(25px); z-index:1; }
    .explanation-button-wrapper.active .explanation-sub-buttons{ opacity:1; visibility:visible; transform:translateX(-50%) translateY(0); }
    .explanation-sub-button{ padding:5px 10px; font-size:18px; background:var(--pink); border:none; border-radius:5px; cursor:pointer; box-shadow:var(--shadow); white-space:nowrap; }
    .explanation-sub-button:hover{ transform:scale(1.03); }

    /* 폰트 사이즈 및 본문 요약 버튼 (항상 표시) */
    .container{ width:100%; text-align:center; margin-top:8px; }
    .font-size-label{ font-size:20px !important; margin-right:12px; font-weight:bold; color:blue; display:inline-block; vertical-align:middle; }
    #font-size{ font-size:20px !important; margin:0 8px; font-weight:bold; color:red; display:inline-block; vertical-align:middle; width:48px; }
    #down,#up{ width:27px; height:27px; font-size:20px; color:red; background:#fff; border:1px solid #ccc; border-radius:5px; cursor:pointer; display:inline-block; vertical-align:middle; }

    .summary-buttons { display:inline-block; margin-left:16px; vertical-align:middle; }
    .summary-btn { padding:6px 10px; margin-left:6px; font-size:14px; border-radius:6px; border:1px solid #ccc; background:#fff; cursor:pointer; }
    .summary-btn:hover{ background:#f2f2f2; }

    /* 일차 내비게이션 */
.day-nav{
  display:flex; align-items:center; justify-content:flex-start; gap:10px;
  margin: 10px 15px 0;
}
.day-nav .day-btn{
  text-decoration:none; background:#fff; color:#333;
  padding:6px 12px; border:1px solid #ccc; border-radius:8px;
  box-shadow: var(--shadow); font-weight:700; line-height:1;
}
.day-nav .day-btn:hover{ background:#f7f7f7; }
.day-nav .day-title{
  font-weight:900; letter-spacing:.2px; color:#222;
}
@media (max-width:480px){
  .day-nav .day-title{ font-size:16px; }
  .day-nav .day-btn{ padding:6px 10px; font-size:14px; }
}

    /* 본문 */
    h2{ padding:0; text-align:left; margin-left:15px; margin-right:15px; }
    p{ display:inline-block; }

    /* 본문 중앙 두 줄 강조 */
    .highlight {
      background-color:#fdf6e3;
      -webkit-text-stroke:0.2px #76d6c6;
      border-left:4px solid #c0a060;
      font-weight:bold;
      box-shadow:0 0 8px rgba(0,0,0,0.1);
      padding:2px 6px;
    }

    /* 📖 구절설명 버튼: 기본 표시 */
    #explanation-button-container{
      position:fixed; z-index:150; display:block;
    }
    body.modal-open #explanation-button-container{ display:none !important; }

    /* 모달 */
    .modal{
      display:none; position:fixed; z-index:200; inset:0; width:100%; height:100%;
      background:rgba(0,0,0,0.4);
    }
    .modal-content{
      background:#fff; margin:12% auto; padding:20px; border-radius:10px; width:80%; max-width:900px;
      max-height:80vh; overflow:auto; overscroll-behavior:contain;
      box-shadow:0 4px 8px rgba(0,0,0,0.2); text-align:left; line-height:1.6; word-break:keep-all; white-space:pre-wrap;
    }
    body.modal-open{ overflow:hidden; }

    /* 로딩 스피너 */
    .loader{ border:4px solid #f3f3f3; border-top:4px solid #3498db; border-radius:50%; width:20px; height:20px; animation:spin 1s linear infinite; display:inline-block; vertical-align:middle; margin-right:8px; }
    @keyframes spin{ 0%{transform:rotate(0deg);} 100%{transform:rotate(360deg);} }

    /* 검색 하이라이트 & 스크롤 마커 */
    .search-highlight{ background:yellow; color:#000; }
    .scroll-marker-container{ position:fixed; top:0; right:0; width:8px; height:100vh; z-index:99; pointer-events:none; }
    .scroll-marker{ position:absolute; right:0; width:8px; height:8px; background:red; border-radius:50%; box-shadow:0 0 5px rgba(255,0,0,0.7); cursor:pointer; pointer-events:auto; }
    .scroll-marker:hover{ transform:scale(1.5); transition:transform .2s ease; }

    /* 선택 관련 (iOS) */
    #bible-text{ -webkit-user-select:text; user-select:text; -webkit-touch-callout:none; }

    /* 반응형 */
    @media (max-width:800px){
      .search-cell{ width:55%; } .audio-cell{ width:45%; } .search-cell input[type="text"]{ width:60%; } #progress-bar{ width:160px; }
    }
    @media (max-width:600px){
  /* 좌/우 칸 비율 + 오른쪽 패딩 확보 */
  .search-cell{ width:30%; }
  .audio-cell{ width:34%; padding-right:12px; } /* 8px → 14px */

  /* 검색창을 뷰포트 기준으로 더 줄이기 */
  .search-cell input[type="text"]{
    width:32vw;          /* 45vw → 35vw */
    max-width:32vw;
    font-size:12pt;
  }
  /* 검색 버튼들도 살짝 컴팩트 */
  .search-cell input[type="submit"],
  .search-cell input[type="reset"]{
    padding:4px 6px;
    font-size:10pt;
  }

  /* 오디오 컨트롤이 덜 퍼지도록 */
  .player-controls{ gap:6px; }           /* 10px → 6px */
  .time-display{
    font-size:14px;                       /* 16px → 14px */
    min-width:56px;                       /* 44px → 56px 로 고정폭 확보 */
  }

  #progress-bar{ width:140px; }
  .explanation-sub-button{ font-size:16px; padding:6px 8px; }
  .explanation-icon-button{ width:46px; height:46px; font-size:34px; }
  .summary-btn{ padding:5px 8px; font-size:13px; }
}

    .toggle-buttons {
      display:flex; justify-content:center; gap:8px; margin-bottom:6px;
    }
    .toggle-buttons button {
      padding:4px 8px; font-size:13px; border:1px solid #ccc; border-radius:5px; background:#fff; cursor:pointer;
    }
    .toggle-buttons button:hover { background:#f0f0f0; }

    /* ============ 기도문 팝업 ============ */
    .prayer-toast {
      position: fixed; right: 18px; bottom: 18px; z-index: 190;
      width: 360px; max-width: calc(100vw - 24px);
      background: #ffffff; border: 1px solid #e9e6d8;
      border-radius: 14px; box-shadow: 0 10px 26px rgba(0,0,0,.18);
      overflow: hidden; transform: translateY(20px); opacity: 0;
      animation: prayerSlideUp .35s ease-out forwards; display:none;
      font-family: inherit;
    }
    @keyframes prayerSlideUp { to { transform: translateY(0); opacity: 1; } }

    .prayer-header {
      display:flex; align-items:center; justify-content:space-between;
      padding:10px 12px; background:#fff6dd; border-bottom:1px solid #f3e9c3;
    }
    .prayer-title { display:flex; align-items:center; gap:8px; font-weight:700; color:#8a6d1e; }
    .prayer-badge { background:#ffe9a8; color:#6b560f; font-size:12px; padding:2px 8px; border-radius:999px; }

    .prayer-close {
      border:0; background:transparent; font-size:20px; line-height:1; color:#7c7c7c;
      cursor:pointer; padding:2px 6px; border-radius:8px;
    }
    .prayer-close:hover { background: rgba(0,0,0,.05); }

    .prayer-body {
      padding:12px 14px 4px; color:#333; line-height:1.6; max-height:220px; overflow:auto;
    }
    .prayer-body h4 { margin:0 0 6px 0; font-size:15px; color:#444; }
    .prayer-body p { margin:0; white-space: pre-wrap; }

    .prayer-footer {
      display:flex; align-items:center; justify-content: space-between; gap:8px; padding:8px 12px 12px;
    }
    .prayer-actions { display:flex; gap:8px; }
    .prayer-btn {
      border:1px solid #e0dccc; background:#fff; color:#5a4d1b; padding:6px 10px; border-radius:10px; cursor:pointer; font-size:13px;
    }
    .prayer-btn:hover { background:#faf7ea; }
    .prayer-btn-primary { background:#f9d86b; border-color:#e5c458; color:#3e320e; font-weight:700; }
    .prayer-btn-primary:hover { filter: brightness(.98); }
    .prayer-checkbox { display:flex; align-items:center; gap:6px; color:#555; font-size:13px; }

    @media (max-width: 480px) {
      .prayer-toast { left:12px; right:12px; bottom:12px; width:auto; }
      .prayer-body { max-height:40vh; }
    }
  </style>
</head>
<body>
  <!-- 상단: 검색 + 오디오 -->
  <table class="top-fixed-table" id="main-table" cellpadding="0" cellspacing="0">
    <tr>
      <td class="search-cell">
        <form name="f1" action="">
          <input type="reset" name="b2" value="X">
          <input type="text" placeholder="검색어 입력" name="t1" value="">
          <input type="submit" name="b1" value="검색">
          <div id="search-count-container">
            <span id="search-count"></span>
            <button type="button" id="next-location-btn" style="display:none;">다음 위치</button>
          </div>
        </form>
      </td>

      <td class="audio-cell">
        <div id="custom-audio-player" role="region" aria-label="오디오 플레이어">
          <audio id="audio-file" preload="auto" playsinline>
            <source src="https://vod47.anyline.co.kr/vod_ezra/%EC%9D%BD%EA%B8%B0%2029.mp3" type="audio/mpeg">
            브라우저가 오디오 요소를 지원하지 않습니다.
          </audio>

          <div class="player-controls">
            <strong><span style="font-size:16px; background-color:#fcfcfc;" id="current-time" class="time-display">0:00</span></strong>
            <button id="play-btn" class="control-btn" aria-label="재생">▶</button>
            <button id="pause-btn" class="control-btn" aria-label="일시정지">⏸</button>
            <button id="stop-btn" class="control-btn" aria-label="정지">■</button>
            <strong><span style="font-size:16px; background-color:#fcfcfc;" id="remaining-time" class="time-display">0:00</span></strong>
          </div>

          <div class="toggle-buttons">
            <button id="show-progress">재생 위치</button>
            <button id="show-speed">재생 속도</button>
            <button id="show-volume">볼륨 조절</button>
          </div>

          <div class="progress-container" style="display:none;">
            <button id="rewind-10" class="skip-btn">⏪10s</button>
            <input type="range" id="progress-bar" min="0" max="100" value="0" step="0.01" aria-label="재생 위치">
            <button id="forward-10" class="skip-btn">10s⏩</button>
          </div>

          <div class="speed-controls" style="display:none;">
            <button id="speed-down-02" class="speed-btn">&laquo;</button>
            <button id="speed-down-01" class="speed-btn">&lt;</button>
            <span id="speed-display" class="speed-display">1.0x</span>
            <button id="speed-up-01" class="speed-btn">&gt;</button>
            <button id="speed-up-02" class="speed-btn">&raquo;</button>
            <button id="speed-reset">1.0</button>
          </div>

          <div class="volume-control" style="display:none;">
            <span style="font-size:14px;">볼륨</span>
            <button id="mute-btn">🔊</button>
            <input type="range" id="volume-slider" min="0" max="1" step="0.01" value="1">
          </div>
        </div>
      </td>
    </tr>
  </table>

  <!-- 플로팅 책 버튼 (구절설명 토글) -->
  <div class="explanation-button-container" id="explanation-button-container">
    <div class="explanation-button-wrapper" id="explanation-button-wrapper">
      <button class="explanation-icon-button" id="explanation-icon-button" aria-label="구절설명 열기" title="단어나 문장을 선택하면 ‘간단설명’ 또는 ‘상세설명’을 볼 수 있어요.">
        <span>📖</span>
      </button>
      <div class="explanation-sub-buttons" id="explanation-sub-buttons" role="menu">
        <button class="explanation-sub-button" id="detailed-explanation-button">상세 구절설명</button>
        <button class="explanation-sub-button" id="simple-explanation-button">간단 구절설명</button>
      </div>
    </div>
  </div>

  <!-- 폰트 크기 + 본문 요약 버튼 -->
  <div class="container" style="margin-top:6px;">
    <p class="font-size-label">Font Size</p>
    <button id="down">-</button>
    <p id="font-size">20</p>
    <button id="up">+</button>

    <span class="summary-buttons" aria-hidden="false">
      <button class="summary-btn" id="summary-simple-main">본문요약 간단</button>
      <button class="summary-btn" id="summary-detailed-main">본문요약 상세</button>
    </span>
  </div>

  <!-- 본문 -->
  <div>
    <h2 id="bible-text" style="line-height:1.2em;margin-left:15px;margin-right:15px;font-style:normal;font-weight:normal;color:black;font-size:20px;word-break:break-all;">
 <strong>
<!-- 일차 내비게이션 -->
<nav class="day-nav" aria-label="일차 이동">
  <a class="day-btn" href="https://seagwang1124.github.io/90html/28%EC%9D%BC%EC%B0%A8.html" aria-label="통독 28일차로 이동">≪</a>
  <span class="day-title">통독 29일차</span>
  <a class="day-btn" href="https://seagwang1124.github.io/90html/30%EC%9D%BC%EC%B0%A8.html" aria-label="통독 30일차로 이동">≫</a>
  <a class="day-btn" href="https://seagwang1124.github.io/90html" aria-label="통독 목록으로 이동">통독 목록</a>
</nav>
<br>범위: 대상27-29장/ 시2,20,21, 72,93,94,95, 97,98,99,101, 110,144,145편</br></strong>
<br>&nbsp;</br>

<strong><br><font color="#4682b4">역대상 27장-29장</font></br></strong>
<strong><br><font color="#4682b4">역대상 27 장</font></br></strong>
<br><i><font color="#808080">*모든 가문의 우두머리와 관원들*</font></i></br>
<br>1 이스라엘 자손의 모든 가문의 우두머리와 천부장과 백부장과 왕을 섬기는 관원들이 그들의 숫자대로 반이 나누이니 각 반열이 이만 사천 명씩이라 일 년 동안 달마다 들어가며 나왔으니</br>
<br>2 첫째 달 반의 반장은 삽디엘의 아들 야소브암이요 그의 반에 이만 사천 명이라</br>
<br>3 그는 베레스의 자손으로서 첫째 달 반의 모든 지휘관의 우두머리가 되었고</br>
<br>4 둘째 달 반의 반장은 아호아 사람 도대요 또 미글롯이 그의 반의 주장이 되었으니 그의 반에 이만 사천 명이요</br>
<br>5 셋째 달 군대의 셋째 지휘관은 대제사장 여호야다의 아들 브나야요 그의 반에 이만 사천 명이라</br>
<br>6 이 브나야는 삼십 명 중에 용사요 삼십 명 위에 있으며 그의 반 중에 그의 아들 암미사밧이 있으며</br>
<br>7 넷째 달 넷째 지휘관은 요압의 아우 아사헬이요 그 다음은 그의 아들 스바댜이니 그의 반에 이만 사천 명이요</br>
<br>8 다섯째 달 다섯째 지휘관은 이스라 사람 삼훗이니 그의 반에 이만 사천 명이요</br>
<br>9 여섯째 달 여섯째 지휘관은 드고아 사람 익게스의 아들 이라이니 그의 반에 이만 사천 명이요</br>
<br>10 일곱째 달 일곱째 지휘관은 에브라임 자손에 속한 발론 사람 헬레스이니 그의 반에 이만 사천 명이요</br>
<br>11 여덟째 달 여덟째 지휘관은 세라 족속 후사 사람 십브개이니 그의 반에 이만 사천 명이요</br>
<br>12 아홉째 달 아홉째 지휘관은 베냐민 자손 아나돗 사람 아비에셀이니 그의 반에 이만 사천 명이요</br>
<br>13 열째 달 열째 지휘관은 세라 족속 느도바 사람 마하래이니 그의 반에 이만 사천 명이요</br>
<br>14 열한째 달 열한째 지휘관은 에브라임 자손에 속한 비라돈 사람 브나야이니 그의 반에 이만 사천 명이요</br>
<br>15 열두째 달 열두째 지휘관은 옷니엘 자손에 속한 느도바 사람 헬대니 그 반에 이만 사천 명이었더라</br>
<br><i><font color="#808080">*각 지파를 관할하는 자들*</font></i></br>
<br>16 이스라엘 지파를 관할하는 자는 이러하니라 르우벤 사람의 지도자는 시그리의 아들 엘리에셀이요 시므온 사람의 지도자는 마아가의 아들 스바댜요</br>
<br>17 레위 사람의 지도자는 그무엘의 아들 하사뱌요 아론 자손의 지도자는 사독이요</br>
<br>18 유다의 지도자는 다윗의 형 엘리후요 잇사갈의 지도자는 미가엘의 아들 오므리요</br>
<br>19 스불론의 지도자는 오바댜의 아들 이스마야요 납달리의 지도자는 아스리엘의 아들 여레못이요</br>
<br>20 에브라임 자손의 지도자는 아사시야의 아들 호세아요 므낫세 반 지파의 지도자는 브다야의 아들 요엘이요</br>
<br>21 길르앗에 있는 므낫세 반 지파의 지도자는 스가랴의 아들 잇도요 베냐민의 지도자는 아브넬의 아들 야아시엘이요</br>
<br>22 단은 여로함의 아들 아사렐이니 이들은 이스라엘 지파의 지휘관이었더라</br>
<br>23 이스라엘 사람의 이십 세 이하의 수효는 다윗이 조사하지 아니하였으니 이는 여호와께서 전에 말씀하시기를 이스라엘 사람을 하늘의 별 같이 많게 하리라 하셨음이라</br>
<br>24 스루야의 아들 요압이 조사하기를 시작하고 끝내지도 못해서 그 일로 말미암아 진노가 이스라엘에게 임한지라 그 수효를 다윗 왕의 역대지략에 기록하지 아니하였더라</br>
<br><i><font color="#808080">*왕의 재산을 맡은 자들*</font></i></br>
<br>25 아디엘의 아들 아스마웻은 왕의 곳간을 맡았고 웃시야의 아들 요나단은 밭과 성읍과 마을과 망대의 곳간을 맡았고</br>
<br>26 글룹의 아들 에스리는 밭 가는 농민을 거느렸고</br>
<br>27 라마 사람 시므이는 포도원을 맡았고 스밤 사람 삽디는 포도원의 소산 포도주 곳간을 맡았고</br>
<br>28 게델 사람 바알하난은 평야의 감람나무와 뽕나무를 맡았고 요아스는 기름 곳간을 맡았고</br>
<br>29 사론 사람 시드래는 사론에서 먹이는 소 떼를 맡았고 아들래의 아들 사밧은 골짜기에 있는 소 떼를 맡았고</br>
<br>30 이스마엘 사람 오빌은 낙타를 맡았고 메로놋 사람 예드야는 나귀를 맡았고 하갈 사람 야시스는 양 떼를 맡았으니</br>
<br>31 다윗 왕의 재산을 맡은 자들이 이러하였더라</br>
<br><i><font color="#808080">*다윗을 섬기는 사람들*</font></i></br>
<br>32 다윗의 숙부 요나단은 지혜가 있어서 모사가 되며 서기관도 되었고 학모니의 아들 여히엘은 왕자들의 수종자가 되었고</br>
<br>33 아히도벨은 왕의 모사가 되었고 아렉 사람 후새는 왕의 벗이 되었고</br>
<br>34 브나야의 아들 여호야다와 아비아달은 아히도벨의 뒤를 이었고 요압은 왕의 군대 지휘관이 되었더라</br>
<br>&nbsp;</br>
<strong><br><font color="#4682b4">역대상 28 장</font></br></strong>
<br><i><font color="#808080">*다윗이 성전 건축을 지시하다*</font></i></br>
<br>1 다윗이 이스라엘 모든 고관들 곧 각 지파의 어른과 왕을 섬기는 반장들과 천부장들과 백부장들과 및 왕과 왕자의 모든 소유와 가축의 감독과 내시와 장사와 모든 용사를 예루살렘으로 소집하고</br>
<br>2 이에 다윗 왕이 일어서서 이르되 나의 형제들, 나의 백성들아 내 말을 들으라 나는 여호와의 언약궤 곧 우리 하나님의 발판을 봉안할 성전을 건축할 마음이 있어서 건축할 재료를 준비하였으나</br>
<br>3 하나님이 내게 이르시되 너는 전쟁을 많이 한 사람이라 피를 많이 흘렸으니 내 이름을 위하여 성전을 건축하지 못하리라 하셨느니라</br>
<br>4 그러나 이스라엘 하나님 여호와께서 전에 나를 내 부친의 온 집에서 택하여 영원히 이스라엘 왕이 되게 하셨나니 곧 하나님이 유다 지파를 택하사 머리를 삼으시고 유다의 가문에서 내 부친의 집을 택하시고 내 부친의 아들들 중에서 나를 기뻐하사 온 이스라엘의 왕을 삼으셨느니라</br>
<br>5 여호와께서 내게 여러 아들을 주시고 그 모든 아들 중에서 내 아들 솔로몬을 택하사 여호와의 나라 왕위에 앉혀 이스라엘을 다스리게 하려 하실새</br>
<br>6 내게 이르시기를 네 아들 솔로몬 그가 내 성전을 건축하고 내 여러 뜰을 만들리니 이는 내가 그를 택하여 내 아들로 삼고 나는 그의 아버지가 될 것임이라</br>
<br>7 그가 만일 나의 계명과 법도를 힘써 준행하기를 오늘과 같이 하면 내가 그의 나라를 영원히 견고하게 하리라 하셨느니라</br>
<br>8 이제 너희는 온 이스라엘 곧 여호와의 회중이 보는 데에서와 우리 하나님이 들으시는 데에서 너희 하나님 여호와의 모든 계명을 구하여 지키기로 하라 그리하면 너희가 이 아름다운 땅을 누리고 너희 후손에게 끼쳐 영원한 기업이 되게 하리라</br>
<br>9 내 아들 솔로몬아 너는 네 아버지의 하나님을 알고 온전한 마음과 기쁜 뜻으로 섬길지어다 여호와께서는 모든 마음을 감찰하사 모든 의도를 아시나니 네가 만일 그를 찾으면 만날 것이요 만일 네가 그를 버리면 그가 너를 영원히 버리시리라</br>
<br>10 그런즉 이제 너는 삼갈지어다 여호와께서 너를 택하여 성전의 건물을 건축하게 하셨으니 힘써 행할지니라 하니라</br>
<br>11 다윗이 성전의 복도와 그 집들과 그 곳간과 다락과 골방과 속죄소의 설계도를 그의 아들 솔로몬에게 주고</br>
<br>12 또 그가 영감으로 받은 모든 것 곧 여호와의 성전의 뜰과 사면의 모든 방과 하나님의 성전 곳간과 성물 곳간의 설계도를 주고</br>
<br>13 또 제사장과 레위 사람의 반열과 여호와의 성전에서 섬기는 모든 일과 여호와의 성전을 섬기는 데에 쓰는 모든 그릇의 양식을 설명하고</br>
<br>14 또 모든 섬기는 데에 쓰는 금 기구를 만들 금의 무게와 모든 섬기는 데에 쓰는 은 기구를 만들 은의 무게를 정하고</br>
<br>15 또 금 등잔대들과 그 등잔 곧 각 등잔대와 그 등잔을 만들 금의 무게와 은 등잔대와 그 등잔을 만들 은의 무게를 각기 그 기구에 알맞게 하고</br>
<br>16 또 진설병의 각 상을 만들 금의 무게를 정하고 은상을 만들 은도 그렇게 하고</br>
<br>17 갈고리와 대접과 종지를 만들 순금과 금 잔 곧 각 잔을 만들 금의 무게와 또 은 잔 곧 각 잔을 만들 은의 무게를 정하고</br>
<br>18 또 향단에 쓸 순금과 또 수레 곧 금 그룹들의 설계도대로 만들 금의 무게를 정해 주니 이 그룹들은 날개를 펴서 여호와의 언약궤를 덮는 것이더라</br>
<br>19 다윗이 이르되 여호와의 손이 내게 임하여 이 모든 일의 설계를 그려 나에게 알려 주셨느니라</br>
<br>20 또 그의 아들 솔로몬에게 이르되 너는 강하고 담대하게 이 일을 행하라 두려워하지 말며 놀라지 말라 네가 여호와의 성전 공사의 모든 일을 마치기까지 여호와 하나님 나의 하나님이 너와 함께 계시사 네게서 떠나지 아니하시고 너를 버리지 아니하시리라</br>
<br>21 제사장과 레위 사람의 반이 있으니 하나님의 성전의 모든 공사를 도울 것이요 또 모든 공사에 유능한 기술자가 기쁜 마음으로 너와 함께 할 것이요 또 모든 지휘관과 백성이 온전히 네 명령 아래에 있으리라</br>
<br>&nbsp;</br>
<strong><br><font color="#4682b4">역대상 29 장</font></br></strong>
<br><i><font color="#808080">*성전 건축에 쓸 예물*</font></i></br>
<br>1 다윗 왕이 온 회중에게 이르되 내 아들 솔로몬이 유일하게 하나님께서 택하신 바 되었으나 아직 어리고 미숙하며 이 공사는 크도다 이 성전은 사람을 위한 것이 아니요 여호와 하나님을 위한 것이라</br>
<br>2 내가 이미 내 하나님의 성전을 위하여 힘을 다하여 준비하였나니 곧 기구를 만들 금과 은과 놋과 철과 나무와 또 마노와 가공할 검은 보석과 채석과 다른 모든 보석과 옥돌이 매우 많으며</br>
<br>3 성전을 위하여 준비한 이 모든 것 외에도 내 마음이 내 하나님의 성전을 사모하므로 내가 사유한 금, 은으로 내 하나님의 성전을 위하여 드렸노니</br>
<br>4 곧 오빌의 금 삼천 달란트와 순은 칠천 달란트라 모든 성전 벽에 입히며</br>
<br>5 금, 은 그릇을 만들며 장인의 손으로 하는 모든 일에 쓰게 하였노니 오늘 누가 즐거이 손에 채워 여호와께 드리겠느냐 하는지라</br>
<br>6 이에 모든 가문의 지도자들과 이스라엘 모든 지파의 지도자들과 천부장과 백부장과 왕의 사무관이 다 즐거이 드리되</br>
<br>7 하나님의 성전 공사를 위하여 금 오천 달란트와 금 만 다릭 은 만 달란트와 놋 만 팔천 달란트와 철 십만 달란트를 드리고</br>
<br>8 보석을 가진 모든 사람은 게르손 사람 여히엘의 손에 맡겨 여호와의 성전 곳간에 드렸더라</br>
<br>9 백성들은 자원하여 드렸으므로 기뻐하였으니 곧 그들이 성심으로 여호와께 자원하여 드렸으므로 다윗 왕도 심히 기뻐하니라</br>
<br><i><font color="#808080">*다윗의 감사 기도*</font></i></br>
<br>10 다윗이 온 회중 앞에서 여호와를 송축하여 이르되 우리 조상 이스라엘의 하나님 여호와여 주는 영원부터 영원까지 송축을 받으시옵소서</br>
<br>11 여호와여 위대하심과 권능과 영광과 승리와 위엄이 다 주께 속하였사오니 천지에 있는 것이 다 주의 것이로소이다 여호와여 주권도 주께 속하였사오니 주는 높으사 만물의 머리이심이니이다</br>
<br>12 부와 귀가 주께로 말미암고 또 주는 만물의 주재가 되사 손에 권세와 능력이 있사오니 모든 사람을 크게 하심과 강하게 하심이 주의 손에 있나이다</br>
<br>13 우리 하나님이여 이제 우리가 주께 감사하오며 주의 영화로운 이름을 찬양하나이다</br>
<br>14 나와 내 백성이 무엇이기에 이처럼 즐거운 마음으로 드릴 힘이 있었나이까 모든 것이 주께로 말미암았사오니 우리가 주의 손에서 받은 것으로 주께 드렸을 뿐이니이다</br>
<br>15 우리는 우리 조상들과 같이 주님 앞에서 이방 나그네와 거류민들이라 세상에 있는 날이 그림자 같아서 희망이 없나이다</br>
<br>16 우리 하나님 여호와여 우리가 주의 거룩한 이름을 위하여 성전을 건축하려고 미리 저축한 이 모든 물건이 다 주의 손에서 왔사오니 다 주의 것이니이다</br>
<br>17 나의 하나님이여 주께서 마음을 감찰하시고 정직을 기뻐하시는 줄을 내가 아나이다 내가 정직한 마음으로 이 모든 것을 즐거이 드렸사오며 이제 내가 또 여기 있는 주의 백성이 주께 자원하여 드리는 것을 보오니 심히 기쁘도소이다</br>
<br>18 우리 조상들 아브라함과 이삭과 이스라엘의 하나님 여호와여 주께서 이것을 주의 백성의 심중에 영원히 두어 생각하게 하시고 그 마음을 준비하여 주께로 돌아오게 하시오며</br>
<br>19 또 내 아들 솔로몬에게 정성된 마음을 주사 주의 계명과 권면과 율례를 지켜 이 모든 일을 행하게 하시고 내가 위하여 준비한 것으로 성전을 건축하게 하옵소서 하였더라</br>
<br>20 다윗이 온 회중에게 이르되 너희는 너희 하나님 여호와를 송축하라 하매 회중이 그의 조상들의 하나님 여호와를 송축하고 머리를 숙여 여호와와 왕에게 절하고</br>
<br>21 이튿날 여호와께 제사를 드리고 또 여호와께 번제를 드리니 수송아지가 천 마리요 숫양이 천 마리요 어린 양이 천 마리요 또 그 전제라 온 이스라엘을 위하여 풍성한 제물을 드리고</br>
<br>22 이 날에 무리가 크게 기뻐하여 여호와 앞에서 먹으며 마셨더라 무리가 다윗의 아들 솔로몬을 다시 왕으로 삼아 기름을 부어 여호와께 돌려 주권자가 되게 하고 사독에게도 기름을 부어 제사장이 되게 하니라</br>
<br>23 솔로몬이 여호와께서 주신 왕위에 앉아 아버지 다윗을 이어 왕이 되어 형통하니 온 이스라엘이 그의 명령에 순종하며</br>
<br>24 모든 방백과 용사와 다윗 왕의 여러 아들들이 솔로몬 왕에게 복종하니</br>
<br>25 여호와께서 솔로몬을 모든 이스라엘의 목전에서 심히 크게 하시고 또 왕의 위엄을 그에게 주사 그전 이스라엘 모든 왕보다 뛰어나게 하셨더라</br>
<br><i><font color="#808080">*다윗의 행적*</font></i></br>
<br>26 이새의 아들 다윗이 온 이스라엘의 왕이 되어</br>
<br>27 이스라엘을 다스린 기간은 사십 년이라 헤브론에서 칠 년간 다스렸고 예루살렘에서 삼십삼 년을 다스렸더라</br>
<br>28 그가 나이 많아 늙도록 부하고 존귀를 누리다가 죽으매 그의 아들 솔로몬이 대신하여 왕이 되니라</br>
<br>29 다윗 왕의 행적은 처음부터 끝까지 선견자 사무엘의 글과 선지자 나단의 글과 선견자 갓의 글에 다 기록되고</br>
<br>30 또 그의 왕 된 일과 그의 권세와 그와 이스라엘과 온 세상 모든 나라의 지난 날의 역사가 다 기록되어 있느니라</br>
<br>&nbsp;</br>
<strong><br><font color="#4682b4">시편 2 편</font></br></strong>
<br>1 어찌하여 이방 나라들이 분노하며 민족들이 헛된 일을 꾸미는가</br>
<br>2 세상의 군왕들이 나서며 관원들이 서로 꾀하여 여호와와 그의 기름 부음 받은 자를 대적하며</br>
<br>3 우리가 그들의 맨 것을 끊고 그의 결박을 벗어 버리자 하는도다</br>
<br>4 하늘에 계신 이가 웃으심이여 주께서 그들을 비웃으시리로다</br>
<br>5 그 때에 분을 발하며 진노하사 그들을 놀라게 하여 이르시기를</br>
<br>6 내가 나의 왕을 내 거룩한 산 시온에 세웠다 하시리로다</br>
<br>7 내가 여호와의 명령을 전하노라 여호와께서 내게 이르시되 너는 내 아들이라 오늘 내가 너를 낳았도다</br>
<br>8 내게 구하라 내가 이방 나라를 네 유업으로 주리니 네 소유가 땅 끝까지 이르리로다</br>
<br>9 네가 철장으로 그들을 깨뜨림이여 질그릇 같이 부수리라 하시도다</br>
<br>10 그런즉 군왕들아 너희는 지혜를 얻으며 세상의 재판관들아 너희는 교훈을 받을지어다</br>
<br>11 여호와를 경외함으로 섬기고 떨며 즐거워할지어다</br>
<br>12 그의 아들에게 입맞추라 그렇지 아니하면 진노하심으로 너희가 길에서 망하리니 그의 진노가 급하심이라 여호와께 피하는 모든 사람은 다 복이 있도다</br>
<br>&nbsp;</br>
<strong><br><font color="#4682b4">시편 20 편</font></br></strong>
<br><i><font color="#808080">*다윗의 시, 인도자를 따라 부르는 노래*</font></i></br>
<br>1 환난 날에 여호와께서 네게 응답하시고 야곱의 하나님의 이름이 너를 높이 드시며</br>
<br>2 성소에서 너를 도와 주시고 시온에서 너를 붙드시며</br>
<br>3 네 모든 소제를 기억하시며 네 번제를 받아 주시기를 원하노라 (셀라)</br>
<br>4 네 마음의 소원대로 허락하시고 네 모든 계획을 이루어 주시기를 원하노라</br>
<br>5 우리가 너의 승리로 말미암아 개가를 부르며 우리 하나님의 이름으로 우리의 깃발을 세우리니 여호와께서 네 모든 기도를 이루어 주시기를 원하노라</br>
<br>6 여호와께서 자기에게 기름 부음 받은 자를 구원하시는 줄 이제 내가 아노니 그의 오른손의 구원하는 힘으로 그의 거룩한 하늘에서 그에게 응답하시리로다</br>
<br>7 어떤 사람은 병거, 어떤 사람은 말을 의지하나 우리는 여호와 우리 하나님의 이름을 자랑하리로다</br>
<br>8 그들은 비틀거리며 엎드러지고 우리는 일어나 바로 서도다</br>
<br>9 여호와여 왕을 구원하소서 우리가 부를 때에 우리에게 응답하소서</br>
<br>&nbsp;</br>
<strong><br><font color="#4682b4">시편 21 편</font></br></strong>
<br><i><font color="#808080">*다윗의 시, 인도자를 따라 부르는 노래*</font></i></br>
<br>1 여호와여 왕이 주의 힘으로 말미암아 기뻐하며 주의 구원으로 말미암아 크게 즐거워하리이다</br>
<br>2 그의 마음의 소원을 들어 주셨으며 그의 입술의 요구를 거절하지 아니하셨나이다 (셀라)</br>
<br>3 주의 아름다운 복으로 그를 영접하시고 순금 관을 그의 머리에 씌우셨나이다</br>
<br>4 그가 생명을 구하매 주께서 그에게 주셨으니 곧 영원한 장수로소이다</br>
<br>5 주의 구원이 그의 영광을 크게 하시고 존귀와 위엄을 그에게 입히시나이다</br>
<br>6 그가 영원토록 지극한 복을 받게 하시며 주 앞에서 기쁘고 즐겁게 하시나이다</br>
<br>7 왕이 여호와를 의지하오니 지존하신 이의 인자함으로 흔들리지 아니하리이다</br>
<br>8 왕의 손이 왕의 모든 원수들을 찾아냄이여 왕의 오른손이 왕을 미워하는 자들을 찾아내리로다</br>
<br>9 왕이 노하실 때에 그들을 풀무불 같게 할 것이라 여호와께서 진노하사 그들을 삼키시리니 불이 그들을 소멸하리로다</br>
<br>10 왕이 그들의 후손을 땅에서 멸함이여 그들의 자손을 사람 중에서 끊으리로다</br>
<br>11 비록 그들이 왕을 해하려 하여 음모를 꾸몄으나 이루지 못하도다</br>
<br>12 왕이 그들로 돌아서게 함이여 그들의 얼굴을 향하여 활시위를 당기리로다</br>
<br>13 여호와여 주의 능력으로 높임을 받으소서 우리가 주의 권능을 노래하고 찬송하게 하소서</br>
<br>&nbsp;</br>
<strong><br><font color="#4682b4">시편 72 편</font></br></strong>
<br><i><font color="#808080">*솔로몬의 시*</font></i></br>
<br>1 하나님이여 주의 판단력을 왕에게 주시고 주의 공의를 왕의 아들에게 주소서</br>
<br>2 그가 주의 백성을 공의로 재판하며 주의 가난한 자를 정의로 재판하리니</br>
<br>3 의로 말미암아 산들이 백성에게 평강을 주며 작은 산들도 그리하리로다</br>
<br>4 그가 가난한 백성의 억울함을 풀어 주며 궁핍한 자의 자손을 구원하며 압박하는 자를 꺾으리로다</br>
<br>5 그들이 해가 있을 동안에도 주를 두려워하며 달이 있을 동안에도 대대로 그리하리로다</br>
<br>6 그는 벤 풀 위에 내리는 비 같이, 땅을 적시는 소낙비 같이 내리리니</br>
<br>7 그의 날에 의인이 흥왕하여 평강의 풍성함이 달이 다할 때까지 이르리로다</br>
<br>8 그가 바다에서부터 바다까지와 강에서부터 땅 끝까지 다스리리니</br>
<br>9 광야에 사는 자는 그 앞에 굽히며 그의 원수들은 티끌을 핥을 것이며</br>
<br>10 다시스와 섬의 왕들이 조공을 바치며 스바와 시바 왕들이 예물을 드리리로다</br>
<br>11 모든 왕이 그의 앞에 부복하며 모든 민족이 다 그를 섬기리로다</br>
<br>12 그는 궁핍한 자가 부르짖을 때에 건지며 도움이 없는 가난한 자도 건지며</br>
<br>13 그는 가난한 자와 궁핍한 자를 불쌍히 여기며 궁핍한 자의 생명을 구원하며</br>
<br>14 그들의 생명을 압박과 강포에서 구원하리니 그들의 피가 그의 눈 앞에서 존귀히 여김을 받으리로다</br>
<br>15 그들이 생존하여 스바의 금을 그에게 드리며 사람들이 그를 위하여 항상 기도하고 종일 찬송하리로다</br>
<br>16 산 꼭대기의 땅에도 곡식이 풍성하고 그것의 열매가 레바논 같이 흔들리며 성에 있는 자가 땅의 풀 같이 왕성하리로다</br>
<br>17 그의 이름이 영구함이여 그의 이름이 해와 같이 장구하리로다 사람들이 그로 말미암아 복을 받으리니 모든 민족이 다 그를 복되다 하리로다</br>
<br>18 홀로 기이한 일들을 행하시는 여호와 하나님 곧 이스라엘의 하나님을 찬송하며</br>
<br>19 그 영화로운 이름을 영원히 찬송할지어다 온 땅에 그의 영광이 충만할지어다 아멘 아멘</br>
<br>20 이새의 아들 다윗의 기도가 끝나니라</br>
<br>&nbsp;</br>
<strong><br><font color="#4682b4">시편 93 편</font></br></strong>
<br>1 여호와께서 다스리시니 스스로 권위를 입으셨도다 여호와께서 능력의 옷을 입으시며 띠를 띠셨으므로 세계도 견고히 서서 흔들리지 아니하는도다</br>
<br>2 주의 보좌는 예로부터 견고히 섰으며 주는 영원부터 계셨나이다</br>
<br>3 여호와여 큰 물이 소리를 높였고 큰 물이 그 소리를 높였으니 큰 물이 그 물결을 높이나이다</br>
<br>4 높이 계신 여호와의 능력은 많은 물 소리와 바다의 큰 파도보다 크니이다</br>
<br>5 여호와여 주의 증거들이 매우 확실하고 거룩함이 주의 집에 합당하니 여호와는 영원무궁하시리이다</br>
<br>&nbsp;</br>
<strong><br><font color="#4682b4">시편 94 편</font></br></strong>
<br>1 여호와여 복수하시는 하나님이여 복수하시는 하나님이여 빛을 비추어 주소서</br>
<br>2 세계를 심판하시는 주여 일어나사 교만한 자들에게 마땅한 벌을 주소서</br>
<br>3 여호와여 악인이 언제까지, 악인이 언제까지 개가를 부르리이까</br>
<br>4 그들이 마구 지껄이며 오만하게 떠들며 죄악을 행하는 자들이 다 자만하나이다</br>
<br>5 여호와여 그들이 주의 백성을 짓밟으며 주의 소유를 곤고하게 하며</br>
<br>6 과부와 나그네를 죽이며 고아들을 살해하며</br>
<br>7 말하기를 여호와가 보지 못하며 야곱의 하나님이 알아차리지 못하리라 하나이다</br>
<br>8 백성 중의 어리석은 자들아 너희는 생각하라 무지한 자들아 너희가 언제나 지혜로울까</br>
<br>9 귀를 지으신 이가 듣지 아니하시랴 눈을 만드신 이가 보지 아니하시랴</br>
<br>10 뭇 백성을 징벌하시는 이 곧 지식으로 사람을 교훈하시는 이가 징벌하지 아니하시랴</br>
<br>11 여호와께서는 사람의 생각이 허무함을 아시느니라</br>
<br>12 여호와여 주로부터 징벌을 받으며 주의 법으로 교훈하심을 받는 자가 복이 있나니</br>
<br>13 이런 사람에게는 환난의 날을 피하게 하사 악인을 위하여 구덩이를 팔 때까지 평안을 주시리이다</br>
<br>14 여호와께서는 자기 백성을 버리지 아니하시며 자기의 소유를 외면하지 아니하시리로다</br>
<br>15 심판이 의로 돌아가리니 마음이 정직한 자가 다 따르리로다</br>
<br>16 누가 나를 위하여 일어나서 행악자들을 치며 누가 나를 위하여 일어나서 악행하는 자들을 칠까</br>
<br>17 여호와께서 내게 도움이 되지 아니하셨더면 내 영혼이 벌써 침묵 속에 잠겼으리로다</br>
<br>18 여호와여 나의 발이 미끄러진다고 말할 때에 주의 인자하심이 나를 붙드셨사오며</br>
<br>19 내 속에 근심이 많을 때에 주의 위안이 내 영혼을 즐겁게 하시나이다</br>
<br>20 율례를 빙자하고 재난을 꾸미는 악한 재판장이 어찌 주와 어울리리이까</br>
<br>21 그들이 모여 의인의 영혼을 치려 하며 무죄한 자를 정죄하여 피를 흘리려 하나</br>
<br>22 여호와는 나의 요새이시요 나의 하나님은 내가 피할 반석이시라</br>
<br>23 그들의 죄악을 그들에게로 되돌리시며 그들의 악으로 말미암아 그들을 끊으시리니 여호와 우리 하나님이 그들을 끊으시리로다</br>
<br>&nbsp;</br>
<strong><br><font color="#4682b4">시편 95 편</font></br></strong>
<br>1 오라 우리가 여호와께 노래하며 우리의 구원의 반석을 향하여 즐거이 외치자</br>
<br>2 우리가 감사함으로 그 앞에 나아가며 시를 지어 즐거이 그를 노래하자</br>
<br>3 여호와는 크신 하나님이시요 모든 신들보다 크신 왕이시기 때문이로다</br>
<br>4 땅의 깊은 곳이 그의 손 안에 있으며 산들의 높은 곳도 그의 것이로다</br>
<br>5 바다도 그의 것이라 그가 만드셨고 육지도 그의 손이 지으셨도다</br>
<br>6 오라 우리가 굽혀 경배하며 우리를 지으신 여호와 앞에 무릎을 꿇자</br>
<br>7 그는 우리의 하나님이시요 우리는 그가 기르시는 백성이며 그의 손이 돌보시는 양이기 때문이라 너희가 오늘 그의 음성을 듣거든</br>
<br>8 너희는 므리바에서와 같이 또 광야의 맛사에서 지냈던 날과 같이 너희 마음을 완악하게 하지 말지어다</br>
<br>9 그 때에 너희 조상들이 내가 행한 일을 보고서도 나를 시험하고 조사하였도다</br>
<br>10 내가 사십 년 동안 그 세대로 말미암아 근심하여 이르기를 그들은 마음이 미혹된 백성이라 내 길을 알지 못한다 하였도다</br>
<br>11 그러므로 내가 노하여 맹세하기를 그들은 내 안식에 들어오지 못하리라 하였도다</br>
<br>&nbsp;</br>
<strong><br><font color="#4682b4">시편 97 편</font></br></strong>
<br>1 여호와께서 다스리시나니 땅은 즐거워하며 허다한 섬은 기뻐할지어다</br>
<br>2 구름과 흑암이 그를 둘렀고 의와 공평이 그의 보좌의 기초로다</br>
<br>3 불이 그의 앞에서 나와 사방의 대적들을 불사르시는도다</br>
<br>4 그의 번개가 세계를 비추니 땅이 보고 떨었도다</br>
<br>5 산들이 여호와의 앞 곧 온 땅의 주 앞에서 밀랍 같이 녹았도다</br>
<br>6 하늘이 그의 의를 선포하니 모든 백성이 그의 영광을 보았도다</br>
<br>7 조각한 신상을 섬기며 허무한 것으로 자랑하는 자는 다 수치를 당할 것이라 너희 신들아 여호와께 경배할지어다</br>
<br>8 여호와여 시온이 주의 심판을 듣고 기뻐하며 유다의 딸들이 즐거워하였나이다</br>
<br>9 여호와여 주는 온 땅 위에 지존하시고 모든 신들보다 위에 계시니이다</br>
<br>10 여호와를 사랑하는 너희여 악을 미워하라 그가 그의 성도의 영혼을 보전하사 악인의 손에서 건지시느니라</br>
<br>11 의인을 위하여 빛을 뿌리고 마음이 정직한 자를 위하여 기쁨을 뿌리시는도다</br>
<br>12 의인이여 너희는 여호와로 말미암아 기뻐하며 그의 거룩한 이름에 감사할지어다</br>
<br>&nbsp;</br>
<strong><br><font color="#4682b4">시편 98 편</font></br></strong>
<br><i><font color="#808080">* 시 *</font></i></br>
<br>1 새 노래로 여호와께 찬송하라 그는 기이한 일을 행하사 그의 오른손과 거룩한 팔로 자기를 위하여 구원을 베푸셨음이로다</br>
<br>2 여호와께서 그의 구원을 알게 하시며 그의 공의를 뭇 나라의 목전에서 명백히 나타내셨도다</br>
<br>3 그가 이스라엘의 집에 베푸신 인자와 성실을 기억하셨으므로 땅 끝까지 이르는 모든 것이 우리 하나님의 구원을 보았도다</br>
<br>4 온 땅이여 여호와께 즐거이 소리칠지어다 소리 내어 즐겁게 노래하며 찬송할지어다</br>
<br>5 수금으로 여호와를 노래하라 수금과 음성으로 노래할지어다</br>
<br>6 나팔과 호각 소리로 왕이신 여호와 앞에 즐겁게 소리칠지어다</br>
<br>7 바다와 거기 충만한 것과 세계와 그 중에 거주하는 자는 다 외칠지어다</br>
<br>8 여호와 앞에서 큰 물은 박수할지어다 산악이 함께 즐겁게 노래할지어다</br>
<br>9 그가 땅을 심판하러 임하실 것임이로다 그가 의로 세계를 판단하시며 공평으로 그의 백성을 심판하시리로다</br>
<br>&nbsp;</br>
<strong><br><font color="#4682b4">시편 99 편</font></br></strong>
<br>1 여호와께서 다스리시니 만민이 떨 것이요 여호와께서 그룹 사이에 좌정하시니 땅이 흔들릴 것이로다</br>
<br>2 시온에 계시는 여호와는 위대하시고 모든 민족보다 높으시도다</br>
<br>3 주의 크고 두려운 이름을 찬송할지니 그는 거룩하심이로다</br>
<br>4 능력 있는 왕은 정의를 사랑하느니라 주께서 공의를 견고하게 세우시고 주께서 야곱에게 정의와 공의를 행하시나이다</br>
<br>5 너희는 여호와 우리 하나님을 높여 그의 발등상 앞에서 경배할지어다 그는 거룩하시도다</br>
<br>6 그의 제사장들 중에는 모세와 아론이 있고 그의 이름을 부르는 자들 중에는 사무엘이 있도다 그들이 여호와께 간구하매 응답하셨도다</br>
<br>7 여호와께서 구름 기둥 가운데서 그들에게 말씀하시니 그들은 그가 그들에게 주신 증거와 율례를 지켰도다</br>
<br>8 여호와 우리 하나님이여 주께서는 그들에게 응답하셨고 그들의 행한 대로 갚기는 하셨으나 그들을 용서하신 하나님이시니이다</br>
<br>9 너희는 여호와 우리 하나님을 높이고 그 성산에서 예배할지어다 여호와 우리 하나님은 거룩하심이로다</br>
<br>&nbsp;</br>
<strong><br><font color="#4682b4">시편 101 편</font></br></strong>
<br><i><font color="#808080">*다윗의 시*</font></i></br>
<br>1 내가 인자와 정의를 노래하겠나이다 여호와여 내가 주께 찬양하리이다</br>
<br>2 내가 완전한 길을 주목하오리니 주께서 어느 때나 내게 임하시겠나이까 내가 완전한 마음으로 내 집 안에서 행하리이다</br>
<br>3 나는 비천한 것을 내 눈 앞에 두지 아니할 것이요 배교자들의 행위를 내가 미워하오리니 나는 그 어느 것도 붙들지 아니하리이다</br>
<br>4 사악한 마음이 내게서 떠날 것이니 악한 일을 내가 알지 아니하리로다</br>
<br>5 자기의 이웃을 은근히 헐뜯는 자를 내가 멸할 것이요 눈이 높고 마음이 교만한 자를 내가 용납하지 아니하리로다</br>
<br>6 내 눈이 이 땅의 충성된 자를 살펴 나와 함께 살게 하리니 완전한 길에 행하는 자가 나를 따르리로다</br>
<br>7 거짓을 행하는 자는 내 집 안에 거주하지 못하며 거짓말하는 자는 내 목전에 서지 못하리로다</br>
<br>8 아침마다 내가 이 땅의 모든 악인을 멸하리니 악을 행하는 자는 여호와의 성에서 다 끊어지리로다</br>
<br>&nbsp;</br>
<strong><br><font color="#4682b4">시편 110 편</font></br></strong>
<br><i><font color="#808080">*다윗의 시*</font></i></br>
<br>1 여호와께서 내 주에게 말씀하시기를 내가 네 원수들로 네 발판이 되게 하기까지 너는 내 오른쪽에 앉아 있으라 하셨도다</br>
<br>2 여호와께서 시온에서부터 주의 권능의 규를 내보내시리니 주는 원수들 중에서 다스리소서</br>
<br>3 주의 권능의 날에 주의 백성이 거룩한 옷을 입고 즐거이 헌신하니 새벽 이슬 같은 주의 청년들이 주께 나오는도다</br>
<br>4 여호와는 맹세하고 변하지 아니하시리라 이르시기를 너는 멜기세덱의 서열을 따라 영원한 제사장이라 하셨도다</br>
<br>5 주의 오른쪽에 계신 주께서 그의 노하시는 날에 왕들을 쳐서 깨뜨리실 것이라</br>
<br>6 뭇 나라를 심판하여 시체로 가득하게 하시고 여러 나라의 머리를 쳐서 깨뜨리시며</br>
<br>7 길 가의 시냇물을 마시므로 그의 머리를 드시리로다</br>
<br>&nbsp;</br>
<strong><br><font color="#4682b4">시편 144 편</font></br></strong>
<br><i><font color="#808080">*다윗의 시*</font></i></br>
<br>1 나의 반석이신 여호와를 찬송하리로다 그가 내 손을 가르쳐 싸우게 하시며 손가락을 가르쳐 전쟁하게 하시는도다</br>
<br>2 여호와는 나의 사랑이시요 나의 요새이시요 나의 산성이시요 나를 건지시는 이시요 나의 방패이시니 내가 그에게 피하였고 그가 내 백성을 내게 복종하게 하셨나이다</br>
<br>3 여호와여 사람이 무엇이기에 주께서 그를 알아 주시며 인생이 무엇이기에 그를 생각하시나이까</br>
<br>4 사람은 헛것 같고 그의 날은 지나가는 그림자 같으니이다</br>
<br>5 여호와여 주의 하늘을 드리우고 강림하시며 산들에 접촉하사 연기를 내게 하소서</br>
<br>6 번개를 번쩍이사 원수들을 흩으시며 주의 화살을 쏘아 그들을 무찌르소서</br>
<br>7 위에서부터 주의 손을 펴사 나를 큰 물과 이방인의 손에서 구하여 건지소서</br>
<br>8 그들의 입은 거짓을 말하며 그의 오른손은 거짓의 오른손이니이다</br>
<br>9 하나님이여 내가 주께 새 노래로 노래하며 열 줄 비파로 주를 찬양하리이다</br>
<br>10 주는 왕들에게 구원을 베푸시는 자시요 그의 종 다윗을 그 해하려는 칼에서 구하시는 자시니이다</br>
<br>11 이방인의 손에서 나를 구하여 건지소서 그들의 입은 거짓을 말하며 그 오른손은 거짓의 오른손이니이다</br>
<br>12 우리 아들들은 어리다가 장성한 나무들과 같으며 우리 딸들은 궁전의 양식대로 아름답게 다듬은 모퉁잇돌들과 같으며</br>
<br>13 우리의 곳간에는 백곡이 가득하며 우리의 양은 들에서 천천과 만만으로 번성하며</br>
<br>14 우리 수소는 무겁게 실었으며 또 우리를 침노하는 일이나 우리가 나아가 막는 일이 없으며 우리 거리에는 슬피 부르짖음이 없을진대</br>
<br>15 이러한 백성은 복이 있나니 여호와를 자기 하나님으로 삼는 백성은 복이 있도다</br>
<br>&nbsp;</br>
<strong><br><font color="#4682b4">시편 145 편</font></br></strong>
<br><i><font color="#808080">*다윗의 찬송시*</font></i></br>
<br>1 왕이신 나의 하나님이여 내가 주를 높이고 영원히 주의 이름을 송축하리이다</br>
<br>2 내가 날마다 주를 송축하며 영원히 주의 이름을 송축하리이다</br>
<br>3 여호와는 위대하시니 크게 찬양할 것이라 그의 위대하심을 측량하지 못하리로다</br>
<br>4 대대로 주께서 행하시는 일을 크게 찬양하며 주의 능한 일을 선포하리로다</br>
<br>5 주의 존귀하고 영광스러운 위엄과 주의 기이한 일들을 나는 작은 소리로 읊조리리이다</br>
<br>6 사람들은 주의 두려운 일의 권능을 말할 것이요 나도 주의 위대하심을 선포하리이다</br>
<br>7 그들이 주의 크신 은혜를 기념하여 말하며 주의 의를 노래하리이다</br>
<br>8 여호와는 은혜로우시며 긍휼이 많으시며 노하기를 더디 하시며 인자하심이 크시도다</br>
<br>9 여호와께서는 모든 것을 선대하시며 그 지으신 모든 것에 긍휼을 베푸시는도다</br>
<br>10 여호와여 주께서 지으신 모든 것들이 주께 감사하며 주의 성도들이 주를 송축하리이다</br>
<br>11 그들이 주의 나라의 영광을 말하며 주의 업적을 일러서</br>
<br>12 주의 업적과 주의 나라의 위엄 있는 영광을 인생들에게 알게 하리이다</br>
<br>13 주의 나라는 영원한 나라이니 주의 통치는 대대에 이르리이다</br>
<br>14 여호와께서는 모든 넘어지는 자들을 붙드시며 비굴한 자들을 일으키시는도다</br>
<br>15 모든 사람의 눈이 주를 앙망하오니 주는 때를 따라 그들에게 먹을 것을 주시며</br>
<br>16 손을 펴사 모든 생물의 소원을 만족하게 하시나이다</br>
<br>17 여호와께서는 그 모든 행위에 의로우시며 그 모든 일에 은혜로우시도다</br>
<br>18 여호와께서는 자기에게 간구하는 모든 자 곧 진실하게 간구하는 모든 자에게 가까이 하시는도다</br>
<br>19 그는 자기를 경외하는 자들의 소원을 이루시며 또 그들의 부르짖음을 들으사 구원하시리로다</br>
<br>20 여호와께서 자기를 사랑하는 자들은 다 보호하시고 악인들은 다 멸하시리로다</br>
<br>21 내 입이 여호와의 영예를 말하며 모든 육체가 그의 거룩하신 이름을 영원히 송축할지로다</br>
<br>&nbsp;</br>
<br>    29 일차 끝</br>
       <br>&nbsp;</br>
      <br>&nbsp;</br>
      <br>&nbsp;</br>
      <br>&nbsp;</br>
      <br>&nbsp;</br>
      <br>&nbsp;</br>
    </h2>
  </div>

  <!-- 모달 (설명/요약 출력) -->
  <div id="explanation-modal" class="modal" role="dialog" aria-modal="true" aria-labelledby="modal-title">
    <div class="modal-content">
      <span class="close-button" id="close-modal" aria-label="닫기">&times;</span>
      <h3 id="modal-title">구절 설명</h3>
      <img id="modal-image" src="" alt="설명 관련 이미지" />
      <div id="modal-text">구절을 드래그하여 선택하고 '구절설명' 버튼을 누르세요.</div>
    </div>
  </div>

  <div id="scroll-marker-container" class="scroll-marker-container" aria-hidden="true"></div>

  <!-- 기도문 팝업 -->
  <div id="prayerToast" class="prayer-toast" role="dialog" aria-modal="false" aria-label="성경 읽기 전 기도문">
    <div class="prayer-header">
      <div class="prayer-title">
        <span>🙏</span>
        <span>기도하고 읽기</span>
        <span class="prayer-badge">90일 성경통톡</span>
      </div>
      <button class="prayer-close" id="prayerCloseBtn" aria-label="기도문 닫기">×</button>
    </div>

    <div class="prayer-body" id="prayerBody" tabindex="0">
   <style>
  .cross-red {
    color: red;
    font-weight: 900;
    -webkit-text-stroke: 0.6px currentColor; /* 윤곽선으로 두께 보강 */
    text-shadow:
      0 0 0 currentColor,         /* 기본 채움 */
      0.02em 0 currentColor, -0.02em 0 currentColor,
      0 0.02em currentColor,  0 -0.02em currentColor; /* 가장자리 두껍게 */
  }
</style>

<h4>
  <p>👀<span class="cross-red">✝︎</span> "하나님나라 관점" <span class="cross-red">✝︎</span>👀으로</p>
  <p>읽는 📖"90일 통큰통독"📖</p>
</h4>
<p>— 👦🏻 성경 읽기 전 1분 기도 🙏—</p>
<p>내 삶의 주인이 되시는 하나님, 성경을 읽게 하시니 감사합니다. 이 성경이 하나님의 말씀임을 믿습니다. 특별히 나에게 주시는 하나님의 말씀임을 믿습니다. 주시는 말씀을 내 관점으로 읽게 하지 마시고 하나님의 관점으로 읽어 하나님의 마음을 알게 하시고, 그 마음을 받아 나의 중심성을 하나님의 뜻 앞에 내려놓게 하시고 순종하게 하시어 변화되게 하옵소서, 말씀을 삶으로 이루는 성경 읽기가 되게 역사하여 주시옵소서. 예수님의 이름으로 기도합니다. 아멘.</p>
    
    </div>

    <div class="prayer-footer">
  <div></div> <!-- 좌측 자리 균형용(선택) -->
  <div class="prayer-actions">
    <button class="prayer-btn" id="prayerReadAlone">기도 드렸습니다</button>
    <button class="prayer-btn prayer-btn-primary" id="prayerAmen">확인</button>
  </div>
</div>

  <script>
    // ------------------------------
    // API KEY (사용자 입력 상태)
    const apiKey = "AIzaSyDUlSQlSPgnrFBXpnUJMDoUO3s_KsaoFRU";
    // ------------------------------

    // DOM
    const bibleTextEl = document.getElementById('bible-text');
    const searchCountEl = document.getElementById('search-count');
    const nextLocationBtn = document.getElementById('next-location-btn');
    const scrollMarkerContainer = document.getElementById('scroll-marker-container');

    const explanationIconButton = document.getElementById('explanation-icon-button');
    const explanationButtonWrapper = document.getElementById('explanation-button-wrapper');
    const explanationSubButtons = document.getElementById('explanation-sub-buttons');
    const detailedExplanationButton = document.getElementById('detailed-explanation-button');
    const simpleExplanationButton = document.getElementById('simple-explanation-button');

    const summarySimpleMain = document.getElementById('summary-simple-main');
    const summaryDetailedMain = document.getElementById('summary-detailed-main');

    const modal = document.getElementById('explanation-modal');
    const closeModalButton = document.getElementById('close-modal');
    const modalTitle = document.getElementById('modal-title');
    const modalImage = document.getElementById('modal-image');
    const modalText = document.getElementById('modal-text');

    const audio = document.getElementById('audio-file');
    const playBtn = document.getElementById('play-btn');
    const pauseBtn = document.getElementById('pause-btn');
    const stopBtn = document.getElementById('stop-btn');
    const progressBar = document.getElementById('progress-bar');
    const rewindBtn = document.getElementById('rewind-10');
    const forwardBtn = document.getElementById('forward-10');
    const speedDisplay = document.getElementById('speed-display');
    const speedDown02Btn = document.getElementById('speed-down-02');
    const speedDown01Btn = document.getElementById('speed-down-01');
    const speedUp01Btn = document.getElementById('speed-up-01');
    const speedUp02Btn = document.getElementById('speed-up-02');
    const speedResetBtn = document.getElementById('speed-reset');
    const volumeSlider = document.getElementById('volume-slider');
    const muteBtn = document.getElementById('mute-btn');
    const currentTimeEl = document.getElementById('current-time');
    const remainingTimeEl = document.getElementById('remaining-time');

    const upBtn = document.getElementById('up');
    const downBtn = document.getElementById('down');
    const fontSizeEl = document.getElementById('font-size');

    // 상태
    let originalText = "";
    let selectedVerse = "";
    let selectionRange = null;
    let foundSentences = [];
    let currentSearchIndex = -1;
    let currentSpeed = 1.0;
    let isMuted = false;
    let selectionDebounce = null;

    function escapeRegExp(s) { return s.replace(/[.*+?^${}()|[\]\\]/g, '\\$&'); }
    function formatTime(sec) { if (!isFinite(sec) || sec < 0) return '0:00'; const m = Math.floor(sec/60); const s = Math.floor(sec%60); return `${m}:${String(s).padStart(2,'0')}`; }

    window.addEventListener('DOMContentLoaded', () => {
      originalText = bibleTextEl.innerHTML;
      updateFontSizeDisplay();
      updateSpeed();

      // 본문 줄 단위 분리
      const lines = originalText.split(/<br\s*\/?>/i);
      bibleTextEl.innerHTML = lines.map(line => {
        if (line.trim() === "") return "<br>";
        return `<span class="line">${line}</span><br>`;
      }).join("");
      const lineElements = document.querySelectorAll("#bible-text .line");

            // 스크롤 시 중앙 강조 줄 수(2줄/3줄) 반응형으로 처리
function highlightCenterLines() {
  const viewportCenter = window.innerHeight / 2 + window.scrollY;
  const linesToHighlight = window.innerWidth >= 768 ? 3 : 2;

  let closestIndex = -1, minDistance = Infinity;
  lineElements.forEach((line, i) => {
    const rect = line.getBoundingClientRect();
    const lineCenter = rect.top + window.scrollY + rect.height / 2;
    const distance = Math.abs(lineCenter - viewportCenter);
    if (distance < minDistance) { minDistance = distance; closestIndex = i; }
  });

  lineElements.forEach(line => line.classList.remove("highlight"));
  if (closestIndex < 0) return;

  const indices = linesToHighlight === 3
    ? [closestIndex - 1, closestIndex, closestIndex + 1]
    : [closestIndex, closestIndex + 1];

  indices.forEach(idx => {
    if (idx >= 0 && idx < lineElements.length) {
      lineElements[idx].classList.add("highlight");
    }
  });
}

// rAF 스로틀
let ticking = false;
function onScrollOrResize() {
  if (ticking) return;
  ticking = true;
  requestAnimationFrame(() => {
    highlightCenterLines();
    ticking = false;
  });
}

// 이벤트 등록
window.addEventListener("scroll", onScrollOrResize, { passive: true });
window.addEventListener("resize", onScrollOrResize);
// (옵션) 기기 회전 이벤트도 묶어서 처리하면 좋아요
window.addEventListener("orientationchange", onScrollOrResize);

// 최초 1회 적용
highlightCenterLines();

      // PC에서 2줄씩 부드럽게 스크롤
      window.addEventListener("wheel", function(e) {
        if (e.ctrlKey) return;
        const modal = document.getElementById('explanation-modal');
        if (modal && modal.style.display === 'block' && modal.contains(e.target)) return;
        const firstLine = document.querySelector("#bible-text .line");
        if (!firstLine) return;
        const lineHeight = firstLine.getBoundingClientRect().height;
        e.preventDefault();
        window.scrollBy({ top: e.deltaY > 0 ? lineHeight * 2 : -lineHeight * 2, behavior: "smooth" });
      }, { passive: false });

      // 폰트 버튼
      upBtn.addEventListener('click', () => {
        const current = parseFloat(getComputedStyle(bibleTextEl).fontSize);
        if (current + 4 <= 80) { bibleTextEl.style.fontSize = (current + 4) + 'px'; updateFontSizeDisplay(); }
      });
      downBtn.addEventListener('click', () => {
        const current = parseFloat(getComputedStyle(bibleTextEl).fontSize);
        if (current - 4 >= 12) { bibleTextEl.style.fontSize = (current - 4) + 'px'; updateFontSizeDisplay(); }
      });

      // 검색
      const searchForm = document.forms.f1;
      searchForm.addEventListener('submit', (e) => { e.preventDefault(); findString(searchForm.t1.value); });
      searchForm.b2.addEventListener('click', () => { clearHighlight(); });
      nextLocationBtn.addEventListener('click', nextLocation);

      // 오디오
      playBtn.addEventListener('click', () => { audio.play().catch(()=>{}); });
      pauseBtn.addEventListener('click', () => audio.pause());
      stopBtn.addEventListener('click', () => { audio.pause(); audio.currentTime = 0; });
      speedDown02Btn.addEventListener('click', () => { currentSpeed = Math.max(0.5, currentSpeed - 0.2); updateSpeed(); });
      speedDown01Btn.addEventListener('click', () => { currentSpeed = Math.max(0.5, currentSpeed - 0.1); updateSpeed(); });
      speedUp01Btn.addEventListener('click', () => { currentSpeed = Math.min(2.0, currentSpeed + 0.1); updateSpeed(); });
      speedUp02Btn.addEventListener('click', () => { currentSpeed = Math.min(2.0, currentSpeed + 0.2); updateSpeed(); });
      speedResetBtn.addEventListener('click', () => { currentSpeed = 1.0; updateSpeed(); });
      volumeSlider.addEventListener('input', () => { audio.volume = Number(volumeSlider.value); });
      muteBtn.addEventListener('click', () => { isMuted = !isMuted; audio.muted = isMuted; muteBtn.textContent = isMuted ? '🔇' : '🔊'; });

      audio.addEventListener('timeupdate', () => {
        if (!isFinite(audio.duration) || audio.duration <= 0) return;
        const pct = (audio.currentTime / audio.duration) * 100;
        progressBar.value = pct;
        currentTimeEl.textContent = formatTime(audio.currentTime);
        remainingTimeEl.textContent = '-' + formatTime(audio.duration - audio.currentTime);
      }, { passive: true });
      audio.addEventListener('loadedmetadata', () => {
        currentTimeEl.textContent = '0:00';
        remainingTimeEl.textContent = '-' + formatTime(audio.duration || 0);
      });
      progressBar.addEventListener('input', () => {
        if (!isFinite(audio.duration) || audio.duration <= 0) return;
        const pct = progressBar.value / 100;
        audio.currentTime = audio.duration * pct;
      }, { passive: true });
      rewindBtn.addEventListener('click', () => { audio.currentTime = Math.max(0, audio.currentTime - 10); });
      forwardBtn.addEventListener('click', () => { if (isFinite(audio.duration)) audio.currentTime = Math.min(audio.duration, audio.currentTime + 10); });

      // 책 버튼 토글 & 선택 복원
      explanationIconButton.addEventListener('pointerdown', () => {
        const sel = window.getSelection();
        try { if (sel && sel.rangeCount > 0) selectionRange = sel.getRangeAt(0).cloneRange(); } catch(e) { selectionRange = null; }
      }, { passive: true });
      explanationIconButton.addEventListener('click', (ev) => {
        ev.stopPropagation();
        const sel = window.getSelection();
        try { if (sel && sel.rangeCount > 0) selectionRange = sel.getRangeAt(0).cloneRange(); } catch(e){ selectionRange = null; }
        explanationButtonWrapper.classList.toggle('active');
        setTimeout(() => {
          if (selectionRange) {
            const sel2 = window.getSelection();
            sel2.removeAllRanges();
            try { sel2.addRange(selectionRange); } catch(e){}
            updateSelectedVerseFromRange(selectionRange);
          }
        }, 60);
      });
      document.body.addEventListener('click', (ev) => {
        if (!explanationButtonWrapper.contains(ev.target)) explanationButtonWrapper.classList.remove('active');
      });

      // 구절 설명 버튼
      detailedExplanationButton.addEventListener('click', () => {
        const v = (selectedVerse || '').trim();
        if (!v) { showModal("구절을 먼저 선택하세요","본문에서 구절이나 단어를 드래그하여 선택한 후 다시 버튼을 눌러주세요."); }
        else { fetchExplanation(v, 'detailed'); }
        explanationButtonWrapper.classList.remove('active');
      });
      simpleExplanationButton.addEventListener('click', () => {
        const v = (selectedVerse || '').trim();
        if (!v) { showModal("구절을 먼저 선택하세요","본문에서 구절이나 단어를 드래그하여 선택한 후 다시 버튼을 눌러주세요."); }
        else { fetchExplanation(v, 'simple'); }
        explanationButtonWrapper.classList.remove('active');
      });

      // 본문 요약 버튼
      summarySimpleMain.addEventListener('click', () => {
        const full = getFullBibleText();
        if (!full.trim()) { showModal("본문이 없습니다","요약할 성경 본문이 없습니다."); }
        else { fetchSummary(full, 'simple'); }
      });
      summaryDetailedMain.addEventListener('click', () => {
        const full = getFullBibleText();
        if (!full.trim()) { showModal("본문이 없습니다","요약할 성경 본문이 없습니다."); }
        else { fetchSummary(full, 'detailed'); }
      });

      // 설명 모달 닫기
      closeModalButton.addEventListener('click', () => {
        modal.style.display = 'none';
        document.body.classList.remove('modal-open');
      });
      window.addEventListener('click', (ev) => {
        if (ev.target === modal) {
          modal.style.display = 'none';
          document.body.classList.remove('modal-open');
        }
      });

      // 선택 이벤트(디바운스)
      const scheduleSelectionUpdate = () => {
        clearTimeout(selectionDebounce);
        selectionDebounce = setTimeout(handleSelectionChange, 160);
      };
      document.addEventListener('mouseup', scheduleSelectionUpdate, { passive:true });
      document.addEventListener('touchend', scheduleSelectionUpdate, { passive:true });
      document.addEventListener('selectionchange', scheduleSelectionUpdate);

      // 기도문 팝업 초기화
      initPrayerToast();
    });

    // 선택 관리
    function handleSelectionChange(){
      const sel = window.getSelection();
      if (!sel) return clearSelectionState();
      const text = (sel.toString() || "").trim();

      const modalEl = document.getElementById('explanation-modal');
      if (modalEl && modalEl.style.display === 'block') {
        const sel2 = window.getSelection();
        if (sel2 && (modalEl.contains(sel2.anchorNode) || modalEl.contains(sel2.focusNode))) return;
      }

      let isInBible = false;
      try {
        if (sel.anchorNode && sel.focusNode) {
          isInBible = bibleTextEl.contains(sel.anchorNode) && bibleTextEl.contains(sel.focusNode);
        }
      } catch(e){ isInBible = false; }

      if (text && isInBible) {
        selectedVerse = text;
        try { selectionRange = sel.getRangeAt(0).cloneRange(); } catch(e){ selectionRange = null; }
        try {
          const range = sel.getRangeAt(0);
          const rects = Array.from(range.getClientRects());
          const rect = rects.length
            ? rects.reduce((u, r) => ({
                top: Math.min(u.top, r.top),
                left: Math.min(u.left, r.left),
                right: Math.max(u.right, r.right),
                bottom: Math.max(u.bottom, r.bottom),
                width: 0, height: 0
              }), { top:Infinity, left:Infinity, right:-Infinity, bottom:-Infinity })
            : range.getBoundingClientRect();
          rect.width  = rect.right - rect.left;
          rect.height = rect.bottom - rect.top;
          positionExplanationButton(rect);
        } catch(e){ resetExplanationButton(); }
      } else {
        clearSelectionState();
      }
    }
    function updateSelectedVerseFromRange(range) {
      if (!range) return;
      const txt = (range.toString() || "").trim();
      if (txt) selectedVerse = txt;
      try {
        const rect = range.getBoundingClientRect();
        positionExplanationButton(rect);
      } catch(e){ resetExplanationButton(); }
    }
    function resetExplanationButton(){
      const container = document.getElementById('explanation-button-container');
      if (!container) return;
      container.style.position = 'fixed';
      container.style.left = '30%';
      container.style.top = '100px';
      container.style.transform = 'translateX(-50%)';
      container.style.display = 'block';
      explanationButtonWrapper.classList.remove('active');
    }
    function clearSelectionState(){ selectedVerse = ""; selectionRange = null; resetExplanationButton(); }

    // 책 버튼 위치
    function positionExplanationButton(rect){
      const container = document.getElementById('explanation-button-container');
      if (!container) return;

      const vw = window.innerWidth;
      const vh = window.innerHeight;
      const margin = 8;
      const pad = 10;
      const viewportCenter = vw / 2;

      const isWide = rect.width >= vw * 0.6 || (rect.left <= margin*2 && rect.right >= vw - margin*2);

      let baseX, transformX;
      if (isWide) { baseX = rect.left + rect.width / 2; transformX = 'translateX(-50%)'; }
      else if (rect.left < viewportCenter * 0.4) { baseX = rect.right; transformX = 'translateX(0)'; }
      else if (rect.right > viewportCenter * 1.6) { baseX = rect.left; transformX = 'translateX(-100%)'; }
      else { baseX = rect.left + rect.width / 2; transformX = 'translateX(-50%)'; }

      const cw = container.offsetWidth || 60;
      const ch = container.offsetHeight || 60;

      const leftEdge =
        transformX === 'translateX(0)'     ? baseX :
        transformX === 'translateX(-50%)'  ? baseX - cw/2 :
                                             baseX - cw;

      let clampedLeftEdge = Math.min(Math.max(leftEdge, margin), vw - margin - cw);

      let finalLeft;
      if (transformX === 'translateX(0)')        finalLeft = clampedLeftEdge;
      else if (transformX === 'translateX(-50%)') finalLeft = clampedLeftEdge + cw/2;
      else                                        finalLeft = clampedLeftEdge + cw;

      let finalTop = rect.bottom + pad;
      if (finalTop + ch + margin > vh) finalTop = Math.max(rect.top - pad - ch, margin);
      finalTop = Math.min(Math.max(finalTop, margin), vh - margin - ch);

      container.style.position = 'fixed';
      container.style.left = `${finalLeft}px`;
      container.style.top  = `${finalTop}px`;
      container.style.transform = transformX;
      container.style.display = 'block';
    }

    // 검색
    function findString(searchText){
      clearHighlight();
      if (searchText == null || searchText.trim() === '') { searchCountEl.textContent = ''; nextLocationBtn.style.display = 'none'; return; }
      const escaped = escapeRegExp(searchText.trim());
      const regex = new RegExp(escaped, 'gi');
      const newContent = originalText.replace(regex, (match) => `<span class="search-highlight">${match}</span>`);
      bibleTextEl.innerHTML = newContent;
      foundSentences = Array.from(bibleTextEl.getElementsByClassName('search-highlight'));
      searchCountEl.textContent = `총 ${foundSentences.length}개 검색됨`;
      if (foundSentences.length > 0) {
        currentSearchIndex = 0;
        foundSentences[currentSearchIndex].scrollIntoView({ behavior:'smooth', block:'center' });
        nextLocationBtn.style.display = 'inline-block';
        updateScrollMarkers();
      } else {
        showModal("검색 결과 없음", `"${searchText}"에 대한 검색 결과가 없습니다.`);
        nextLocationBtn.style.display = 'none';
      }
    }
    function nextLocation(){
      if (!foundSentences.length) return;
      currentSearchIndex = (currentSearchIndex + 1) % foundSentences.length;
      foundSentences[currentSearchIndex].scrollIntoView({ behavior:'smooth', block:'center' });
      updateScrollMarkers();
    }
    function clearHighlight(){
      bibleTextEl.innerHTML = originalText;
      searchCountEl.textContent = '';
      nextLocationBtn.style.display = 'none';
      while (scrollMarkerContainer.firstChild) scrollMarkerContainer.removeChild(scrollMarkerContainer.firstChild);
      foundSentences = [];
      currentSearchIndex = -1;
    }
    function updateScrollMarkers(){
      while (scrollMarkerContainer.firstChild) scrollMarkerContainer.removeChild(scrollMarkerContainer.firstChild);
      const docH = document.documentElement.scrollHeight;
      const vh = window.innerHeight;
      foundSentences.forEach((el) => {
        const marker = document.createElement('div');
        marker.className = 'scroll-marker';
        const topPos = el.getBoundingClientRect().top + window.scrollY;
        const markerPos = Math.min(Math.max((topPos / docH) * vh, 2), vh - 10);
        marker.style.top = markerPos + 'px';
        marker.addEventListener('click', () => { el.scrollIntoView({ behavior:'smooth', block:'center' }); });
        scrollMarkerContainer.appendChild(marker);
      });
    }

    // 모달
    function showModal(title, text, imageUrl=null){
      modalTitle.textContent = title || '';
      modalText.innerHTML = (text || '').toString().replace(/\n/g, '<br>');
      if (imageUrl) { modalImage.src = imageUrl; modalImage.style.display = 'block'; } else { modalImage.src=''; modalImage.style.display='none'; }
      modal.style.display = 'block';
      document.body.classList.add('modal-open');
      setTimeout(() => {
        if (selectionRange) {
          const sel = window.getSelection();
          sel.removeAllRanges();
          try { sel.addRange(selectionRange); } catch(e) {}
        }
      }, 60);
    }
    function showLoadingModal(isImage=false){
      modalTitle.innerHTML = `<span class="loader"></span> ${isImage ? '그림 생성 중...' : '설명 생성 중...'}`;
      modalText.textContent = '설명을 생성 중입니다. 잠시만 기다려 주세요...';
      modalImage.style.display = 'none';
      modal.style.display = 'block';
    }

    modal.addEventListener('wheel', (e) => {
      if (modal.style.display === 'block') e.stopPropagation();
    }, { passive: true });

    function getFullBibleText(){
      const tmp = document.createElement('div');
      tmp.innerHTML = originalText;
      return tmp.textContent.replace(/\s+/g,' ').trim();
    }

    // Generative API 호출
    async function callGenerativeAPI(modalTitleText, prompt){
      const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-05-20:generateContent?key=${apiKey}`;
      const payload = { contents: [ { parts: [ { text: prompt } ] } ] };

      let retryCount = 0; const maxRetries = 3;
      let response = null;
      while (retryCount < maxRetries) {
        try {
          response = await fetch(apiUrl, {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify(payload)
          });
          if (response.ok) break;
          if (response.status === 429) {
            retryCount++;
            const delay = Math.pow(2, retryCount)*1000 + Math.random()*1000;
            await new Promise(r=>setTimeout(r, delay));
          } else throw new Error(`API Error: ${response.status} ${response.statusText}`);
        } catch (err) {
          console.error('API call failed:', err);
          showModal("오류 발생", "API 호출 중 오류가 발생했습니다. 다시 시도해 주세요.");
          return;
        }
      }
      if (!response || !response.ok) { showModal("오류", "설명을 불러오는 데 실패했습니다. 잠시 후 다시 시도해 주세요."); return; }

      try {
        const data = await response.json();
        const content = data?.candidates?.[0]?.content?.parts?.[0]?.text || "응답을 가져오지 못했습니다.";
        showModal(modalTitleText, content);
      } catch (err) {
        console.error('Error processing response:', err);
        showModal("오류", "응답을 처리하는 중 오류가 발생했습니다.");
      }
    }

    async function fetchExplanation(promptText, type){
      let prompt;
      if (type === 'simple') {
        prompt = `[역할] 성경 주석가.
[작업] 선택한 용어/구절을 350–500자 한국어로 간결 설명.
[유형 규칙]
- 지명: 위치·시대·관련 사건
- 인물: 이름의 뜻·역할·연관 지명
- 제사/성물: 용도·상징적 의미
- 동·식물·광물: 상징성
필요 시 대비/유사 2–12가지만 간단히. (이름↔지명 직접 연결이 있으면 함께 언급)
[금지] 장황함·추측·인용.
[입력] "${promptText}"`;
      } else {
        prompt = `[역할] 성경 주석가.
[작업] 선택 구절을 2,500–3,500자 한국어 해설로 심화 분석.
[구성] 개요 → 배경(역사·지리·문화) → 본문 주제·핵심 논지 → 핵심 단어/도상 해석
→ 인물·사건·장소의 기능 → 성경 전체 맥락과의 연결(언약/교리, 유사·대조 2–12가지)
→ (선택) 3–6행 표로 요점 정리.
[규칙] 본문 근거 중심, 난해한 부분은 간명히, 과도한 인용/주석어/반복 금지, 분량 준수.
[긴 입력 시] 절/단락 단위로 요약 후 통합(최종 분량 준수).
[입력] "${promptText}"`;
      }
      showLoadingModal(false);
      await callGenerativeAPI('구절 설명', prompt);
    }

    async function fetchSummary(fullText, type){
      let prompt;
      if (type === 'simple') {
        prompt = `[역할] 성경 주석가.
[작업] 입력된 성경 본문 전체를 450–650자 한국어 한 단락으로 간결 요약.
[중점] 핵심 주제·메시지, 주요 사건 흐름, 하나님 행위/인간 반응. 배경은 한두 문장만. 삶 적용 2–3문장 추가.
[금지] 장황함·추측·인용·소제목·서론/결론 문구. 분량 엄수.
[긴 입력 시] 장 단위로 요약→최종 450–650자로 통합.
[입력] "${fullText}"`;
      } else {
        prompt = `[역할] 성경 주석가.
[작업] 입력 본문을 3,500–5,000자 한국어 해설로 정리.
[구성] 1) 개요  2) 배경(역사·지리·문화)  3) 핵심 주제/신학적 의미
4) 인물·사건·장소의 역할  5) 성경 전체 맥락과 연결(필요 시 유사/대조 2–12가지)
6) (선택) 3–12행 표로 핵심 정리.  7) 결론  8) 삶 적용 4–5문장.
[규칙] 사실 기반, 과장/추측/설교체 금지, 불필요한 반복 금지, 분량 준수.
[긴 입력 시] 장 단위로 개요→통합(최종 분량 준수).
[입력] "${fullText}"`;
      }
      showLoadingModal(false);
      await callGenerativeAPI('본문 요약', prompt);
    }

    function updateSpeed(){ audio.playbackRate = currentSpeed; speedDisplay.textContent = currentSpeed.toFixed(1) + 'x'; }
    function updateFontSizeDisplay(){ const cur = parseFloat(getComputedStyle(bibleTextEl).fontSize); fontSizeEl.textContent = Math.round(cur); }

    // 토글 버튼 로직
    const progressContainer = document.querySelector('.progress-container');
    const speedControls = document.querySelector('.speed-controls');
    const volumeControl = document.querySelector('.volume-control');
    const showProgressBtn = document.getElementById('show-progress');
    const showSpeedBtn = document.getElementById('show-speed');
    const showVolumeBtn = document.getElementById('show-volume');
    let hideTimeout;
    function showOnly(target) {
      progressContainer.style.display = "none";
      speedControls.style.display = "none";
      volumeControl.style.display = "none";
      target.style.display = "flex";
      if (hideTimeout) clearTimeout(hideTimeout);
      hideTimeout = setTimeout(() => { target.style.display = "none"; }, 10000);
    }
    showProgressBtn.addEventListener('click', () => showOnly(progressContainer));
    showSpeedBtn.addEventListener('click', () => showOnly(speedControls));
    showVolumeBtn.addEventListener('click', () => showOnly(volumeControl));

    // ===== 기도문 팝업 제어 =====
  function initPrayerToast(){
  const toast = document.getElementById('prayerToast');
  const closeBtn = document.getElementById('prayerCloseBtn');
  const amenBtn = document.getElementById('prayerAmen');
  const readBtn = document.getElementById('prayerReadAlone');

  const isSiteModalOpen = () => document.body.classList.contains('modal-open');

  function openToast(){
    if (!toast) return;
    if (isSiteModalOpen()) return;            // 사이트 모달이 열려 있으면 숨김
    toast.style.display = 'block';
    document.getElementById('prayerBody')?.focus({ preventScroll:true });
  }
  function closeToast(){
    if (!toast) return;
    toast.style.display = 'none';             // 저장/기억 없음 → 다음 방문 시 다시 표시
  }

  // 페이지 로드 시 항상 표시 (약간 지연)
  setTimeout(openToast, 700);

  // 버튼 동작: 전부 단순 닫기
  closeBtn?.addEventListener('click', () => closeToast());
  amenBtn?.addEventListener('click', () => closeToast());
  readBtn?.addEventListener('click', () => closeToast());

  // 사이트 모달 열림/닫힘에 따라 토스트 표시/숨김
  const observer = new MutationObserver(() => {
    if (isSiteModalOpen()) {
      toast.style.display = 'none';
    } else {
      // 모달이 닫히면 다시 보여줌(사용자가 이미 닫았더라도 새로고침/재방문 시 다시 뜨게 하려면 유지)
      if (toast.style.display !== 'block') toast.style.display = 'block';
    }
  });
  observer.observe(document.body, { attributes:true, attributeFilter:['class'] });
}
  </script>
</body>
</html>




