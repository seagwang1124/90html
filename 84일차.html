<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
  <title>통큰통독-84일차</title>
  <link rel="apple-touch-icon" type="image/png" href="https://i.postimg.cc/Qtnq0gFJ/Ezra-icon.png">
  <meta name="apple-mobile-web-app-title" content="통큰통독">
  <link rel="shortcut icon" type="image/png" href="https://i.postimg.cc/Qtnq0gFJ/Ezra-icon.png">
  <link rel="mask-icon" type="image/png" href="https://i.postimg.cc/Qtnq0gFJ/Ezra-icon.png">

  <style>
    :root{
      --blue:#007BFF;
      --pink:#ff99cc;
      --shadow: 0 2px 5px rgba(0,0,0,0.2);
    }
    * { box-sizing: border-box; -webkit-tap-highlight-color: transparent; }
    html,body { height:100%; margin:0; padding:0; font-family: Arial, sans-serif; -webkit-font-smoothing:antialiased; }
    body { padding-top:150px; background:#fdfdf8; color:#222; }

    a:link { color:#0000FF; } a:visited{ color:#660099; }

    /* 상단 고정 테이블 */
    .top-fixed-table {
      position: fixed; top:0; left:0; width:100%; background:transparent; border-bottom:none; z-index:100;
      table-layout: fixed; padding:10px 0; box-sizing:border-box;
    }
    .search-cell { text-align:left; padding-left:10px; vertical-align:top; width:30%; }
    .search-cell input[type="text"]{ width:50%; font-size:12pt; }
    .search-cell input[type="submit"], .search-cell input[type="reset"]{ font-size:10pt; padding:5px 8px; height:auto; }

    .audio-cell { text-align:right; padding-right:50px; vertical-align:top; width:30%; }
    #custom-audio-player { display:flex; flex-direction:column; align-items:center; }
    .player-controls{ display:flex; align-items:center; justify-content:center; gap:10px; margin-bottom:5px; }
    .time-display{ font-size:16px; font-weight:bold; color:black; margin:0 5px; min-width:44px; text-align:center; }

    .progress-container { display: flex; align-items: center; justify-content: center; gap: 6px; margin: 6px 0; }
    .skip-btn { width: 48px; height: 28px; font-size: 13px; cursor: pointer; border: 1px solid #ccc; border-radius: 5px; background: #fff; }
    .skip-btn:hover { background: #e0e0e0; }

    .control-btn{ width:28px; height:28px; font-size:14px; cursor:pointer; border:1px solid #ccc; background:#fff; border-radius:5px; }
    .control-btn:hover{ background:#e0e0e0; }
    #play-btn{ background:#d1f3d4; } #pause-btn{ background:#fff6d6; } #stop-btn{ background:#fddddd; }

    .speed-controls{ display:flex; align-items:center; justify-content:center; gap:5px; margin-bottom:5px; }
    .speed-btn{ width:21px; height:21px; font-size:10px; cursor:pointer; border:1px solid #ccc; border-radius:3px; background:#fff; }
    .speed-btn:hover{ background:#e0e0e0; }
    .speed-display{ font-weight:bold; color:var(--blue); width:50px; text-align:center; }

    .volume-control{ display:flex; align-items:center; justify-content:center; gap:5px; }
    input[type="range"]{ -webkit-appearance:none; width:160px; height:5px; background:#d3d3d3; outline:none; opacity:0.9; transition:opacity .2s; border-radius:3px;}
    input[type="range"]::-webkit-slider-thumb{ -webkit-appearance:none; appearance:none; width:15px; height:15px; background:var(--blue); border-radius:50%; cursor:pointer; }

    /* progress */
    #progress-bar { width: 60%; max-width: 100px; }

    /* volume */
    #volume-slider { width: 80%; max-width: 120px; }

    /* 설명 버튼 컨테이너 (플로팅) */
    .explanation-button-container{ position:fixed; top:100px; left:30%;  transform:translateX(-50%);  padding:0 10px; transition:top .2s ease,left .2s ease,transform .2s ease; }
    .explanation-button-wrapper{ position:relative; display:inline-block; cursor:pointer; }
    .explanation-icon-button{ width:50px; height:50px; border-radius:50%; background:var(--pink); box-shadow:var(--shadow); border:none; display:flex; align-items:center; justify-content:center; font-size:40px; z-index:2; }
    .explanation-sub-buttons{ display:flex; flex-direction:column; gap:10px; opacity:0; visibility:hidden; transition:opacity .3s ease,visibility .3s ease, transform .3s ease; position:absolute; left:45%; transform:translateX(-50%) translateY(25px); z-index:1; }
    .explanation-button-wrapper.active .explanation-sub-buttons{ opacity:1; visibility:visible; transform:translateX(-50%) translateY(0); }
    .explanation-sub-button{ padding:5px 10px; font-size:18px; background:var(--pink); border:none; border-radius:5px; cursor:pointer; box-shadow:var(--shadow); white-space:nowrap; }
    .explanation-sub-button:hover{ transform:scale(1.03); }

    /* 폰트 사이즈 및 본문 요약 버튼 (항상 표시) */
    .container{ width:100%; text-align:center; margin-top:8px; }
    .font-size-label{ font-size:20px !important; margin-right:12px; font-weight:bold; color:blue; display:inline-block; vertical-align:middle; }
    #font-size{ font-size:20px !important; margin:0 8px; font-weight:bold; color:red; display:inline-block; vertical-align:middle; width:48px; }
    #down,#up{ width:27px; height:27px; font-size:20px; color:red; background:#fff; border:1px solid #ccc; border-radius:5px; cursor:pointer; display:inline-block; vertical-align:middle; }

    .summary-buttons { display:inline-block; margin-left:16px; vertical-align:middle; }
    .summary-btn { padding:6px 10px; margin-left:6px; font-size:14px; border-radius:6px; border:1px solid #ccc; background:#fff; cursor:pointer; }
    .summary-btn:hover{ background:#f2f2f2; }

    /* 일차 내비게이션 */
.day-nav{
  display:flex; align-items:center; justify-content:flex-start; gap:10px;
  margin: 10px 15px 0;
}
.day-nav .day-btn{
  text-decoration:none; background:#fff; color:#333;
  padding:6px 12px; border:1px solid #ccc; border-radius:8px;
  box-shadow: var(--shadow); font-weight:700; line-height:1;
}
.day-nav .day-btn:hover{ background:#f7f7f7; }
.day-nav .day-title{
  font-weight:900; letter-spacing:.2px; color:#222;
}
@media (max-width:480px){
  .day-nav .day-title{ font-size:16px; }
  .day-nav .day-btn{ padding:6px 10px; font-size:14px; }
}

    /* 본문 */
    h2{ padding:0; text-align:left; margin-left:15px; margin-right:15px; }
    p{ display:inline-block; }

    /* 본문 중앙 두 줄 강조 */
    .highlight {
      background-color:#fdf6e3;
      -webkit-text-stroke:0.2px #76d6c6;
      border-left:4px solid #c0a060;
      font-weight:bold;
      box-shadow:0 0 8px rgba(0,0,0,0.1);
      padding:2px 6px;
    }

    /* 📖 구절설명 버튼: 기본 표시 */
    #explanation-button-container{
      position:fixed; z-index:150; display:block;
    }
    body.modal-open #explanation-button-container{ display:none !important; }

    /* 모달 */
    .modal{
      display:none; position:fixed; z-index:200; inset:0; width:100%; height:100%;
      background:rgba(0,0,0,0.4);
    }
    .modal-content{
      background:#fff; margin:12% auto; padding:20px; border-radius:10px; width:80%; max-width:900px;
      max-height:80vh; overflow:auto; overscroll-behavior:contain;
      box-shadow:0 4px 8px rgba(0,0,0,0.2); text-align:left; line-height:1.6; word-break:keep-all; white-space:pre-wrap;
    }
    body.modal-open{ overflow:hidden; }

    /* 로딩 스피너 */
    .loader{ border:4px solid #f3f3f3; border-top:4px solid #3498db; border-radius:50%; width:20px; height:20px; animation:spin 1s linear infinite; display:inline-block; vertical-align:middle; margin-right:8px; }
    @keyframes spin{ 0%{transform:rotate(0deg);} 100%{transform:rotate(360deg);} }

    /* 검색 하이라이트 & 스크롤 마커 */
    .search-highlight{ background:yellow; color:#000; }
    .scroll-marker-container{ position:fixed; top:0; right:0; width:8px; height:100vh; z-index:99; pointer-events:none; }
    .scroll-marker{ position:absolute; right:0; width:8px; height:8px; background:red; border-radius:50%; box-shadow:0 0 5px rgba(255,0,0,0.7); cursor:pointer; pointer-events:auto; }
    .scroll-marker:hover{ transform:scale(1.5); transition:transform .2s ease; }

    /* 선택 관련 (iOS) */
    #bible-text{ -webkit-user-select:text; user-select:text; -webkit-touch-callout:none; }

    /* 반응형 */
    @media (max-width:800px){
      .search-cell{ width:55%; } .audio-cell{ width:45%; } .search-cell input[type="text"]{ width:60%; } #progress-bar{ width:160px; }
    }
    @media (max-width:600px){
  /* 좌/우 칸 비율 + 오른쪽 패딩 확보 */
  .search-cell{ width:30%; }
  .audio-cell{ width:34%; padding-right:12px; } /* 8px → 14px */

  /* 검색창을 뷰포트 기준으로 더 줄이기 */
  .search-cell input[type="text"]{
    width:32vw;          /* 45vw → 35vw */
    max-width:32vw;
    font-size:12pt;
  }
  /* 검색 버튼들도 살짝 컴팩트 */
  .search-cell input[type="submit"],
  .search-cell input[type="reset"]{
    padding:4px 6px;
    font-size:10pt;
  }

  /* 오디오 컨트롤이 덜 퍼지도록 */
  .player-controls{ gap:6px; }           /* 10px → 6px */
  .time-display{
    font-size:14px;                       /* 16px → 14px */
    min-width:56px;                       /* 44px → 56px 로 고정폭 확보 */
  }

  #progress-bar{ width:140px; }
  .explanation-sub-button{ font-size:16px; padding:6px 8px; }
  .explanation-icon-button{ width:46px; height:46px; font-size:34px; }
  .summary-btn{ padding:5px 8px; font-size:13px; }
}

    .toggle-buttons {
      display:flex; justify-content:center; gap:8px; margin-bottom:6px;
    }
    .toggle-buttons button {
      padding:4px 8px; font-size:13px; border:1px solid #ccc; border-radius:5px; background:#fff; cursor:pointer;
    }
    .toggle-buttons button:hover { background:#f0f0f0; }

    /* ============ 기도문 팝업 ============ */
    .prayer-toast {
      position: fixed; right: 18px; bottom: 18px; z-index: 190;
      width: 360px; max-width: calc(100vw - 24px);
      background: #ffffff; border: 1px solid #e9e6d8;
      border-radius: 14px; box-shadow: 0 10px 26px rgba(0,0,0,.18);
      overflow: hidden; transform: translateY(20px); opacity: 0;
      animation: prayerSlideUp .35s ease-out forwards; display:none;
      font-family: inherit;
    }
    @keyframes prayerSlideUp { to { transform: translateY(0); opacity: 1; } }

    .prayer-header {
      display:flex; align-items:center; justify-content:space-between;
      padding:10px 12px; background:#fff6dd; border-bottom:1px solid #f3e9c3;
    }
    .prayer-title { display:flex; align-items:center; gap:8px; font-weight:700; color:#8a6d1e; }
    .prayer-badge { background:#ffe9a8; color:#6b560f; font-size:12px; padding:2px 8px; border-radius:999px; }

    .prayer-close {
      border:0; background:transparent; font-size:20px; line-height:1; color:#7c7c7c;
      cursor:pointer; padding:2px 6px; border-radius:8px;
    }
    .prayer-close:hover { background: rgba(0,0,0,.05); }

    .prayer-body {
      padding:12px 14px 4px; color:#333; line-height:1.6; max-height:220px; overflow:auto;
    }
    .prayer-body h4 { margin:0 0 6px 0; font-size:15px; color:#444; }
    .prayer-body p { margin:0; white-space: pre-wrap; }

    .prayer-footer {
      display:flex; align-items:center; justify-content: space-between; gap:8px; padding:8px 12px 12px;
    }
    .prayer-actions { display:flex; gap:8px; }
    .prayer-btn {
      border:1px solid #e0dccc; background:#fff; color:#5a4d1b; padding:6px 10px; border-radius:10px; cursor:pointer; font-size:13px;
    }
    .prayer-btn:hover { background:#faf7ea; }
    .prayer-btn-primary { background:#f9d86b; border-color:#e5c458; color:#3e320e; font-weight:700; }
    .prayer-btn-primary:hover { filter: brightness(.98); }
    .prayer-checkbox { display:flex; align-items:center; gap:6px; color:#555; font-size:13px; }

    @media (max-width: 480px) {
      .prayer-toast { left:12px; right:12px; bottom:12px; width:auto; }
      .prayer-body { max-height:40vh; }
    }
  </style>
</head>
<body>
  <!-- 상단: 검색 + 오디오 -->
  <table class="top-fixed-table" id="main-table" cellpadding="0" cellspacing="0">
    <tr>
      <td class="search-cell">
        <form name="f1" action="">
          <input type="reset" name="b2" value="X">
          <input type="text" placeholder="검색어 입력" name="t1" value="">
          <input type="submit" name="b1" value="검색">
          <div id="search-count-container">
            <span id="search-count"></span>
            <button type="button" id="next-location-btn" style="display:none;">다음 위치</button>
          </div>
        </form>
      </td>

      <td class="audio-cell">
        <div id="custom-audio-player" role="region" aria-label="오디오 플레이어">
          <audio id="audio-file" preload="auto" playsinline>
            <source src="https://vod47.anyline.co.kr/vod_ezra/%EC%9D%BD%EA%B8%B0%2084.mp3" type="audio/mpeg">
            브라우저가 오디오 요소를 지원하지 않습니다.
          </audio>

          <div class="player-controls">
            <strong><span style="font-size:16px; background-color:#fcfcfc;" id="current-time" class="time-display">0:00</span></strong>
            <button id="play-btn" class="control-btn" aria-label="재생">▶</button>
            <button id="pause-btn" class="control-btn" aria-label="일시정지">⏸</button>
            <button id="stop-btn" class="control-btn" aria-label="정지">■</button>
            <strong><span style="font-size:16px; background-color:#fcfcfc;" id="remaining-time" class="time-display">0:00</span></strong>
          </div>

          <div class="toggle-buttons">
            <button id="show-progress">재생 위치</button>
            <button id="show-speed">재생 속도</button>
            <button id="show-volume">볼륨 조절</button>
          </div>

          <div class="progress-container" style="display:none;">
            <button id="rewind-10" class="skip-btn">⏪10s</button>
            <input type="range" id="progress-bar" min="0" max="100" value="0" step="0.01" aria-label="재생 위치">
            <button id="forward-10" class="skip-btn">10s⏩</button>
          </div>

          <div class="speed-controls" style="display:none;">
            <button id="speed-down-02" class="speed-btn">&laquo;</button>
            <button id="speed-down-01" class="speed-btn">&lt;</button>
            <span id="speed-display" class="speed-display">1.0x</span>
            <button id="speed-up-01" class="speed-btn">&gt;</button>
            <button id="speed-up-02" class="speed-btn">&raquo;</button>
            <button id="speed-reset">1.0</button>
          </div>

          <div class="volume-control" style="display:none;">
            <span style="font-size:14px;">볼륨</span>
            <button id="mute-btn">🔊</button>
            <input type="range" id="volume-slider" min="0" max="1" step="0.01" value="1">
          </div>
        </div>
      </td>
    </tr>
  </table>

  <!-- 플로팅 책 버튼 (구절설명 토글) -->
  <div class="explanation-button-container" id="explanation-button-container">
    <div class="explanation-button-wrapper" id="explanation-button-wrapper">
      <button class="explanation-icon-button" id="explanation-icon-button" aria-label="구절설명 열기" title="단어나 문장을 선택하면 ‘간단설명’ 또는 ‘상세설명’을 볼 수 있어요.">
        <span>📖</span>
      </button>
      <div class="explanation-sub-buttons" id="explanation-sub-buttons" role="menu">
        <button class="explanation-sub-button" id="detailed-explanation-button">상세 구절설명</button>
        <button class="explanation-sub-button" id="simple-explanation-button">간단 구절설명</button>
      </div>
    </div>
  </div>

  <!-- 폰트 크기 + 본문 요약 버튼 -->
  <div class="container" style="margin-top:6px;">
    <p class="font-size-label">Font Size</p>
    <button id="down">-</button>
    <p id="font-size">20</p>
    <button id="up">+</button>

    <span class="summary-buttons" aria-hidden="false">
      <button class="summary-btn" id="summary-simple-main">본문요약 간단</button>
      <button class="summary-btn" id="summary-detailed-main">본문요약 상세</button>
    </span>
  </div>

  <!-- 본문 -->
  <div>
    <h2 id="bible-text" style="line-height:1.2em;margin-left:15px;margin-right:15px;font-style:normal;font-weight:normal;color:black;font-size:20px;word-break:break-all;">
    <strong>
<!-- 일차 내비게이션 -->
<nav class="day-nav" aria-label="일차 이동">
  <a class="day-btn" href="https://seagwang1124.github.io/90html/83%EC%9D%BC%EC%B0%A8.html" aria-label="통독 83일차로 이동">≪</a>
  <span class="day-title"> 통독 84일차 </span>
  <a class="day-btn" href="https://seagwang1124.github.io/90html/85%EC%9D%BC%EC%B0%A8.html" aria-label="통독 85일차로 이동">≫</a>
  <a class="day-btn" href="https://seagwang1124.github.io/90html" aria-label="통독 목록으로 이동">통독 목록</a>
</nav>
      
<br>범위: 빌립보서 1장- 4장/ 빌레몬 1장/ 골로새서 1장- 4장</br>
</strong>
<br>&nbsp;</br>

<strong><br><font color="#4682b4">빌립보서 1장- 4장</font></br></strong>
<strong><br><font color="#4682b4">빌립보서 1 장</font></br></strong>
<br><i><font color="#808080">*인사*</font></i></br>
<br>1 그리스도 예수의 종 바울과 디모데는 그리스도 예수 안에서 빌립보에 사는 모든 성도와 또한 감독들과 집사들에게 편지하노니</br>
<br>2 하나님 우리 아버지와 주 예수 그리스도로부터 은혜와 평강이 너희에게 있을지어다</br>
<br><i><font color="#808080">*빌립보 성도들을 생각하며 간구하다*</font></i></br>
<br>3 내가 너희를 생각할 때마다 나의 하나님께 감사하며</br>
<br>4 간구할 때마다 너희 무리를 위하여 기쁨으로 항상 간구함은</br>
<br>5 너희가 첫날부터 이제까지 복음을 위한 일에 참여하고 있기 때문이라</br>
<br>6 너희 안에서 착한 일을 시작하신 이가 그리스도 예수의 날까지 이루실 줄을 우리는 확신하노라</br>
<br>7 내가 너희 무리를 위하여 이와 같이 생각하는 것이 마땅하니 이는 너희가 내 마음에 있음이며 나의 매임과 복음을 변명함과 확정함에 너희가 다 나와 함께 은혜에 참여한 자가 됨이라</br>
<br>8 내가 예수 그리스도의 심장으로 너희 무리를 얼마나 사모하는지 하나님이 내 증인이시니라</br>
<br>9 내가 기도하노라 너희 사랑을 지식과 모든 총명으로 점점 더 풍성하게 하사</br>
<br>10 너희로 지극히 선한 것을 분별하며 또 진실하여 허물 없이 그리스도의 날까지 이르고</br>
<br>11 예수 그리스도로 말미암아 의의 열매가 가득하여 하나님의 영광과 찬송이 되기를 원하노라</br>
<br><i><font color="#808080">*바울의 매임과 복음 전파*</font></i></br>
<br>12 형제들아 내가 당한 일이 도리어 복음 전파에 진전이 된 줄을 너희가 알기를 원하노라</br>
<br>13 이러므로 나의 매임이 그리스도 안에서 모든 시위대 안과 그 밖의 모든 사람에게 나타났으니</br>
<br>14 형제 중 다수가 나의 매임으로 말미암아 주 안에서 신뢰함으로 겁 없이 하나님의 말씀을 더욱 담대히 전하게 되었느니라</br>
<br>15 어떤 이들은 투기와 분쟁으로, 어떤 이들은 착한 뜻으로 그리스도를 전파하나니</br>
<br>16 이들은 내가 복음을 변증하기 위하여 세우심을 받은 줄 알고 사랑으로 하나</br>
<br>17 그들은 나의 매임에 괴로움을 더하게 할 줄로 생각하여 순수하지 못하게 다툼으로 그리스도를 전파하느니라</br>
<br>18 그러면 무엇이냐 겉치레로 하나 참으로 하나 무슨 방도로 하든지 전파되는 것은 그리스도니 이로써 나는 기뻐하고 또한 기뻐하리라</br>
<br>19 이것이 너희의 간구와 예수 그리스도의 성령의 도우심으로 나를 구원에 이르게 할 줄 아는 고로</br>
<br>20 나의 간절한 기대와 소망을 따라 아무 일에든지 부끄러워하지 아니하고 지금도 전과 같이 온전히 담대하여 살든지 죽든지 내 몸에서 그리스도가 존귀하게 되게 하려 하나니</br>
<br>21 이는 내게 사는 것이 그리스도니 죽는 것도 유익함이라</br>
<br>22 그러나 만일 육신으로 사는 이것이 내 일의 열매일진대 무엇을 택해야 할는지 나는 알지 못하노라</br>
<br>23 내가 그 둘 사이에 끼었으니 차라리 세상을 떠나서 그리스도와 함께 있는 것이 훨씬 더 좋은 일이라 그렇게 하고 싶으나</br>
<br>24 내가 육신으로 있는 것이 너희를 위하여 더 유익하리라</br>
<br>25 내가 살 것과 너희 믿음의 진보와 기쁨을 위하여 너희 무리와 함께 거할 이것을 확실히 아노니</br>
<br>26 내가 다시 너희와 같이 있음으로 그리스도 예수 안에서 너희 자랑이 나로 말미암아 풍성하게 하려 함이라</br>
<br>27 오직 너희는 그리스도의 복음에 합당하게 생활하라 이는 내가 너희에게 가 보나 떠나 있으나 너희가 한마음으로 서서 한 뜻으로 복음의 신앙을 위하여 협력하는 것과</br>
<br>28 무슨 일에든지 대적하는 자들 때문에 두려워하지 아니하는 이 일을 듣고자 함이라 이것이 그들에게는 멸망의 증거요 너희에게는 구원의 증거니 이는 하나님께로부터 난 것이라</br>
<br>29 그리스도를 위하여 너희에게 은혜를 주신 것은 다만 그를 믿을 뿐 아니라 또한 그를 위하여 고난도 받게 하려 하심이라</br>
<br>30 너희에게도 그와 같은 싸움이 있으니 너희가 내 안에서 본 바요 이제도 내 안에서 듣는 바니라</br>
<br>&nbsp;</br>
<strong><br><font color="#4682b4">빌립보서 2 장</font></br></strong>
<br><i><font color="#808080">*그리스도의 겸손*</font></i></br>
<br>1 그러므로 그리스도 안에 무슨 권면이나 사랑의 무슨 위로나 성령의 무슨 교제나 긍휼이나 자비가 있거든</br>
<br>2 마음을 같이하여 같은 사랑을 가지고 뜻을 합하며 한마음을 품어</br>
<br>3 아무 일에든지 다툼이나 허영으로 하지 말고 오직 겸손한 마음으로 각각 자기보다 남을 낫게 여기고</br>
<br>4 각각 자기 일을 돌볼뿐더러 또한 각각 다른 사람들의 일을 돌보아 나의 기쁨을 충만하게 하라</br>
<br>5 너희 안에 이 마음을 품으라 곧 그리스도 예수의 마음이니</br>
<br>6 그는 근본 하나님의 본체시나 하나님과 동등됨을 취할 것으로 여기지 아니하시고</br>
<br>7 오히려 자기를 비워 종의 형체를 가지사 사람들과 같이 되셨고</br>
<br>8 사람의 모양으로 나타나사 자기를 낮추시고 죽기까지 복종하셨으니 곧 십자가에 죽으심이라</br>
<br>9 이러므로 하나님이 그를 지극히 높여 모든 이름 위에 뛰어난 이름을 주사</br>
<br>10 하늘에 있는 자들과 땅에 있는 자들과 땅 아래에 있는 자들로 모든 무릎을 예수의 이름에 꿇게 하시고</br>
<br>11 모든 입으로 예수 그리스도를 주라 시인하여 하나님 아버지께 영광을 돌리게 하셨느니라</br>
<br><i><font color="#808080">*하나님의 흠 없는 자녀로 살라*</font></i></br>
<br>12 그러므로 나의 사랑하는 자들아 너희가 나 있을 때뿐 아니라 더욱 지금 나 없을 때에도 항상 복종하여 두렵고 떨림으로 너희 구원을 이루라</br>
<br>13 너희 안에서 행하시는 이는 하나님이시니 자기의 기쁘신 뜻을 위하여 너희에게 소원을 두고 행하게 하시나니</br>
<br>14 모든 일을 원망과 시비가 없이 하라</br>
<br>15 이는 너희가 흠이 없고 순전하여 어그러지고 거스르는 세대 가운데서 하나님의 흠 없는 자녀로 세상에서 그들 가운데 빛들로 나타내며</br>
<br>16 생명의 말씀을 밝혀 나의 달음질이 헛되지 아니하고 수고도 헛되지 아니함으로 그리스도의 날에 내가 자랑할 것이 있게 하려 함이라</br>
<br>17 만일 너희 믿음의 제물과 섬김 위에 내가 나를 전제로 드릴지라도 나는 기뻐하고 너희 무리와 함께 기뻐하리니</br>
<br>18 이와 같이 너희도 기뻐하고 나와 함께 기뻐하라</br>
<br><i><font color="#808080">*디모데와 에바브로디도*</font></i></br>
<br>19 내가 디모데를 속히 너희에게 보내기를 주 안에서 바람은 너희의 사정을 앎으로 안위를 받으려 함이니</br>
<br>20 이는 뜻을 같이하여 너희 사정을 진실히 생각할 자가 이밖에 내게 없음이라</br>
<br>21 그들이 다 자기 일을 구하고 그리스도 예수의 일을 구하지 아니하되</br>
<br>22 디모데의 연단을 너희가 아나니 자식이 아버지에게 함같이 나와 함께 복음을 위하여 수고하였느니라</br>
<br>23 그러므로 내가 내 일이 어떻게 될지를 보아서 곧 이 사람을 보내기를 바라고</br>
<br>24 나도 속히 가게 될 것을 주 안에서 확신하노라</br>
<br>25 그러나 에바브로디도를 너희에게 보내는 것이 필요한 줄로 생각하노니 그는 나의 형제요 함께 수고하고 함께 군사 된 자요 너희 사자로 내가 쓸 것을 돕는 자라</br>
<br>26 그가 너희 무리를 간절히 사모하고 자기가 병든 것을 너희가 들은 줄을 알고 심히 근심한지라</br>
<br>27 그가 병들어 죽게 되었으나 하나님이 그를 긍휼히 여기셨고 그뿐 아니라 또 나를 긍휼히 여기사 내 근심 위에 근심을 면하게 하셨느니라</br>
<br>28 그러므로 내가 더욱 급히 그를 보낸 것은 너희로 그를 다시 보고 기뻐하게 하며 내 근심도 덜려 함이니라</br>
<br>29 이러므로 너희가 주 안에서 모든 기쁨으로 그를 영접하고 또 이와 같은 자들을 존귀히 여기라</br>
<br>30 그가 그리스도의 일을 위하여 죽기에 이르러도 자기 목숨을 돌보지 아니한 것은 나를 섬기는 너희의 일에 부족함을 채우려 함이니라</br>
<br>&nbsp;</br>
<strong><br><font color="#4682b4">빌립보서 3 장</font></br></strong>
<br><i><font color="#808080">*하나님께로부터 난 의*</font></i></br>
<br>1 끝으로 나의 형제들아 주 안에서 기뻐하라 너희에게 같은 말을 쓰는 것이 내게는 수고로움이 없고 너희에게는 안전하니라</br>
<br>2 개들을 삼가고 행악하는 자들을 삼가고 몸을 상해하는 일을 삼가라</br>
<br>3 하나님의 성령으로 봉사하며 그리스도 예수로 자랑하고 육체를 신뢰하지 아니하는 우리가 곧 할례파라</br>
<br>4 그러나 나도 육체를 신뢰할 만하며 만일 누구든지 다른 이가 육체를 신뢰할 것이 있는 줄로 생각하면 나는 더욱 그러하리니</br>
<br>5 나는 팔일 만에 할례를 받고 이스라엘 족속이요 베냐민 지파요 히브리인 중의 히브리인이요 율법으로는 바리새인이요</br>
<br>6 열심으로는 교회를 박해하고 율법의 의로는 흠이 없는 자라</br>
<br>7 그러나 무엇이든지 내게 유익하던 것을 내가 그리스도를 위하여 다 해로 여길뿐더러</br>
<br>8 또한 모든 것을 해로 여김은 내 주 그리스도 예수를 아는 지식이 가장 고상하기 때문이라 내가 그를 위하여 모든 것을 잃어버리고 배설물로 여김은 그리스도를 얻고</br>
<br>9 그 안에서 발견되려 함이니 내가 가진 의는 율법에서 난 것이 아니요 오직 그리스도를 믿음으로 말미암은 것이니 곧 믿음으로 하나님께로부터 난 의라</br>
<br>10 내가 그리스도와 그 부활의 권능과 그 고난에 참여함을 알고자 하여 그의 죽으심을 본받아</br>
<br>11 어떻게 해서든지 죽은 자 가운데서 부활에 이르려 하노니</br>
<br>12 내가 이미 얻었다 함도 아니요 온전히 이루었다 함도 아니라 오직 내가 그리스도 예수께 잡힌 바 된 그것을 잡으려고 달려가노라</br>
<br>13 형제들아 나는 아직 내가 잡은 줄로 여기지 아니하고 오직 한 일 즉 뒤에 있는 것은 잊어버리고 앞에 있는 것을 잡으려고</br>
<br>14 푯대를 향하여 그리스도 예수 안에서 하나님이 위에서 부르신 부름의 상을 위하여 달려가노라</br>
<br>15 그러므로 누구든지 우리 온전히 이룬 자들은 이렇게 생각할지니 만일 어떤 일에 너희가 달리 생각하면 하나님이 이것도 너희에게 나타내시리라</br>
<br>16 오직 우리가 어디까지 이르렀든지 그대로 행할 것이라</br>
<br><i><font color="#808080">*우리의 시민권은 하늘에*</font></i></br>
<br>17 형제들아 너희는 함께 나를 본받으라 그리고 너희가 우리를 본받은 것처럼 그와 같이 행하는 자들을 눈여겨 보라</br>
<br>18 내가 여러 번 너희에게 말하였거니와 이제도 눈물을 흘리며 말하노니 여러 사람들이 그리스도의 십자가의 원수로 행하느니라</br>
<br>19 그들의 마침은 멸망이요 그들의 신은 배요 그 영광은 그들의 부끄러움에 있고 땅의 일을 생각하는 자라</br>
<br>20 그러나 우리의 시민권은 하늘에 있는지라 거기로부터 구원하는 자 곧 주 예수 그리스도를 기다리노니</br>
<br>21 그는 만물을 자기에게 복종하게 하실 수 있는 자의 역사로 우리의 낮은 몸을 자기 영광의 몸의 형체와 같이 변하게 하시리라</br>
<br>&nbsp;</br>
<strong><br><font color="#4682b4">빌립보서 4 장</font></br></strong>
<br>1 그러므로 나의 사랑하고 사모하는 형제들, 나의 기쁨이요 면류관인 사랑하는 자들아 이와 같이 주 안에 서라</br>
<br><i><font color="#808080">*권면*</font></i></br>
<br>2 내가 유오디아를 권하고 순두게를 권하노니 주 안에서 같은 마음을 품으라</br>
<br>3 또 참으로 나와 멍에를 같이한 네게 구하노니 복음에 나와 함께 힘쓰던 저 여인들을 돕고 또한 글레멘드와 그 외에 나의 동역자들을 도우라 그 이름들이 생명책에 있느니라</br>
<br>4 주 안에서 항상 기뻐하라 내가 다시 말하노니 기뻐하라</br>
<br>5 너희 관용을 모든 사람에게 알게 하라 주께서 가까우시니라</br>
<br>6 아무 것도 염려하지 말고 다만 모든 일에 기도와 간구로, 너희 구할 것을 감사함으로 하나님께 아뢰라</br>
<br>7 그리하면 모든 지각에 뛰어난 하나님의 평강이 그리스도 예수 안에서 너희 마음과 생각을 지키시리라</br>
<br>8 끝으로 형제들아 무엇에든지 참되며 무엇에든지 경건하며 무엇에든지 옳으며 무엇에든지 정결하며 무엇에든지 사랑 받을 만하며 무엇에든지 칭찬 받을 만하며 무슨 덕이 있든지 무슨 기림이 있든지 이것들을 생각하라</br>
<br>9 너희는 내게 배우고 받고 듣고 본 바를 행하라 그리하면 평강의 하나님이 너희와 함께 계시리라</br>
<br><i><font color="#808080">*빌립보 사람들의 선물*</font></i></br>
<br>10 내가 주 안에서 크게 기뻐함은 너희가 나를 생각하던 것이 이제 다시 싹이 남이니 너희가 또한 이를 위하여 생각은 하였으나 기회가 없었느니라</br>
<br>11 내가 궁핍하므로 말하는 것이 아니니라 어떠한 형편에든지 나는 자족하기를 배웠노니</br>
<br>12 나는 비천에 처할 줄도 알고 풍부에 처할 줄도 알아 모든 일 곧 배부름과 배고픔과 풍부와 궁핍에도 처할 줄 아는 일체의 비결을 배웠노라</br>
<br>13 내게 능력 주시는 자 안에서 내가 모든 것을 할 수 있느니라</br>
<br>14 그러나 너희가 내 괴로움에 함께 참여하였으니 잘하였도다</br>
<br>15 빌립보 사람들아 너희도 알거니와 복음의 시초에 내가 마게도냐를 떠날 때에 주고 받는 내 일에 참여한 교회가 너희 외에 아무도 없었느니라</br>
<br>16 데살로니가에 있을 때에도 너희가 한 번뿐 아니라 두 번이나 나의 쓸 것을 보내었도다</br>
<br>17 내가 선물을 구함이 아니요 오직 너희에게 유익하도록 풍성한 열매를 구함이라</br>
<br>18 내게는 모든 것이 있고 또 풍부한지라 에바브로디도 편에 너희가 준 것을 받으므로 내가 풍족하니 이는 받으실 만한 향기로운 제물이요 하나님을 기쁘시게 한 것이라</br>
<br>19 나의 하나님이 그리스도 예수 안에서 영광 가운데 그 풍성한 대로 너희 모든 쓸 것을 채우시리라</br>
<br>20 하나님 곧 우리 아버지께 세세 무궁하도록 영광을 돌릴지어다 아멘</br>
<br><i><font color="#808080">*끝 인사*</font></i></br>
<br>21 그리스도 예수 안에 있는 성도에게 각각 문안하라 나와 함께 있는 형제들이 너희에게 문안하고</br>
<br>22 모든 성도들이 너희에게 문안하되 특히 가이사의 집 사람들 중 몇이니라</br>
<br>23 주 예수 그리스도의 은혜가 너희 심령에 있을지어다</br>
<br>&nbsp;</br>
<strong><br><font color="#4682b4">빌레몬 1장</font></br></strong>
<br><i><font color="#808080">*인사*</font></i></br>
<br>1 그리스도 예수를 위하여 갇힌 자 된 바울과 및 형제 디모데는 우리의 사랑을 받는 자요 동역자인 빌레몬과</br>
<br>2 자매 압비아와 우리와 함께 병사 된 아킵보와 네 집에 있는 교회에 편지하노니</br>
<br>3 하나님 우리 아버지와 주 예수 그리스도로부터 은혜와 평강이 너희에게 있을지어다</br>
<br><i><font color="#808080">*빌레몬의 믿음과 사랑*</font></i></br>
<br>4 내가 항상 내 하나님께 감사하고 기도할 때에 너를 말함은</br>
<br>5 주 예수와 및 모든 성도에 대한 네 사랑과 믿음이 있음을 들음이니</br>
<br>6 이로써 네 믿음의 교제가 우리 가운데 있는 선을 알게 하고 그리스도께 이르도록 역사하느니라</br>
<br>7 형제여 성도들의 마음이 너로 말미암아 평안함을 얻었으니 내가 너의 사랑으로 많은 기쁨과 위로를 받았노라</br>
<br><i><font color="#808080">*오네시모를 위하여 간구하다*</font></i></br>
<br>8 이러므로 내가 그리스도 안에서 아주 담대하게 네게 마땅한 일로 명할 수도 있으나</br>
<br>9 도리어 사랑으로써 간구하노라 나이가 많은 나 바울은 지금 또 예수 그리스도를 위하여 갇힌 자 되어</br>
<br>10 갇힌 중에서 낳은 아들 오네시모를 위하여 네게 간구하노라</br>
<br>11 그가 전에는 네게 무익하였으나 이제는 나와 네게 유익하므로</br>
<br>12 네게 그를 돌려 보내노니 그는 내 심복이라</br>
<br>13 그를 내게 머물러 있게 하여 내 복음을 위하여 갇힌 중에서 네 대신 나를 섬기게 하고자 하나</br>
<br>14 다만 네 승낙이 없이는 내가 아무 것도 하기를 원하지 아니하노니 이는 너의 선한 일이 억지 같이 되지 아니하고 자의로 되게 하려 함이라</br>
<br>15 아마 그가 잠시 떠나게 된 것은 너로 하여금 그를 영원히 두게 함이리니</br>
<br>16 이 후로는 종과 같이 대하지 아니하고 종 이상으로 곧 사랑 받는 형제로 둘 자라 내게 특별히 그러하거든 하물며 육신과 주 안에서 상관된 네게랴</br>
<br>17 그러므로 네가 나를 동역자로 알진대 그를 영접하기를 내게 하듯 하고</br>
<br>18 그가 만일 네게 불의를 하였거나 네게 빚진 것이 있으면 그것을 내 앞으로 계산하라</br>
<br>19 나 바울이 친필로 쓰노니 내가 갚으려니와 네가 이 외에 네 자신이 내게 빚진 것은 내가 말하지 아니하노라</br>
<br>20 오 형제여 나로 주 안에서 너로 말미암아 기쁨을 얻게 하고 내 마음이 그리스도 안에서 평안하게 하라</br>
<br>21 나는 네가 순종할 것을 확신하므로 네게 썼노니 네가 내가 말한 것보다 더 행할 줄을 아노라</br>
<br>22 오직 너는 나를 위하여 숙소를 마련하라 너희 기도로 내가 너희에게 나아갈 수 있기를 바라노라</br>
<br><i><font color="#808080">*끝 인사*</font></i></br>
<br>23 그리스도 예수 안에서 나와 함께 갇힌 자 에바브라와</br>
<br>24 또한 나의 동역자 마가, 아리스다고, 데마, 누가가 문안하느니라</br>
<br>25 우리 주 예수 그리스도의 은혜가 너희 심령과 함께 있을지어다</br>
<br>&nbsp;</br>
<strong><br><font color="#4682b4">골로새서 1장- 4장</font></br></strong>
<strong><br><font color="#4682b4">골로새서 1 장</font></br></strong>
<br><i><font color="#808080">*인사*</font></i></br>
<br>1 하나님의 뜻으로 말미암아 그리스도 예수의 사도 된 바울과 형제 디모데는</br>
<br>2 골로새에 있는 성도들 곧 그리스도 안에서 신실한 형제들에게 편지하노니 우리 아버지 하나님으로부터 은혜와 평강이 너희에게 있을지어다</br>
<br><i><font color="#808080">*하나님께 감사를 드리다*</font></i></br>
<br>3 우리가 너희를 위하여 기도할 때마다 하나님 곧 우리 주 예수 그리스도의 아버지께 감사하노라</br>
<br>4 이는 그리스도 예수 안에 너희의 믿음과 모든 성도에 대한 사랑을 들었음이요</br>
<br>5 너희를 위하여 하늘에 쌓아 둔 소망으로 말미암음이니 곧 너희가 전에 복음 진리의 말씀을 들은 것이라</br>
<br>6 이 복음이 이미 너희에게 이르매 너희가 듣고 참으로 하나님의 은혜를 깨달은 날부터 너희 중에서와 같이 또한 온 천하에서도 열매를 맺어 자라는도다</br>
<br>7 이와 같이 우리와 함께 종 된 사랑하는 에바브라에게 너희가 배웠나니 그는 너희를 위한 그리스도의 신실한 일꾼이요</br>
<br>8 성령 안에서 너희 사랑을 우리에게 알린 자니라</br>
<br><i><font color="#808080">*하나님의 형상이시요 교회의 머리시라*</font></i></br>
<br>9 이로써 우리도 듣던 날부터 너희를 위하여 기도하기를 그치지 아니하고 구하노니 너희로 하여금 모든 신령한 지혜와 총명에 하나님의 뜻을 아는 것으로 채우게 하시고</br>
<br>10 주께 합당하게 행하여 범사에 기쁘시게 하고 모든 선한 일에 열매를 맺게 하시며 하나님을 아는 것에 자라게 하시고</br>
<br>11 그의 영광의 힘을 따라 모든 능력으로 능하게 하시며 기쁨으로 모든 견딤과 오래 참음에 이르게 하시고</br>
<br>12 우리로 하여금 빛 가운데서 성도의 기업의 부분을 얻기에 합당하게 하신 아버지께 감사하게 하시기를 원하노라</br>
<br>13 그가 우리를 흑암의 권세에서 건져내사 그의 사랑의 아들의 나라로 옮기셨으니</br>
<br>14 그 아들 안에서 우리가 속량 곧 죄 사함을 얻었도다</br>
<br>15 그는 보이지 아니하는 하나님의 형상이시요 모든 피조물보다 먼저 나신 이시니</br>
<br>16 만물이 그에게서 창조되되 하늘과 땅에서 보이는 것들과 보이지 않는 것들과 혹은 왕권들이나 주권들이나 통치자들이나 권세들이나 만물이 다 그로 말미암고 그를 위하여 창조되었고</br>
<br>17 또한 그가 만물보다 먼저 계시고 만물이 그 안에 함께 섰느니라</br>
<br>18 그는 몸인 교회의 머리시라 그가 근본이시요 죽은 자들 가운데서 먼저 나신 이시니 이는 친히 만물의 으뜸이 되려 하심이요</br>
<br>19 아버지께서는 모든 충만으로 예수 안에 거하게 하시고</br>
<br>20 그의 십자가의 피로 화평을 이루사 만물 곧 땅에 있는 것들이나 하늘에 있는 것들이 그로 말미암아 자기와 화목하게 되기를 기뻐하심이라</br>
<br>21 전에 악한 행실로 멀리 떠나 마음으로 원수가 되었던 너희를</br>
<br>22 이제는 그의 육체의 죽음으로 말미암아 화목하게 하사 너희를 거룩하고 흠 없고 책망할 것이 없는 자로 그 앞에 세우고자 하셨으니</br>
<br>23 만일 너희가 믿음에 거하고 터 위에 굳게 서서 너희 들은 바 복음의 소망에서 흔들리지 아니하면 그리하리라 이 복음은 천하 만민에게 전파된 바요 나 바울은 이 복음의 일꾼이 되었노라</br>
<br><i><font color="#808080">*교회를 위하여 바울이 하는 일*</font></i></br>
<br>24 나는 이제 너희를 위하여 받는 괴로움을 기뻐하고 그리스도의 남은 고난을 그의 몸된 교회를 위하여 내 육체에 채우노라</br>
<br>25 내가 교회의 일꾼 된 것은 하나님이 너희를 위하여 내게 주신 직분을 따라 하나님의 말씀을 이루려 함이니라</br>
<br>26 이 비밀은 만세와 만대로부터 감추어졌던 것인데 이제는 그의 성도들에게 나타났고</br>
<br>27 하나님이 그들로 하여금 이 비밀의 영광이 이방인 가운데 얼마나 풍성한지를 알게 하려 하심이라 이 비밀은 너희 안에 계신 그리스도시니 곧 영광의 소망이니라</br>
<br>28 우리가 그를 전파하여 각 사람을 권하고 모든 지혜로 각 사람을 가르침은 각 사람을 그리스도 안에서 완전한 자로 세우려 함이니</br>
<br>29 이를 위하여 나도 내 속에서 능력으로 역사하시는 이의 역사를 따라 힘을 다하여 수고하노라</br>
<br>&nbsp;</br>
<strong><br><font color="#4682b4">골로새서 2 장</font></br></strong>
<br>1 내가 너희와 라오디게아에 있는 자들과 무릇 내 육신의 얼굴을 보지 못한 자들을 위하여 얼마나 힘쓰는지를 너희가 알기를 원하노니</br>
<br>2 이는 그들로 마음에 위안을 받고 사랑 안에서 연합하여 확실한 이해의 모든 풍성함과 하나님의 비밀인 그리스도를 깨닫게 하려 함이니</br>
<br>3 그 안에는 지혜와 지식의 모든 보화가 감추어져 있느니라</br>
<br>4 내가 이것을 말함은 아무도 교묘한 말로 너희를 속이지 못하게 하려 함이니</br>
<br>5 이는 내가 육신으로는 떠나 있으나 심령으로는 너희와 함께 있어 너희가 질서 있게 행함과 그리스도를 믿는 너희 믿음이 굳건한 것을 기쁘게 봄이라</br>
<br><i><font color="#808080">*그리스도 안에서 행하라*</font></i></br>
<br>6 그러므로 너희가 그리스도 예수를 주로 받았으니 그 안에서 행하되</br>
<br>7 그 안에 뿌리를 박으며 세움을 받아 교훈을 받은 대로 믿음에 굳게 서서 감사함을 넘치게 하라</br>
<br>8 누가 철학과 헛된 속임수로 너희를 사로잡을까 주의하라 이것은 사람의 전통과 세상의 초등학문을 따름이요 그리스도를 따름이 아니니라</br>
<br>9 그 안에는 신성의 모든 충만이 육체로 거하시고</br>
<br>10 너희도 그 안에서 충만하여졌으니 그는 모든 통치자와 권세의 머리시라</br>
<br>11 또 그 안에서 너희가 손으로 하지 아니한 할례를 받았으니 곧 육의 몸을 벗는 것이요 그리스도의 할례니라</br>
<br>12 너희가 세례로 그리스도와 함께 장사되고 또 죽은 자들 가운데서 그를 일으키신 하나님의 역사를 믿음으로 말미암아 그 안에서 함께 일으키심을 받았느니라</br>
<br>13 또 범죄와 육체의 무할례로 죽었던 너희를 하나님이 그와 함께 살리시고 우리의 모든 죄를 사하시고</br>
<br>14 우리를 거스르고 불리하게 하는 법조문으로 쓴 증서를 지우시고 제하여 버리사 십자가에 못 박으시고</br>
<br>15 통치자들과 권세들을 무력화하여 드러내어 구경거리로 삼으시고 십자가로 그들을 이기셨느니라</br>
<br>16 그러므로 먹고 마시는 것과 절기나 초하루나 안식일을 이유로 누구든지 너희를 비판하지 못하게 하라</br>
<br>17 이것들은 장래 일의 그림자이나 몸은 그리스도의 것이니라</br>
<br>18 아무도 꾸며낸 겸손과 천사 숭배를 이유로 너희를 정죄하지 못하게 하라 그가 그 본 것에 의지하여 그 육신의 생각을 따라 헛되이 과장하고</br>
<br>19 머리를 붙들지 아니하는지라 온 몸이 머리로 말미암아 마디와 힘줄로 공급함을 받고 연합하여 하나님이 자라게 하시므로 자라느니라</br>
<br><i><font color="#808080">*그리스도와 함께 하는 새 사람*</font></i></br>
<br>20 너희가 세상의 초등학문에서 그리스도와 함께 죽었거든 어찌하여 세상에 사는 것과 같이 규례에 순종하느냐</br>
<br>21 (곧 붙잡지도 말고 맛보지도 말고 만지지도 말라 하는 것이니</br>
<br>22 이 모든 것은 한때 쓰이고는 없어지리라) 사람의 명령과 가르침을 따르느냐</br>
<br>23 이런 것들은 자의적 숭배와 겸손과 몸을 괴롭게 하는 데는 지혜 있는 모양이나 오직 육체 따르는 것을 금하는 데는 조금도 유익이 없느니라</br>
<br>&nbsp;</br>
<strong><br><font color="#4682b4">골로새서 3 장</font></br></strong>
<br>1 그러므로 너희가 그리스도와 함께 다시 살리심을 받았으면 위의 것을 찾으라 거기는 그리스도께서 하나님 우편에 앉아 계시느니라</br>
<br>2 위의 것을 생각하고 땅의 것을 생각하지 말라</br>
<br>3 이는 너희가 죽었고 너희 생명이 그리스도와 함께 하나님 안에 감추어졌음이라</br>
<br>4 우리 생명이신 그리스도께서 나타나실 그 때에 너희도 그와 함께 영광 중에 나타나리라</br>
<br>5 그러므로 땅에 있는 지체를 죽이라 곧 음란과 부정과 사욕과 악한 정욕과 탐심이니 탐심은 우상 숭배니라</br>
<br>6 이것들로 말미암아 하나님의 진노가 임하느니라</br>
<br>7 너희도 전에 그 가운데 살 때에는 그 가운데서 행하였으나</br>
<br>8 이제는 너희가 이 모든 것을 벗어 버리라 곧 분함과 노여움과 악의와 비방과 너희 입의 부끄러운 말이라</br>
<br>9 너희가 서로 거짓말을 하지 말라 옛 사람과 그 행위를 벗어 버리고</br>
<br>10 새 사람을 입었으니 이는 자기를 창조하신 이의 형상을 따라 지식에까지 새롭게 하심을 입은 자니라</br>
<br>11 거기에는 헬라인이나 유대인이나 할례파나 무할례파나 야만인이나 스구디아인이나 종이나 자유인이 차별이 있을 수 없나니 오직 그리스도는 만유시요 만유 안에 계시니라</br>
<br>12 그러므로 너희는 하나님이 택하사 거룩하고 사랑 받는 자처럼 긍휼과 자비와 겸손과 온유와 오래 참음을 옷 입고</br>
<br>13 누가 누구에게 불만이 있거든 서로 용납하여 피차 용서하되 주께서 너희를 용서하신 것 같이 너희도 그리하고</br>
<br>14 이 모든 것 위에 사랑을 더하라 이는 온전하게 매는 띠니라</br>
<br>15 그리스도의 평강이 너희 마음을 주장하게 하라 너희는 평강을 위하여 한 몸으로 부르심을 받았나니 너희는 또한 감사하는 자가 되라</br>
<br>16 그리스도의 말씀이 너희 속에 풍성히 거하여 모든 지혜로 피차 가르치며 권면하고 시와 찬송과 신령한 노래를 부르며 감사하는 마음으로 하나님을 찬양하고</br>
<br>17 또 무엇을 하든지 말에나 일에나 다 주 예수의 이름으로 하고 그를 힘입어 하나님 아버지께 감사하라</br>
<br><i><font color="#808080">*주께 하듯 하라*</font></i></br>
<br>18 아내들아 남편에게 복종하라 이는 주 안에서 마땅하니라</br>
<br>19 남편들아 아내를 사랑하며 괴롭게 하지 말라</br>
<br>20 자녀들아 모든 일에 부모에게 순종하라 이는 주 안에서 기쁘게 하는 것이니라</br>
<br>21 아비들아 너희 자녀를 노엽게 하지 말지니 낙심할까 함이라</br>
<br>22 종들아 모든 일에 육신의 상전들에게 순종하되 사람을 기쁘게 하는 자와 같이 눈가림만 하지 말고 오직 주를 두려워하여 성실한 마음으로 하라</br>
<br>23 무슨 일을 하든지 마음을 다하여 주께 하듯 하고 사람에게 하듯 하지 말라</br>
<br>24 이는 기업의 상을 주께 받을 줄 아나니 너희는 주 그리스도를 섬기느니라</br>
<br>25 불의를 행하는 자는 불의의 보응을 받으리니 주는 사람을 외모로 취하심이 없느니라</br>
<br>&nbsp;</br>
<strong><br><font color="#4682b4">골로새서 4 장</font></br></strong>
<br>1 상전들아 의와 공평을 종들에게 베풀지니 너희에게도 하늘에 상전이 계심을 알지어다</br>
<br><i><font color="#808080">*권면*</font></i></br>
<br>2 기도를 계속하고 기도에 감사함으로 깨어 있으라</br>
<br>3 또한 우리를 위하여 기도하되 하나님이 전도할 문을 우리에게 열어 주사 그리스도의 비밀을 말하게 하시기를 구하라 내가 이 일 때문에 매임을 당하였노라</br>
<br>4 그리하면 내가 마땅히 할 말로써 이 비밀을 나타내리라</br>
<br>5 외인에게 대해서는 지혜로 행하여 세월을 아끼라</br>
<br>6 너희 말을 항상 은혜 가운데서 소금으로 맛을 냄과 같이 하라 그리하면 각 사람에게 마땅히 대답할 것을 알리라</br>
<br><i><font color="#808080">*끝 인사*</font></i></br>
<br>7 두기고가 내 사정을 다 너희에게 알려 주리니 그는 사랑 받는 형제요 신실한 일꾼이요 주 안에서 함께 종이 된 자니라</br>
<br>8 내가 그를 특별히 너희에게 보내는 것은 너희로 우리 사정을 알게 하고 너희 마음을 위로하게 하려 함이라</br>
<br>9 신실하고 사랑을 받는 형제 오네시모를 함께 보내노니 그는 너희에게서 온 사람이라 그들이 여기 일을 다 너희에게 알려 주리라</br>
<br>10 나와 함께 갇힌 아리스다고와 바나바의 생질 마가와 (이 마가에 대하여 너희가 명을 받았으매 그가 이르거든 영접하라)</br>
<br>11 유스도라 하는 예수도 너희에게 문안하느니라 그들은 할례파이나 이들만은 하나님의 나라를 위하여 함께 역사하는 자들이니 이런 사람들이 나의 위로가 되었느니라</br>
<br>12 그리스도 예수의 종인 너희에게서 온 에바브라가 너희에게 문안하느니라 그가 항상 너희를 위하여 애써 기도하여 너희로 하나님의 모든 뜻 가운데서 완전하고 확신 있게 서기를 구하나니</br>
<br>13 그가 너희와 라오디게아에 있는 자들과 히에라볼리에 있는 자들을 위하여 많이 수고하는 것을 내가 증언하노라</br>
<br>14 사랑을 받는 의사 누가와 또 데마가 너희에게 문안하느니라</br>
<br>15 라오디게아에 있는 형제들과 눔바와 그 여자의 집에 있는 교회에 문안하고</br>
<br>16 이 편지를 너희에게서 읽은 후에 라오디게아인의 교회에서도 읽게 하고 또 라오디게아로부터 오는 편지를 너희도 읽으라</br>
<br>17 아킵보에게 이르기를 주 안에서 받은 직분을 삼가 이루라고 하라</br>
<br>18 나 바울은 친필로 문안하노니 내가 매인 것을 생각하라 은혜가 너희에게 있을지어다</br>
<br>&nbsp;</br>
<br>    84 일차 끝</br>
       <br>&nbsp;</br>
      <br>&nbsp;</br>
      <br>&nbsp;</br>
      <br>&nbsp;</br>
      <br>&nbsp;</br>
      <br>&nbsp;</br>
    </h2>
  </div>

  <!-- 모달 (설명/요약 출력) -->
  <div id="explanation-modal" class="modal" role="dialog" aria-modal="true" aria-labelledby="modal-title">
    <div class="modal-content">
      <span class="close-button" id="close-modal" aria-label="닫기">&times;</span>
      <h3 id="modal-title">구절 설명</h3>
      <img id="modal-image" src="" alt="설명 관련 이미지" />
      <div id="modal-text">구절을 드래그하여 선택하고 '구절설명' 버튼을 누르세요.</div>
    </div>
  </div>

  <div id="scroll-marker-container" class="scroll-marker-container" aria-hidden="true"></div>

  <!-- 기도문 팝업 -->
  <div id="prayerToast" class="prayer-toast" role="dialog" aria-modal="false" aria-label="성경 읽기 전 기도문">
    <div class="prayer-header">
      <div class="prayer-title">
        <span>🙏</span>
        <span>기도하고 읽기</span>
        <span class="prayer-badge">90일 성경통톡</span>
      </div>
      <button class="prayer-close" id="prayerCloseBtn" aria-label="기도문 닫기">×</button>
    </div>

    <div class="prayer-body" id="prayerBody" tabindex="0">
   <style>
  .cross-red {
    color: red;
    font-weight: 900;
    -webkit-text-stroke: 0.6px currentColor; /* 윤곽선으로 두께 보강 */
    text-shadow:
      0 0 0 currentColor,         /* 기본 채움 */
      0.02em 0 currentColor, -0.02em 0 currentColor,
      0 0.02em currentColor,  0 -0.02em currentColor; /* 가장자리 두껍게 */
  }
</style>

<h4>
  <p>👀<span class="cross-red">✝︎</span> "하나님나라 관점" <span class="cross-red">✝︎</span>👀으로</p>
  <p>읽는 📖"90일 통큰통독"📖</p>
</h4>
<p>— 👦🏻 성경 읽기 전 1분 기도 🙏—</p>
<p>내 삶의 주인이 되시는 하나님, 성경을 읽게 하시니 감사합니다. 이 성경이 하나님의 말씀임을 믿습니다. 특별히 나에게 주시는 하나님의 말씀임을 믿습니다. 주시는 말씀을 내 관점으로 읽게 하지 마시고 하나님의 관점으로 읽어 하나님의 마음을 알게 하시고, 그 마음을 받아 나의 중심성을 하나님의 뜻 앞에 내려놓게 하시고 순종하게 하시어 변화되게 하옵소서, 말씀을 삶으로 이루는 성경 읽기가 되게 역사하여 주시옵소서. 예수님의 이름으로 기도합니다. 아멘.</p>
    
    </div>

    <div class="prayer-footer">
  <div></div> <!-- 좌측 자리 균형용(선택) -->
  <div class="prayer-actions">
    <button class="prayer-btn" id="prayerReadAlone">기도 드렸습니다</button>
    <button class="prayer-btn prayer-btn-primary" id="prayerAmen">확인</button>
  </div>
</div>

  <script>
    // ------------------------------
    // API KEY (사용자 입력 상태)
    const apiKey = "AIzaSyDUlSQlSPgnrFBXpnUJMDoUO3s_KsaoFRU";
    // ------------------------------

    // DOM
    const bibleTextEl = document.getElementById('bible-text');
    const searchCountEl = document.getElementById('search-count');
    const nextLocationBtn = document.getElementById('next-location-btn');
    const scrollMarkerContainer = document.getElementById('scroll-marker-container');

    const explanationIconButton = document.getElementById('explanation-icon-button');
    const explanationButtonWrapper = document.getElementById('explanation-button-wrapper');
    const explanationSubButtons = document.getElementById('explanation-sub-buttons');
    const detailedExplanationButton = document.getElementById('detailed-explanation-button');
    const simpleExplanationButton = document.getElementById('simple-explanation-button');

    const summarySimpleMain = document.getElementById('summary-simple-main');
    const summaryDetailedMain = document.getElementById('summary-detailed-main');

    const modal = document.getElementById('explanation-modal');
    const closeModalButton = document.getElementById('close-modal');
    const modalTitle = document.getElementById('modal-title');
    const modalImage = document.getElementById('modal-image');
    const modalText = document.getElementById('modal-text');

    const audio = document.getElementById('audio-file');
    const playBtn = document.getElementById('play-btn');
    const pauseBtn = document.getElementById('pause-btn');
    const stopBtn = document.getElementById('stop-btn');
    const progressBar = document.getElementById('progress-bar');
    const rewindBtn = document.getElementById('rewind-10');
    const forwardBtn = document.getElementById('forward-10');
    const speedDisplay = document.getElementById('speed-display');
    const speedDown02Btn = document.getElementById('speed-down-02');
    const speedDown01Btn = document.getElementById('speed-down-01');
    const speedUp01Btn = document.getElementById('speed-up-01');
    const speedUp02Btn = document.getElementById('speed-up-02');
    const speedResetBtn = document.getElementById('speed-reset');
    const volumeSlider = document.getElementById('volume-slider');
    const muteBtn = document.getElementById('mute-btn');
    const currentTimeEl = document.getElementById('current-time');
    const remainingTimeEl = document.getElementById('remaining-time');

    const upBtn = document.getElementById('up');
    const downBtn = document.getElementById('down');
    const fontSizeEl = document.getElementById('font-size');

    // 상태
    let originalText = "";
    let selectedVerse = "";
    let selectionRange = null;
    let foundSentences = [];
    let currentSearchIndex = -1;
    let currentSpeed = 1.0;
    let isMuted = false;
    let selectionDebounce = null;

    function escapeRegExp(s) { return s.replace(/[.*+?^${}()|[\]\\]/g, '\\$&'); }
    function formatTime(sec) { if (!isFinite(sec) || sec < 0) return '0:00'; const m = Math.floor(sec/60); const s = Math.floor(sec%60); return `${m}:${String(s).padStart(2,'0')}`; }

    window.addEventListener('DOMContentLoaded', () => {
      originalText = bibleTextEl.innerHTML;
      updateFontSizeDisplay();
      updateSpeed();

      // 본문 줄 단위 분리
      const lines = originalText.split(/<br\s*\/?>/i);
      bibleTextEl.innerHTML = lines.map(line => {
        if (line.trim() === "") return "<br>";
        return `<span class="line">${line}</span><br>`;
      }).join("");
      const lineElements = document.querySelectorAll("#bible-text .line");

           // 스크롤 시 중앙 강조 줄 수(2줄/3줄) 반응형으로 처리
function highlightCenterLines() {
  const viewportCenter = window.innerHeight / 2 + window.scrollY;
  const linesToHighlight = window.innerWidth >= 768 ? 3 : 2;

  let closestIndex = -1, minDistance = Infinity;
  lineElements.forEach((line, i) => {
    const rect = line.getBoundingClientRect();
    const lineCenter = rect.top + window.scrollY + rect.height / 2;
    const distance = Math.abs(lineCenter - viewportCenter);
    if (distance < minDistance) { minDistance = distance; closestIndex = i; }
  });

  lineElements.forEach(line => line.classList.remove("highlight"));
  if (closestIndex < 0) return;

  const indices = linesToHighlight === 3
    ? [closestIndex - 1, closestIndex, closestIndex + 1]
    : [closestIndex, closestIndex + 1];

  indices.forEach(idx => {
    if (idx >= 0 && idx < lineElements.length) {
      lineElements[idx].classList.add("highlight");
    }
  });
}

// rAF 스로틀
let ticking = false;
function onScrollOrResize() {
  if (ticking) return;
  ticking = true;
  requestAnimationFrame(() => {
    highlightCenterLines();
    ticking = false;
  });
}

// 이벤트 등록
window.addEventListener("scroll", onScrollOrResize, { passive: true });
window.addEventListener("resize", onScrollOrResize);
// (옵션) 기기 회전 이벤트도 묶어서 처리하면 좋아요
window.addEventListener("orientationchange", onScrollOrResize);

// 최초 1회 적용
highlightCenterLines();

      // PC에서 2줄씩 부드럽게 스크롤
      window.addEventListener("wheel", function(e) {
        if (e.ctrlKey) return;
        const modal = document.getElementById('explanation-modal');
        if (modal && modal.style.display === 'block' && modal.contains(e.target)) return;
        const firstLine = document.querySelector("#bible-text .line");
        if (!firstLine) return;
        const lineHeight = firstLine.getBoundingClientRect().height;
        e.preventDefault();
        window.scrollBy({ top: e.deltaY > 0 ? lineHeight * 2 : -lineHeight * 2, behavior: "smooth" });
      }, { passive: false });

      // 폰트 버튼
      upBtn.addEventListener('click', () => {
        const current = parseFloat(getComputedStyle(bibleTextEl).fontSize);
        if (current + 4 <= 80) { bibleTextEl.style.fontSize = (current + 4) + 'px'; updateFontSizeDisplay(); }
      });
      downBtn.addEventListener('click', () => {
        const current = parseFloat(getComputedStyle(bibleTextEl).fontSize);
        if (current - 4 >= 12) { bibleTextEl.style.fontSize = (current - 4) + 'px'; updateFontSizeDisplay(); }
      });

      // 검색
      const searchForm = document.forms.f1;
      searchForm.addEventListener('submit', (e) => { e.preventDefault(); findString(searchForm.t1.value); });
      searchForm.b2.addEventListener('click', () => { clearHighlight(); });
      nextLocationBtn.addEventListener('click', nextLocation);

      // 오디오
      playBtn.addEventListener('click', () => { audio.play().catch(()=>{}); });
      pauseBtn.addEventListener('click', () => audio.pause());
      stopBtn.addEventListener('click', () => { audio.pause(); audio.currentTime = 0; });
      speedDown02Btn.addEventListener('click', () => { currentSpeed = Math.max(0.5, currentSpeed - 0.2); updateSpeed(); });
      speedDown01Btn.addEventListener('click', () => { currentSpeed = Math.max(0.5, currentSpeed - 0.1); updateSpeed(); });
      speedUp01Btn.addEventListener('click', () => { currentSpeed = Math.min(2.0, currentSpeed + 0.1); updateSpeed(); });
      speedUp02Btn.addEventListener('click', () => { currentSpeed = Math.min(2.0, currentSpeed + 0.2); updateSpeed(); });
      speedResetBtn.addEventListener('click', () => { currentSpeed = 1.0; updateSpeed(); });
      volumeSlider.addEventListener('input', () => { audio.volume = Number(volumeSlider.value); });
      muteBtn.addEventListener('click', () => { isMuted = !isMuted; audio.muted = isMuted; muteBtn.textContent = isMuted ? '🔇' : '🔊'; });

      audio.addEventListener('timeupdate', () => {
        if (!isFinite(audio.duration) || audio.duration <= 0) return;
        const pct = (audio.currentTime / audio.duration) * 100;
        progressBar.value = pct;
        currentTimeEl.textContent = formatTime(audio.currentTime);
        remainingTimeEl.textContent = '-' + formatTime(audio.duration - audio.currentTime);
      }, { passive: true });
      audio.addEventListener('loadedmetadata', () => {
        currentTimeEl.textContent = '0:00';
        remainingTimeEl.textContent = '-' + formatTime(audio.duration || 0);
      });
      progressBar.addEventListener('input', () => {
        if (!isFinite(audio.duration) || audio.duration <= 0) return;
        const pct = progressBar.value / 100;
        audio.currentTime = audio.duration * pct;
      }, { passive: true });
      rewindBtn.addEventListener('click', () => { audio.currentTime = Math.max(0, audio.currentTime - 10); });
      forwardBtn.addEventListener('click', () => { if (isFinite(audio.duration)) audio.currentTime = Math.min(audio.duration, audio.currentTime + 10); });

      // 책 버튼 토글 & 선택 복원
      explanationIconButton.addEventListener('pointerdown', () => {
        const sel = window.getSelection();
        try { if (sel && sel.rangeCount > 0) selectionRange = sel.getRangeAt(0).cloneRange(); } catch(e) { selectionRange = null; }
      }, { passive: true });
      explanationIconButton.addEventListener('click', (ev) => {
        ev.stopPropagation();
        const sel = window.getSelection();
        try { if (sel && sel.rangeCount > 0) selectionRange = sel.getRangeAt(0).cloneRange(); } catch(e){ selectionRange = null; }
        explanationButtonWrapper.classList.toggle('active');
        setTimeout(() => {
          if (selectionRange) {
            const sel2 = window.getSelection();
            sel2.removeAllRanges();
            try { sel2.addRange(selectionRange); } catch(e){}
            updateSelectedVerseFromRange(selectionRange);
          }
        }, 60);
      });
      document.body.addEventListener('click', (ev) => {
        if (!explanationButtonWrapper.contains(ev.target)) explanationButtonWrapper.classList.remove('active');
      });

      // 구절 설명 버튼
      detailedExplanationButton.addEventListener('click', () => {
        const v = (selectedVerse || '').trim();
        if (!v) { showModal("구절을 먼저 선택하세요","본문에서 구절이나 단어를 드래그하여 선택한 후 다시 버튼을 눌러주세요."); }
        else { fetchExplanation(v, 'detailed'); }
        explanationButtonWrapper.classList.remove('active');
      });
      simpleExplanationButton.addEventListener('click', () => {
        const v = (selectedVerse || '').trim();
        if (!v) { showModal("구절을 먼저 선택하세요","본문에서 구절이나 단어를 드래그하여 선택한 후 다시 버튼을 눌러주세요."); }
        else { fetchExplanation(v, 'simple'); }
        explanationButtonWrapper.classList.remove('active');
      });

      // 본문 요약 버튼
      summarySimpleMain.addEventListener('click', () => {
        const full = getFullBibleText();
        if (!full.trim()) { showModal("본문이 없습니다","요약할 성경 본문이 없습니다."); }
        else { fetchSummary(full, 'simple'); }
      });
      summaryDetailedMain.addEventListener('click', () => {
        const full = getFullBibleText();
        if (!full.trim()) { showModal("본문이 없습니다","요약할 성경 본문이 없습니다."); }
        else { fetchSummary(full, 'detailed'); }
      });

      // 설명 모달 닫기
      closeModalButton.addEventListener('click', () => {
        modal.style.display = 'none';
        document.body.classList.remove('modal-open');
      });
      window.addEventListener('click', (ev) => {
        if (ev.target === modal) {
          modal.style.display = 'none';
          document.body.classList.remove('modal-open');
        }
      });

      // 선택 이벤트(디바운스)
      const scheduleSelectionUpdate = () => {
        clearTimeout(selectionDebounce);
        selectionDebounce = setTimeout(handleSelectionChange, 160);
      };
      document.addEventListener('mouseup', scheduleSelectionUpdate, { passive:true });
      document.addEventListener('touchend', scheduleSelectionUpdate, { passive:true });
      document.addEventListener('selectionchange', scheduleSelectionUpdate);

      // 기도문 팝업 초기화
      initPrayerToast();
    });

    // 선택 관리
    function handleSelectionChange(){
      const sel = window.getSelection();
      if (!sel) return clearSelectionState();
      const text = (sel.toString() || "").trim();

      const modalEl = document.getElementById('explanation-modal');
      if (modalEl && modalEl.style.display === 'block') {
        const sel2 = window.getSelection();
        if (sel2 && (modalEl.contains(sel2.anchorNode) || modalEl.contains(sel2.focusNode))) return;
      }

      let isInBible = false;
      try {
        if (sel.anchorNode && sel.focusNode) {
          isInBible = bibleTextEl.contains(sel.anchorNode) && bibleTextEl.contains(sel.focusNode);
        }
      } catch(e){ isInBible = false; }

      if (text && isInBible) {
        selectedVerse = text;
        try { selectionRange = sel.getRangeAt(0).cloneRange(); } catch(e){ selectionRange = null; }
        try {
          const range = sel.getRangeAt(0);
          const rects = Array.from(range.getClientRects());
          const rect = rects.length
            ? rects.reduce((u, r) => ({
                top: Math.min(u.top, r.top),
                left: Math.min(u.left, r.left),
                right: Math.max(u.right, r.right),
                bottom: Math.max(u.bottom, r.bottom),
                width: 0, height: 0
              }), { top:Infinity, left:Infinity, right:-Infinity, bottom:-Infinity })
            : range.getBoundingClientRect();
          rect.width  = rect.right - rect.left;
          rect.height = rect.bottom - rect.top;
          positionExplanationButton(rect);
        } catch(e){ resetExplanationButton(); }
      } else {
        clearSelectionState();
      }
    }
    function updateSelectedVerseFromRange(range) {
      if (!range) return;
      const txt = (range.toString() || "").trim();
      if (txt) selectedVerse = txt;
      try {
        const rect = range.getBoundingClientRect();
        positionExplanationButton(rect);
      } catch(e){ resetExplanationButton(); }
    }
    function resetExplanationButton(){
      const container = document.getElementById('explanation-button-container');
      if (!container) return;
      container.style.position = 'fixed';
      container.style.left = '30%';
      container.style.top = '100px';
      container.style.transform = 'translateX(-50%)';
      container.style.display = 'block';
      explanationButtonWrapper.classList.remove('active');
    }
    function clearSelectionState(){ selectedVerse = ""; selectionRange = null; resetExplanationButton(); }

    // 책 버튼 위치
    function positionExplanationButton(rect){
      const container = document.getElementById('explanation-button-container');
      if (!container) return;

      const vw = window.innerWidth;
      const vh = window.innerHeight;
      const margin = 8;
      const pad = 10;
      const viewportCenter = vw / 2;

      const isWide = rect.width >= vw * 0.6 || (rect.left <= margin*2 && rect.right >= vw - margin*2);

      let baseX, transformX;
      if (isWide) { baseX = rect.left + rect.width / 2; transformX = 'translateX(-50%)'; }
      else if (rect.left < viewportCenter * 0.4) { baseX = rect.right; transformX = 'translateX(0)'; }
      else if (rect.right > viewportCenter * 1.6) { baseX = rect.left; transformX = 'translateX(-100%)'; }
      else { baseX = rect.left + rect.width / 2; transformX = 'translateX(-50%)'; }

      const cw = container.offsetWidth || 60;
      const ch = container.offsetHeight || 60;

      const leftEdge =
        transformX === 'translateX(0)'     ? baseX :
        transformX === 'translateX(-50%)'  ? baseX - cw/2 :
                                             baseX - cw;

      let clampedLeftEdge = Math.min(Math.max(leftEdge, margin), vw - margin - cw);

      let finalLeft;
      if (transformX === 'translateX(0)')        finalLeft = clampedLeftEdge;
      else if (transformX === 'translateX(-50%)') finalLeft = clampedLeftEdge + cw/2;
      else                                        finalLeft = clampedLeftEdge + cw;

      let finalTop = rect.bottom + pad;
      if (finalTop + ch + margin > vh) finalTop = Math.max(rect.top - pad - ch, margin);
      finalTop = Math.min(Math.max(finalTop, margin), vh - margin - ch);

      container.style.position = 'fixed';
      container.style.left = `${finalLeft}px`;
      container.style.top  = `${finalTop}px`;
      container.style.transform = transformX;
      container.style.display = 'block';
    }

    // 검색
    function findString(searchText){
      clearHighlight();
      if (searchText == null || searchText.trim() === '') { searchCountEl.textContent = ''; nextLocationBtn.style.display = 'none'; return; }
      const escaped = escapeRegExp(searchText.trim());
      const regex = new RegExp(escaped, 'gi');
      const newContent = originalText.replace(regex, (match) => `<span class="search-highlight">${match}</span>`);
      bibleTextEl.innerHTML = newContent;
      foundSentences = Array.from(bibleTextEl.getElementsByClassName('search-highlight'));
      searchCountEl.textContent = `총 ${foundSentences.length}개 검색됨`;
      if (foundSentences.length > 0) {
        currentSearchIndex = 0;
        foundSentences[currentSearchIndex].scrollIntoView({ behavior:'smooth', block:'center' });
        nextLocationBtn.style.display = 'inline-block';
        updateScrollMarkers();
      } else {
        showModal("검색 결과 없음", `"${searchText}"에 대한 검색 결과가 없습니다.`);
        nextLocationBtn.style.display = 'none';
      }
    }
    function nextLocation(){
      if (!foundSentences.length) return;
      currentSearchIndex = (currentSearchIndex + 1) % foundSentences.length;
      foundSentences[currentSearchIndex].scrollIntoView({ behavior:'smooth', block:'center' });
      updateScrollMarkers();
    }
    function clearHighlight(){
      bibleTextEl.innerHTML = originalText;
      searchCountEl.textContent = '';
      nextLocationBtn.style.display = 'none';
      while (scrollMarkerContainer.firstChild) scrollMarkerContainer.removeChild(scrollMarkerContainer.firstChild);
      foundSentences = [];
      currentSearchIndex = -1;
    }
    function updateScrollMarkers(){
      while (scrollMarkerContainer.firstChild) scrollMarkerContainer.removeChild(scrollMarkerContainer.firstChild);
      const docH = document.documentElement.scrollHeight;
      const vh = window.innerHeight;
      foundSentences.forEach((el) => {
        const marker = document.createElement('div');
        marker.className = 'scroll-marker';
        const topPos = el.getBoundingClientRect().top + window.scrollY;
        const markerPos = Math.min(Math.max((topPos / docH) * vh, 2), vh - 10);
        marker.style.top = markerPos + 'px';
        marker.addEventListener('click', () => { el.scrollIntoView({ behavior:'smooth', block:'center' }); });
        scrollMarkerContainer.appendChild(marker);
      });
    }

    // 모달
    function showModal(title, text, imageUrl=null){
      modalTitle.textContent = title || '';
      modalText.innerHTML = (text || '').toString().replace(/\n/g, '<br>');
      if (imageUrl) { modalImage.src = imageUrl; modalImage.style.display = 'block'; } else { modalImage.src=''; modalImage.style.display='none'; }
      modal.style.display = 'block';
      document.body.classList.add('modal-open');
      setTimeout(() => {
        if (selectionRange) {
          const sel = window.getSelection();
          sel.removeAllRanges();
          try { sel.addRange(selectionRange); } catch(e) {}
        }
      }, 60);
    }
    function showLoadingModal(isImage=false){
      modalTitle.innerHTML = `<span class="loader"></span> ${isImage ? '그림 생성 중...' : '설명 생성 중...'}`;
      modalText.textContent = '설명을 생성 중입니다. 잠시만 기다려 주세요...';
      modalImage.style.display = 'none';
      modal.style.display = 'block';
    }

    modal.addEventListener('wheel', (e) => {
      if (modal.style.display === 'block') e.stopPropagation();
    }, { passive: true });

    function getFullBibleText(){
      const tmp = document.createElement('div');
      tmp.innerHTML = originalText;
      return tmp.textContent.replace(/\s+/g,' ').trim();
    }

    // Generative API 호출
    async function callGenerativeAPI(modalTitleText, prompt){
      const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-05-20:generateContent?key=${apiKey}`;
      const payload = { contents: [ { parts: [ { text: prompt } ] } ] };

      let retryCount = 0; const maxRetries = 3;
      let response = null;
      while (retryCount < maxRetries) {
        try {
          response = await fetch(apiUrl, {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify(payload)
          });
          if (response.ok) break;
          if (response.status === 429) {
            retryCount++;
            const delay = Math.pow(2, retryCount)*1000 + Math.random()*1000;
            await new Promise(r=>setTimeout(r, delay));
          } else throw new Error(`API Error: ${response.status} ${response.statusText}`);
        } catch (err) {
          console.error('API call failed:', err);
          showModal("오류 발생", "API 호출 중 오류가 발생했습니다. 다시 시도해 주세요.");
          return;
        }
      }
      if (!response || !response.ok) { showModal("오류", "설명을 불러오는 데 실패했습니다. 잠시 후 다시 시도해 주세요."); return; }

      try {
        const data = await response.json();
        const content = data?.candidates?.[0]?.content?.parts?.[0]?.text || "응답을 가져오지 못했습니다.";
        showModal(modalTitleText, content);
      } catch (err) {
        console.error('Error processing response:', err);
        showModal("오류", "응답을 처리하는 중 오류가 발생했습니다.");
      }
    }

    async function fetchExplanation(promptText, type){
      let prompt;
      if (type === 'simple') {
        prompt = `[역할] 성경 주석가.
[작업] 선택한 용어/구절을 350–500자 한국어로 간결 설명.
[유형 규칙]
- 지명: 위치·시대·관련 사건
- 인물: 이름의 뜻·역할·연관 지명
- 제사/성물: 용도·상징적 의미
- 동·식물·광물: 상징성
필요 시 대비/유사 2–12가지만 간단히. (이름↔지명 직접 연결이 있으면 함께 언급)
[금지] 장황함·추측·인용.
[입력] "${promptText}"`;
      } else {
        prompt = `[역할] 성경 주석가.
[작업] 선택 구절을 2,500–3,500자 한국어 해설로 심화 분석.
[구성] 개요 → 배경(역사·지리·문화) → 본문 주제·핵심 논지 → 핵심 단어/도상 해석
→ 인물·사건·장소의 기능 → 성경 전체 맥락과의 연결(언약/교리, 유사·대조 2–12가지)
→ (선택) 3–6행 표로 요점 정리.
[규칙] 본문 근거 중심, 난해한 부분은 간명히, 과도한 인용/주석어/반복 금지, 분량 준수.
[긴 입력 시] 절/단락 단위로 요약 후 통합(최종 분량 준수).
[입력] "${promptText}"`;
      }
      showLoadingModal(false);
      await callGenerativeAPI('구절 설명', prompt);
    }

    async function fetchSummary(fullText, type){
      let prompt;
      if (type === 'simple') {
        prompt = `[역할] 성경 주석가.
[작업] 입력된 성경 본문 전체를 450–650자 한국어 한 단락으로 간결 요약.
[중점] 핵심 주제·메시지, 주요 사건 흐름, 하나님 행위/인간 반응. 배경은 한두 문장만. 삶 적용 2–3문장 추가.
[금지] 장황함·추측·인용·소제목·서론/결론 문구. 분량 엄수.
[긴 입력 시] 장 단위로 요약→최종 450–650자로 통합.
[입력] "${fullText}"`;
      } else {
        prompt = `[역할] 성경 주석가.
[작업] 입력 본문을 3,500–5,000자 한국어 해설로 정리.
[구성] 1) 개요  2) 배경(역사·지리·문화)  3) 핵심 주제/신학적 의미
4) 인물·사건·장소의 역할  5) 성경 전체 맥락과 연결(필요 시 유사/대조 2–12가지)
6) (선택) 3–12행 표로 핵심 정리.  7) 결론  8) 삶 적용 4–5문장.
[규칙] 사실 기반, 과장/추측/설교체 금지, 불필요한 반복 금지, 분량 준수.
[긴 입력 시] 장 단위로 개요→통합(최종 분량 준수).
[입력] "${fullText}"`;
      }
      showLoadingModal(false);
      await callGenerativeAPI('본문 요약', prompt);
    }

    function updateSpeed(){ audio.playbackRate = currentSpeed; speedDisplay.textContent = currentSpeed.toFixed(1) + 'x'; }
    function updateFontSizeDisplay(){ const cur = parseFloat(getComputedStyle(bibleTextEl).fontSize); fontSizeEl.textContent = Math.round(cur); }

    // 토글 버튼 로직
    const progressContainer = document.querySelector('.progress-container');
    const speedControls = document.querySelector('.speed-controls');
    const volumeControl = document.querySelector('.volume-control');
    const showProgressBtn = document.getElementById('show-progress');
    const showSpeedBtn = document.getElementById('show-speed');
    const showVolumeBtn = document.getElementById('show-volume');
    let hideTimeout;
    function showOnly(target) {
      progressContainer.style.display = "none";
      speedControls.style.display = "none";
      volumeControl.style.display = "none";
      target.style.display = "flex";
      if (hideTimeout) clearTimeout(hideTimeout);
      hideTimeout = setTimeout(() => { target.style.display = "none"; }, 10000);
    }
    showProgressBtn.addEventListener('click', () => showOnly(progressContainer));
    showSpeedBtn.addEventListener('click', () => showOnly(speedControls));
    showVolumeBtn.addEventListener('click', () => showOnly(volumeControl));

    // ===== 기도문 팝업 제어 =====
  function initPrayerToast(){
  const toast = document.getElementById('prayerToast');
  const closeBtn = document.getElementById('prayerCloseBtn');
  const amenBtn = document.getElementById('prayerAmen');
  const readBtn = document.getElementById('prayerReadAlone');

  const isSiteModalOpen = () => document.body.classList.contains('modal-open');

  function openToast(){
    if (!toast) return;
    if (isSiteModalOpen()) return;            // 사이트 모달이 열려 있으면 숨김
    toast.style.display = 'block';
    document.getElementById('prayerBody')?.focus({ preventScroll:true });
  }
  function closeToast(){
    if (!toast) return;
    toast.style.display = 'none';             // 저장/기억 없음 → 다음 방문 시 다시 표시
  }

  // 페이지 로드 시 항상 표시 (약간 지연)
  setTimeout(openToast, 700);

  // 버튼 동작: 전부 단순 닫기
  closeBtn?.addEventListener('click', () => closeToast());
  amenBtn?.addEventListener('click', () => closeToast());
  readBtn?.addEventListener('click', () => closeToast());

  // 사이트 모달 열림/닫힘에 따라 토스트 표시/숨김
  const observer = new MutationObserver(() => {
    if (isSiteModalOpen()) {
      toast.style.display = 'none';
    } else {
      // 모달이 닫히면 다시 보여줌(사용자가 이미 닫았더라도 새로고침/재방문 시 다시 뜨게 하려면 유지)
      if (toast.style.display !== 'block') toast.style.display = 'block';
    }
  });
  observer.observe(document.body, { attributes:true, attributeFilter:['class'] });
}
  </script>
</body>
</html>

