<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
  <title>통큰통독-40일차</title>
  <link rel="apple-touch-icon" type="image/png" href="https://i.postimg.cc/Qtnq0gFJ/Ezra-icon.png">
  <meta name="apple-mobile-web-app-title" content="통큰통독">
  <link rel="shortcut icon" type="image/png" href="https://i.postimg.cc/Qtnq0gFJ/Ezra-icon.png">
  <link rel="mask-icon" type="image/png" href="https://i.postimg.cc/Qtnq0gFJ/Ezra-icon.png">

  <style>
    :root{
      --blue:#007BFF;
      --pink:#ff99cc;
      --shadow: 0 2px 5px rgba(0,0,0,0.2);
    }
    * { box-sizing: border-box; -webkit-tap-highlight-color: transparent; }
    html,body { height:100%; margin:0; padding:0; font-family: Arial, sans-serif; -webkit-font-smoothing:antialiased; }
    body { padding-top:150px; background:#fdfdf8; color:#222; }

    a:link { color:#0000FF; } a:visited{ color:#660099; }

    /* 상단 고정 테이블 */
    .top-fixed-table {
      position: fixed; top:0; left:0; width:100%; background:transparent; border-bottom:none; z-index:100;
      table-layout: fixed; padding:10px 0; box-sizing:border-box;
    }
    .search-cell { text-align:left; padding-left:10px; vertical-align:top; width:30%; }
    .search-cell input[type="text"]{ width:50%; font-size:12pt; }
    .search-cell input[type="submit"], .search-cell input[type="reset"]{ font-size:10pt; padding:5px 8px; height:auto; }

    .audio-cell { text-align:right; padding-right:50px; vertical-align:top; width:30%; }
    #custom-audio-player { display:flex; flex-direction:column; align-items:center; }
    .player-controls{ display:flex; align-items:center; justify-content:center; gap:10px; margin-bottom:5px; }
    .time-display{ font-size:16px; font-weight:bold; color:black; margin:0 5px; min-width:44px; text-align:center; }

    .progress-container { display: flex; align-items: center; justify-content: center; gap: 6px; margin: 6px 0; }
    .skip-btn { width: 48px; height: 28px; font-size: 13px; cursor: pointer; border: 1px solid #ccc; border-radius: 5px; background: #fff; }
    .skip-btn:hover { background: #e0e0e0; }

    .control-btn{ width:28px; height:28px; font-size:14px; cursor:pointer; border:1px solid #ccc; background:#fff; border-radius:5px; }
    .control-btn:hover{ background:#e0e0e0; }
    #play-btn{ background:#d1f3d4; } #pause-btn{ background:#fff6d6; } #stop-btn{ background:#fddddd; }

    .speed-controls{ display:flex; align-items:center; justify-content:center; gap:5px; margin-bottom:5px; }
    .speed-btn{ width:21px; height:21px; font-size:10px; cursor:pointer; border:1px solid #ccc; border-radius:3px; background:#fff; }
    .speed-btn:hover{ background:#e0e0e0; }
    .speed-display{ font-weight:bold; color:var(--blue); width:50px; text-align:center; }

    .volume-control{ display:flex; align-items:center; justify-content:center; gap:5px; }
    input[type="range"]{ -webkit-appearance:none; width:160px; height:5px; background:#d3d3d3; outline:none; opacity:0.9; transition:opacity .2s; border-radius:3px;}
    input[type="range"]::-webkit-slider-thumb{ -webkit-appearance:none; appearance:none; width:15px; height:15px; background:var(--blue); border-radius:50%; cursor:pointer; }

    /* progress */
    #progress-bar { width: 60%; max-width: 100px; }

    /* volume */
    #volume-slider { width: 80%; max-width: 120px; }

    /* 설명 버튼 컨테이너 (플로팅) */
    .explanation-button-container{ position:fixed; top:100px; left:30%;  transform:translateX(-50%);  padding:0 10px; transition:top .2s ease,left .2s ease,transform .2s ease; }
    .explanation-button-wrapper{ position:relative; display:inline-block; cursor:pointer; }
    .explanation-icon-button{ width:50px; height:50px; border-radius:50%; background:var(--pink); box-shadow:var(--shadow); border:none; display:flex; align-items:center; justify-content:center; font-size:40px; z-index:2; }
    .explanation-sub-buttons{ display:flex; flex-direction:column; gap:10px; opacity:0; visibility:hidden; transition:opacity .3s ease,visibility .3s ease, transform .3s ease; position:absolute; left:45%; transform:translateX(-50%) translateY(25px); z-index:1; }
    .explanation-button-wrapper.active .explanation-sub-buttons{ opacity:1; visibility:visible; transform:translateX(-50%) translateY(0); }
    .explanation-sub-button{ padding:5px 10px; font-size:18px; background:var(--pink); border:none; border-radius:5px; cursor:pointer; box-shadow:var(--shadow); white-space:nowrap; }
    .explanation-sub-button:hover{ transform:scale(1.03); }

    /* 폰트 사이즈 및 본문 요약 버튼 (항상 표시) */
    .container{ width:100%; text-align:center; margin-top:8px; }
    .font-size-label{ font-size:20px !important; margin-right:12px; font-weight:bold; color:blue; display:inline-block; vertical-align:middle; }
    #font-size{ font-size:20px !important; margin:0 8px; font-weight:bold; color:red; display:inline-block; vertical-align:middle; width:48px; }
    #down,#up{ width:27px; height:27px; font-size:20px; color:red; background:#fff; border:1px solid #ccc; border-radius:5px; cursor:pointer; display:inline-block; vertical-align:middle; }

    .summary-buttons { display:inline-block; margin-left:16px; vertical-align:middle; }
    .summary-btn { padding:6px 10px; margin-left:6px; font-size:14px; border-radius:6px; border:1px solid #ccc; background:#fff; cursor:pointer; }
    .summary-btn:hover{ background:#f2f2f2; }

    /* 본문 */
    h2{ padding:0; text-align:left; margin-left:15px; margin-right:15px; }
    p{ display:inline-block; }

    /* 본문 중앙 두 줄 강조 */
    .highlight {
      background-color:#fdf6e3;
      -webkit-text-stroke:0.2px #76d6c6;
      border-left:4px solid #c0a060;
      font-weight:bold;
      box-shadow:0 0 8px rgba(0,0,0,0.1);
      padding:2px 6px;
    }

    /* 📖 구절설명 버튼: 기본 표시 */
    #explanation-button-container{
      position:fixed; z-index:150; display:block;
    }
    body.modal-open #explanation-button-container{ display:none !important; }

    /* 모달 */
    .modal{
      display:none; position:fixed; z-index:200; inset:0; width:100%; height:100%;
      background:rgba(0,0,0,0.4);
    }
    .modal-content{
      background:#fff; margin:12% auto; padding:20px; border-radius:10px; width:80%; max-width:900px;
      max-height:80vh; overflow:auto; overscroll-behavior:contain;
      box-shadow:0 4px 8px rgba(0,0,0,0.2); text-align:left; line-height:1.6; word-break:keep-all; white-space:pre-wrap;
    }
    body.modal-open{ overflow:hidden; }

    /* 로딩 스피너 */
    .loader{ border:4px solid #f3f3f3; border-top:4px solid #3498db; border-radius:50%; width:20px; height:20px; animation:spin 1s linear infinite; display:inline-block; vertical-align:middle; margin-right:8px; }
    @keyframes spin{ 0%{transform:rotate(0deg);} 100%{transform:rotate(360deg);} }

    /* 검색 하이라이트 & 스크롤 마커 */
    .search-highlight{ background:yellow; color:#000; }
    .scroll-marker-container{ position:fixed; top:0; right:0; width:8px; height:100vh; z-index:99; pointer-events:none; }
    .scroll-marker{ position:absolute; right:0; width:8px; height:8px; background:red; border-radius:50%; box-shadow:0 0 5px rgba(255,0,0,0.7); cursor:pointer; pointer-events:auto; }
    .scroll-marker:hover{ transform:scale(1.5); transition:transform .2s ease; }

    /* 선택 관련 (iOS) */
    #bible-text{ -webkit-user-select:text; user-select:text; -webkit-touch-callout:none; }

    /* 반응형 */
    @media (max-width:800px){
      .search-cell{ width:55%; } .audio-cell{ width:45%; } .search-cell input[type="text"]{ width:60%; } #progress-bar{ width:160px; }
    }
    @media (max-width:600px){
      .search-cell input[type="text"]{ width:68%; font-size:11pt; } .time-display{ font-size:13px; } #progress-bar{ width:140px; }
      .explanation-sub-button{ font-size:16px; padding:6px 8px; }
      .explanation-icon-button{ width:46px; height:46px; font-size:34px; }
      .summary-btn{ padding:5px 8px; font-size:13px; }
    }

    .toggle-buttons {
      display:flex; justify-content:center; gap:8px; margin-bottom:6px;
    }
    .toggle-buttons button {
      padding:4px 8px; font-size:13px; border:1px solid #ccc; border-radius:5px; background:#fff; cursor:pointer;
    }
    .toggle-buttons button:hover { background:#f0f0f0; }

    /* ============ 기도문 팝업 ============ */
    .prayer-toast {
      position: fixed; right: 18px; bottom: 18px; z-index: 190;
      width: 360px; max-width: calc(100vw - 24px);
      background: #ffffff; border: 1px solid #e9e6d8;
      border-radius: 14px; box-shadow: 0 10px 26px rgba(0,0,0,.18);
      overflow: hidden; transform: translateY(20px); opacity: 0;
      animation: prayerSlideUp .35s ease-out forwards; display:none;
      font-family: inherit;
    }
    @keyframes prayerSlideUp { to { transform: translateY(0); opacity: 1; } }

    .prayer-header {
      display:flex; align-items:center; justify-content:space-between;
      padding:10px 12px; background:#fff6dd; border-bottom:1px solid #f3e9c3;
    }
    .prayer-title { display:flex; align-items:center; gap:8px; font-weight:700; color:#8a6d1e; }
    .prayer-badge { background:#ffe9a8; color:#6b560f; font-size:12px; padding:2px 8px; border-radius:999px; }

    .prayer-close {
      border:0; background:transparent; font-size:20px; line-height:1; color:#7c7c7c;
      cursor:pointer; padding:2px 6px; border-radius:8px;
    }
    .prayer-close:hover { background: rgba(0,0,0,.05); }

    .prayer-body {
      padding:12px 14px 4px; color:#333; line-height:1.6; max-height:220px; overflow:auto;
    }
    .prayer-body h4 { margin:0 0 6px 0; font-size:15px; color:#444; }
    .prayer-body p { margin:0; white-space: pre-wrap; }

    .prayer-footer {
      display:flex; align-items:center; justify-content: space-between; gap:8px; padding:8px 12px 12px;
    }
    .prayer-actions { display:flex; gap:8px; }
    .prayer-btn {
      border:1px solid #e0dccc; background:#fff; color:#5a4d1b; padding:6px 10px; border-radius:10px; cursor:pointer; font-size:13px;
    }
    .prayer-btn:hover { background:#faf7ea; }
    .prayer-btn-primary { background:#f9d86b; border-color:#e5c458; color:#3e320e; font-weight:700; }
    .prayer-btn-primary:hover { filter: brightness(.98); }
    .prayer-checkbox { display:flex; align-items:center; gap:6px; color:#555; font-size:13px; }

    @media (max-width: 480px) {
      .prayer-toast { left:12px; right:12px; bottom:12px; width:auto; }
      .prayer-body { max-height:40vh; }
    }
  </style>
</head>
<body>
  <!-- 상단: 검색 + 오디오 -->
  <table class="top-fixed-table" id="main-table" cellpadding="0" cellspacing="0">
    <tr>
      <td class="search-cell">
        <form name="f1" action="">
          <input type="reset" name="b2" value="X">
          <input type="text" placeholder="검색어를 입력하세요" name="t1" value="">
          <input type="submit" name="b1" value="검색">
          <div id="search-count-container">
            <span id="search-count"></span>
            <button type="button" id="next-location-btn" style="display:none;">다음 위치</button>
          </div>
        </form>
      </td>

      <td class="audio-cell">
        <div id="custom-audio-player" role="region" aria-label="오디오 플레이어">
          <audio id="audio-file" preload="auto" playsinline>
            <source src="https://vod47.anyline.co.kr/vod_ezra/%EC%9D%BD%EA%B8%B0%2040.mp3" type="audio/mpeg">
            브라우저가 오디오 요소를 지원하지 않습니다.
          </audio>

          <div class="player-controls">
            <strong><span style="font-size:16px; background-color:#fcfcfc;" id="current-time" class="time-display">0:00</span></strong>
            <button id="play-btn" class="control-btn" aria-label="재생">▶</button>
            <button id="pause-btn" class="control-btn" aria-label="일시정지">⏸</button>
            <button id="stop-btn" class="control-btn" aria-label="정지">■</button>
            <strong><span style="font-size:16px; background-color:#fcfcfc;" id="remaining-time" class="time-display">0:00</span></strong>
          </div>

          <div class="toggle-buttons">
            <button id="show-progress">재생 위치</button>
            <button id="show-speed">재생 속도</button>
            <button id="show-volume">볼륨 조절</button>
          </div>

          <div class="progress-container" style="display:none;">
            <button id="rewind-10" class="skip-btn">⏪10s</button>
            <input type="range" id="progress-bar" min="0" max="100" value="0" step="0.01" aria-label="재생 위치">
            <button id="forward-10" class="skip-btn">10s⏩</button>
          </div>

          <div class="speed-controls" style="display:none;">
            <button id="speed-down-02" class="speed-btn">&laquo;</button>
            <button id="speed-down-01" class="speed-btn">&lt;</button>
            <span id="speed-display" class="speed-display">1.0x</span>
            <button id="speed-up-01" class="speed-btn">&gt;</button>
            <button id="speed-up-02" class="speed-btn">&raquo;</button>
            <button id="speed-reset">1.0</button>
          </div>

          <div class="volume-control" style="display:none;">
            <span style="font-size:14px;">볼륨</span>
            <button id="mute-btn">🔊</button>
            <input type="range" id="volume-slider" min="0" max="1" step="0.01" value="1">
          </div>
        </div>
      </td>
    </tr>
  </table>

  <!-- 플로팅 책 버튼 (구절설명 토글) -->
  <div class="explanation-button-container" id="explanation-button-container">
    <div class="explanation-button-wrapper" id="explanation-button-wrapper">
      <button class="explanation-icon-button" id="explanation-icon-button" aria-label="구절설명 열기" title="단어나 문장을 선택하면 ‘간단설명’ 또는 ‘상세설명’을 볼 수 있어요.">
        <span>📖</span>
      </button>
      <div class="explanation-sub-buttons" id="explanation-sub-buttons" role="menu">
        <button class="explanation-sub-button" id="detailed-explanation-button">상세 구절설명</button>
        <button class="explanation-sub-button" id="simple-explanation-button">간단 구절설명</button>
      </div>
    </div>
  </div>

  <!-- 폰트 크기 + 본문 요약 버튼 -->
  <div class="container" style="margin-top:6px;">
    <p class="font-size-label">Font Size</p>
    <button id="down">-</button>
    <p id="font-size">20</p>
    <button id="up">+</button>

    <span class="summary-buttons" aria-hidden="false">
      <button class="summary-btn" id="summary-simple-main">본문요약 간단</button>
      <button class="summary-btn" id="summary-detailed-main">본문요약 상세</button>
    </span>
  </div>

  <!-- 본문 -->
  <div>
    <h2 id="bible-text" style="line-height:1.2em;margin-left:15px;margin-right:15px;font-style:normal;font-weight:normal;color:black;font-size:20px;word-break:break-all;">
    <strong>
통독 40일차
<br>범위: 사6장/ 사1장-5장/ 사7장-10장4절/ 사17장/ 사14장24절-32절</br></strong>
<br>&nbsp;</br>


<strong><br><font color="#4682b4">이사야 6장</font></br></strong>
<br><i><font color="#808080">*이사야를 선지자로 부르시다*</font></i></br>
<br>1 웃시야 왕이 죽던 해에 내가 본즉 주께서 높이 들린 보좌에 앉으셨는데 그의 옷자락은 성전에 가득하였고</br>
<br>2 스랍들이 모시고 섰는데 각기 여섯 날개가 있어 그 둘로는 자기의 얼굴을 가리었고 그 둘로는 자기의 발을 가리었고 그 둘로는 날며</br>
<br>3 서로 불러 이르되 거룩하다 거룩하다 거룩하다 만군의 여호와여 그의 영광이 온 땅에 충만하도다 하더라</br>
<br>4 이같이 화답하는 자의 소리로 말미암아 문지방의 터가 요동하며 성전에 연기가 충만한지라</br>
<br>5 그 때에 내가 말하되 화로다 나여 망하게 되었도다 나는 입술이 부정한 사람이요 나는 입술이 부정한 백성 중에 거주하면서 만군의 여호와이신 왕을 뵈었음이로다 하였더라</br>
<br>6 그 때에 그 스랍 중의 하나가 부젓가락으로 제단에서 집은 바 핀 숯을 손에 가지고 내게로 날아와서</br>
<br>7 그것을 내 입술에 대며 이르되 보라 이것이 네 입에 닿았으니 네 악이 제하여졌고 네 죄가 사하여졌느니라 하더라</br>
<br>8 내가 또 주의 목소리를 들으니 주께서 이르시되 내가 누구를 보내며 누가 우리를 위하여 갈꼬 하시니 그 때에 내가 이르되 내가 여기 있나이다 나를 보내소서 하였더니</br>
<br>9 여호와께서 이르시되 가서 이 백성에게 이르기를 너희가 듣기는 들어도 깨닫지 못할 것이요 보기는 보아도 알지 못하리라 하여</br>
<br>10 이 백성의 마음을 둔하게 하며 그들의 귀가 막히고 그들의 눈이 감기게 하라 염려하건대 그들이 눈으로 보고 귀로 듣고 마음으로 깨닫고 다시 돌아와 고침을 받을까 하노라 하시기로</br>
<br>11 내가 이르되 주여 어느 때까지니이까 하였더니 주께서 대답하시되 성읍들은 황폐하여 주민이 없으며 가옥들에는 사람이 없고 이 토지는 황폐하게 되며</br>
<br>12 여호와께서 사람들을 멀리 옮기셔서 이 땅 가운데에 황폐한 곳이 많을 때까지니라</br>
<br>13 그 중에 십분의 일이 아직 남아 있을지라도 이것도 황폐하게 될 것이나 밤나무와 상수리나무가 베임을 당하여도 그 그루터기는 남아 있는 것 같이 거룩한 씨가 이 땅의 그루터기니라 하시더라</br>
<br>&nbsp;</br>
<strong><br><font color="#4682b4">이사야 1장-5장</font></br></strong>
<strong><br><font color="#4682b4">이사야 1 장</font></br></strong>
<br>1 유다 왕 웃시야와 요담과 아하스와 히스기야 시대에 아모스의 아들 이사야가 유다와 예루살렘에 관하여 본 계시라</br>
<br><i><font color="#808080">*여호와의 말씀*</font></i></br>
<br>2 하늘이여 들으라 땅이여 귀를 기울이라 여호와께서 말씀하시기를 내가 자식을 양육하였거늘 그들이 나를 거역하였도다</br>
<br>3 소는 그 임자를 알고 나귀는 그 주인의 구유를 알건마는 이스라엘은 알지 못하고 나의 백성은 깨닫지 못하는도다 하셨도다</br>
<br>4 슬프다 범죄한 나라요 허물 진 백성이요 행악의 종자요 행위가 부패한 자식이로다 그들이 여호와를 버리며 이스라엘의 거룩하신 이를 만홀히 여겨 멀리하고 물러갔도다</br>
<br>5 너희가 어찌하여 매를 더 맞으려고 패역을 거듭하느냐 온 머리는 병들었고 온 마음은 피곤하였으며</br>
<br>6 발바닥에서 머리까지 성한 곳이 없이 상한 것과 터진 것과 새로 맞은 흔적뿐이거늘 그것을 짜며 싸매며 기름으로 부드럽게 함을 받지 못하였도다</br>
<br>7 너희의 땅은 황폐하였고 너희의 성읍들은 불에 탔고 너희의 토지는 너희 목전에서 이방인에게 삼켜졌으며 이방인에게 파괴됨 같이 황폐하였고</br>
<br>8 딸 시온은 포도원의 망대 같이, 참외밭의 원두막 같이, 에워 싸인 성읍 같이 겨우 남았도다</br>
<br>9 만군의 여호와께서 우리를 위하여 생존자를 조금 남겨 두지 아니하셨더면 우리가 소돔 같고 고모라 같았으리로다</br>
<br>10 너희 소돔의 관원들아 여호와의 말씀을 들을지어다 너희 고모라의 백성아 우리 하나님의 법에 귀를 기울일지어다</br>
<br>11 여호와께서 말씀하시되 너희의 무수한 제물이 내게 무엇이 유익하뇨 나는 숫양의 번제와 살진 짐승의 기름에 배불렀고 나는 수송아지나 어린 양이나 숫염소의 피를 기뻐하지 아니하노라</br>
<br>12 너희가 내 앞에 보이러 오니 이것을 누가 너희에게 요구하였느냐 내 마당만 밟을 뿐이니라</br>
<br>13 헛된 제물을 다시 가져오지 말라 분향은 내가 가증히 여기는 바요 월삭과 안식일과 대회로 모이는 것도 그러하니 성회와 아울러 악을 행하는 것을 내가 견디지 못하겠노라</br>
<br>14 내 마음이 너희의 월삭과 정한 절기를 싫어하나니 그것이 내게 무거운 짐이라 내가 지기에 곤비하였느니라</br>
<br>15 너희가 손을 펼 때에 내가 내 눈을 너희에게서 가리고 너희가 많이 기도할지라도 내가 듣지 아니하리니 이는 너희의 손에 피가 가득함이라</br>
<br>16 너희는 스스로 씻으며 스스로 깨끗하게 하여 내 목전에서 너희 악한 행실을 버리며 행악을 그치고</br>
<br>17 선행을 배우며 정의를 구하며 학대 받는 자를 도와 주며 고아를 위하여 신원하며 과부를 위하여 변호하라 하셨느니라</br>
<br>18 여호와께서 말씀하시되 오라 우리가 서로 변론하자 너희의 죄가 주홍 같을지라도 눈과 같이 희어질 것이요 진홍 같이 붉을지라도 양털 같이 희게 되리라</br>
<br>19 너희가 즐겨 순종하면 땅의 아름다운 소산을 먹을 것이요</br>
<br>20 너희가 거절하여 배반하면 칼에 삼켜지리라 여호와의 입의 말씀이니라</br>
<br><i><font color="#808080">*죄로 가득 찬 성읍*</font></i></br>
<br>21 신실하던 성읍이 어찌하여 창기가 되었는고 정의가 거기에 충만하였고 공의가 그 가운데에 거하였더니 이제는 살인자들뿐이로다</br>
<br>22 네 은은 찌꺼기가 되었고 네 포도주에는 물이 섞였도다</br>
<br>23 네 고관들은 패역하여 도둑과 짝하며 다 뇌물을 사랑하며 예물을 구하며 고아를 위하여 신원하지 아니하며 과부의 송사를 수리하지 아니하는도다</br>
<br>24 그러므로 주 만군의 여호와 이스라엘의 전능자가 말씀하시되 슬프다 내가 장차 내 대적에게 보응하여 내 마음을 편하게 하겠고 내 원수에게 보복하리라</br>
<br>25 내가 또 내 손을 네게 돌려 네 찌꺼기를 잿물로 씻듯이 녹여 청결하게 하며 네 혼잡물을 다 제하여 버리고</br>
<br>26 내가 네 재판관들을 처음과 같이, 네 모사들을 본래와 같이 회복할 것이라 그리한 후에야 네가 의의 성읍이라, 신실한 고을이라 불리리라 하셨나니</br>
<br>27 시온은 정의로 구속함을 받고 그 돌아온 자들은 공의로 구속함을 받으리라</br>
<br>28 그러나 패역한 자와 죄인은 함께 패망하고 여호와를 버린 자도 멸망할 것이라</br>
<br>29 너희가 기뻐하던 상수리나무로 말미암아 너희가 부끄러움을 당할 것이요 너희가 택한 동산으로 말미암아 수치를 당할 것이며</br>
<br>30 너희는 잎사귀 마른 상수리나무 같을 것이요 물 없는 동산 같으리니</br>
<br>31 강한 자는 삼오라기 같고 그의 행위는 불티 같아서 함께 탈 것이나 끌 사람이 없으리라</br>
<br>&nbsp;</br>
<strong><br><font color="#4682b4">이사야 2 장</font></br></strong>
<br><i><font color="#808080">*칼을 쳐서 보습을 만들고*</font></i></br>
<br>1 아모스의 아들 이사야가 받은 바 유다와 예루살렘에 관한 말씀이라</br>
<br>2 말일에 여호와의 전의 산이 모든 산 꼭대기에 굳게 설 것이요 모든 작은 산 위에 뛰어나리니 만방이 그리로 모여들 것이라</br>
<br>3 많은 백성이 가며 이르기를 오라 우리가 여호와의 산에 오르며 야곱의 하나님의 전에 이르자 그가 그의 길을 우리에게 가르치실 것이라 우리가 그 길로 행하리라 하리니 이는 율법이 시온에서부터 나올 것이요 여호와의 말씀이 예루살렘에서부터 나올 것임이니라</br>
<br>4 그가 열방 사이에 판단하시며 많은 백성을 판결하시리니 무리가 그들의 칼을 쳐서 보습을 만들고 그들의 창을 쳐서 낫을 만들 것이며 이 나라와 저 나라가 다시는 칼을 들고 서로 치지 아니하며 다시는 전쟁을 연습하지 아니하리라</br>
<br><i><font color="#808080">*여호와의 날*</font></i></br>
<br>5 야곱 족속아 오라 우리가 여호와의 빛에 행하자</br>
<br>6 주께서 주의 백성 야곱 족속을 버리셨음은 그들에게 동방 풍속이 가득하며 그들이 블레셋 사람들 같이 점을 치며 이방인과 더불어 손을 잡아 언약하였음이라</br>
<br>7 그 땅에는 은금이 가득하고 보화가 무한하며 그 땅에는 마필이 가득하고 병거가 무수하며</br>
<br>8 그 땅에는 우상도 가득하므로 그들이 자기 손으로 짓고 자기 손가락으로 만든 것을 경배하여</br>
<br>9 천한 자도 절하며 귀한 자도 굴복하오니 그들을 용서하지 마옵소서</br>
<br>10 너희는 바위 틈에 들어가며 진토에 숨어 여호와의 위엄과 그 광대하심의 영광을 피하라</br>
<br>11 그 날에 눈이 높은 자가 낮아지며 교만한 자가 굴복되고 여호와께서 홀로 높임을 받으시리라</br>
<br>12 대저 만군의 여호와의 날이 모든 교만한 자와 거만한 자와 자고한 자에게 임하리니 그들이 낮아지리라</br>
<br>13 또 레바논의 높고 높은 모든 백향목과 바산의 모든 상수리나무와</br>
<br>14 모든 높은 산과 모든 솟아 오른 작은 언덕과</br>
<br>15 모든 높은 망대와 모든 견고한 성벽과</br>
<br>16 다시스의 모든 배와 모든 아름다운 조각물에 임하리니</br>
<br>17 그 날에 자고한 자는 굴복되며 교만한 자는 낮아지고 여호와께서 홀로 높임을 받으실 것이요</br>
<br>18 우상들은 온전히 없어질 것이며</br>
<br>19 사람들이 암혈과 토굴로 들어가서 여호와께서 땅을 진동시키려고 일어나실 때에 그의 위엄과 그 광대하심의 영광을 피할 것이라</br>
<br>20 사람이 자기를 위하여 경배하려고 만들었던 은 우상과 금 우상을 그 날에 두더지와 박쥐에게 던지고</br>
<br>21 암혈과 험악한 바위 틈에 들어가서 여호와께서 땅을 진동시키려고 일어나실 때에 그의 위엄과 그 광대하심의 영광을 피하리라</br>
<br>22 너희는 인생을 의지하지 말라 그의 호흡은 코에 있나니 셈할 가치가 어디 있느냐</br>
<br>&nbsp;</br>
<strong><br><font color="#4682b4">이사야 3 장</font></br></strong>
<br><i><font color="#808080">*예루살렘의 멸망*</font></i></br>
<br>1 보라 주 만군의 여호와께서 예루살렘과 유다가 의뢰하며 의지하는 것을 제하여 버리시되 곧 그가 의지하는 모든 양식과 그가 의지하는 모든 물과</br>
<br>2 용사와 전사와 재판관과 선지자와 복술자와 장로와</br>
<br>3 오십부장과 귀인과 모사와 정교한 장인과 능란한 요술자를 그리하실 것이며</br>
<br>4 그가 또 소년들을 그들의 고관으로 삼으시며 아이들이 그들을 다스리게 하시리니</br>
<br>5 백성이 서로 학대하며 각기 이웃을 잔해하며 아이가 노인에게, 비천한 자가 존귀한 자에게 교만할 것이며</br>
<br>6 혹시 사람이 자기 아버지 집에서 자기의 형제를 붙잡고 말하기를 네게는 겉옷이 있으니 너는 우리의 통치자가 되어 이 폐허를 네 손아래에 두라 할 것이면</br>
<br>7 그 날에 그가 소리를 높여 이르기를 나는 고치는 자가 되지 아니하겠노라 내 집에는 양식도 없고 의복도 없으니 너희는 나를 백성의 통치자로 삼지 말라 하리라</br>
<br>8 예루살렘이 멸망하였고 유다가 엎드러졌음은 그들의 언어와 행위가 여호와를 거역하여 그의 영광의 눈을 범하였음이라</br>
<br>9 그들의 안색이 불리하게 증거하며 그들의 죄를 말해 주고 숨기지 못함이 소돔과 같으니 그들의 영혼에 화가 있을진저 그들이 재앙을 자취하였도다</br>
<br>10 너희는 의인에게 복이 있으리라 말하라 그들은 그들의 행위의 열매를 먹을 것임이요</br>
<br>11 악인에게는 화가 있으리니 이는 그의 손으로 행한 대로 그가 보응을 받을 것임이니라</br>
<br>12 내 백성을 학대하는 자는 아이요 다스리는 자는 여자들이라 내 백성이여 네 인도자들이 너를 유혹하여 네가 다닐 길을 어지럽히느니라</br>
<br><i><font color="#808080">*여호와께서 백성을 심판하시다*</font></i></br>
<br>13 여호와께서 변론하러 일어나시며 백성들을 심판하려고 서시도다</br>
<br>14 여호와께서 자기 백성의 장로들과 고관들을 심문하러 오시리니 포도원을 삼킨 자는 너희이며 가난한 자에게서 탈취한 물건이 너희의 집에 있도다</br>
<br>15 어찌하여 너희가 내 백성을 짓밟으며 가난한 자의 얼굴에 맷돌질하느냐 주 만군의 여호와 내가 말하였느니라 하시도다</br>
<br><i><font color="#808080">*시온의 딸들에게 말씀하시다*</font></i></br>
<br>16 여호와께서 또 말씀하시되 시온의 딸들이 교만하여 늘인 목, 정을 통하는 눈으로 다니며 아기작거려 걸으며 발로는 쟁쟁한 소리를 낸다 하시도다</br>
<br>17 그러므로 주께서 시온의 딸들의 정수리에 딱지가 생기게 하시며 여호와께서 그들의 하체가 드러나게 하시리라</br>
<br>18 주께서 그 날에 그들이 장식한 발목 고리와 머리의 망사와 반달 장식과</br>
<br>19 귀 고리와 팔목 고리와 얼굴 가리개와</br>
<br>20 화관과 발목 사슬과 띠와 향합과 호신부와</br>
<br>21 반지와 코 고리와</br>
<br>22 예복과 겉옷과 목도리와 손 주머니와</br>
<br>23 손 거울과 세마포 옷과 머리 수건과 너울을 제하시리니</br>
<br>24 그 때에 썩은 냄새가 향기를 대신하고 노끈이 띠를 대신하고 대머리가 숱한 머리털을 대신하고 굵은 베 옷이 화려한 옷을 대신하고 수치스러운 흔적이 아름다움을 대신할 것이며</br>
<br>25 너희의 장정은 칼에, 너희의 용사는 전란에 망할 것이며</br>
<br>26 그 성문은 슬퍼하며 곡할 것이요 시온은 황폐하여 땅에 앉으리라</br>
<br>&nbsp;</br>
<strong><br><font color="#4682b4">이사야 4 장</font></br></strong>
<br>1 그 날에 일곱 여자가 한 남자를 붙잡고 말하기를 우리가 우리 떡을 먹으며 우리 옷을 입으리니 다만 당신의 이름으로 우리를 부르게 하여 우리가 수치를 면하게 하라 하리라</br>
<br><i><font color="#808080">*예루살렘을 청결하게 하실 때*</font></i></br>
<br>2 그 날에 여호와의 싹이 아름답고 영화로울 것이요 그 땅의 소산은 이스라엘의 피난한 자를 위하여 영화롭고 아름다울 것이며</br>
<br>3 시온에 남아 있는 자, 예루살렘에 머물러 있는 자 곧 예루살렘 안에 생존한 자 중 기록된 모든 사람은 거룩하다 칭함을 얻으리니</br>
<br>4 이는 주께서 심판하는 영과 소멸하는 영으로 시온의 딸들의 더러움을 씻기시며 예루살렘의 피를 그 중에서 청결하게 하실 때가 됨이라</br>
<br>5 여호와께서 거하시는 온 시온 산과 모든 집회 위에 낮이면 구름과 연기, 밤이면 화염의 빛을 만드시고 그 모든 영광 위에 덮개를 두시며</br>
<br>6 또 초막이 있어서 낮에는 더위를 피하는 그늘을 지으며 또 풍우를 피하여 숨는 곳이 되리라</br>
<br>&nbsp;</br>
<strong><br><font color="#4682b4">이사야 5 장</font></br></strong>
<br><i><font color="#808080">*포도원 노래*</font></i></br>
<br>1 나는 내가 사랑하는 자를 위하여 노래하되 내가 사랑하는 자의 포도원을 노래하리라 내가 사랑하는 자에게 포도원이 있음이여 심히 기름진 산에로다</br>
<br>2 땅을 파서 돌을 제하고 극상품 포도나무를 심었도다 그 중에 망대를 세웠고 또 그 안에 술틀을 팠도다 좋은 포도 맺기를 바랐더니 들포도를 맺었도다</br>
<br>3 예루살렘 주민과 유다 사람들아 구하노니 이제 나와 내 포도원 사이에서 사리를 판단하라</br>
<br>4 내가 내 포도원을 위하여 행한 것 외에 무엇을 더할 것이 있으랴 내가 좋은 포도 맺기를 기다렸거늘 들포도를 맺음은 어찌 됨인고</br>
<br>5 이제 내가 내 포도원에 어떻게 행할지를 너희에게 이르리라 내가 그 울타리를 걷어 먹힘을 당하게 하며 그 담을 헐어 짓밟히게 할 것이요</br>
<br>6 내가 그것을 황폐하게 하리니 다시는 가지를 자름이나 북을 돋우지 못하여 찔레와 가시가 날 것이며 내가 또 구름에게 명하여 그 위에 비를 내리지 못하게 하리라 하셨으니</br>
<br>7 무릇 만군의 여호와의 포도원은 이스라엘 족속이요 그가 기뻐하시는 나무는 유다 사람이라 그들에게 정의를 바라셨더니 도리어 포학이요 그들에게 공의를 바라셨더니 도리어 부르짖음이었도다</br>
<br><i><font color="#808080">*사람이 저지르는 악한 일*</font></i></br>
<br>8 가옥에 가옥을 이으며 전토에 전토를 더하여 빈 틈이 없도록 하고 이 땅 가운데에서 홀로 거주하려 하는 자들은 화 있을진저</br>
<br>9 만군의 여호와께서 내 귀에 말씀하시되 정녕히 허다한 가옥이 황폐하리니 크고 아름다울지라도 거주할 자가 없을 것이며</br>
<br>10 열흘 갈이 포도원에 겨우 포도주 한 바트가 나겠고 한 호멜의 종자를 뿌려도 간신히 한 에바가 나리라 하시도다</br>
<br>11 아침에 일찍이 일어나 독주를 마시며 밤이 깊도록 포도주에 취하는 자들은 화 있을진저</br>
<br>12 그들이 연회에는 수금과 비파와 소고와 피리와 포도주를 갖추었어도 여호와께서 행하시는 일에 관심을 두지 아니하며 그의 손으로 하신 일을 보지 아니하는도다</br>
<br>13 그러므로 내 백성이 무지함으로 말미암아 사로잡힐 것이요 그들의 귀한 자는 굶주릴 것이요 무리는 목마를 것이라</br>
<br>14 그러므로 스올이 욕심을 크게 내어 한량 없이 그 입을 벌린즉 그들의 호화로움과 그들의 많은 무리와 그들의 떠드는 것과 그 중에서 즐거워하는 자가 거기에 빠질 것이라</br>
<br>15 여느 사람은 구푸리고 존귀한 자는 낮아지고 오만한 자의 눈도 낮아질 것이로되</br>
<br>16 오직 만군의 여호와는 정의로우시므로 높임을 받으시며 거룩하신 하나님은 공의로우시므로 거룩하다 일컬음을 받으시리니</br>
<br>17 그 때에는 어린 양들이 자기 초장에 있는 것 같이 풀을 먹을 것이요 유리하는 자들이 부자의 버려진 밭에서 먹으리라</br>
<br>18 거짓으로 끈을 삼아 죄악을 끌며 수레 줄로 함 같이 죄악을 끄는 자는 화 있을진저</br>
<br>19 그들이 이르기를 그는 자기의 일을 속속히 이루어 우리에게 보게 할 것이며 이스라엘의 거룩한 이는 자기의 계획을 속히 이루어 우리가 알게 할 것이라 하는도다</br>
<br>20 악을 선하다 하며 선을 악하다 하며 흑암으로 광명을 삼으며 광명으로 흑암을 삼으며 쓴 것으로 단 것을 삼으며 단 것으로 쓴 것을 삼는 자들은 화 있을진저</br>
<br>21 스스로 지혜롭다 하며 스스로 명철하다 하는 자들은 화 있을진저</br>
<br>22 포도주를 마시기에 용감하며 독주를 잘 빚는 자들은 화 있을진저</br>
<br>23 그들은 뇌물로 말미암아 악인을 의롭다 하고 의인에게서 그 공의를 빼앗는도다</br>
<br>24 이로 말미암아 불꽃이 그루터기를 삼킴 같이, 마른 풀이 불 속에 떨어짐 같이 그들의 뿌리가 썩겠고 꽃이 티끌처럼 날리리니 그들이 만군의 여호와의 율법을 버리며 이스라엘의 거룩하신 이의 말씀을 멸시하였음이라</br>
<br>25 그러므로 여호와께서 자기 백성에게 노를 발하시고 그들 위에 손을 들어 그들을 치신지라 산들은 진동하며 그들의 시체는 거리 가운데에 분토 같이 되었도다 그럴지라도 그의 노가 돌아서지 아니하였고 그의 손이 여전히 펼쳐져 있느니라</br>
<br>26 또 그가 기치를 세우시고 먼 나라들을 불러 땅 끝에서부터 자기에게로 오게 하실 것이라 보라 그들이 빨리 달려올 것이로되</br>
<br>27 그 중에 곤핍하여 넘어지는 자도 없을 것이며 조는 자나 자는 자도 없을 것이며 그들의 허리띠는 풀리지 아니하며 그들의 들메끈은 끊어지지 아니하며</br>
<br>28 그들의 화살은 날카롭고 모든 활은 당겨졌으며 그들의 말굽은 부싯돌 같고 병거 바퀴는 회오리바람 같을 것이며</br>
<br>29 그들의 부르짖음은 암사자 같을 것이요 그들의 소리지름은 어린 사자들과 같을 것이라 그들이 부르짖으며 먹이를 움켜 가져가 버려도 건질 자가 없으리로다</br>
<br>30 그 날에 그들이 바다 물결 소리 같이 백성을 향하여 부르짖으리니 사람이 그 땅을 바라보면 흑암과 고난이 있고 빛은 구름에 가려서 어두우리라</br>
<br>&nbsp;</br>
<strong><br><font color="#4682b4">이사야 7장-10장 4절</font></br></strong>
<strong><br><font color="#4682b4">이사야 7 장</font></br></strong>
<br><i><font color="#808080">*아하스 왕에게 삼가며 조용하라 하시다*</font></i></br>
<br>1 웃시야의 손자요 요담의 아들인 유다의 아하스 왕 때에 아람의 르신 왕과 르말리야의 아들 이스라엘의 베가 왕이 올라와서 예루살렘을 쳤으나 능히 이기지 못하니라</br>
<br>2 어떤 사람이 다윗의 집에 알려 이르되 아람이 에브라임과 동맹하였다 하였으므로 왕의 마음과 그의 백성의 마음이 숲이 바람에 흔들림 같이 흔들렸더라</br>
<br>3 그 때에 여호와께서 이사야에게 이르시되 너와 네 아들 스알야숩은 윗못 수도 끝 세탁자의 밭 큰 길에 나가서 아하스를 만나</br>
<br>4 그에게 이르기를 너는 삼가며 조용하라 르신과 아람과 르말리야의 아들이 심히 노할지라도 이들은 연기 나는 두 부지깽이 그루터기에 불과하니 두려워하지 말며 낙심하지 말라</br>
<br>5 아람과 에브라임과 르말리야의 아들이 악한 꾀로 너를 대적하여 이르기를</br>
<br>6 우리가 올라가 유다를 쳐서 그것을 쓰러뜨리고 우리를 위하여 그것을 무너뜨리고 다브엘의 아들을 그 중에 세워 왕으로 삼자 하였으나</br>
<br>7 주 여호와의 말씀이 그 일은 서지 못하며 이루어지지 못하리라</br>
<br>8 대저 아람의 머리는 다메섹이요 다메섹의 머리는 르신이며 육십오년 내에 에브라임이 패망하여 다시는 나라를 이루지 못할 것이며</br>
<br>9 에브라임의 머리는 사마리아요 사마리아의 머리는 르말리야의 아들이니라 만일 너희가 굳게 믿지 아니하면 너희는 굳게 서지 못하리라 하시니라</br>
<br><i><font color="#808080">*임마누엘의 징조*</font></i></br>
<br>10 여호와께서 또 아하스에게 말씀하여 이르시되</br>
<br>11 너는 네 하나님 여호와께 한 징조를 구하되 깊은 데에서든지 높은 데에서든지 구하라 하시니</br>
<br>12 아하스가 이르되 나는 구하지 아니하겠나이다 나는 여호와를 시험하지 아니하겠나이다 한지라</br>
<br>13 이사야가 이르되 다윗의 집이여 원하건대 들을지어다 너희가 사람을 괴롭히고서 그것을 작은 일로 여겨 또 나의 하나님을 괴롭히려 하느냐</br>
<br>14 그러므로 주께서 친히 징조를 너희에게 주실 것이라 보라 처녀가 잉태하여 아들을 낳을 것이요 그의 이름을 임마누엘이라 하리라</br>
<br>15 그가 악을 버리며 선을 택할 줄 알 때가 되면 엉긴 젖과 꿀을 먹을 것이라</br>
<br>16 대저 이 아이가 악을 버리며 선을 택할 줄 알기 전에 네가 미워하는 두 왕의 땅이 황폐하게 되리라</br>
<br>17 여호와께서 에브라임이 유다를 떠날 때부터 당하여 보지 못한 날을 너와 네 백성과 네 아버지 집에 임하게 하시리니 곧 앗수르 왕이 오는 날이니라</br>
<br>18 그 날에는 여호와께서 애굽 하수에서 먼 곳의 파리와 앗수르 땅의 벌을 부르시리니</br>
<br>19 다 와서 거친 골짜기와 바위 틈과 가시나무 울타리와 모든 초장에 앉으리라</br>
<br>20 그 날에는 주께서 하수 저쪽에서 세내어 온 삭도 곧 앗수르 왕으로 네 백성의 머리 털과 발 털을 미실 것이요 수염도 깎으시리라</br>
<br>21 그 날에는 사람이 한 어린 암소와 두 양을 기르리니</br>
<br>22 그것들이 내는 젖이 많으므로 엉긴 젖을 먹을 것이라 그 땅 가운데에 남아 있는 자는 엉긴 젖과 꿀을 먹으리라</br>
<br>23 그 날에는 천 그루에 은 천 개의 가치가 있는 포도나무가 있던 곳마다 찔레와 가시가 날 것이라</br>
<br>24 온 땅에 찔레와 가시가 있으므로 화살과 활을 가지고 그리로 갈 것이요</br>
<br>25 보습으로 갈던 모든 산에도 찔레와 가시 때문에 두려워서 그리로 가지 못할 것이요 그 땅은 소를 풀어 놓으며 양이 밟는 곳이 되리라</br>
<br>&nbsp;</br>
<strong><br><font color="#4682b4">이사야 8 장</font></br></strong>
<br><i><font color="#808080">*이사야의 아들*</font></i></br>
<br>1 여호와께서 내게 이르시되 너는 큰 서판을 가지고 그 위에 통용 문자로 마헬살랄하스바스라 쓰라</br>
<br>2 내가 진실한 증인 제사장 우리야와 여베레기야의 아들 스가랴를 불러 증언하게 하리라 하시더니</br>
<br>3 내가 내 아내를 가까이 하매 그가 임신하여 아들을 낳은지라 여호와께서 내게 이르시되 그의 이름을 마헬살랄하스바스라 하라</br>
<br>4 이는 이 아이가 내 아빠, 내 엄마라 부를 줄 알기 전에 다메섹의 재물과 사마리아의 노략물이 앗수르 왕 앞에 옮겨질 것임이라 하시니라</br>
<br><i><font color="#808080">*앗수르 왕의 침략*</font></i></br>
<br>5 여호와께서 다시 내게 말씀하여 이르시되</br>
<br>6 이 백성이 천천히 흐르는 실로아 물을 버리고 르신과 르말리야의 아들을 기뻐하느니라</br>
<br>7 그러므로 주 내가 흉용하고 창일한 큰 하수 곧 앗수르 왕과 그의 모든 위력으로 그들을 뒤덮을 것이라 그 모든 골짜기에 차고 모든 언덕에 넘쳐</br>
<br>8 흘러 유다에 들어와서 가득하여 목에까지 미치리라 임마누엘이여 그가 펴는 날개가 네 땅에 가득하리라 하셨느니라</br>
<br><i><font color="#808080">*여호와께서 깨우치시다*</font></i></br>
<br>9 너희 민족들아 함성을 질러 보아라 그러나 끝내 패망하리라 너희 먼 나라 백성들아 들을지니라 너희 허리를 동이라 그러나 끝내 패망하리라 너희 허리에 띠를 띠라 그러나 끝내 패망하리라</br>
<br>10 너희는 함께 계획하라 그러나 끝내 이루지 못하리라 말을 해 보아라 끝내 시행되지 못하리라 이는 하나님이 우리와 함께 계심이니라</br>
<br>11 여호와께서 강한 손으로 내게 알려 주시며 이 백성의 길로 가지 말 것을 내게 깨우쳐 이르시되</br>
<br>12 이 백성이 반역자가 있다고 말하여도 너희는 그 모든 말을 따라 반역자가 있다고 하지 말며 그들이 두려워하는 것을 너희는 두려워하지 말며 놀라지 말고</br>
<br>13 만군의 여호와 그를 너희가 거룩하다 하고 그를 너희가 두려워하며 무서워할 자로 삼으라</br>
<br>14 그가 성소가 되시리라 그러나 이스라엘의 두 집에는 걸림돌과 걸려 넘어지는 반석이 되실 것이며 예루살렘 주민에게는 함정과 올무가 되시리니</br>
<br>15 많은 사람들이 그로 말미암아 걸려 넘어질 것이며 부러질 것이며 덫에 걸려 잡힐 것이니라</br>
<br><i><font color="#808080">*율법과 증거의 말씀을 따르라*</font></i></br>
<br>16 너는 증거의 말씀을 싸매며 율법을 내 제자들 가운데에서 봉함하라</br>
<br>17 이제 야곱의 집에 대하여 얼굴을 가리시는 여호와를 나는 기다리며 그를 바라보리라</br>
<br>18 보라 나와 및 여호와께서 내게 주신 자녀들이 이스라엘 중에 징조와 예표가 되었나니 이는 시온 산에 계신 만군의 여호와께로 말미암은 것이니라</br>
<br>19 어떤 사람이 너희에게 말하기를 주절거리며 속살거리는 신접한 자와 마술사에게 물으라 하거든 백성이 자기 하나님께 구할 것이 아니냐 산 자를 위하여 죽은 자에게 구하겠느냐 하라</br>
<br>20 마땅히 율법과 증거의 말씀을 따를지니 그들이 말하는 바가 이 말씀에 맞지 아니하면 그들이 정녕 아침 빛을 보지 못하고</br>
<br>21 이 땅으로 헤매며 곤고하며 굶주릴 것이라 그가 굶주릴 때에 격분하여 자기의 왕과 자기의 하나님을 저주할 것이며 위를 쳐다보거나</br>
<br>22 땅을 굽어보아도 환난과 흑암과 고통의 흑암뿐이리니 그들이 심한 흑암 가운데로 쫓겨 들어가리라</br>
<br>&nbsp;</br>
<strong><br><font color="#4682b4">이사야 9 장</font></br></strong>
<br><i><font color="#808080">*평강의 왕*</font></i></br>
<br>1 전에 고통 받던 자들에게는 흑암이 없으리로다 옛적에는 여호와께서 스불론 땅과 납달리 땅이 멸시를 당하게 하셨더니 후에는 해변 길과 요단 저쪽 이방의 갈릴리를 영화롭게 하셨느니라</br>
<br>2 흑암에 행하던 백성이 큰 빛을 보고 사망의 그늘진 땅에 거주하던 자에게 빛이 비치도다</br>
<br>3 주께서 이 나라를 창성하게 하시며 그 즐거움을 더하게 하셨으므로 추수하는 즐거움과 탈취물을 나눌 때의 즐거움 같이 그들이 주 앞에서 즐거워하오니</br>
<br>4 이는 그들이 무겁게 멘 멍에와 그들의 어깨의 채찍과 그 압제자의 막대기를 주께서 꺾으시되 미디안의 날과 같이 하셨음이니이다</br>
<br>5 어지러이 싸우는 군인들의 신과 피 묻은 겉옷이 불에 섶 같이 살라지리니</br>
<br>6 이는 한 아기가 우리에게 났고 한 아들을 우리에게 주신 바 되었는데 그의 어깨에는 정사를 메었고 그의 이름은 기묘자라, 모사라, 전능하신 하나님이라, 영존하시는 아버지라, 평강의 왕이라 할 것임이라</br>
<br>7 그 정사와 평강의 더함이 무궁하며 또 다윗의 왕좌와 그의 나라에 군림하여 그 나라를 굳게 세우고 지금 이후로 영원히 정의와 공의로 그것을 보존하실 것이라 만군의 여호와의 열심이 이를 이루시리라</br>
<br><i><font color="#808080">*주께서 이스라엘을 벌하시리라*</font></i></br>
<br>8 주께서 야곱에게 말씀을 보내시며 그것을 이스라엘에게 임하게 하셨은즉</br>
<br>9 모든 백성 곧 에브라임과 사마리아 주민이 알 것이어늘 그들이 교만하고 완악한 마음으로 말하기를</br>
<br>10 벽돌이 무너졌으나 우리는 다듬은 돌로 쌓고 뽕나무들이 찍혔으나 우리는 백향목으로 그것을 대신하리라 하는도다</br>
<br>11 그러므로 여호와께서 르신의 대적들을 일으켜 그를 치게 하시며 그의 원수들을 격동시키시리니</br>
<br>12 앞에는 아람 사람이요 뒤에는 블레셋 사람이라 그들이 모두 입을 벌려 이스라엘을 삼키리라 그럴지라도 여호와의 진노가 돌아서지 아니하며 그의 손이 여전히 펴져 있으리라</br>
<br>13 그리하여도 그 백성이 자기들을 치시는 이에게로 돌아오지 아니하며 만군의 여호와를 찾지 아니하도다</br>
<br>14 그러므로 여호와께서 하루 사이에 이스라엘 중에서 머리와 꼬리와 종려나무 가지와 갈대를 끊으시리니</br>
<br>15 그 머리는 곧 장로와 존귀한 자요 그 꼬리는 곧 거짓말을 가르치는 선지자라</br>
<br>16 백성을 인도하는 자가 그들을 미혹하니 인도를 받는 자들이 멸망을 당하는도다</br>
<br>17 이 백성이 모두 경건하지 아니하며 악을 행하며 모든 입으로 망령되이 말하니 그러므로 주께서 그들의 장정들을 기뻐하지 아니하시며 그들의 고아와 과부를 긍휼히 여기지 아니하시리라 그럴지라도 여호와의 진노가 돌아서지 아니하며 그의 손이 여전히 펴져 있으리라</br>
<br>18 대저 악행은 불 타오르는 것 같으니 곧 찔레와 가시를 삼키며 빽빽한 수풀을 살라 연기가 위로 올라가게 함과 같은 것이라</br>
<br>19 만군의 여호와의 진노로 말미암아 이 땅이 불타리니 백성은 불에 섶과 같을 것이라 사람이 자기의 형제를 아끼지 아니하며</br>
<br>20 오른쪽으로 움킬지라도 주리고 왼쪽으로 먹을지라도 배부르지 못하여 각각 자기 팔의 고기를 먹을 것이며</br>
<br>21 므낫세는 에브라임을, 에브라임은 므낫세를 먹을 것이요 또 그들이 합하여 유다를 치리라 그럴지라도 여호와의 진노가 돌아서지 아니하며 그의 손이 여전히 펴져 있으리라</br>
<br>&nbsp;</br>
<strong><br><font color="#4682b4">이사야 10 장 1절-4절</font></br></strong>
<br>1 불의한 법령을 만들며 불의한 말을 기록하며</br>
<br>2 가난한 자를 불공평하게 판결하여 가난한 내 백성의 권리를 박탈하며 과부에게 토색하고 고아의 것을 약탈하는 자는 화 있을진저</br>
<br>3 벌하시는 날과 멀리서 오는 환난 때에 너희가 어떻게 하려느냐 누구에게로 도망하여 도움을 구하겠으며 너희의 영화를 어느 곳에 두려느냐</br>
<br>4 포로 된 자 아래에 구푸리며 죽임을 당한 자 아래에 엎드러질 따름이니라 그럴지라도 여호와의 진노가 돌아서지 아니하며 그의 손이 여전히 펴져 있으리라</br>
<br>&nbsp;</br>
<strong><br><font color="#4682b4">이사야 17장</font></br></strong>
<br><i><font color="#808080">*여호와께서 에브라임과 다메섹을 멸하시리라*</font></i></br>
<br>1 다메섹에 관한 경고라  보라 다메섹이 장차 성읍을 이루지 못하고 무너진 무더기가 될 것이라</br>
<br>2 아로엘의 성읍들이 버림을 당하리니 양 무리를 치는 곳이 되어 양이 눕되 놀라게 할 자가 없을 것이며</br>
<br>3 에브라임의 요새와 다메섹 나라와 아람의 남은 자가 멸절하여 이스라엘 자손의 영광 같이 되리라 만군의 여호와의 말씀이니라</br>
<br>4 그 날에 야곱의 영광이 쇠하고 그의 살진 몸이 파리하리니</br>
<br>5 마치 추수하는 자가 곡식을 거두어 가지고 그의 손으로 이삭을 벤 것 같고 르바임 골짜기에서 이삭을 주운 것 같으리라</br>
<br>6 그러나 그 안에 주울 것이 남으리니 감람나무를 흔들 때에 가장 높은 가지 꼭대기에 과일 두세 개가 남음 같겠고 무성한 나무의 가장 먼 가지에 네다섯 개가 남음 같으리라 이스라엘의 하나님 여호와의 말씀이니라</br>
<br>7 그 날에 사람이 자기를 지으신 이를 바라보겠으며 그의 눈이 이스라엘의 거룩하신 이를 뵙겠고</br>
<br>8 자기 손으로 만든 제단을 바라보지 아니하며 자기 손가락으로 지은 아세라나 태양상을 보지 아니할 것이며</br>
<br>9 그 날에 그 견고한 성읍들이 옛적에 이스라엘 자손 앞에서 버린 바 된 수풀 속의 처소와 작은 산 꼭대기의 처소 같아서 황폐하리니</br>
<br>10 이는 네가 네 구원의 하나님을 잊어버리며 네 능력의 반석을 마음에 두지 아니한 까닭이라 그러므로 네가 기뻐하는 나무를 심으며 이방의 나무 가지도 이종하는도다</br>
<br>11 네가 심는 날에 울타리를 두르고 아침에 네 씨가 잘 발육하도록 하였으나 근심과 심한 슬픔의 날에 농작물이 없어지리라</br>
<br><i><font color="#808080">*주께서 열방을 꾸짖어 흩으시리라*</font></i></br>
<br>12 슬프다 많은 민족이 소동하였으되 바다 파도가 치는 소리 같이 그들이 소동하였고 열방이 충돌하였으되 큰 물이 몰려옴 같이 그들도 충돌하였도다</br>
<br>13 열방이 충돌하기를 많은 물이 몰려옴과 같이 하나 주께서 그들을 꾸짖으시리니 그들이 멀리 도망함이 산에서 겨가 바람 앞에 흩어짐 같겠고 폭풍 앞에 떠도는 티끌 같을 것이라</br>
<br>14 보라 저녁에 두려움을 당하고 아침이 오기 전에 그들이 없어졌나니 이는 우리를 노략한 자들의 몫이요 우리를 강탈한 자들의 보응이니라</br>
<br>&nbsp;</br>
<strong><br><font color="#4682b4">이사야 14장 24절-32절</font></br></strong>
<br><i><font color="#808080">*여호와께서 앗수르를 파하시리라*</font></i></br>
<br>24 만군의 여호와께서 맹세하여 이르시되 내가 생각한 것이 반드시 되며 내가 경영한 것을 반드시 이루리라</br>
<br>25 내가 앗수르를 나의 땅에서 파하며 나의 산에서 그것을 짓밟으리니 그 때에 그의 멍에가 이스라엘에게서 떠나고 그의 짐이 그들의 어깨에서 벗어질 것이라</br>
<br>26 이것이 온 세계를 향하여 정한 경영이며 이것이 열방을 향하여 편 손이라 하셨나니</br>
<br>27 만군의 여호와께서 경영하셨은즉 누가 능히 그것을 폐하며 그의 손을 펴셨은즉 누가 능히 그것을 돌이키랴</br>
<br><i><font color="#808080">*여호와께서 블레셋을 소멸시키시리라*</font></i></br>
<br>28 아하스 왕이 죽던 해에 이 경고가 임하니라</br>
<br>29 블레셋 온 땅이여 너를 치던 막대기가 부러졌다고 기뻐하지 말라 뱀의 뿌리에서는 독사가 나겠고 그의 열매는 날아다니는 불뱀이 되리라</br>
<br>30 가난한 자의 장자는 먹겠고 궁핍한 자는 평안히 누우려니와 내가 네 뿌리를 기근으로 죽일 것이요 네게 남은 자는 살륙을 당하리라</br>
<br>31 성문이여 슬피 울지어다 성읍이여 부르짖을지어다 너 블레셋이여 다 소멸되리로다 대저 연기가 북방에서 오는데 그 대열에서 벗어난 자가 없느니라</br>
<br>32 그 나라 사신들에게 어떻게 대답하겠느냐 여호와께서 시온을 세우셨으니 그의 백성의 곤고한 자들이 그 안에서 피난하리라 할 것이니라</br>
<br>&nbsp;</br>
<br>    40일차 끝</br>
       <br>&nbsp;</br>
      <br>&nbsp;</br>
      <br>&nbsp;</br>
      <br>&nbsp;</br>
      <br>&nbsp;</br>
      <br>&nbsp;</br>
    </h2>
  </div>

  <!-- 모달 (설명/요약 출력) -->
  <div id="explanation-modal" class="modal" role="dialog" aria-modal="true" aria-labelledby="modal-title">
    <div class="modal-content">
      <span class="close-button" id="close-modal" aria-label="닫기">&times;</span>
      <h3 id="modal-title">구절 설명</h3>
      <img id="modal-image" src="" alt="설명 관련 이미지" />
      <div id="modal-text">구절을 드래그하여 선택하고 '구절설명' 버튼을 누르세요.</div>
    </div>
  </div>

  <div id="scroll-marker-container" class="scroll-marker-container" aria-hidden="true"></div>

  <!-- 기도문 팝업 -->
  <div id="prayerToast" class="prayer-toast" role="dialog" aria-modal="false" aria-label="성경 읽기 전 기도문">
    <div class="prayer-header">
      <div class="prayer-title">
        <span>🙏</span>
        <span>기도하고 읽기</span>
        <span class="prayer-badge">90일 성경통톡</span>
      </div>
      <button class="prayer-close" id="prayerCloseBtn" aria-label="기도문 닫기">×</button>
    </div>

    <div class="prayer-body" id="prayerBody" tabindex="0">
   <style>
  .cross-red {
    color: red;
    font-weight: 900;
    -webkit-text-stroke: 0.6px currentColor; /* 윤곽선으로 두께 보강 */
    text-shadow:
      0 0 0 currentColor,         /* 기본 채움 */
      0.02em 0 currentColor, -0.02em 0 currentColor,
      0 0.02em currentColor,  0 -0.02em currentColor; /* 가장자리 두껍게 */
  }
</style>

<h4>
  <p>👀<span class="cross-red">✝︎</span> "하나님나라 관점" <span class="cross-red">✝︎</span>👀으로</p>
  <p>읽는 📖"90일 통큰통독"📖</p>
</h4>
<p>— 👦🏻 성경 읽기 전 1분 기도 🙏—</p>
<p>내 삶의 주인이 되시는 하나님, 성경을 읽게 하시니 감사합니다. 이 성경이 하나님의 말씀임을 믿습니다. 특별히 나에게 주시는 하나님의 말씀임을 믿습니다. 주시는 말씀을 내 관점으로 읽게 하지 마시고 하나님의 관점으로 읽어 하나님의 마음을 알게 하시고, 그 마음을 받아 나의 중심성을 하나님의 뜻 앞에 내려놓게 하시고 순종하게 하시어 변화되게 하옵소서, 말씀을 삶으로 이루는 성경 읽기가 되게 역사하여 주시옵소서. 예수님의 이름으로 기도합니다. 아멘.</p>
    
    </div>

    <div class="prayer-footer">
  <div></div> <!-- 좌측 자리 균형용(선택) -->
  <div class="prayer-actions">
    <button class="prayer-btn" id="prayerReadAlone">기도 드렸습니다</button>
    <button class="prayer-btn prayer-btn-primary" id="prayerAmen">확인</button>
  </div>
</div>

  <script>
    // ------------------------------
    // API KEY (사용자 입력 상태)
    const apiKey = "AIzaSyDUlSQlSPgnrFBXpnUJMDoUO3s_KsaoFRU";
    // ------------------------------

    // DOM
    const bibleTextEl = document.getElementById('bible-text');
    const searchCountEl = document.getElementById('search-count');
    const nextLocationBtn = document.getElementById('next-location-btn');
    const scrollMarkerContainer = document.getElementById('scroll-marker-container');

    const explanationIconButton = document.getElementById('explanation-icon-button');
    const explanationButtonWrapper = document.getElementById('explanation-button-wrapper');
    const explanationSubButtons = document.getElementById('explanation-sub-buttons');
    const detailedExplanationButton = document.getElementById('detailed-explanation-button');
    const simpleExplanationButton = document.getElementById('simple-explanation-button');

    const summarySimpleMain = document.getElementById('summary-simple-main');
    const summaryDetailedMain = document.getElementById('summary-detailed-main');

    const modal = document.getElementById('explanation-modal');
    const closeModalButton = document.getElementById('close-modal');
    const modalTitle = document.getElementById('modal-title');
    const modalImage = document.getElementById('modal-image');
    const modalText = document.getElementById('modal-text');

    const audio = document.getElementById('audio-file');
    const playBtn = document.getElementById('play-btn');
    const pauseBtn = document.getElementById('pause-btn');
    const stopBtn = document.getElementById('stop-btn');
    const progressBar = document.getElementById('progress-bar');
    const rewindBtn = document.getElementById('rewind-10');
    const forwardBtn = document.getElementById('forward-10');
    const speedDisplay = document.getElementById('speed-display');
    const speedDown02Btn = document.getElementById('speed-down-02');
    const speedDown01Btn = document.getElementById('speed-down-01');
    const speedUp01Btn = document.getElementById('speed-up-01');
    const speedUp02Btn = document.getElementById('speed-up-02');
    const speedResetBtn = document.getElementById('speed-reset');
    const volumeSlider = document.getElementById('volume-slider');
    const muteBtn = document.getElementById('mute-btn');
    const currentTimeEl = document.getElementById('current-time');
    const remainingTimeEl = document.getElementById('remaining-time');

    const upBtn = document.getElementById('up');
    const downBtn = document.getElementById('down');
    const fontSizeEl = document.getElementById('font-size');

    // 상태
    let originalText = "";
    let selectedVerse = "";
    let selectionRange = null;
    let foundSentences = [];
    let currentSearchIndex = -1;
    let currentSpeed = 1.0;
    let isMuted = false;
    let selectionDebounce = null;

    function escapeRegExp(s) { return s.replace(/[.*+?^${}()|[\]\\]/g, '\\$&'); }
    function formatTime(sec) { if (!isFinite(sec) || sec < 0) return '0:00'; const m = Math.floor(sec/60); const s = Math.floor(sec%60); return `${m}:${String(s).padStart(2,'0')}`; }

    window.addEventListener('DOMContentLoaded', () => {
      originalText = bibleTextEl.innerHTML;
      updateFontSizeDisplay();
      updateSpeed();

      // 본문 줄 단위 분리
      const lines = originalText.split(/<br\s*\/?>/i);
      bibleTextEl.innerHTML = lines.map(line => {
        if (line.trim() === "") return "<br>";
        return `<span class="line">${line}</span><br>`;
      }).join("");
      const lineElements = document.querySelectorAll("#bible-text .line");

      // 스크롤 시 중앙 두 줄 강조
      function highlightCenterLines() {
        const viewportCenter = window.innerHeight / 2 + window.scrollY;
        let closestIndex = -1, minDistance = Infinity;
        lineElements.forEach((line, i) => {
          const rect = line.getBoundingClientRect();
          const lineCenter = rect.top + window.scrollY + rect.height / 2;
          const distance = Math.abs(lineCenter - viewportCenter);
          if (distance < minDistance) { minDistance = distance; closestIndex = i; }
        });
        lineElements.forEach(line => line.classList.remove("highlight"));
        if (closestIndex >= 0) {
          lineElements[closestIndex].classList.add("highlight");
          if (closestIndex + 1 < lineElements.length) lineElements[closestIndex + 1].classList.add("highlight");
        }
      }
      window.addEventListener("scroll", highlightCenterLines);
      highlightCenterLines();

      // PC에서 2줄씩 부드럽게 스크롤
      window.addEventListener("wheel", function(e) {
        if (e.ctrlKey) return;
        const modal = document.getElementById('explanation-modal');
        if (modal && modal.style.display === 'block' && modal.contains(e.target)) return;
        const firstLine = document.querySelector("#bible-text .line");
        if (!firstLine) return;
        const lineHeight = firstLine.getBoundingClientRect().height;
        e.preventDefault();
        window.scrollBy({ top: e.deltaY > 0 ? lineHeight * 2 : -lineHeight * 2, behavior: "smooth" });
      }, { passive: false });

      // 폰트 버튼
      upBtn.addEventListener('click', () => {
        const current = parseFloat(getComputedStyle(bibleTextEl).fontSize);
        if (current + 4 <= 80) { bibleTextEl.style.fontSize = (current + 4) + 'px'; updateFontSizeDisplay(); }
      });
      downBtn.addEventListener('click', () => {
        const current = parseFloat(getComputedStyle(bibleTextEl).fontSize);
        if (current - 4 >= 12) { bibleTextEl.style.fontSize = (current - 4) + 'px'; updateFontSizeDisplay(); }
      });

      // 검색
      const searchForm = document.forms.f1;
      searchForm.addEventListener('submit', (e) => { e.preventDefault(); findString(searchForm.t1.value); });
      searchForm.b2.addEventListener('click', () => { clearHighlight(); });
      nextLocationBtn.addEventListener('click', nextLocation);

      // 오디오
      playBtn.addEventListener('click', () => { audio.play().catch(()=>{}); });
      pauseBtn.addEventListener('click', () => audio.pause());
      stopBtn.addEventListener('click', () => { audio.pause(); audio.currentTime = 0; });
      speedDown02Btn.addEventListener('click', () => { currentSpeed = Math.max(0.5, currentSpeed - 0.2); updateSpeed(); });
      speedDown01Btn.addEventListener('click', () => { currentSpeed = Math.max(0.5, currentSpeed - 0.1); updateSpeed(); });
      speedUp01Btn.addEventListener('click', () => { currentSpeed = Math.min(2.0, currentSpeed + 0.1); updateSpeed(); });
      speedUp02Btn.addEventListener('click', () => { currentSpeed = Math.min(2.0, currentSpeed + 0.2); updateSpeed(); });
      speedResetBtn.addEventListener('click', () => { currentSpeed = 1.0; updateSpeed(); });
      volumeSlider.addEventListener('input', () => { audio.volume = Number(volumeSlider.value); });
      muteBtn.addEventListener('click', () => { isMuted = !isMuted; audio.muted = isMuted; muteBtn.textContent = isMuted ? '🔇' : '🔊'; });

      audio.addEventListener('timeupdate', () => {
        if (!isFinite(audio.duration) || audio.duration <= 0) return;
        const pct = (audio.currentTime / audio.duration) * 100;
        progressBar.value = pct;
        currentTimeEl.textContent = formatTime(audio.currentTime);
        remainingTimeEl.textContent = '-' + formatTime(audio.duration - audio.currentTime);
      }, { passive: true });
      audio.addEventListener('loadedmetadata', () => {
        currentTimeEl.textContent = '0:00';
        remainingTimeEl.textContent = '-' + formatTime(audio.duration || 0);
      });
      progressBar.addEventListener('input', () => {
        if (!isFinite(audio.duration) || audio.duration <= 0) return;
        const pct = progressBar.value / 100;
        audio.currentTime = audio.duration * pct;
      }, { passive: true });
      rewindBtn.addEventListener('click', () => { audio.currentTime = Math.max(0, audio.currentTime - 10); });
      forwardBtn.addEventListener('click', () => { if (isFinite(audio.duration)) audio.currentTime = Math.min(audio.duration, audio.currentTime + 10); });

      // 책 버튼 토글 & 선택 복원
      explanationIconButton.addEventListener('pointerdown', () => {
        const sel = window.getSelection();
        try { if (sel && sel.rangeCount > 0) selectionRange = sel.getRangeAt(0).cloneRange(); } catch(e) { selectionRange = null; }
      }, { passive: true });
      explanationIconButton.addEventListener('click', (ev) => {
        ev.stopPropagation();
        const sel = window.getSelection();
        try { if (sel && sel.rangeCount > 0) selectionRange = sel.getRangeAt(0).cloneRange(); } catch(e){ selectionRange = null; }
        explanationButtonWrapper.classList.toggle('active');
        setTimeout(() => {
          if (selectionRange) {
            const sel2 = window.getSelection();
            sel2.removeAllRanges();
            try { sel2.addRange(selectionRange); } catch(e){}
            updateSelectedVerseFromRange(selectionRange);
          }
        }, 60);
      });
      document.body.addEventListener('click', (ev) => {
        if (!explanationButtonWrapper.contains(ev.target)) explanationButtonWrapper.classList.remove('active');
      });

      // 구절 설명 버튼
      detailedExplanationButton.addEventListener('click', () => {
        const v = (selectedVerse || '').trim();
        if (!v) { showModal("구절을 먼저 선택하세요","본문에서 구절이나 단어를 드래그하여 선택한 후 다시 버튼을 눌러주세요."); }
        else { fetchExplanation(v, 'detailed'); }
        explanationButtonWrapper.classList.remove('active');
      });
      simpleExplanationButton.addEventListener('click', () => {
        const v = (selectedVerse || '').trim();
        if (!v) { showModal("구절을 먼저 선택하세요","본문에서 구절이나 단어를 드래그하여 선택한 후 다시 버튼을 눌러주세요."); }
        else { fetchExplanation(v, 'simple'); }
        explanationButtonWrapper.classList.remove('active');
      });

      // 본문 요약 버튼
      summarySimpleMain.addEventListener('click', () => {
        const full = getFullBibleText();
        if (!full.trim()) { showModal("본문이 없습니다","요약할 성경 본문이 없습니다."); }
        else { fetchSummary(full, 'simple'); }
      });
      summaryDetailedMain.addEventListener('click', () => {
        const full = getFullBibleText();
        if (!full.trim()) { showModal("본문이 없습니다","요약할 성경 본문이 없습니다."); }
        else { fetchSummary(full, 'detailed'); }
      });

      // 설명 모달 닫기
      closeModalButton.addEventListener('click', () => {
        modal.style.display = 'none';
        document.body.classList.remove('modal-open');
      });
      window.addEventListener('click', (ev) => {
        if (ev.target === modal) {
          modal.style.display = 'none';
          document.body.classList.remove('modal-open');
        }
      });

      // 선택 이벤트(디바운스)
      const scheduleSelectionUpdate = () => {
        clearTimeout(selectionDebounce);
        selectionDebounce = setTimeout(handleSelectionChange, 160);
      };
      document.addEventListener('mouseup', scheduleSelectionUpdate, { passive:true });
      document.addEventListener('touchend', scheduleSelectionUpdate, { passive:true });
      document.addEventListener('selectionchange', scheduleSelectionUpdate);

      // 기도문 팝업 초기화
      initPrayerToast();
    });

    // 선택 관리
    function handleSelectionChange(){
      const sel = window.getSelection();
      if (!sel) return clearSelectionState();
      const text = (sel.toString() || "").trim();

      const modalEl = document.getElementById('explanation-modal');
      if (modalEl && modalEl.style.display === 'block') {
        const sel2 = window.getSelection();
        if (sel2 && (modalEl.contains(sel2.anchorNode) || modalEl.contains(sel2.focusNode))) return;
      }

      let isInBible = false;
      try {
        if (sel.anchorNode && sel.focusNode) {
          isInBible = bibleTextEl.contains(sel.anchorNode) && bibleTextEl.contains(sel.focusNode);
        }
      } catch(e){ isInBible = false; }

      if (text && isInBible) {
        selectedVerse = text;
        try { selectionRange = sel.getRangeAt(0).cloneRange(); } catch(e){ selectionRange = null; }
        try {
          const range = sel.getRangeAt(0);
          const rects = Array.from(range.getClientRects());
          const rect = rects.length
            ? rects.reduce((u, r) => ({
                top: Math.min(u.top, r.top),
                left: Math.min(u.left, r.left),
                right: Math.max(u.right, r.right),
                bottom: Math.max(u.bottom, r.bottom),
                width: 0, height: 0
              }), { top:Infinity, left:Infinity, right:-Infinity, bottom:-Infinity })
            : range.getBoundingClientRect();
          rect.width  = rect.right - rect.left;
          rect.height = rect.bottom - rect.top;
          positionExplanationButton(rect);
        } catch(e){ resetExplanationButton(); }
      } else {
        clearSelectionState();
      }
    }
    function updateSelectedVerseFromRange(range) {
      if (!range) return;
      const txt = (range.toString() || "").trim();
      if (txt) selectedVerse = txt;
      try {
        const rect = range.getBoundingClientRect();
        positionExplanationButton(rect);
      } catch(e){ resetExplanationButton(); }
    }
    function resetExplanationButton(){
      const container = document.getElementById('explanation-button-container');
      if (!container) return;
      container.style.position = 'fixed';
      container.style.left = '30%';
      container.style.top = '100px';
      container.style.transform = 'translateX(-50%)';
      container.style.display = 'block';
      explanationButtonWrapper.classList.remove('active');
    }
    function clearSelectionState(){ selectedVerse = ""; selectionRange = null; resetExplanationButton(); }

    // 책 버튼 위치
    function positionExplanationButton(rect){
      const container = document.getElementById('explanation-button-container');
      if (!container) return;

      const vw = window.innerWidth;
      const vh = window.innerHeight;
      const margin = 8;
      const pad = 10;
      const viewportCenter = vw / 2;

      const isWide = rect.width >= vw * 0.6 || (rect.left <= margin*2 && rect.right >= vw - margin*2);

      let baseX, transformX;
      if (isWide) { baseX = rect.left + rect.width / 2; transformX = 'translateX(-50%)'; }
      else if (rect.left < viewportCenter * 0.4) { baseX = rect.right; transformX = 'translateX(0)'; }
      else if (rect.right > viewportCenter * 1.6) { baseX = rect.left; transformX = 'translateX(-100%)'; }
      else { baseX = rect.left + rect.width / 2; transformX = 'translateX(-50%)'; }

      const cw = container.offsetWidth || 60;
      const ch = container.offsetHeight || 60;

      const leftEdge =
        transformX === 'translateX(0)'     ? baseX :
        transformX === 'translateX(-50%)'  ? baseX - cw/2 :
                                             baseX - cw;

      let clampedLeftEdge = Math.min(Math.max(leftEdge, margin), vw - margin - cw);

      let finalLeft;
      if (transformX === 'translateX(0)')        finalLeft = clampedLeftEdge;
      else if (transformX === 'translateX(-50%)') finalLeft = clampedLeftEdge + cw/2;
      else                                        finalLeft = clampedLeftEdge + cw;

      let finalTop = rect.bottom + pad;
      if (finalTop + ch + margin > vh) finalTop = Math.max(rect.top - pad - ch, margin);
      finalTop = Math.min(Math.max(finalTop, margin), vh - margin - ch);

      container.style.position = 'fixed';
      container.style.left = `${finalLeft}px`;
      container.style.top  = `${finalTop}px`;
      container.style.transform = transformX;
      container.style.display = 'block';
    }

    // 검색
    function findString(searchText){
      clearHighlight();
      if (searchText == null || searchText.trim() === '') { searchCountEl.textContent = ''; nextLocationBtn.style.display = 'none'; return; }
      const escaped = escapeRegExp(searchText.trim());
      const regex = new RegExp(escaped, 'gi');
      const newContent = originalText.replace(regex, (match) => `<span class="search-highlight">${match}</span>`);
      bibleTextEl.innerHTML = newContent;
      foundSentences = Array.from(bibleTextEl.getElementsByClassName('search-highlight'));
      searchCountEl.textContent = `총 ${foundSentences.length}개 검색됨`;
      if (foundSentences.length > 0) {
        currentSearchIndex = 0;
        foundSentences[currentSearchIndex].scrollIntoView({ behavior:'smooth', block:'center' });
        nextLocationBtn.style.display = 'inline-block';
        updateScrollMarkers();
      } else {
        showModal("검색 결과 없음", `"${searchText}"에 대한 검색 결과가 없습니다.`);
        nextLocationBtn.style.display = 'none';
      }
    }
    function nextLocation(){
      if (!foundSentences.length) return;
      currentSearchIndex = (currentSearchIndex + 1) % foundSentences.length;
      foundSentences[currentSearchIndex].scrollIntoView({ behavior:'smooth', block:'center' });
      updateScrollMarkers();
    }
    function clearHighlight(){
      bibleTextEl.innerHTML = originalText;
      searchCountEl.textContent = '';
      nextLocationBtn.style.display = 'none';
      while (scrollMarkerContainer.firstChild) scrollMarkerContainer.removeChild(scrollMarkerContainer.firstChild);
      foundSentences = [];
      currentSearchIndex = -1;
    }
    function updateScrollMarkers(){
      while (scrollMarkerContainer.firstChild) scrollMarkerContainer.removeChild(scrollMarkerContainer.firstChild);
      const docH = document.documentElement.scrollHeight;
      const vh = window.innerHeight;
      foundSentences.forEach((el) => {
        const marker = document.createElement('div');
        marker.className = 'scroll-marker';
        const topPos = el.getBoundingClientRect().top + window.scrollY;
        const markerPos = Math.min(Math.max((topPos / docH) * vh, 2), vh - 10);
        marker.style.top = markerPos + 'px';
        marker.addEventListener('click', () => { el.scrollIntoView({ behavior:'smooth', block:'center' }); });
        scrollMarkerContainer.appendChild(marker);
      });
    }

    // 모달
    function showModal(title, text, imageUrl=null){
      modalTitle.textContent = title || '';
      modalText.innerHTML = (text || '').toString().replace(/\n/g, '<br>');
      if (imageUrl) { modalImage.src = imageUrl; modalImage.style.display = 'block'; } else { modalImage.src=''; modalImage.style.display='none'; }
      modal.style.display = 'block';
      document.body.classList.add('modal-open');
      setTimeout(() => {
        if (selectionRange) {
          const sel = window.getSelection();
          sel.removeAllRanges();
          try { sel.addRange(selectionRange); } catch(e) {}
        }
      }, 60);
    }
    function showLoadingModal(isImage=false){
      modalTitle.innerHTML = `<span class="loader"></span> ${isImage ? '그림 생성 중...' : '설명 생성 중...'}`;
      modalText.textContent = '설명을 생성 중입니다. 잠시만 기다려 주세요...';
      modalImage.style.display = 'none';
      modal.style.display = 'block';
    }

    modal.addEventListener('wheel', (e) => {
      if (modal.style.display === 'block') e.stopPropagation();
    }, { passive: true });

    function getFullBibleText(){
      const tmp = document.createElement('div');
      tmp.innerHTML = originalText;
      return tmp.textContent.replace(/\s+/g,' ').trim();
    }

    // Generative API 호출
    async function callGenerativeAPI(modalTitleText, prompt){
      const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-05-20:generateContent?key=${apiKey}`;
      const payload = { contents: [ { parts: [ { text: prompt } ] } ] };

      let retryCount = 0; const maxRetries = 3;
      let response = null;
      while (retryCount < maxRetries) {
        try {
          response = await fetch(apiUrl, {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify(payload)
          });
          if (response.ok) break;
          if (response.status === 429) {
            retryCount++;
            const delay = Math.pow(2, retryCount)*1000 + Math.random()*1000;
            await new Promise(r=>setTimeout(r, delay));
          } else throw new Error(`API Error: ${response.status} ${response.statusText}`);
        } catch (err) {
          console.error('API call failed:', err);
          showModal("오류 발생", "API 호출 중 오류가 발생했습니다. 다시 시도해 주세요.");
          return;
        }
      }
      if (!response || !response.ok) { showModal("오류", "설명을 불러오는 데 실패했습니다. 잠시 후 다시 시도해 주세요."); return; }

      try {
        const data = await response.json();
        const content = data?.candidates?.[0]?.content?.parts?.[0]?.text || "응답을 가져오지 못했습니다.";
        showModal(modalTitleText, content);
      } catch (err) {
        console.error('Error processing response:', err);
        showModal("오류", "응답을 처리하는 중 오류가 발생했습니다.");
      }
    }

    async function fetchExplanation(promptText, type){
      let prompt;
      if (type === 'simple') {
        prompt = `[역할] 성경 주석가.
[작업] 선택한 용어/구절을 350–500자 한국어로 간결 설명.
[유형 규칙]
- 지명: 위치·시대·관련 사건
- 인물: 이름의 뜻·역할·연관 지명
- 제사/성물: 용도·상징적 의미
- 동·식물·광물: 상징성
필요 시 대비/유사 2–12가지만 간단히. (이름↔지명 직접 연결이 있으면 함께 언급)
[금지] 장황함·추측·인용.
[입력] "${promptText}"`;
      } else {
        prompt = `[역할] 성경 주석가.
[작업] 선택 구절을 2,500–3,500자 한국어 해설로 심화 분석.
[구성] 개요 → 배경(역사·지리·문화) → 본문 주제·핵심 논지 → 핵심 단어/도상 해석
→ 인물·사건·장소의 기능 → 성경 전체 맥락과의 연결(언약/교리, 유사·대조 2–12가지)
→ (선택) 3–6행 표로 요점 정리.
[규칙] 본문 근거 중심, 난해한 부분은 간명히, 과도한 인용/주석어/반복 금지, 분량 준수.
[긴 입력 시] 절/단락 단위로 요약 후 통합(최종 분량 준수).
[입력] "${promptText}"`;
      }
      showLoadingModal(false);
      await callGenerativeAPI('구절 설명', prompt);
    }

    async function fetchSummary(fullText, type){
      let prompt;
      if (type === 'simple') {
        prompt = `[역할] 성경 주석가.
[작업] 입력된 성경 본문 전체를 450–650자 한국어 한 단락으로 간결 요약.
[중점] 핵심 주제·메시지, 주요 사건 흐름, 하나님 행위/인간 반응. 배경은 한두 문장만. 삶 적용 2–3문장 추가.
[금지] 장황함·추측·인용·소제목·서론/결론 문구. 분량 엄수.
[긴 입력 시] 장 단위로 요약→최종 450–650자로 통합.
[입력] "${fullText}"`;
      } else {
        prompt = `[역할] 성경 주석가.
[작업] 입력 본문을 3,500–5,000자 한국어 해설로 정리.
[구성] 1) 개요  2) 배경(역사·지리·문화)  3) 핵심 주제/신학적 의미
4) 인물·사건·장소의 역할  5) 성경 전체 맥락과 연결(필요 시 유사/대조 2–12가지)
6) (선택) 3–12행 표로 핵심 정리.  7) 결론  8) 삶 적용 4–5문장.
[규칙] 사실 기반, 과장/추측/설교체 금지, 불필요한 반복 금지, 분량 준수.
[긴 입력 시] 장 단위로 개요→통합(최종 분량 준수).
[입력] "${fullText}"`;
      }
      showLoadingModal(false);
      await callGenerativeAPI('본문 요약', prompt);
    }

    function updateSpeed(){ audio.playbackRate = currentSpeed; speedDisplay.textContent = currentSpeed.toFixed(1) + 'x'; }
    function updateFontSizeDisplay(){ const cur = parseFloat(getComputedStyle(bibleTextEl).fontSize); fontSizeEl.textContent = Math.round(cur); }

    // 토글 버튼 로직
    const progressContainer = document.querySelector('.progress-container');
    const speedControls = document.querySelector('.speed-controls');
    const volumeControl = document.querySelector('.volume-control');
    const showProgressBtn = document.getElementById('show-progress');
    const showSpeedBtn = document.getElementById('show-speed');
    const showVolumeBtn = document.getElementById('show-volume');
    let hideTimeout;
    function showOnly(target) {
      progressContainer.style.display = "none";
      speedControls.style.display = "none";
      volumeControl.style.display = "none";
      target.style.display = "flex";
      if (hideTimeout) clearTimeout(hideTimeout);
      hideTimeout = setTimeout(() => { target.style.display = "none"; }, 10000);
    }
    showProgressBtn.addEventListener('click', () => showOnly(progressContainer));
    showSpeedBtn.addEventListener('click', () => showOnly(speedControls));
    showVolumeBtn.addEventListener('click', () => showOnly(volumeControl));

    // ===== 기도문 팝업 제어 =====
  function initPrayerToast(){
  const toast = document.getElementById('prayerToast');
  const closeBtn = document.getElementById('prayerCloseBtn');
  const amenBtn = document.getElementById('prayerAmen');
  const readBtn = document.getElementById('prayerReadAlone');

  const isSiteModalOpen = () => document.body.classList.contains('modal-open');

  function openToast(){
    if (!toast) return;
    if (isSiteModalOpen()) return;            // 사이트 모달이 열려 있으면 숨김
    toast.style.display = 'block';
    document.getElementById('prayerBody')?.focus({ preventScroll:true });
  }
  function closeToast(){
    if (!toast) return;
    toast.style.display = 'none';             // 저장/기억 없음 → 다음 방문 시 다시 표시
  }

  // 페이지 로드 시 항상 표시 (약간 지연)
  setTimeout(openToast, 700);

  // 버튼 동작: 전부 단순 닫기
  closeBtn?.addEventListener('click', () => closeToast());
  amenBtn?.addEventListener('click', () => closeToast());
  readBtn?.addEventListener('click', () => closeToast());

  // 사이트 모달 열림/닫힘에 따라 토스트 표시/숨김
  const observer = new MutationObserver(() => {
    if (isSiteModalOpen()) {
      toast.style.display = 'none';
    } else {
      // 모달이 닫히면 다시 보여줌(사용자가 이미 닫았더라도 새로고침/재방문 시 다시 뜨게 하려면 유지)
      if (toast.style.display !== 'block') toast.style.display = 'block';
    }
  });
  observer.observe(document.body, { attributes:true, attributeFilter:['class'] });
}
  </script>
</body>
</html>
