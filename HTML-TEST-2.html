<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
  <title>í†µí°í†µë…-78ì¼ì°¨</title>
  <link rel="apple-touch-icon" type="image/png" href="https://i.postimg.cc/Qtnq0gFJ/Ezra-icon.png">
  <meta name="apple-mobile-web-app-title" content="í†µí°í†µë…">
  <link rel="shortcut icon" type="image/png" href="https://i.postimg.cc/Qtnq0gFJ/Ezra-icon.png">
  <link rel="mask-icon" type="image/png" href="https://i.postimg.cc/Qtnq0gFJ/Ezra-icon.png">

  <style>
    :root{
      --blue:#007BFF;
      --pink:#ff99cc;
      --shadow: 0 2px 5px rgba(0,0,0,0.2);
    }
    * { box-sizing: border-box; -webkit-tap-highlight-color: transparent; }
    html,body { height:100%; margin:0; padding:0; font-family: Arial, sans-serif; -webkit-font-smoothing:antialiased; }
    body { padding-top:150px; background:#fdfdf8; color:#222; }

    a:link { color:#0000FF; } a:visited{ color:#660099; }

    /* ìƒë‹¨ ê³ ì • í…Œì´ë¸” */
    .top-fixed-table {
      position: fixed; top:0; left:0; width:100%; background:transparent; border-bottom:none; z-index:100;
      table-layout: fixed; padding:10px 0; box-sizing:border-box;
    }
    .search-cell { text-align:left; padding-left:10px; vertical-align:top; width:30%; }
    .search-cell input[type="text"]{ width:50%; font-size:12pt; }
    .search-cell input[type="submit"], .search-cell input[type="reset"]{ font-size:10pt; padding:5px 8px; height:auto; }

    .audio-cell { text-align:right; padding-right:50px; vertical-align:top; width:30%; }
    #custom-audio-player { display:flex; flex-direction:column; align-items:center; }
    .player-controls{ display:flex; align-items:center; justify-content:center; gap:10px; margin-bottom:5px; }
    .time-display{ font-size:16px; font-weight:bold; color:black; margin:0 5px; min-width:44px; text-align:center; }

    .progress-container { display: flex; align-items: center; justify-content: center; gap: 6px; margin: 6px 0; }
    .skip-btn { width: 48px; height: 28px; font-size: 13px; cursor: pointer; border: 1px solid #ccc; border-radius: 5px; background: #fff; }
    .skip-btn:hover { background: #e0e0e0; }

    .control-btn{ width:28px; height:28px; font-size:14px; cursor:pointer; border:1px solid #ccc; background:#fff; border-radius:5px; }
    .control-btn:hover{ background:#e0e0e0; }
    #play-btn{ background:#d1f3d4; } #pause-btn{ background:#fff6d6; } #stop-btn{ background:#fddddd; }

    .speed-controls{ display:flex; align-items:center; justify-content:center; gap:5px; margin-bottom:5px; }
    .speed-btn{ width:21px; height:21px; font-size:10px; cursor:pointer; border:1px solid #ccc; border-radius:3px; background:#fff; }
    .speed-btn:hover{ background:#e0e0e0; }
    .speed-display{ font-weight:bold; color:var(--blue); width:50px; text-align:center; }

    .volume-control{ display:flex; align-items:center; justify-content:center; gap:5px; }
    input[type="range"]{ -webkit-appearance:none; width:160px; height:5px; background:#d3d3d3; outline:none; opacity:0.9; transition:opacity .2s; border-radius:3px;}
    input[type="range"]::-webkit-slider-thumb{ -webkit-appearance:none; appearance:none; width:15px; height:15px; background:var(--blue); border-radius:50%; cursor:pointer; }

    /* progress */
    #progress-bar { width: 60%; max-width: 100px; }

    /* volume */
    #volume-slider { width: 80%; max-width: 120px; }

    /* ì„¤ëª… ë²„íŠ¼ ì»¨í…Œì´ë„ˆ (í”Œë¡œíŒ…) */
    .explanation-button-container{ position:fixed; top:100px; left:30%;  transform:translateX(-50%);  padding:0 10px; transition:top .2s ease,left .2s ease,transform .2s ease; }
    .explanation-button-wrapper{ position:relative; display:inline-block; cursor:pointer; }
    .explanation-icon-button{ width:50px; height:50px; border-radius:50%; background:var(--pink); box-shadow:var(--shadow); border:none; display:flex; align-items:center; justify-content:center; font-size:40px; z-index:2; }
    .explanation-sub-buttons{ display:flex; flex-direction:column; gap:10px; opacity:0; visibility:hidden; transition:opacity .3s ease,visibility .3s ease, transform .3s ease; position:absolute; left:45%; transform:translateX(-50%) translateY(25px); z-index:1; }
    .explanation-button-wrapper.active .explanation-sub-buttons{ opacity:1; visibility:visible; transform:translateX(-50%) translateY(0); }
    .explanation-sub-button{ padding:5px 10px; font-size:18px; background:var(--pink); border:none; border-radius:5px; cursor:pointer; box-shadow:var(--shadow); white-space:nowrap; }
    .explanation-sub-button:hover{ transform:scale(1.03); }

    /* í°íŠ¸ ì‚¬ì´ì¦ˆ ë° ë³¸ë¬¸ ìš”ì•½ ë²„íŠ¼ (í•­ìƒ í‘œì‹œ) */
    .container{ width:100%; text-align:center; margin-top:8px; }
    .font-size-label{ font-size:20px !important; margin-right:12px; font-weight:bold; color:blue; display:inline-block; vertical-align:middle; }
    #font-size{ font-size:20px !important; margin:0 8px; font-weight:bold; color:red; display:inline-block; vertical-align:middle; width:48px; }
    #down,#up{ width:27px; height:27px; font-size:20px; color:red; background:#fff; border:1px solid #ccc; border-radius:5px; cursor:pointer; display:inline-block; vertical-align:middle; }

    .summary-buttons { display:inline-block; margin-left:16px; vertical-align:middle; }
    .summary-btn { padding:6px 10px; margin-left:6px; font-size:14px; border-radius:6px; border:1px solid #ccc; background:#fff; cursor:pointer; }
    .summary-btn:hover{ background:#f2f2f2; }

    /* ì¼ì°¨ ë‚´ë¹„ê²Œì´ì…˜ */
.day-nav{
  display:flex; align-items:center; justify-content:flex-start; gap:10px;
  margin: 10px 15px 0;
}
.day-nav .day-btn{
  text-decoration:none; background:#fff; color:#333;
  padding:6px 12px; border:1px solid #ccc; border-radius:8px;
  box-shadow: var(--shadow); font-weight:700; line-height:1;
}
.day-nav .day-btn:hover{ background:#f7f7f7; }
.day-nav .day-title{
  font-weight:900; letter-spacing:.2px; color:#222;
}
@media (max-width:480px){
  .day-nav .day-title{ font-size:16px; }
  .day-nav .day-btn{ padding:6px 10px; font-size:14px; }
}

    /* ë³¸ë¬¸ */
    h2{ padding:0; text-align:left; margin-left:15px; margin-right:15px; }
    p{ display:inline-block; }

    /* ë³¸ë¬¸ ì¤‘ì•™ ë‘ ì¤„ ê°•ì¡° */
    .highlight {
      background-color:#fdf6e3;
      -webkit-text-stroke:0.2px #76d6c6;
      border-left:4px solid #c0a060;
      font-weight:bold;
      box-shadow:0 0 8px rgba(0,0,0,0.1);
      padding:2px 6px;
    }

    /* ğŸ“– êµ¬ì ˆì„¤ëª… ë²„íŠ¼: ê¸°ë³¸ í‘œì‹œ */
    #explanation-button-container{
      position:fixed; z-index:150; display:block;
    }
    body.modal-open #explanation-button-container{ display:none !important; }

    /* ëª¨ë‹¬ */
    .modal{
      display:none; position:fixed; z-index:200; inset:0; width:100%; height:100%;
      background:rgba(0,0,0,0.4);
    }
    .modal-content{
      background:#fff; margin:12% auto; padding:20px; border-radius:10px; width:80%; max-width:900px;
      max-height:80vh; overflow:auto; overscroll-behavior:contain;
      box-shadow:0 4px 8px rgba(0,0,0,0.2); text-align:left; line-height:1.6; word-break:keep-all; white-space:pre-wrap;
    }
    body.modal-open{ overflow:hidden; }

    /* ë¡œë”© ìŠ¤í”¼ë„ˆ */
    .loader{ border:4px solid #f3f3f3; border-top:4px solid #3498db; border-radius:50%; width:20px; height:20px; animation:spin 1s linear infinite; display:inline-block; vertical-align:middle; margin-right:8px; }
    @keyframes spin{ 0%{transform:rotate(0deg);} 100%{transform:rotate(360deg);} }

    /* ê²€ìƒ‰ í•˜ì´ë¼ì´íŠ¸ & ìŠ¤í¬ë¡¤ ë§ˆì»¤ */
    .search-highlight{ background:yellow; color:#000; }
    .scroll-marker-container{ position:fixed; top:0; right:0; width:8px; height:100vh; z-index:99; pointer-events:none; }
    .scroll-marker{ position:absolute; right:0; width:8px; height:8px; background:red; border-radius:50%; box-shadow:0 0 5px rgba(255,0,0,0.7); cursor:pointer; pointer-events:auto; }
    .scroll-marker:hover{ transform:scale(1.5); transition:transform .2s ease; }

    /* ì„ íƒ ê´€ë ¨ (iOS) */
    #bible-text{ -webkit-user-select:text; user-select:text; -webkit-touch-callout:none; }

    /* ë°˜ì‘í˜• */
    @media (max-width:800px){
      .search-cell{ width:55%; } .audio-cell{ width:45%; } .search-cell input[type="text"]{ width:60%; } #progress-bar{ width:160px; }
    }
    @media (max-width:600px){
  /* ì¢Œ/ìš° ì¹¸ ë¹„ìœ¨ + ì˜¤ë¥¸ìª½ íŒ¨ë”© í™•ë³´ */
  .search-cell{ width:30%; }
  .audio-cell{ width:34%; padding-right:12px; } /* 8px â†’ 14px */

  /* ê²€ìƒ‰ì°½ì„ ë·°í¬íŠ¸ ê¸°ì¤€ìœ¼ë¡œ ë” ì¤„ì´ê¸° */
  .search-cell input[type="text"]{
    width:32vw;          /* 45vw â†’ 35vw */
    max-width:32vw;
    font-size:12pt;
  }
  /* ê²€ìƒ‰ ë²„íŠ¼ë“¤ë„ ì‚´ì§ ì»´íŒ©íŠ¸ */
  .search-cell input[type="submit"],
  .search-cell input[type="reset"]{
    padding:4px 6px;
    font-size:10pt;
  }

  /* ì˜¤ë””ì˜¤ ì»¨íŠ¸ë¡¤ì´ ëœ í¼ì§€ë„ë¡ */
  .player-controls{ gap:6px; }           /* 10px â†’ 6px */
  .time-display{
    font-size:14px;                       /* 16px â†’ 14px */
    min-width:56px;                       /* 44px â†’ 56px ë¡œ ê³ ì •í­ í™•ë³´ */
  }

  #progress-bar{ width:140px; }
  .explanation-sub-button{ font-size:16px; padding:6px 8px; }
  .explanation-icon-button{ width:46px; height:46px; font-size:34px; }
  .summary-btn{ padding:5px 8px; font-size:13px; }
}

    .toggle-buttons {
      display:flex; justify-content:center; gap:8px; margin-bottom:6px;
    }
    .toggle-buttons button {
      padding:4px 8px; font-size:13px; border:1px solid #ccc; border-radius:5px; background:#fff; cursor:pointer;
    }
    .toggle-buttons button:hover { background:#f0f0f0; }

    /* ============ ê¸°ë„ë¬¸ íŒì—… ============ */
    .prayer-toast {
      position: fixed; right: 18px; bottom: 18px; z-index: 190;
      width: 360px; max-width: calc(100vw - 24px);
      background: #ffffff; border: 1px solid #e9e6d8;
      border-radius: 14px; box-shadow: 0 10px 26px rgba(0,0,0,.18);
      overflow: hidden; transform: translateY(20px); opacity: 0;
      animation: prayerSlideUp .35s ease-out forwards; display:none;
      font-family: inherit;
    }
    @keyframes prayerSlideUp { to { transform: translateY(0); opacity: 1; } }

    .prayer-header {
      display:flex; align-items:center; justify-content:space-between;
      padding:10px 12px; background:#fff6dd; border-bottom:1px solid #f3e9c3;
    }
    .prayer-title { display:flex; align-items:center; gap:8px; font-weight:700; color:#8a6d1e; }
    .prayer-badge { background:#ffe9a8; color:#6b560f; font-size:12px; padding:2px 8px; border-radius:999px; }

    .prayer-close {
      border:0; background:transparent; font-size:20px; line-height:1; color:#7c7c7c;
      cursor:pointer; padding:2px 6px; border-radius:8px;
    }
    .prayer-close:hover { background: rgba(0,0,0,.05); }

    .prayer-body {
      padding:12px 14px 4px; color:#333; line-height:1.6; max-height:220px; overflow:auto;
    }
    .prayer-body h4 { margin:0 0 6px 0; font-size:15px; color:#444; }
    .prayer-body p { margin:0; white-space: pre-wrap; }

    .prayer-footer {
      display:flex; align-items:center; justify-content: space-between; gap:8px; padding:8px 12px 12px;
    }
    .prayer-actions { display:flex; gap:8px; }
    .prayer-btn {
      border:1px solid #e0dccc; background:#fff; color:#5a4d1b; padding:6px 10px; border-radius:10px; cursor:pointer; font-size:13px;
    }
    .prayer-btn:hover { background:#faf7ea; }
    .prayer-btn-primary { background:#f9d86b; border-color:#e5c458; color:#3e320e; font-weight:700; }
    .prayer-btn-primary:hover { filter: brightness(.98); }
    .prayer-checkbox { display:flex; align-items:center; gap:6px; color:#555; font-size:13px; }

    @media (max-width: 480px) {
      .prayer-toast { left:12px; right:12px; bottom:12px; width:auto; }
      .prayer-body { max-height:40vh; }
    }
  </style>
</head>
<body>
  <!-- ìƒë‹¨: ê²€ìƒ‰ + ì˜¤ë””ì˜¤ -->
  <table class="top-fixed-table" id="main-table" cellpadding="0" cellspacing="0">
    <tr>
      <td class="search-cell">
        <form name="f1" action="">
          <input type="reset" name="b2" value="X">
          <input type="text" placeholder="ê²€ìƒ‰ì–´ ì…ë ¥" name="t1" value="">
          <input type="submit" name="b1" value="ê²€ìƒ‰">
          <div id="search-count-container">
            <span id="search-count"></span>
            <button type="button" id="next-location-btn" style="display:none;">ë‹¤ìŒ ìœ„ì¹˜</button>
          </div>
        </form>
      </td>

      <td class="audio-cell">
        <div id="custom-audio-player" role="region" aria-label="ì˜¤ë””ì˜¤ í”Œë ˆì´ì–´">
    <!-- âœ” ì˜¤ë””ì˜¤: ì†ŒìŠ¤ëŠ” JSì—ì„œ ì£¼ì…í•´ ìš°ì„ ìˆœìœ„ë¥¼ ë™ì ìœ¼ë¡œ ì œì–´ -->
    <audio id="audio-file" preload="metadata" playsinline>
      ë¸Œë¼ìš°ì €ê°€ ì˜¤ë””ì˜¤ ìš”ì†Œë¥¼ ì§€ì›í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.
    </audio>

          <div class="player-controls">
            <strong><span style="font-size:16px; background-color:#fcfcfc;" id="current-time" class="time-display">0:00</span></strong>
            <button id="play-btn" class="control-btn" aria-label="ì¬ìƒ">â–¶</button>
            <button id="pause-btn" class="control-btn" aria-label="ì¼ì‹œì •ì§€">â¸</button>
            <button id="stop-btn" class="control-btn" aria-label="ì •ì§€">â– </button>
            <strong><span style="font-size:16px; background-color:#fcfcfc;" id="remaining-time" class="time-display">0:00</span></strong>
          </div>

          <div class="toggle-buttons">
            <button id="show-progress">ì¬ìƒ ìœ„ì¹˜</button>
            <button id="show-speed">ì¬ìƒ ì†ë„</button>
            <button id="show-volume">ë³¼ë¥¨ ì¡°ì ˆ</button>
          </div>

          <div class="progress-container" style="display:none;">
            <button id="rewind-10" class="skip-btn">âª10s</button>
            <input type="range" id="progress-bar" min="0" max="100" value="0" step="0.01" aria-label="ì¬ìƒ ìœ„ì¹˜">
            <button id="forward-10" class="skip-btn">10sâ©</button>
          </div>

          <div class="speed-controls" style="display:none;">
            <button id="speed-down-02" class="speed-btn">&laquo;</button>
            <button id="speed-down-01" class="speed-btn">&lt;</button>
            <span id="speed-display" class="speed-display">1.0x</span>
            <button id="speed-up-01" class="speed-btn">&gt;</button>
            <button id="speed-up-02" class="speed-btn">&raquo;</button>
            <button id="speed-reset">1.0</button>
          </div>

          <div class="volume-control" style="display:none;">
            <span style="font-size:14px;">ë³¼ë¥¨</span>
            <button id="mute-btn">ğŸ”Š</button>
            <input type="range" id="volume-slider" min="0" max="1" step="0.01" value="1">
          </div>
        </div>
      </td>
    </tr>
  </table>

  <!-- í”Œë¡œíŒ… ì±… ë²„íŠ¼ (êµ¬ì ˆì„¤ëª… í† ê¸€) -->
  <div class="explanation-button-container" id="explanation-button-container">
    <div class="explanation-button-wrapper" id="explanation-button-wrapper">
      <button class="explanation-icon-button" id="explanation-icon-button" aria-label="êµ¬ì ˆì„¤ëª… ì—´ê¸°" title="ë‹¨ì–´ë‚˜ ë¬¸ì¥ì„ ì„ íƒí•˜ë©´ â€˜ê°„ë‹¨ì„¤ëª…â€™ ë˜ëŠ” â€˜ìƒì„¸ì„¤ëª…â€™ì„ ë³¼ ìˆ˜ ìˆì–´ìš”.">
        <span>ğŸ“–</span>
      </button>
      <div class="explanation-sub-buttons" id="explanation-sub-buttons" role="menu">
        <button class="explanation-sub-button" id="detailed-explanation-button">ìƒì„¸ êµ¬ì ˆì„¤ëª…</button>
        <button class="explanation-sub-button" id="simple-explanation-button">ê°„ë‹¨ êµ¬ì ˆì„¤ëª…</button>
      </div>
    </div>
  </div>

  <!-- í°íŠ¸ í¬ê¸° + ë³¸ë¬¸ ìš”ì•½ ë²„íŠ¼ -->
  <div class="container" style="margin-top:6px;">
    <p class="font-size-label">Font Size</p>
    <button id="down">-</button>
    <p id="font-size">20</p>
    <button id="up">+</button>

    <span class="summary-buttons" aria-hidden="false">
      <button class="summary-btn" id="summary-simple-main">ë³¸ë¬¸ìš”ì•½ ê°„ë‹¨</button>
      <button class="summary-btn" id="summary-detailed-main">ë³¸ë¬¸ìš”ì•½ ìƒì„¸</button>
    </span>
  </div>

  <!-- ë³¸ë¬¸ -->
  <div>
    <h2 id="bible-text" style="line-height:1.2em;margin-left:15px;margin-right:15px;font-style:normal;font-weight:normal;color:black;font-size:20px;word-break:break-all;">
    <strong>
<!-- ì¼ì°¨ ë‚´ë¹„ê²Œì´ì…˜ -->
<nav class="day-nav" aria-label="ì¼ì°¨ ì´ë™">
  <a class="day-btn" href="https://seagwang1124.github.io/90html/77%EC%9D%BC%EC%B0%A8.html" aria-label="í†µë… 77ì¼ì°¨ë¡œ ì´ë™">â‰ª</a>
  <span class="day-title"> í†µë… 78ì¼ì°¨ </span>
  <a class="day-btn" href="https://seagwang1124.github.io/90html/79%EC%9D%BC%EC%B0%A8.html" aria-label="í†µë… 79ì¼ì°¨ë¡œ ì´ë™">â‰«</a>
  <a class="day-btn" href="https://seagwang1124.github.io/90html" aria-label="í†µë… ëª©ë¡ìœ¼ë¡œ ì´ë™">í†µë… ëª©ë¡</a>
</nav>
      
<br>ë²”ìœ„: ì•½ 1ì¥- 5ì¥/ í–‰ 13ì¥- 15ì¥ 35ì ˆ/ ê°ˆ 1ì¥- 6ì¥</br>
<br>&nbsp;</br>

</strong>
<strong><br><font color="#4682b4">ì•¼ë³´ê³ ì„œ 1ì¥- 5ì¥</font></br></strong>
<strong><br><font color="#4682b4">ì•¼ë³´ê³ ì„œ 1 ì¥</font></br></strong>
<br><i><font color="#808080">*ì¸ì‚¬*</font></i></br>
<br>1 í•˜ë‚˜ë‹˜ê³¼ ì£¼ ì˜ˆìˆ˜ ê·¸ë¦¬ìŠ¤ë„ì˜ ì¢… ì•¼ê³ ë³´ëŠ” í©ì–´ì ¸ ìˆëŠ” ì—´ë‘ ì§€íŒŒì—ê²Œ ë¬¸ì•ˆí•˜ë…¸ë¼</br>
<br><i><font color="#808080">*ë¯¿ìŒê³¼ ì§€í˜œ*</font></i></br>
<br>2 ë‚´ í˜•ì œë“¤ì•„ ë„ˆí¬ê°€ ì—¬ëŸ¬ ê°€ì§€ ì‹œí—˜ì„ ë‹¹í•˜ê±°ë“  ì˜¨ì „íˆ ê¸°ì˜ê²Œ ì—¬ê¸°ë¼</br>
<br>3 ì´ëŠ” ë„ˆí¬ ë¯¿ìŒì˜ ì‹œë ¨ì´ ì¸ë‚´ë¥¼ ë§Œë“¤ì–´ ë‚´ëŠ” ì¤„ ë„ˆí¬ê°€ ì•ì´ë¼</br>
<br>4 ì¸ë‚´ë¥¼ ì˜¨ì „íˆ ì´ë£¨ë¼ ì´ëŠ” ë„ˆí¬ë¡œ ì˜¨ì „í•˜ê³  êµ¬ë¹„í•˜ì—¬ ì¡°ê¸ˆë„ ë¶€ì¡±í•¨ì´ ì—†ê²Œ í•˜ë ¤ í•¨ì´ë¼</br>
<br>5 ë„ˆí¬ ì¤‘ì— ëˆ„êµ¬ë“ ì§€ ì§€í˜œê°€ ë¶€ì¡±í•˜ê±°ë“  ëª¨ë“  ì‚¬ëŒì—ê²Œ í›„íˆ ì£¼ì‹œê³  ê¾¸ì§–ì§€ ì•„ë‹ˆí•˜ì‹œëŠ” í•˜ë‚˜ë‹˜ê»˜ êµ¬í•˜ë¼ ê·¸ë¦¬í•˜ë©´ ì£¼ì‹œë¦¬ë¼</br>
<br>6 ì˜¤ì§ ë¯¿ìŒìœ¼ë¡œ êµ¬í•˜ê³  ì¡°ê¸ˆë„ ì˜ì‹¬í•˜ì§€ ë§ë¼ ì˜ì‹¬í•˜ëŠ” ìëŠ” ë§ˆì¹˜ ë°”ëŒì— ë°€ë ¤ ìš”ë™í•˜ëŠ” ë°”ë‹¤ ë¬¼ê²° ê°™ìœ¼ë‹ˆ</br>
<br>7 ì´ëŸ° ì‚¬ëŒì€ ë¬´ì—‡ì´ë“ ì§€ ì£¼ê»˜ ì–»ê¸°ë¥¼ ìƒê°í•˜ì§€ ë§ë¼</br>
<br>8 ë‘ ë§ˆìŒì„ í’ˆì–´ ëª¨ë“  ì¼ì— ì •í•¨ì´ ì—†ëŠ” ìë¡œë‹¤</br>
<br><i><font color="#808080">*ë‚®ì€ í˜•ì œ, ë¶€í•œ ì*</font></i></br>
<br>9 ë‚®ì€ í˜•ì œëŠ” ìê¸°ì˜ ë†’ìŒì„ ìë‘í•˜ê³ </br>
<br>10 ë¶€í•œ ìëŠ” ìê¸°ì˜ ë‚®ì•„ì§ì„ ìë‘í• ì§€ë‹ˆ ì´ëŠ” ê·¸ê°€ í’€ì˜ ê½ƒê³¼ ê°™ì´ ì§€ë‚˜ê°ì´ë¼</br>
<br>11 í•´ê°€ ë‹ê³  ëœ¨ê±°ìš´ ë°”ëŒì´ ë¶ˆì–´ í’€ì„ ë§ë¦¬ë©´ ê½ƒì´ ë–¨ì–´ì ¸ ê·¸ ëª¨ì–‘ì˜ ì•„ë¦„ë‹¤ì›€ì´ ì—†ì–´ì§€ë‚˜ë‹ˆ ë¶€í•œ ìë„ ê·¸ í–‰í•˜ëŠ” ì¼ì— ì´ì™€ ê°™ì´ ì‡ ì”í•˜ë¦¬ë¼</br>
<br><i><font color="#808080">*ì‹œí—˜ì— ê²¬ë””ì–´ ë‚¸ ì*</font></i></br>
<br>12 ì‹œí—˜ì„ ì°¸ëŠ” ìëŠ” ë³µì´ ìˆë‚˜ë‹ˆ ì´ëŠ” ì‹œë ¨ì„ ê²¬ë””ì–´ ë‚¸ ìê°€ ì£¼ê»˜ì„œ ìê¸°ë¥¼ ì‚¬ë‘í•˜ëŠ” ìë“¤ì—ê²Œ ì•½ì†í•˜ì‹  ìƒëª…ì˜ ë©´ë¥˜ê´€ì„ ì–»ì„ ê²ƒì´ê¸° ë•Œë¬¸ì´ë¼</br>
<br>13 ì‚¬ëŒì´ ì‹œí—˜ì„ ë°›ì„ ë•Œì— ë‚´ê°€ í•˜ë‚˜ë‹˜ê»˜ ì‹œí—˜ì„ ë°›ëŠ”ë‹¤ í•˜ì§€ ë§ì§€ë‹ˆ í•˜ë‚˜ë‹˜ì€ ì•…ì—ê²Œ ì‹œí—˜ì„ ë°›ì§€ë„ ì•„ë‹ˆí•˜ì‹œê³  ì¹œíˆ ì•„ë¬´ë„ ì‹œí—˜í•˜ì§€ ì•„ë‹ˆí•˜ì‹œëŠë‹ˆë¼</br>
<br>14 ì˜¤ì§ ê° ì‚¬ëŒì´ ì‹œí—˜ì„ ë°›ëŠ” ê²ƒì€ ìê¸° ìš•ì‹¬ì— ëŒë ¤ ë¯¸í˜¹ë¨ì´ë‹ˆ</br>
<br>15 ìš•ì‹¬ì´ ì‰íƒœí•œì¦‰ ì£„ë¥¼ ë‚³ê³  ì£„ê°€ ì¥ì„±í•œì¦‰ ì‚¬ë§ì„ ë‚³ëŠë‹ˆë¼</br>
<br>16 ë‚´ ì‚¬ë‘í•˜ëŠ” í˜•ì œë“¤ì•„ ì†ì§€ ë§ë¼</br>
<br>17 ì˜¨ê°– ì¢‹ì€ ì€ì‚¬ì™€ ì˜¨ì „í•œ ì„ ë¬¼ì´ ë‹¤ ìœ„ë¡œë¶€í„° ë¹›ë“¤ì˜ ì•„ë²„ì§€ê»˜ë¡œë¶€í„° ë‚´ë ¤ì˜¤ë‚˜ë‹ˆ ê·¸ëŠ” ë³€í•¨ë„ ì—†ìœ¼ì‹œê³  íšŒì „í•˜ëŠ” ê·¸ë¦¼ìë„ ì—†ìœ¼ì‹œë‹ˆë¼</br>
<br>18 ê·¸ê°€ ê·¸ í”¼ì¡°ë¬¼ ì¤‘ì— ìš°ë¦¬ë¡œ í•œ ì²« ì—´ë§¤ê°€ ë˜ê²Œ í•˜ì‹œë ¤ê³  ìê¸°ì˜ ëœ»ì„ ë”°ë¼ ì§„ë¦¬ì˜ ë§ì”€ìœ¼ë¡œ ìš°ë¦¬ë¥¼ ë‚³ìœ¼ì…¨ëŠë‹ˆë¼</br>
<br><i><font color="#808080">*ë§ì”€ì„ ë“¤ìŒê³¼ í–‰í•¨*</font></i></br>
<br>19 ë‚´ ì‚¬ë‘í•˜ëŠ” í˜•ì œë“¤ì•„ ë„ˆí¬ê°€ ì•Œì§€ë‹ˆ ì‚¬ëŒë§ˆë‹¤ ë“£ê¸°ëŠ” ì†íˆ í•˜ê³  ë§í•˜ê¸°ëŠ” ë”ë”” í•˜ë©° ì„±ë‚´ê¸°ë„ ë”ë”” í•˜ë¼</br>
<br>20 ì‚¬ëŒì´ ì„±ë‚´ëŠ” ê²ƒì´ í•˜ë‚˜ë‹˜ì˜ ì˜ë¥¼ ì´ë£¨ì§€ ëª»í•¨ì´ë¼</br>
<br>21 ê·¸ëŸ¬ë¯€ë¡œ ëª¨ë“  ë”ëŸ¬ìš´ ê²ƒê³¼ ë„˜ì¹˜ëŠ” ì•…ì„ ë‚´ë²„ë¦¬ê³  ë„ˆí¬ ì˜í˜¼ì„ ëŠ¥íˆ êµ¬ì›í•  ë°” ë§ˆìŒì— ì‹¬ì–´ì§„ ë§ì”€ì„ ì˜¨ìœ í•¨ìœ¼ë¡œ ë°›ìœ¼ë¼</br>
<br>22 ë„ˆí¬ëŠ” ë§ì”€ì„ í–‰í•˜ëŠ” ìê°€ ë˜ê³  ë“£ê¸°ë§Œ í•˜ì—¬ ìì‹ ì„ ì†ì´ëŠ” ìê°€ ë˜ì§€ ë§ë¼</br>
<br>23 ëˆ„êµ¬ë“ ì§€ ë§ì”€ì„ ë“£ê³  í–‰í•˜ì§€ ì•„ë‹ˆí•˜ë©´ ê·¸ëŠ” ê±°ìš¸ë¡œ ìê¸°ì˜ ìƒê¸´ ì–¼êµ´ì„ ë³´ëŠ” ì‚¬ëŒê³¼ ê°™ì•„ì„œ</br>
<br>24 ì œ ìì‹ ì„ ë³´ê³  ê°€ì„œ ê·¸ ëª¨ìŠµì´ ì–´ë– í–ˆëŠ”ì§€ë¥¼ ê³§ ìŠì–´ë²„ë¦¬ê±°ë‹ˆì™€</br>
<br>25 ììœ ë¡­ê²Œ í•˜ëŠ” ì˜¨ì „í•œ ìœ¨ë²•ì„ ë“¤ì—¬ë‹¤ë³´ê³  ìˆëŠ” ìëŠ” ë“£ê³  ìŠì–´ë²„ë¦¬ëŠ” ìê°€ ì•„ë‹ˆìš” ì‹¤ì²œí•˜ëŠ” ìë‹ˆ ì´ ì‚¬ëŒì€ ê·¸ í–‰í•˜ëŠ” ì¼ì— ë³µì„ ë°›ìœ¼ë¦¬ë¼</br>
<br>26 ëˆ„êµ¬ë“ ì§€ ìŠ¤ìŠ¤ë¡œ ê²½ê±´í•˜ë‹¤ ìƒê°í•˜ë©° ìê¸° í˜€ë¥¼ ì¬ê°ˆ ë¬¼ë¦¬ì§€ ì•„ë‹ˆí•˜ê³  ìê¸° ë§ˆìŒì„ ì†ì´ë©´ ì´ ì‚¬ëŒì˜ ê²½ê±´ì€ í—›ê²ƒì´ë¼</br>
<br>27 í•˜ë‚˜ë‹˜ ì•„ë²„ì§€ ì•ì—ì„œ ì •ê²°í•˜ê³  ë”ëŸ¬ì›€ì´ ì—†ëŠ” ê²½ê±´ì€ ê³§ ê³ ì•„ì™€ ê³¼ë¶€ë¥¼ ê·¸ í™˜ë‚œì¤‘ì— ëŒë³´ê³  ë˜ ìê¸°ë¥¼ ì§€ì¼œ ì„¸ì†ì— ë¬¼ë“¤ì§€ ì•„ë‹ˆí•˜ëŠ” ê·¸ê²ƒì´ë‹ˆë¼</br>
<br>&nbsp;</br>
<strong><br><font color="#4682b4">ì•¼ë³´ê³ ì„œ 2 ì¥</font></br></strong>
<br><i><font color="#808080">*ì°¨ë³„í•˜ì—¬ ëŒ€í•˜ì§€ ë§ë¼*</font></i></br>
<br>1 ë‚´ í˜•ì œë“¤ì•„ ì˜ê´‘ì˜ ì£¼ ê³§ ìš°ë¦¬ ì£¼ ì˜ˆìˆ˜ ê·¸ë¦¬ìŠ¤ë„ì— ëŒ€í•œ ë¯¿ìŒì„ ë„ˆí¬ê°€ ê°€ì¡Œìœ¼ë‹ˆ ì‚¬ëŒì„ ì°¨ë³„í•˜ì—¬ ëŒ€í•˜ì§€ ë§ë¼</br>
<br>2 ë§Œì¼ ë„ˆí¬ íšŒë‹¹ì— ê¸ˆ ê°€ë½ì§€ë¥¼ ë¼ê³  ì•„ë¦„ë‹¤ìš´ ì˜·ì„ ì…ì€ ì‚¬ëŒì´ ë“¤ì–´ì˜¤ê³  ë˜ ë‚¨ë£¨í•œ ì˜·ì„ ì…ì€ ê°€ë‚œí•œ ì‚¬ëŒì´ ë“¤ì–´ì˜¬ ë•Œì—</br>
<br>3 ë„ˆí¬ê°€ ì•„ë¦„ë‹¤ìš´ ì˜·ì„ ì…ì€ ìë¥¼ ëˆˆì—¬ê²¨ ë³´ê³  ë§í•˜ë˜ ì—¬ê¸° ì¢‹ì€ ìë¦¬ì— ì•‰ìœ¼ì†Œì„œ í•˜ê³  ë˜ ê°€ë‚œí•œ ìì—ê²Œ ë§í•˜ë˜ ë„ˆëŠ” ê±°ê¸° ì„œ ìˆë“ ì§€ ë‚´ ë°œë“±ìƒ ì•„ë˜ì— ì•‰ìœ¼ë¼ í•˜ë©´</br>
<br>4 ë„ˆí¬ë¼ë¦¬ ì„œë¡œ ì°¨ë³„í•˜ë©° ì•…í•œ ìƒê°ìœ¼ë¡œ íŒë‹¨í•˜ëŠ” ìê°€ ë˜ëŠ” ê²ƒì´ ì•„ë‹ˆëƒ</br>
<br>5 ë‚´ ì‚¬ë‘í•˜ëŠ” í˜•ì œë“¤ì•„ ë“¤ì„ì§€ì–´ë‹¤ í•˜ë‚˜ë‹˜ì´ ì„¸ìƒì—ì„œ ê°€ë‚œí•œ ìë¥¼ íƒí•˜ì‚¬ ë¯¿ìŒì— ë¶€ìš”í•˜ê²Œ í•˜ì‹œê³  ë˜ ìê¸°ë¥¼ ì‚¬ë‘í•˜ëŠ” ìë“¤ì—ê²Œ ì•½ì†í•˜ì‹  ë‚˜ë¼ë¥¼ ìƒì†ìœ¼ë¡œ ë°›ê²Œ í•˜ì§€ ì•„ë‹ˆí•˜ì…¨ëŠëƒ</br>
<br>6 ë„ˆí¬ëŠ” ë„ë¦¬ì–´ ê°€ë‚œí•œ ìë¥¼ ì—…ì‹ ì—¬ê²¼ë„ë‹¤ ë¶€ìëŠ” ë„ˆí¬ë¥¼ ì–µì••í•˜ë©° ë²•ì •ìœ¼ë¡œ ëŒê³  ê°€ì§€ ì•„ë‹ˆí•˜ëŠëƒ</br>
<br>7 ê·¸ë“¤ì€ ë„ˆí¬ì—ê²Œ ëŒ€í•˜ì—¬ ì¼ì»«ëŠ” ë°” ê·¸ ì•„ë¦„ë‹¤ìš´ ì´ë¦„ì„ ë¹„ë°©í•˜ì§€ ì•„ë‹ˆí•˜ëŠëƒ</br>
<br>8 ë„ˆí¬ê°€ ë§Œì¼ ì„±ê²½ì— ê¸°ë¡ëœ ëŒ€ë¡œ ë„¤ ì´ì›ƒ ì‚¬ë‘í•˜ê¸°ë¥¼ ë„¤ ëª¸ê³¼ ê°™ì´ í•˜ë¼ í•˜ì‹  ìµœê³ ì˜ ë²•ì„ ì§€í‚¤ë©´ ì˜í•˜ëŠ” ê²ƒì´ê±°ë‹ˆì™€</br>
<br>9 ë§Œì¼ ë„ˆí¬ê°€ ì‚¬ëŒì„ ì°¨ë³„í•˜ì—¬ ëŒ€í•˜ë©´ ì£„ë¥¼ ì§“ëŠ” ê²ƒì´ë‹ˆ ìœ¨ë²•ì´ ë„ˆí¬ë¥¼ ë²”ë²•ìë¡œ ì •ì£„í•˜ë¦¬ë¼</br>
<br>10 ëˆ„êµ¬ë“ ì§€ ì˜¨ ìœ¨ë²•ì„ ì§€í‚¤ë‹¤ê°€ ê·¸ í•˜ë‚˜ë¥¼ ë²”í•˜ë©´ ëª¨ë‘ ë²”í•œ ìê°€ ë˜ë‚˜ë‹ˆ</br>
<br>11 ê°„ìŒí•˜ì§€ ë§ë¼ í•˜ì‹  ì´ê°€ ë˜í•œ ì‚´ì¸í•˜ì§€ ë§ë¼ í•˜ì…¨ì€ì¦‰ ë„¤ê°€ ë¹„ë¡ ê°„ìŒí•˜ì§€ ì•„ë‹ˆí•˜ì—¬ë„ ì‚´ì¸í•˜ë©´ ìœ¨ë²•ì„ ë²”í•œ ìê°€ ë˜ëŠë‹ˆë¼</br>
<br>12 ë„ˆí¬ëŠ” ììœ ì˜ ìœ¨ë²•ëŒ€ë¡œ ì‹¬íŒ ë°›ì„ ìì²˜ëŸ¼ ë§ë„ í•˜ê³  í–‰í•˜ê¸°ë„ í•˜ë¼</br>
<br>13 ê¸íœ¼ì„ í–‰í•˜ì§€ ì•„ë‹ˆí•˜ëŠ” ìì—ê²ŒëŠ” ê¸íœ¼ ì—†ëŠ” ì‹¬íŒì´ ìˆìœ¼ë¦¬ë¼ ê¸íœ¼ì€ ì‹¬íŒì„ ì´ê¸°ê³  ìë‘í•˜ëŠë‹ˆë¼</br>
<br><i><font color="#808080">*í–‰í•¨ì´ ì—†ëŠ” ë¯¿ìŒì€ ì£½ì€ ê²ƒ*</font></i></br>
<br>14 ë‚´ í˜•ì œë“¤ì•„ ë§Œì¼ ì‚¬ëŒì´ ë¯¿ìŒì´ ìˆë…¸ë¼ í•˜ê³  í–‰í•¨ì´ ì—†ìœ¼ë©´ ë¬´ìŠ¨ ìœ ìµì´ ìˆìœ¼ë¦¬ìš” ê·¸ ë¯¿ìŒì´ ëŠ¥íˆ ìê¸°ë¥¼ êµ¬ì›í•˜ê² ëŠëƒ</br>
<br>15 ë§Œì¼ í˜•ì œë‚˜ ìë§¤ê°€ í—ë²—ê³  ì¼ìš©í•  ì–‘ì‹ì´ ì—†ëŠ”ë°</br>
<br>16 ë„ˆí¬ ì¤‘ì— ëˆ„êµ¬ë“ ì§€ ê·¸ì—ê²Œ ì´ë¥´ë˜ í‰ì•ˆíˆ ê°€ë¼, ë¥ê²Œ í•˜ë¼, ë°°ë¶€ë¥´ê²Œ í•˜ë¼ í•˜ë©° ê·¸ ëª¸ì— ì“¸ ê²ƒì„ ì£¼ì§€ ì•„ë‹ˆí•˜ë©´ ë¬´ìŠ¨ ìœ ìµì´ ìˆìœ¼ë¦¬ìš”</br>
<br>17 ì´ì™€ ê°™ì´ í–‰í•¨ì´ ì—†ëŠ” ë¯¿ìŒì€ ê·¸ ìì²´ê°€ ì£½ì€ ê²ƒì´ë¼</br>
<br>18 ì–´ë–¤ ì‚¬ëŒì€ ë§í•˜ê¸°ë¥¼ ë„ˆëŠ” ë¯¿ìŒì´ ìˆê³  ë‚˜ëŠ” í–‰í•¨ì´ ìˆìœ¼ë‹ˆ í–‰í•¨ì´ ì—†ëŠ” ë„¤ ë¯¿ìŒì„ ë‚´ê²Œ ë³´ì´ë¼ ë‚˜ëŠ” í–‰í•¨ìœ¼ë¡œ ë‚´ ë¯¿ìŒì„ ë„¤ê²Œ ë³´ì´ë¦¬ë¼ í•˜ë¦¬ë¼</br>
<br>19 ë„¤ê°€ í•˜ë‚˜ë‹˜ì€ í•œ ë¶„ì´ì‹  ì¤„ì„ ë¯¿ëŠëƒ ì˜í•˜ëŠ”ë„ë‹¤ ê·€ì‹ ë“¤ë„ ë¯¿ê³  ë– ëŠë‹ˆë¼</br>
<br>20 ì•„ì•„ í—ˆíƒ„í•œ ì‚¬ëŒì•„ í–‰í•¨ì´ ì—†ëŠ” ë¯¿ìŒì´ í—›ê²ƒì¸ ì¤„ì„ ì•Œê³ ì í•˜ëŠëƒ</br>
<br>21 ìš°ë¦¬ ì¡°ìƒ ì•„ë¸Œë¼í•¨ì´ ê·¸ ì•„ë“¤ ì´ì‚­ì„ ì œë‹¨ì— ë°”ì¹  ë•Œì— í–‰í•¨ìœ¼ë¡œ ì˜ë¡­ë‹¤ í•˜ì‹¬ì„ ë°›ì€ ê²ƒì´ ì•„ë‹ˆëƒ</br>
<br>22 ë„¤ê°€ ë³´ê±°ë‹ˆì™€ ë¯¿ìŒì´ ê·¸ì˜ í–‰í•¨ê³¼ í•¨ê»˜ ì¼í•˜ê³  í–‰í•¨ìœ¼ë¡œ ë¯¿ìŒì´ ì˜¨ì „í•˜ê²Œ ë˜ì—ˆëŠë‹ˆë¼</br>
<br>23 ì´ì— ì„±ê²½ì— ì´ë¥¸ ë°” ì•„ë¸Œë¼í•¨ì´ í•˜ë‚˜ë‹˜ì„ ë¯¿ìœ¼ë‹ˆ ì´ê²ƒì„ ì˜ë¡œ ì—¬ê¸°ì…¨ë‹¤ëŠ” ë§ì”€ì´ ì´ë£¨ì–´ì¡Œê³  ê·¸ëŠ” í•˜ë‚˜ë‹˜ì˜ ë²—ì´ë¼ ì¹­í•¨ì„ ë°›ì•˜ë‚˜ë‹ˆ</br>
<br>24 ì´ë¡œ ë³´ê±´ëŒ€ ì‚¬ëŒì´ í–‰í•¨ìœ¼ë¡œ ì˜ë¡­ë‹¤ í•˜ì‹¬ì„ ë°›ê³  ë¯¿ìŒìœ¼ë¡œë§Œì€ ì•„ë‹ˆë‹ˆë¼</br>
<br>25 ë˜ ì´ì™€ ê°™ì´ ê¸°ìƒ ë¼í•©ì´ ì‚¬ìë“¤ì„ ì ‘ëŒ€í•˜ì—¬ ë‹¤ë¥¸ ê¸¸ë¡œ ë‚˜ê°€ê²Œ í•  ë•Œì— í–‰í•¨ìœ¼ë¡œ ì˜ë¡­ë‹¤ í•˜ì‹¬ì„ ë°›ì€ ê²ƒì´ ì•„ë‹ˆëƒ</br>
<br>26 ì˜í˜¼ ì—†ëŠ” ëª¸ì´ ì£½ì€ ê²ƒ ê°™ì´ í–‰í•¨ì´ ì—†ëŠ” ë¯¿ìŒì€ ì£½ì€ ê²ƒì´ë‹ˆë¼</br>
      <br>    78ì¼ì°¨ ë</br>
       <br>&nbsp;</br>
      <br>&nbsp;</br>
      <br>&nbsp;</br>
      <br>&nbsp;</br>
      <br>&nbsp;</br>
      <br>&nbsp;</br>
    </h2>
  </div>

  <!-- ëª¨ë‹¬ (ì„¤ëª…/ìš”ì•½ ì¶œë ¥) -->
  <div id="explanation-modal" class="modal" role="dialog" aria-modal="true" aria-labelledby="modal-title">
    <div class="modal-content">
      <span class="close-button" id="close-modal" aria-label="ë‹«ê¸°">&times;</span>
      <h3 id="modal-title">êµ¬ì ˆ ì„¤ëª…</h3>
      <img id="modal-image" src="" alt="ì„¤ëª… ê´€ë ¨ ì´ë¯¸ì§€" />
      <div id="modal-text">êµ¬ì ˆì„ ë“œë˜ê·¸í•˜ì—¬ ì„ íƒí•˜ê³  'êµ¬ì ˆì„¤ëª…' ë²„íŠ¼ì„ ëˆ„ë¥´ì„¸ìš”.</div>
    </div>
  </div>

  <div id="scroll-marker-container" class="scroll-marker-container" aria-hidden="true"></div>

  <!-- ê¸°ë„ë¬¸ íŒì—… -->
  <div id="prayerToast" class="prayer-toast" role="dialog" aria-modal="false" aria-label="ì„±ê²½ ì½ê¸° ì „ ê¸°ë„ë¬¸">
    <div class="prayer-header">
      <div class="prayer-title">
        <span>ğŸ™</span>
        <span>ê¸°ë„í•˜ê³  ì½ê¸°</span>
        <span class="prayer-badge">90ì¼ ì„±ê²½í†µí†¡</span>
      </div>
      <button class="prayer-close" id="prayerCloseBtn" aria-label="ê¸°ë„ë¬¸ ë‹«ê¸°">Ã—</button>
    </div>

    <div class="prayer-body" id="prayerBody" tabindex="0">
   <style>
  .cross-red {
    color: red;
    font-weight: 900;
    -webkit-text-stroke: 0.6px currentColor; /* ìœ¤ê³½ì„ ìœ¼ë¡œ ë‘ê»˜ ë³´ê°• */
    text-shadow:
      0 0 0 currentColor,         /* ê¸°ë³¸ ì±„ì›€ */
      0.02em 0 currentColor, -0.02em 0 currentColor,
      0 0.02em currentColor,  0 -0.02em currentColor; /* ê°€ì¥ìë¦¬ ë‘ê»ê²Œ */
  }
</style>

<h4>
  <p>ğŸ‘€<span class="cross-red">âœï¸</span> "í•˜ë‚˜ë‹˜ë‚˜ë¼ ê´€ì " <span class="cross-red">âœï¸</span>ğŸ‘€ìœ¼ë¡œ</p>
  <p>ì½ëŠ” ğŸ“–"90ì¼ í†µí°í†µë…"ğŸ“–</p>
</h4>
<p>â€” ğŸ‘¦ğŸ» ì„±ê²½ ì½ê¸° ì „ 1ë¶„ ê¸°ë„ ğŸ™â€”</p>
<p>ë‚´ ì‚¶ì˜ ì£¼ì¸ì´ ë˜ì‹œëŠ” í•˜ë‚˜ë‹˜, ì„±ê²½ì„ ì½ê²Œ í•˜ì‹œë‹ˆ ê°ì‚¬í•©ë‹ˆë‹¤. ì´ ì„±ê²½ì´ í•˜ë‚˜ë‹˜ì˜ ë§ì”€ì„ì„ ë¯¿ìŠµë‹ˆë‹¤. íŠ¹ë³„íˆ ë‚˜ì—ê²Œ ì£¼ì‹œëŠ” í•˜ë‚˜ë‹˜ì˜ ë§ì”€ì„ì„ ë¯¿ìŠµë‹ˆë‹¤. ì£¼ì‹œëŠ” ë§ì”€ì„ ë‚´ ê´€ì ìœ¼ë¡œ ì½ê²Œ í•˜ì§€ ë§ˆì‹œê³  í•˜ë‚˜ë‹˜ì˜ ê´€ì ìœ¼ë¡œ ì½ì–´ í•˜ë‚˜ë‹˜ì˜ ë§ˆìŒì„ ì•Œê²Œ í•˜ì‹œê³ , ê·¸ ë§ˆìŒì„ ë°›ì•„ ë‚˜ì˜ ì¤‘ì‹¬ì„±ì„ í•˜ë‚˜ë‹˜ì˜ ëœ» ì•ì— ë‚´ë ¤ë†“ê²Œ í•˜ì‹œê³  ìˆœì¢…í•˜ê²Œ í•˜ì‹œì–´ ë³€í™”ë˜ê²Œ í•˜ì˜µì†Œì„œ, ë§ì”€ì„ ì‚¶ìœ¼ë¡œ ì´ë£¨ëŠ” ì„±ê²½ ì½ê¸°ê°€ ë˜ê²Œ ì—­ì‚¬í•˜ì—¬ ì£¼ì‹œì˜µì†Œì„œ. ì˜ˆìˆ˜ë‹˜ì˜ ì´ë¦„ìœ¼ë¡œ ê¸°ë„í•©ë‹ˆë‹¤. ì•„ë©˜.</p>
    
    </div>

    <div class="prayer-footer">
  <div></div> <!-- ì¢Œì¸¡ ìë¦¬ ê· í˜•ìš©(ì„ íƒ) -->
  <div class="prayer-actions">
    <button class="prayer-btn" id="prayerReadAlone">ê¸°ë„ ë“œë ¸ìŠµë‹ˆë‹¤</button>
    <button class="prayer-btn prayer-btn-primary" id="prayerAmen">í™•ì¸</button>
  </div>
</div>

  <script>
    // ------------------------------
    // API KEY (ì‚¬ìš©ì ì…ë ¥ ìƒíƒœ)
    const apiKey = "AIzaSyDUlSQlSPgnrFBXpnUJMDoUO3s_KsaoFRU";
    // ------------------------------

    // DOM
    const bibleTextEl = document.getElementById('bible-text');
    const searchCountEl = document.getElementById('search-count');
    const nextLocationBtn = document.getElementById('next-location-btn');
    const scrollMarkerContainer = document.getElementById('scroll-marker-container');

    const explanationIconButton = document.getElementById('explanation-icon-button');
    const explanationButtonWrapper = document.getElementById('explanation-button-wrapper');
    const explanationSubButtons = document.getElementById('explanation-sub-buttons');
    const detailedExplanationButton = document.getElementById('detailed-explanation-button');
    const simpleExplanationButton = document.getElementById('simple-explanation-button');

    const summarySimpleMain = document.getElementById('summary-simple-main');
    const summaryDetailedMain = document.getElementById('summary-detailed-main');

    const modal = document.getElementById('explanation-modal');
    const closeModalButton = document.getElementById('close-modal');
    const modalTitle = document.getElementById('modal-title');
    const modalImage = document.getElementById('modal-image');
    const modalText = document.getElementById('modal-text');

    const audio = document.getElementById('audio-file');
    const playBtn = document.getElementById('play-btn');
    const pauseBtn = document.getElementById('pause-btn');
    const stopBtn = document.getElementById('stop-btn');
    const progressBar = document.getElementById('progress-bar');
    const rewindBtn = document.getElementById('rewind-10');
    const forwardBtn = document.getElementById('forward-10');
    const speedDisplay = document.getElementById('speed-display');
    const speedDown02Btn = document.getElementById('speed-down-02');
    const speedDown01Btn = document.getElementById('speed-down-01');
    const speedUp01Btn = document.getElementById('speed-up-01');
    const speedUp02Btn = document.getElementById('speed-up-02');
    const speedResetBtn = document.getElementById('speed-reset');
    const volumeSlider = document.getElementById('volume-slider');
    const muteBtn = document.getElementById('mute-btn');
    const currentTimeEl = document.getElementById('current-time');
    const remainingTimeEl = document.getElementById('remaining-time');

    const upBtn = document.getElementById('up');
    const downBtn = document.getElementById('down');
    const fontSizeEl = document.getElementById('font-size');

    // ìƒíƒœ
    let originalText = "";
    let selectedVerse = "";
    let selectionRange = null;
    let foundSentences = [];
    let currentSearchIndex = -1;
    let currentSpeed = 1.0;
    let isMuted = false;
    let selectionDebounce = null;

    function escapeRegExp(s) { return s.replace(/[.*+?^${}()|[\]\\]/g, '\\$&'); }
    function formatTime(sec) { if (!isFinite(sec) || sec < 0) return '0:00'; const m = Math.floor(sec/60); const s = Math.floor(sec%60); return `${m}:${String(s).padStart(2,'0')}`; }

    window.addEventListener('DOMContentLoaded', () => {
      originalText = bibleTextEl.innerHTML;
      updateFontSizeDisplay();
      updateSpeed();

      // ë³¸ë¬¸ ì¤„ ë‹¨ìœ„ ë¶„ë¦¬
      const lines = originalText.split(/<br\s*\/?>/i);
      bibleTextEl.innerHTML = lines.map(line => {
        if (line.trim() === "") return "<br>";
        return `<span class="line">${line}</span><br>`;
      }).join("");
      const lineElements = document.querySelectorAll("#bible-text .line");

     // ìŠ¤í¬ë¡¤ ì‹œ ì¤‘ì•™ ê°•ì¡° ì¤„ ìˆ˜(2ì¤„/3ì¤„) ë°˜ì‘í˜•ìœ¼ë¡œ ì²˜ë¦¬
function highlightCenterLines() {
  const viewportCenter = window.innerHeight / 2 + window.scrollY;
  const linesToHighlight = window.innerWidth >= 768 ? 3 : 2;

  let closestIndex = -1, minDistance = Infinity;
  lineElements.forEach((line, i) => {
    const rect = line.getBoundingClientRect();
    const lineCenter = rect.top + window.scrollY + rect.height / 2;
    const distance = Math.abs(lineCenter - viewportCenter);
    if (distance < minDistance) { minDistance = distance; closestIndex = i; }
  });

  lineElements.forEach(line => line.classList.remove("highlight"));
  if (closestIndex < 0) return;

  const indices = linesToHighlight === 3
    ? [closestIndex - 1, closestIndex, closestIndex + 1]
    : [closestIndex, closestIndex + 1];

  indices.forEach(idx => {
    if (idx >= 0 && idx < lineElements.length) {
      lineElements[idx].classList.add("highlight");
    }
  });
}

// rAF ìŠ¤ë¡œí‹€
let ticking = false;
function onScrollOrResize() {
  if (ticking) return;
  ticking = true;
  requestAnimationFrame(() => {
    highlightCenterLines();
    ticking = false;
  });
}

// ì´ë²¤íŠ¸ ë“±ë¡
window.addEventListener("scroll", onScrollOrResize, { passive: true });
window.addEventListener("resize", onScrollOrResize);
// (ì˜µì…˜) ê¸°ê¸° íšŒì „ ì´ë²¤íŠ¸ë„ ë¬¶ì–´ì„œ ì²˜ë¦¬í•˜ë©´ ì¢‹ì•„ìš”
window.addEventListener("orientationchange", onScrollOrResize);

// ìµœì´ˆ 1íšŒ ì ìš©
highlightCenterLines();

      // PCì—ì„œ 2ì¤„ì”© ë¶€ë“œëŸ½ê²Œ ìŠ¤í¬ë¡¤
      window.addEventListener("wheel", function(e) {
        if (e.ctrlKey) return;
        const modal = document.getElementById('explanation-modal');
        if (modal && modal.style.display === 'block' && modal.contains(e.target)) return;
        const firstLine = document.querySelector("#bible-text .line");
        if (!firstLine) return;
        const lineHeight = firstLine.getBoundingClientRect().height;
        e.preventDefault();
        window.scrollBy({ top: e.deltaY > 0 ? lineHeight * 2 : -lineHeight * 2, behavior: "smooth" });
      }, { passive: false });

      // í°íŠ¸ ë²„íŠ¼
      upBtn.addEventListener('click', () => {
        const current = parseFloat(getComputedStyle(bibleTextEl).fontSize);
        if (current + 4 <= 80) { bibleTextEl.style.fontSize = (current + 4) + 'px'; updateFontSizeDisplay(); }
      });
      downBtn.addEventListener('click', () => {
        const current = parseFloat(getComputedStyle(bibleTextEl).fontSize);
        if (current - 4 >= 12) { bibleTextEl.style.fontSize = (current - 4) + 'px'; updateFontSizeDisplay(); }
      });

      // ê²€ìƒ‰
      const searchForm = document.forms.f1;
      searchForm.addEventListener('submit', (e) => { e.preventDefault(); findString(searchForm.t1.value); });
      searchForm.b2.addEventListener('click', () => { clearHighlight(); });
      nextLocationBtn.addEventListener('click', nextLocation);

      // ì˜¤ë””ì˜¤
      playBtn.addEventListener('click', () => { audio.play().catch(()=>{}); });
      pauseBtn.addEventListener('click', () => audio.pause());
      stopBtn.addEventListener('click', () => { audio.pause(); audio.currentTime = 0; });
      speedDown02Btn.addEventListener('click', () => { currentSpeed = Math.max(0.5, currentSpeed - 0.2); updateSpeed(); });
      speedDown01Btn.addEventListener('click', () => { currentSpeed = Math.max(0.5, currentSpeed - 0.1); updateSpeed(); });
      speedUp01Btn.addEventListener('click', () => { currentSpeed = Math.min(2.0, currentSpeed + 0.1); updateSpeed(); });
      speedUp02Btn.addEventListener('click', () => { currentSpeed = Math.min(2.0, currentSpeed + 0.2); updateSpeed(); });
      speedResetBtn.addEventListener('click', () => { currentSpeed = 1.0; updateSpeed(); });
      volumeSlider.addEventListener('input', () => { audio.volume = Number(volumeSlider.value); });
      muteBtn.addEventListener('click', () => { isMuted = !isMuted; audio.muted = isMuted; muteBtn.textContent = isMuted ? 'ğŸ”‡' : 'ğŸ”Š'; });

      audio.addEventListener('timeupdate', () => {
        if (!isFinite(audio.duration) || audio.duration <= 0) return;
        const pct = (audio.currentTime / audio.duration) * 100;
        progressBar.value = pct;
        currentTimeEl.textContent = formatTime(audio.currentTime);
        remainingTimeEl.textContent = '-' + formatTime(audio.duration - audio.currentTime);
      }, { passive: true });
      audio.addEventListener('loadedmetadata', () => {
        currentTimeEl.textContent = '0:00';
        remainingTimeEl.textContent = '-' + formatTime(audio.duration || 0);
      });
      progressBar.addEventListener('input', () => {
        if (!isFinite(audio.duration) || audio.duration <= 0) return;
        const pct = progressBar.value / 100;
        audio.currentTime = audio.duration * pct;
      }, { passive: true });
      rewindBtn.addEventListener('click', () => { audio.currentTime = Math.max(0, audio.currentTime - 10); });
      forwardBtn.addEventListener('click', () => { if (isFinite(audio.duration)) audio.currentTime = Math.min(audio.duration, audio.currentTime + 10); });

      // ì±… ë²„íŠ¼ í† ê¸€ & ì„ íƒ ë³µì›
      explanationIconButton.addEventListener('pointerdown', () => {
        const sel = window.getSelection();
        try { if (sel && sel.rangeCount > 0) selectionRange = sel.getRangeAt(0).cloneRange(); } catch(e) { selectionRange = null; }
      }, { passive: true });
      explanationIconButton.addEventListener('click', (ev) => {
        ev.stopPropagation();
        const sel = window.getSelection();
        try { if (sel && sel.rangeCount > 0) selectionRange = sel.getRangeAt(0).cloneRange(); } catch(e){ selectionRange = null; }
        explanationButtonWrapper.classList.toggle('active');
        setTimeout(() => {
          if (selectionRange) {
            const sel2 = window.getSelection();
            sel2.removeAllRanges();
            try { sel2.addRange(selectionRange); } catch(e){}
            updateSelectedVerseFromRange(selectionRange);
          }
        }, 60);
      });
      document.body.addEventListener('click', (ev) => {
        if (!explanationButtonWrapper.contains(ev.target)) explanationButtonWrapper.classList.remove('active');
      });

      // êµ¬ì ˆ ì„¤ëª… ë²„íŠ¼
      detailedExplanationButton.addEventListener('click', () => {
        const v = (selectedVerse || '').trim();
        if (!v) { showModal("êµ¬ì ˆì„ ë¨¼ì € ì„ íƒí•˜ì„¸ìš”","ë³¸ë¬¸ì—ì„œ êµ¬ì ˆì´ë‚˜ ë‹¨ì–´ë¥¼ ë“œë˜ê·¸í•˜ì—¬ ì„ íƒí•œ í›„ ë‹¤ì‹œ ë²„íŠ¼ì„ ëˆŒëŸ¬ì£¼ì„¸ìš”."); }
        else { fetchExplanation(v, 'detailed'); }
        explanationButtonWrapper.classList.remove('active');
      });
      simpleExplanationButton.addEventListener('click', () => {
        const v = (selectedVerse || '').trim();
        if (!v) { showModal("êµ¬ì ˆì„ ë¨¼ì € ì„ íƒí•˜ì„¸ìš”","ë³¸ë¬¸ì—ì„œ êµ¬ì ˆì´ë‚˜ ë‹¨ì–´ë¥¼ ë“œë˜ê·¸í•˜ì—¬ ì„ íƒí•œ í›„ ë‹¤ì‹œ ë²„íŠ¼ì„ ëˆŒëŸ¬ì£¼ì„¸ìš”."); }
        else { fetchExplanation(v, 'simple'); }
        explanationButtonWrapper.classList.remove('active');
      });

      // ë³¸ë¬¸ ìš”ì•½ ë²„íŠ¼
      summarySimpleMain.addEventListener('click', () => {
        const full = getFullBibleText();
        if (!full.trim()) { showModal("ë³¸ë¬¸ì´ ì—†ìŠµë‹ˆë‹¤","ìš”ì•½í•  ì„±ê²½ ë³¸ë¬¸ì´ ì—†ìŠµë‹ˆë‹¤."); }
        else { fetchSummary(full, 'simple'); }
      });
      summaryDetailedMain.addEventListener('click', () => {
        const full = getFullBibleText();
        if (!full.trim()) { showModal("ë³¸ë¬¸ì´ ì—†ìŠµë‹ˆë‹¤","ìš”ì•½í•  ì„±ê²½ ë³¸ë¬¸ì´ ì—†ìŠµë‹ˆë‹¤."); }
        else { fetchSummary(full, 'detailed'); }
      });

      // ì„¤ëª… ëª¨ë‹¬ ë‹«ê¸°
      closeModalButton.addEventListener('click', () => {
        modal.style.display = 'none';
        document.body.classList.remove('modal-open');
      });
      window.addEventListener('click', (ev) => {
        if (ev.target === modal) {
          modal.style.display = 'none';
          document.body.classList.remove('modal-open');
        }
      });

      // ì„ íƒ ì´ë²¤íŠ¸(ë””ë°”ìš´ìŠ¤)
      const scheduleSelectionUpdate = () => {
        clearTimeout(selectionDebounce);
        selectionDebounce = setTimeout(handleSelectionChange, 160);
      };
      document.addEventListener('mouseup', scheduleSelectionUpdate, { passive:true });
      document.addEventListener('touchend', scheduleSelectionUpdate, { passive:true });
      document.addEventListener('selectionchange', scheduleSelectionUpdate);

      // ê¸°ë„ë¬¸ íŒì—… ì´ˆê¸°í™”
      initPrayerToast();
    });

    // ì„ íƒ ê´€ë¦¬
    function handleSelectionChange(){
      const sel = window.getSelection();
      if (!sel) return clearSelectionState();
      const text = (sel.toString() || "").trim();

      const modalEl = document.getElementById('explanation-modal');
      if (modalEl && modalEl.style.display === 'block') {
        const sel2 = window.getSelection();
        if (sel2 && (modalEl.contains(sel2.anchorNode) || modalEl.contains(sel2.focusNode))) return;
      }

      let isInBible = false;
      try {
        if (sel.anchorNode && sel.focusNode) {
          isInBible = bibleTextEl.contains(sel.anchorNode) && bibleTextEl.contains(sel.focusNode);
        }
      } catch(e){ isInBible = false; }

      if (text && isInBible) {
        selectedVerse = text;
        try { selectionRange = sel.getRangeAt(0).cloneRange(); } catch(e){ selectionRange = null; }
        try {
          const range = sel.getRangeAt(0);
          const rects = Array.from(range.getClientRects());
          const rect = rects.length
            ? rects.reduce((u, r) => ({
                top: Math.min(u.top, r.top),
                left: Math.min(u.left, r.left),
                right: Math.max(u.right, r.right),
                bottom: Math.max(u.bottom, r.bottom),
                width: 0, height: 0
              }), { top:Infinity, left:Infinity, right:-Infinity, bottom:-Infinity })
            : range.getBoundingClientRect();
          rect.width  = rect.right - rect.left;
          rect.height = rect.bottom - rect.top;
          positionExplanationButton(rect);
        } catch(e){ resetExplanationButton(); }
      } else {
        clearSelectionState();
      }
    }
    function updateSelectedVerseFromRange(range) {
      if (!range) return;
      const txt = (range.toString() || "").trim();
      if (txt) selectedVerse = txt;
      try {
        const rect = range.getBoundingClientRect();
        positionExplanationButton(rect);
      } catch(e){ resetExplanationButton(); }
    }
    function resetExplanationButton(){
      const container = document.getElementById('explanation-button-container');
      if (!container) return;
      container.style.position = 'fixed';
      container.style.left = '30%';
      container.style.top = '100px';
      container.style.transform = 'translateX(-50%)';
      container.style.display = 'block';
      explanationButtonWrapper.classList.remove('active');
    }
    function clearSelectionState(){ selectedVerse = ""; selectionRange = null; resetExplanationButton(); }

    // ì±… ë²„íŠ¼ ìœ„ì¹˜
    function positionExplanationButton(rect){
      const container = document.getElementById('explanation-button-container');
      if (!container) return;

      const vw = window.innerWidth;
      const vh = window.innerHeight;
      const margin = 8;
      const pad = 10;
      const viewportCenter = vw / 2;

      const isWide = rect.width >= vw * 0.6 || (rect.left <= margin*2 && rect.right >= vw - margin*2);

      let baseX, transformX;
      if (isWide) { baseX = rect.left + rect.width / 2; transformX = 'translateX(-50%)'; }
      else if (rect.left < viewportCenter * 0.4) { baseX = rect.right; transformX = 'translateX(0)'; }
      else if (rect.right > viewportCenter * 1.6) { baseX = rect.left; transformX = 'translateX(-100%)'; }
      else { baseX = rect.left + rect.width / 2; transformX = 'translateX(-50%)'; }

      const cw = container.offsetWidth || 60;
      const ch = container.offsetHeight || 60;

      const leftEdge =
        transformX === 'translateX(0)'     ? baseX :
        transformX === 'translateX(-50%)'  ? baseX - cw/2 :
                                             baseX - cw;

      let clampedLeftEdge = Math.min(Math.max(leftEdge, margin), vw - margin - cw);

      let finalLeft;
      if (transformX === 'translateX(0)')        finalLeft = clampedLeftEdge;
      else if (transformX === 'translateX(-50%)') finalLeft = clampedLeftEdge + cw/2;
      else                                        finalLeft = clampedLeftEdge + cw;

      let finalTop = rect.bottom + pad;
      if (finalTop + ch + margin > vh) finalTop = Math.max(rect.top - pad - ch, margin);
      finalTop = Math.min(Math.max(finalTop, margin), vh - margin - ch);

      container.style.position = 'fixed';
      container.style.left = `${finalLeft}px`;
      container.style.top  = `${finalTop}px`;
      container.style.transform = transformX;
      container.style.display = 'block';
    }

    // ê²€ìƒ‰
    function findString(searchText){
      clearHighlight();
      if (searchText == null || searchText.trim() === '') { searchCountEl.textContent = ''; nextLocationBtn.style.display = 'none'; return; }
      const escaped = escapeRegExp(searchText.trim());
      const regex = new RegExp(escaped, 'gi');
      const newContent = originalText.replace(regex, (match) => `<span class="search-highlight">${match}</span>`);
      bibleTextEl.innerHTML = newContent;
      foundSentences = Array.from(bibleTextEl.getElementsByClassName('search-highlight'));
      searchCountEl.textContent = `ì´ ${foundSentences.length}ê°œ ê²€ìƒ‰ë¨`;
      if (foundSentences.length > 0) {
        currentSearchIndex = 0;
        foundSentences[currentSearchIndex].scrollIntoView({ behavior:'smooth', block:'center' });
        nextLocationBtn.style.display = 'inline-block';
        updateScrollMarkers();
      } else {
        showModal("ê²€ìƒ‰ ê²°ê³¼ ì—†ìŒ", `"${searchText}"ì— ëŒ€í•œ ê²€ìƒ‰ ê²°ê³¼ê°€ ì—†ìŠµë‹ˆë‹¤.`);
        nextLocationBtn.style.display = 'none';
      }
    }
    function nextLocation(){
      if (!foundSentences.length) return;
      currentSearchIndex = (currentSearchIndex + 1) % foundSentences.length;
      foundSentences[currentSearchIndex].scrollIntoView({ behavior:'smooth', block:'center' });
      updateScrollMarkers();
    }
    function clearHighlight(){
      bibleTextEl.innerHTML = originalText;
      searchCountEl.textContent = '';
      nextLocationBtn.style.display = 'none';
      while (scrollMarkerContainer.firstChild) scrollMarkerContainer.removeChild(scrollMarkerContainer.firstChild);
      foundSentences = [];
      currentSearchIndex = -1;
    }
    function updateScrollMarkers(){
      while (scrollMarkerContainer.firstChild) scrollMarkerContainer.removeChild(scrollMarkerContainer.firstChild);
      const docH = document.documentElement.scrollHeight;
      const vh = window.innerHeight;
      foundSentences.forEach((el) => {
        const marker = document.createElement('div');
        marker.className = 'scroll-marker';
        const topPos = el.getBoundingClientRect().top + window.scrollY;
        const markerPos = Math.min(Math.max((topPos / docH) * vh, 2), vh - 10);
        marker.style.top = markerPos + 'px';
        marker.addEventListener('click', () => { el.scrollIntoView({ behavior:'smooth', block:'center' }); });
        scrollMarkerContainer.appendChild(marker);
      });
    }

    // ëª¨ë‹¬
    function showModal(title, text, imageUrl=null){
      modalTitle.textContent = title || '';
      modalText.innerHTML = (text || '').toString().replace(/\n/g, '<br>');
      if (imageUrl) { modalImage.src = imageUrl; modalImage.style.display = 'block'; } else { modalImage.src=''; modalImage.style.display='none'; }
      modal.style.display = 'block';
      document.body.classList.add('modal-open');
      setTimeout(() => {
        if (selectionRange) {
          const sel = window.getSelection();
          sel.removeAllRanges();
          try { sel.addRange(selectionRange); } catch(e) {}
        }
      }, 60);
    }
    function showLoadingModal(isImage=false){
      modalTitle.innerHTML = `<span class="loader"></span> ${isImage ? 'ê·¸ë¦¼ ìƒì„± ì¤‘...' : 'ì„¤ëª… ìƒì„± ì¤‘...'}`;
      modalText.textContent = 'ì„¤ëª…ì„ ìƒì„± ì¤‘ì…ë‹ˆë‹¤. ì ì‹œë§Œ ê¸°ë‹¤ë ¤ ì£¼ì„¸ìš”...';
      modalImage.style.display = 'none';
      modal.style.display = 'block';
    }

    modal.addEventListener('wheel', (e) => {
      if (modal.style.display === 'block') e.stopPropagation();
    }, { passive: true });

    function getFullBibleText(){
      const tmp = document.createElement('div');
      tmp.innerHTML = originalText;
      return tmp.textContent.replace(/\s+/g,' ').trim();
    }

    // Generative API í˜¸ì¶œ
    async function callGenerativeAPI(modalTitleText, prompt){
      const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-05-20:generateContent?key=${apiKey}`;
      const payload = { contents: [ { parts: [ { text: prompt } ] } ] };

      let retryCount = 0; const maxRetries = 3;
      let response = null;
      while (retryCount < maxRetries) {
        try {
          response = await fetch(apiUrl, {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify(payload)
          });
          if (response.ok) break;
          if (response.status === 429) {
            retryCount++;
            const delay = Math.pow(2, retryCount)*1000 + Math.random()*1000;
            await new Promise(r=>setTimeout(r, delay));
          } else throw new Error(`API Error: ${response.status} ${response.statusText}`);
        } catch (err) {
          console.error('API call failed:', err);
          showModal("ì˜¤ë¥˜ ë°œìƒ", "API í˜¸ì¶œ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤. ë‹¤ì‹œ ì‹œë„í•´ ì£¼ì„¸ìš”.");
          return;
        }
      }
      if (!response || !response.ok) { showModal("ì˜¤ë¥˜", "ì„¤ëª…ì„ ë¶ˆëŸ¬ì˜¤ëŠ” ë° ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤. ì ì‹œ í›„ ë‹¤ì‹œ ì‹œë„í•´ ì£¼ì„¸ìš”."); return; }

      try {
        const data = await response.json();
        const content = data?.candidates?.[0]?.content?.parts?.[0]?.text || "ì‘ë‹µì„ ê°€ì ¸ì˜¤ì§€ ëª»í–ˆìŠµë‹ˆë‹¤.";
        showModal(modalTitleText, content);
      } catch (err) {
        console.error('Error processing response:', err);
        showModal("ì˜¤ë¥˜", "ì‘ë‹µì„ ì²˜ë¦¬í•˜ëŠ” ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.");
      }
    }

    async function fetchExplanation(promptText, type){
      let prompt;
      if (type === 'simple') {
        prompt = `[ì—­í• ] ì„±ê²½ ì£¼ì„ê°€.
[ì‘ì—…] ì„ íƒí•œ ìš©ì–´/êµ¬ì ˆì„ 350â€“500ì í•œêµ­ì–´ë¡œ ê°„ê²° ì„¤ëª….
[ìœ í˜• ê·œì¹™]
- ì§€ëª…: ìœ„ì¹˜Â·ì‹œëŒ€Â·ê´€ë ¨ ì‚¬ê±´
- ì¸ë¬¼: ì´ë¦„ì˜ ëœ»Â·ì—­í• Â·ì—°ê´€ ì§€ëª…
- ì œì‚¬/ì„±ë¬¼: ìš©ë„Â·ìƒì§•ì  ì˜ë¯¸
- ë™Â·ì‹ë¬¼Â·ê´‘ë¬¼: ìƒì§•ì„±
í•„ìš” ì‹œ ëŒ€ë¹„/ìœ ì‚¬ 2â€“12ê°€ì§€ë§Œ ê°„ë‹¨íˆ. (ì´ë¦„â†”ì§€ëª… ì§ì ‘ ì—°ê²°ì´ ìˆìœ¼ë©´ í•¨ê»˜ ì–¸ê¸‰)
[ê¸ˆì§€] ì¥í™©í•¨Â·ì¶”ì¸¡Â·ì¸ìš©.
[ì…ë ¥] "${promptText}"`;
      } else {
        prompt = `[ì—­í• ] ì„±ê²½ ì£¼ì„ê°€.
[ì‘ì—…] ì„ íƒ êµ¬ì ˆì„ 2,500â€“3,500ì í•œêµ­ì–´ í•´ì„¤ë¡œ ì‹¬í™” ë¶„ì„.
[êµ¬ì„±] ê°œìš” â†’ ë°°ê²½(ì—­ì‚¬Â·ì§€ë¦¬Â·ë¬¸í™”) â†’ ë³¸ë¬¸ ì£¼ì œÂ·í•µì‹¬ ë…¼ì§€ â†’ í•µì‹¬ ë‹¨ì–´/ë„ìƒ í•´ì„
â†’ ì¸ë¬¼Â·ì‚¬ê±´Â·ì¥ì†Œì˜ ê¸°ëŠ¥ â†’ ì„±ê²½ ì „ì²´ ë§¥ë½ê³¼ì˜ ì—°ê²°(ì–¸ì•½/êµë¦¬, ìœ ì‚¬Â·ëŒ€ì¡° 2â€“12ê°€ì§€)
â†’ (ì„ íƒ) 3â€“6í–‰ í‘œë¡œ ìš”ì  ì •ë¦¬.
[ê·œì¹™] ë³¸ë¬¸ ê·¼ê±° ì¤‘ì‹¬, ë‚œí•´í•œ ë¶€ë¶„ì€ ê°„ëª…íˆ, ê³¼ë„í•œ ì¸ìš©/ì£¼ì„ì–´/ë°˜ë³µ ê¸ˆì§€, ë¶„ëŸ‰ ì¤€ìˆ˜.
[ê¸´ ì…ë ¥ ì‹œ] ì ˆ/ë‹¨ë½ ë‹¨ìœ„ë¡œ ìš”ì•½ í›„ í†µí•©(ìµœì¢… ë¶„ëŸ‰ ì¤€ìˆ˜).
[ì…ë ¥] "${promptText}"`;
      }
      showLoadingModal(false);
      await callGenerativeAPI('êµ¬ì ˆ ì„¤ëª…', prompt);
    }

    async function fetchSummary(fullText, type){
      let prompt;
      if (type === 'simple') {
        prompt = `[ì—­í• ] ì„±ê²½ ì£¼ì„ê°€.
[ì‘ì—…] ì…ë ¥ëœ ì„±ê²½ ë³¸ë¬¸ ì „ì²´ë¥¼ 450â€“650ì í•œêµ­ì–´ í•œ ë‹¨ë½ìœ¼ë¡œ ê°„ê²° ìš”ì•½.
[ì¤‘ì ] í•µì‹¬ ì£¼ì œÂ·ë©”ì‹œì§€, ì£¼ìš” ì‚¬ê±´ íë¦„, í•˜ë‚˜ë‹˜ í–‰ìœ„/ì¸ê°„ ë°˜ì‘. ë°°ê²½ì€ í•œë‘ ë¬¸ì¥ë§Œ. ì‚¶ ì ìš© 2â€“3ë¬¸ì¥ ì¶”ê°€.
[ê¸ˆì§€] ì¥í™©í•¨Â·ì¶”ì¸¡Â·ì¸ìš©Â·ì†Œì œëª©Â·ì„œë¡ /ê²°ë¡  ë¬¸êµ¬. ë¶„ëŸ‰ ì—„ìˆ˜.
[ê¸´ ì…ë ¥ ì‹œ] ì¥ ë‹¨ìœ„ë¡œ ìš”ì•½â†’ìµœì¢… 450â€“650ìë¡œ í†µí•©.
[ì…ë ¥] "${fullText}"`;
      } else {
        prompt = `[ì—­í• ] ì„±ê²½ ì£¼ì„ê°€.
[ì‘ì—…] ì…ë ¥ ë³¸ë¬¸ì„ 3,500â€“5,000ì í•œêµ­ì–´ í•´ì„¤ë¡œ ì •ë¦¬.
[êµ¬ì„±] 1) ê°œìš”  2) ë°°ê²½(ì—­ì‚¬Â·ì§€ë¦¬Â·ë¬¸í™”)  3) í•µì‹¬ ì£¼ì œ/ì‹ í•™ì  ì˜ë¯¸
4) ì¸ë¬¼Â·ì‚¬ê±´Â·ì¥ì†Œì˜ ì—­í•   5) ì„±ê²½ ì „ì²´ ë§¥ë½ê³¼ ì—°ê²°(í•„ìš” ì‹œ ìœ ì‚¬/ëŒ€ì¡° 2â€“12ê°€ì§€)
6) (ì„ íƒ) 3â€“12í–‰ í‘œë¡œ í•µì‹¬ ì •ë¦¬.  7) ê²°ë¡   8) ì‚¶ ì ìš© 4â€“5ë¬¸ì¥.
[ê·œì¹™] ì‚¬ì‹¤ ê¸°ë°˜, ê³¼ì¥/ì¶”ì¸¡/ì„¤êµì²´ ê¸ˆì§€, ë¶ˆí•„ìš”í•œ ë°˜ë³µ ê¸ˆì§€, ë¶„ëŸ‰ ì¤€ìˆ˜.
[ê¸´ ì…ë ¥ ì‹œ] ì¥ ë‹¨ìœ„ë¡œ ê°œìš”â†’í†µí•©(ìµœì¢… ë¶„ëŸ‰ ì¤€ìˆ˜).
[ì…ë ¥] "${fullText}"`;
      }
      showLoadingModal(false);
      await callGenerativeAPI('ë³¸ë¬¸ ìš”ì•½', prompt);
    }

    function updateSpeed(){ audio.playbackRate = currentSpeed; speedDisplay.textContent = currentSpeed.toFixed(1) + 'x'; }
    function updateFontSizeDisplay(){ const cur = parseFloat(getComputedStyle(bibleTextEl).fontSize); fontSizeEl.textContent = Math.round(cur); }

    // í† ê¸€ ë²„íŠ¼ ë¡œì§
    const progressContainer = document.querySelector('.progress-container');
    const speedControls = document.querySelector('.speed-controls');
    const volumeControl = document.querySelector('.volume-control');
    const showProgressBtn = document.getElementById('show-progress');
    const showSpeedBtn = document.getElementById('show-speed');
    const showVolumeBtn = document.getElementById('show-volume');
    let hideTimeout;
    function showOnly(target) {
      progressContainer.style.display = "none";
      speedControls.style.display = "none";
      volumeControl.style.display = "none";
      target.style.display = "flex";
      if (hideTimeout) clearTimeout(hideTimeout);
      hideTimeout = setTimeout(() => { target.style.display = "none"; }, 10000);
    }
    showProgressBtn.addEventListener('click', () => showOnly(progressContainer));
    showSpeedBtn.addEventListener('click', () => showOnly(speedControls));
    showVolumeBtn.addEventListener('click', () => showOnly(volumeControl));

    // ===== ê¸°ë„ë¬¸ íŒì—… ì œì–´ =====
  function initPrayerToast(){
  const toast = document.getElementById('prayerToast');
  const closeBtn = document.getElementById('prayerCloseBtn');
  const amenBtn = document.getElementById('prayerAmen');
  const readBtn = document.getElementById('prayerReadAlone');

  const isSiteModalOpen = () => document.body.classList.contains('modal-open');

  function openToast(){
    if (!toast) return;
    if (isSiteModalOpen()) return;            // ì‚¬ì´íŠ¸ ëª¨ë‹¬ì´ ì—´ë ¤ ìˆìœ¼ë©´ ìˆ¨ê¹€
    toast.style.display = 'block';
    document.getElementById('prayerBody')?.focus({ preventScroll:true });
  }
  function closeToast(){
    if (!toast) return;
    toast.style.display = 'none';             // ì €ì¥/ê¸°ì–µ ì—†ìŒ â†’ ë‹¤ìŒ ë°©ë¬¸ ì‹œ ë‹¤ì‹œ í‘œì‹œ
  }

  // í˜ì´ì§€ ë¡œë“œ ì‹œ í•­ìƒ í‘œì‹œ (ì•½ê°„ ì§€ì—°)
  setTimeout(openToast, 700);

  // ë²„íŠ¼ ë™ì‘: ì „ë¶€ ë‹¨ìˆœ ë‹«ê¸°
  closeBtn?.addEventListener('click', () => closeToast());
  amenBtn?.addEventListener('click', () => closeToast());
  readBtn?.addEventListener('click', () => closeToast());

  // ì‚¬ì´íŠ¸ ëª¨ë‹¬ ì—´ë¦¼/ë‹«í˜ì— ë”°ë¼ í† ìŠ¤íŠ¸ í‘œì‹œ/ìˆ¨ê¹€
  const observer = new MutationObserver(() => {
    if (isSiteModalOpen()) {
      toast.style.display = 'none';
    } else {
      // ëª¨ë‹¬ì´ ë‹«íˆë©´ ë‹¤ì‹œ ë³´ì—¬ì¤Œ(ì‚¬ìš©ìê°€ ì´ë¯¸ ë‹«ì•˜ë”ë¼ë„ ìƒˆë¡œê³ ì¹¨/ì¬ë°©ë¬¸ ì‹œ ë‹¤ì‹œ ëœ¨ê²Œ í•˜ë ¤ë©´ ìœ ì§€)
      if (toast.style.display !== 'block') toast.style.display = 'block';
    }
  });
  observer.observe(document.body, { attributes:true, attributeFilter:['class'] });
}

  // ====== MP3 í´ë°± ë¡œë” (DAY ê¸°ë°˜) ======
  const DAY = 78;
  const AUDIO_FILE_NAME = `ì½ê¸° ${DAY}.mp3`;
  const REMOTE_URL = `https://vod47.anyline.co.kr/vod_ezra/${encodeURIComponent(AUDIO_FILE_NAME)}`;

  const SOURCE_CANDIDATES = [
    { src: REMOTE_URL,               type: "audio/mpeg" }, // ì›ê²©
    { src: AUDIO_FILE_NAME,          type: "audio/mpeg" }, // ê°™ì€ í´ë”
    { src: "mp3/" + AUDIO_FILE_NAME, type: "audio/mpeg" }, // mp3 í•˜ìœ„ í´ë”
  ];

  const audioEl = document.getElementById("audio-file");

  function setSourcesInOrder(orderIdxs){
    while (audioEl.firstChild) audioEl.removeChild(audioEl.firstChild);
    orderIdxs.forEach(i => {
      const s = SOURCE_CANDIDATES[i];
      const el = document.createElement("source");
      el.src = s.src;
      el.type = s.type;
      audioEl.appendChild(el);
    });
    audioEl.load();
  }

  // ì˜¨ë¼ì¸/ì˜¤í”„ë¼ì¸ì— ë”°ë¼ ìš°ì„ ìˆœìœ„
  let baseOrder = navigator.onLine ? [0,1,2] : [1,2,0];

  // ìµœì´ˆ ì£¼ì…
  setSourcesInOrder(baseOrder);

  // ì‹¤íŒ¨ ì‹œ ë‹¤ìŒ í›„ë³´ë¡œ
  let tryIndex = 0;
  function tryNextSource(){
    tryIndex++;
    if (tryIndex < baseOrder.length) {
      setSourcesInOrder(baseOrder.slice(tryIndex));
    } else {
      console.warn("ëª¨ë“  MP3 ì†ŒìŠ¤ë¥¼ ë¶ˆëŸ¬ì˜¤ì§€ ëª»í–ˆìŠµë‹ˆë‹¤.");
      showAudioFailNotice();
    }
  }
  audioEl.addEventListener("error", tryNextSource, true);

  // ì„±ê³µ ì‹œ í˜„ì¬ ì†ŒìŠ¤ë¡œ ê³ ì •
  function lockInWorkingSource() {
    tryIndex = baseOrder.length; // ë” ì´ìƒ í´ë°± ì‹œë„ ì•ˆ í•¨
  }
  audioEl.addEventListener("canplay",     lockInWorkingSource, { once: true });
  audioEl.addEventListener("loadeddata",  lockInWorkingSource, { once: true });

  // ë„¤íŠ¸ì›Œí¬ ìƒíƒœ ë³€í™” ì‹œ ì¬ì‹œë„
  window.addEventListener("online",  () => { tryIndex = 0; baseOrder = [0,1,2]; setSourcesInOrder(baseOrder); });
  window.addEventListener("offline", () => { tryIndex = 0; baseOrder = [1,2,0]; setSourcesInOrder(baseOrder); });

  // ì‹¤íŒ¨ ì•ˆë‚´(ê°„ë‹¨ ì˜ˆì‹œ)
  function showAudioFailNotice() {
    if (typeof remainingTimeEl !== "undefined") {
      remainingTimeEl.textContent = "ì˜¤ë””ì˜¤ë¥¼ ë¶ˆëŸ¬ì˜¤ì§€ ëª»í–ˆìŠµë‹ˆë‹¤";
    }
    if (typeof playBtn !== "undefined")  playBtn.disabled  = true;
    if (typeof pauseBtn !== "undefined") pauseBtn.disabled = true;
  }

  </script>
</body>
</html> 
