<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
  <title>통큰통독-64일차</title>
  <link rel="apple-touch-icon" type="image/png" href="https://i.postimg.cc/Qtnq0gFJ/Ezra-icon.png">
  <meta name="apple-mobile-web-app-title" content="통큰통독">
  <link rel="shortcut icon" type="image/png" href="https://i.postimg.cc/Qtnq0gFJ/Ezra-icon.png">
  <link rel="mask-icon" type="image/png" href="https://i.postimg.cc/Qtnq0gFJ/Ezra-icon.png">

  <style>
    :root{
      --blue:#007BFF;
      --pink:#ff99cc;
      --shadow: 0 2px 5px rgba(0,0,0,0.2);
    }
    * { box-sizing: border-box; -webkit-tap-highlight-color: transparent; }
    html,body { height:100%; margin:0; padding:0; font-family: Arial, sans-serif; -webkit-font-smoothing:antialiased; }
    body { padding-top:150px; background:#fdfdf8; color:#222; }

    a:link { color:#0000FF; } a:visited{ color:#660099; }

    /* 상단 고정 테이블 */
    .top-fixed-table {
      position: fixed; top:0; left:0; width:100%; background:transparent; border-bottom:none; z-index:100;
      table-layout: fixed; padding:10px 0; box-sizing:border-box;
    }
    .search-cell { text-align:left; padding-left:10px; vertical-align:top; width:30%; }
    .search-cell input[type="text"]{ width:50%; font-size:12pt; }
    .search-cell input[type="submit"], .search-cell input[type="reset"]{ font-size:10pt; padding:5px 8px; height:auto; }

    .audio-cell { text-align:right; padding-right:50px; vertical-align:top; width:30%; }
    #custom-audio-player { display:flex; flex-direction:column; align-items:center; }
    .player-controls{ display:flex; align-items:center; justify-content:center; gap:10px; margin-bottom:5px; }
    .time-display{ font-size:16px; font-weight:bold; color:black; margin:0 5px; min-width:44px; text-align:center; }

    .progress-container { display: flex; align-items: center; justify-content: center; gap: 6px; margin: 6px 0; }
    .skip-btn { width: 48px; height: 28px; font-size: 13px; cursor: pointer; border: 1px solid #ccc; border-radius: 5px; background: #fff; }
    .skip-btn:hover { background: #e0e0e0; }

    .control-btn{ width:28px; height:28px; font-size:14px; cursor:pointer; border:1px solid #ccc; background:#fff; border-radius:5px; }
    .control-btn:hover{ background:#e0e0e0; }
    #play-btn{ background:#d1f3d4; } #pause-btn{ background:#fff6d6; } #stop-btn{ background:#fddddd; }

    .speed-controls{ display:flex; align-items:center; justify-content:center; gap:5px; margin-bottom:5px; }
    .speed-btn{ width:21px; height:21px; font-size:10px; cursor:pointer; border:1px solid #ccc; border-radius:3px; background:#fff; }
    .speed-btn:hover{ background:#e0e0e0; }
    .speed-display{ font-weight:bold; color:var(--blue); width:50px; text-align:center; }

    .volume-control{ display:flex; align-items:center; justify-content:center; gap:5px; }
    input[type="range"]{ -webkit-appearance:none; width:160px; height:5px; background:#d3d3d3; outline:none; opacity:0.9; transition:opacity .2s; border-radius:3px;}
    input[type="range"]::-webkit-slider-thumb{ -webkit-appearance:none; appearance:none; width:15px; height:15px; background:var(--blue); border-radius:50%; cursor:pointer; }

    /* progress */
    #progress-bar { width: 60%; max-width: 100px; }

    /* volume */
    #volume-slider { width: 80%; max-width: 120px; }

    /* 설명 버튼 컨테이너 (플로팅) */
    .explanation-button-container{ position:fixed; top:100px; left:30%;  transform:translateX(-50%);  padding:0 10px; transition:top .2s ease,left .2s ease,transform .2s ease; }
    .explanation-button-wrapper{ position:relative; display:inline-block; cursor:pointer; }
    .explanation-icon-button{ width:50px; height:50px; border-radius:50%; background:var(--pink); box-shadow:var(--shadow); border:none; display:flex; align-items:center; justify-content:center; font-size:40px; z-index:2; }
    .explanation-sub-buttons{ display:flex; flex-direction:column; gap:10px; opacity:0; visibility:hidden; transition:opacity .3s ease,visibility .3s ease, transform .3s ease; position:absolute; left:45%; transform:translateX(-50%) translateY(25px); z-index:1; }
    .explanation-button-wrapper.active .explanation-sub-buttons{ opacity:1; visibility:visible; transform:translateX(-50%) translateY(0); }
    .explanation-sub-button{ padding:5px 10px; font-size:18px; background:var(--pink); border:none; border-radius:5px; cursor:pointer; box-shadow:var(--shadow); white-space:nowrap; }
    .explanation-sub-button:hover{ transform:scale(1.03); }

    /* 폰트 사이즈 및 본문 요약 버튼 (항상 표시) */
    .container{ width:100%; text-align:center; margin-top:8px; }
    .font-size-label{ font-size:20px !important; margin-right:12px; font-weight:bold; color:blue; display:inline-block; vertical-align:middle; }
    #font-size{ font-size:20px !important; margin:0 8px; font-weight:bold; color:red; display:inline-block; vertical-align:middle; width:48px; }
    #down,#up{ width:27px; height:27px; font-size:20px; color:red; background:#fff; border:1px solid #ccc; border-radius:5px; cursor:pointer; display:inline-block; vertical-align:middle; }

    .summary-buttons { display:inline-block; margin-left:16px; vertical-align:middle; }
    .summary-btn { padding:6px 10px; margin-left:6px; font-size:14px; border-radius:6px; border:1px solid #ccc; background:#fff; cursor:pointer; }
    .summary-btn:hover{ background:#f2f2f2; }

    /* 일차 내비게이션 */
.day-nav{
  display:flex; align-items:center; justify-content:flex-start; gap:10px;
  margin: 10px 15px 0;
}
.day-nav .day-btn{
  text-decoration:none; background:#fff; color:#333;
  padding:6px 12px; border:1px solid #ccc; border-radius:8px;
  box-shadow: var(--shadow); font-weight:700; line-height:1;
}
.day-nav .day-btn:hover{ background:#f7f7f7; }
.day-nav .day-title{
  font-weight:900; letter-spacing:.2px; color:#222;
}
@media (max-width:480px){
  .day-nav .day-title{ font-size:16px; }
  .day-nav .day-btn{ padding:6px 10px; font-size:14px; }
}

    /* 본문 */
    h2{ padding:0; text-align:left; margin-left:15px; margin-right:15px; }
    p{ display:inline-block; }

    /* 본문 중앙 두 줄 강조 */
    .highlight {
      background-color:#fdf6e3;
      -webkit-text-stroke:0.2px #76d6c6;
      border-left:4px solid #c0a060;
      font-weight:bold;
      box-shadow:0 0 8px rgba(0,0,0,0.1);
      padding:2px 6px;
    }

    /* 📖 구절설명 버튼: 기본 표시 */
    #explanation-button-container{
      position:fixed; z-index:150; display:block;
    }
    body.modal-open #explanation-button-container{ display:none !important; }

    /* 모달 */
    .modal{
      display:none; position:fixed; z-index:200; inset:0; width:100%; height:100%;
      background:rgba(0,0,0,0.4);
    }
    .modal-content{
      background:#fff; margin:12% auto; padding:20px; border-radius:10px; width:80%; max-width:900px;
      max-height:80vh; overflow:auto; overscroll-behavior:contain;
      box-shadow:0 4px 8px rgba(0,0,0,0.2); text-align:left; line-height:1.6; word-break:keep-all; white-space:pre-wrap;
    }
    body.modal-open{ overflow:hidden; }

    /* 로딩 스피너 */
    .loader{ border:4px solid #f3f3f3; border-top:4px solid #3498db; border-radius:50%; width:20px; height:20px; animation:spin 1s linear infinite; display:inline-block; vertical-align:middle; margin-right:8px; }
    @keyframes spin{ 0%{transform:rotate(0deg);} 100%{transform:rotate(360deg);} }

    /* 검색 하이라이트 & 스크롤 마커 */
    .search-highlight{ background:yellow; color:#000; }
    .scroll-marker-container{ position:fixed; top:0; right:0; width:8px; height:100vh; z-index:99; pointer-events:none; }
    .scroll-marker{ position:absolute; right:0; width:8px; height:8px; background:red; border-radius:50%; box-shadow:0 0 5px rgba(255,0,0,0.7); cursor:pointer; pointer-events:auto; }
    .scroll-marker:hover{ transform:scale(1.5); transition:transform .2s ease; }

    /* 선택 관련 (iOS) */
    #bible-text{ -webkit-user-select:text; user-select:text; -webkit-touch-callout:none; }

    /* 반응형 */
    @media (max-width:800px){
      .search-cell{ width:55%; } .audio-cell{ width:45%; } .search-cell input[type="text"]{ width:60%; } #progress-bar{ width:160px; }
    }
    @media (max-width:600px){
  /* 좌/우 칸 비율 + 오른쪽 패딩 확보 */
  .search-cell{ width:30%; }
  .audio-cell{ width:34%; padding-right:12px; } /* 8px → 14px */

  /* 검색창을 뷰포트 기준으로 더 줄이기 */
  .search-cell input[type="text"]{
    width:32vw;          /* 45vw → 35vw */
    max-width:32vw;
    font-size:12pt;
  }
  /* 검색 버튼들도 살짝 컴팩트 */
  .search-cell input[type="submit"],
  .search-cell input[type="reset"]{
    padding:4px 6px;
    font-size:10pt;
  }

  /* 오디오 컨트롤이 덜 퍼지도록 */
  .player-controls{ gap:6px; }           /* 10px → 6px */
  .time-display{
    font-size:14px;                       /* 16px → 14px */
    min-width:56px;                       /* 44px → 56px 로 고정폭 확보 */
  }

  #progress-bar{ width:140px; }
  .explanation-sub-button{ font-size:16px; padding:6px 8px; }
  .explanation-icon-button{ width:46px; height:46px; font-size:34px; }
  .summary-btn{ padding:5px 8px; font-size:13px; }
}

    .toggle-buttons {
      display:flex; justify-content:center; gap:8px; margin-bottom:6px;
    }
    .toggle-buttons button {
      padding:4px 8px; font-size:13px; border:1px solid #ccc; border-radius:5px; background:#fff; cursor:pointer;
    }
    .toggle-buttons button:hover { background:#f0f0f0; }

    /* ============ 기도문 팝업 ============ */
    .prayer-toast {
      position: fixed; right: 18px; bottom: 18px; z-index: 190;
      width: 360px; max-width: calc(100vw - 24px);
      background: #ffffff; border: 1px solid #e9e6d8;
      border-radius: 14px; box-shadow: 0 10px 26px rgba(0,0,0,.18);
      overflow: hidden; transform: translateY(20px); opacity: 0;
      animation: prayerSlideUp .35s ease-out forwards; display:none;
      font-family: inherit;
    }
    @keyframes prayerSlideUp { to { transform: translateY(0); opacity: 1; } }

    .prayer-header {
      display:flex; align-items:center; justify-content:space-between;
      padding:10px 12px; background:#fff6dd; border-bottom:1px solid #f3e9c3;
    }
    .prayer-title { display:flex; align-items:center; gap:8px; font-weight:700; color:#8a6d1e; }
    .prayer-badge { background:#ffe9a8; color:#6b560f; font-size:12px; padding:2px 8px; border-radius:999px; }

    .prayer-close {
      border:0; background:transparent; font-size:20px; line-height:1; color:#7c7c7c;
      cursor:pointer; padding:2px 6px; border-radius:8px;
    }
    .prayer-close:hover { background: rgba(0,0,0,.05); }

    .prayer-body {
      padding:12px 14px 4px; color:#333; line-height:1.6; max-height:220px; overflow:auto;
    }
    .prayer-body h4 { margin:0 0 6px 0; font-size:15px; color:#444; }
    .prayer-body p { margin:0; white-space: pre-wrap; }

    .prayer-footer {
      display:flex; align-items:center; justify-content: space-between; gap:8px; padding:8px 12px 12px;
    }
    .prayer-actions { display:flex; gap:8px; }
    .prayer-btn {
      border:1px solid #e0dccc; background:#fff; color:#5a4d1b; padding:6px 10px; border-radius:10px; cursor:pointer; font-size:13px;
    }
    .prayer-btn:hover { background:#faf7ea; }
    .prayer-btn-primary { background:#f9d86b; border-color:#e5c458; color:#3e320e; font-weight:700; }
    .prayer-btn-primary:hover { filter: brightness(.98); }
    .prayer-checkbox { display:flex; align-items:center; gap:6px; color:#555; font-size:13px; }

    @media (max-width: 480px) {
      .prayer-toast { left:12px; right:12px; bottom:12px; width:auto; }
      .prayer-body { max-height:40vh; }
    }
  </style>
</head>
<body>
  <!-- 상단: 검색 + 오디오 -->
  <table class="top-fixed-table" id="main-table" cellpadding="0" cellspacing="0">
    <tr>
      <td class="search-cell">
        <form name="f1" action="">
          <input type="reset" name="b2" value="X">
          <input type="text" placeholder="검색어 입력" name="t1" value="">
          <input type="submit" name="b1" value="검색">
          <div id="search-count-container">
            <span id="search-count"></span>
            <button type="button" id="next-location-btn" style="display:none;">다음 위치</button>
          </div>
        </form>
      </td>

      <td class="audio-cell">
        <div id="custom-audio-player" role="region" aria-label="오디오 플레이어">
          <audio id="audio-file" preload="auto" playsinline>
            <source src="https://vod47.anyline.co.kr/vod_ezra/%EC%9D%BD%EA%B8%B0%2064.mp3" type="audio/mpeg">
            브라우저가 오디오 요소를 지원하지 않습니다.
          </audio>

          <div class="player-controls">
            <strong><span style="font-size:16px; background-color:#fcfcfc;" id="current-time" class="time-display">0:00</span></strong>
            <button id="play-btn" class="control-btn" aria-label="재생">▶</button>
            <button id="pause-btn" class="control-btn" aria-label="일시정지">⏸</button>
            <button id="stop-btn" class="control-btn" aria-label="정지">■</button>
            <strong><span style="font-size:16px; background-color:#fcfcfc;" id="remaining-time" class="time-display">0:00</span></strong>
          </div>

          <div class="toggle-buttons">
            <button id="show-progress">재생 위치</button>
            <button id="show-speed">재생 속도</button>
            <button id="show-volume">볼륨 조절</button>
          </div>

          <div class="progress-container" style="display:none;">
            <button id="rewind-10" class="skip-btn">⏪10s</button>
            <input type="range" id="progress-bar" min="0" max="100" value="0" step="0.01" aria-label="재생 위치">
            <button id="forward-10" class="skip-btn">10s⏩</button>
          </div>

          <div class="speed-controls" style="display:none;">
            <button id="speed-down-02" class="speed-btn">&laquo;</button>
            <button id="speed-down-01" class="speed-btn">&lt;</button>
            <span id="speed-display" class="speed-display">1.0x</span>
            <button id="speed-up-01" class="speed-btn">&gt;</button>
            <button id="speed-up-02" class="speed-btn">&raquo;</button>
            <button id="speed-reset">1.0</button>
          </div>

          <div class="volume-control" style="display:none;">
            <span style="font-size:14px;">볼륨</span>
            <button id="mute-btn">🔊</button>
            <input type="range" id="volume-slider" min="0" max="1" step="0.01" value="1">
          </div>
        </div>
      </td>
    </tr>
  </table>

  <!-- 플로팅 책 버튼 (구절설명 토글) -->
  <div class="explanation-button-container" id="explanation-button-container">
    <div class="explanation-button-wrapper" id="explanation-button-wrapper">
      <button class="explanation-icon-button" id="explanation-icon-button" aria-label="구절설명 열기" title="단어나 문장을 선택하면 ‘간단설명’ 또는 ‘상세설명’을 볼 수 있어요.">
        <span>📖</span>
      </button>
      <div class="explanation-sub-buttons" id="explanation-sub-buttons" role="menu">
        <button class="explanation-sub-button" id="detailed-explanation-button">상세 구절설명</button>
        <button class="explanation-sub-button" id="simple-explanation-button">간단 구절설명</button>
      </div>
    </div>
  </div>

  <!-- 폰트 크기 + 본문 요약 버튼 -->
  <div class="container" style="margin-top:6px;">
    <p class="font-size-label">Font Size</p>
    <button id="down">-</button>
    <p id="font-size">20</p>
    <button id="up">+</button>

    <span class="summary-buttons" aria-hidden="false">
      <button class="summary-btn" id="summary-simple-main">본문요약 간단</button>
      <button class="summary-btn" id="summary-detailed-main">본문요약 상세</button>
    </span>
  </div>

  <!-- 본문 -->
  <div>
    <h2 id="bible-text" style="line-height:1.2em;margin-left:15px;margin-right:15px;font-style:normal;font-weight:normal;color:black;font-size:20px;word-break:break-all;">
    <strong>
<!-- 일차 내비게이션 -->
<nav class="day-nav" aria-label="일차 이동">
  <a class="day-btn" href="https://seagwang1124.github.io/90html/63%EC%9D%BC%EC%B0%A8.html" aria-label="통독 63일차로 이동">≪</a>
  <span class="day-title"> 통독 64일차 </span>
  <a class="day-btn" href="https://seagwang1124.github.io/90html/65%EC%9D%BC%EC%B0%A8.html" aria-label="통독 65일차로 이동">≫</a>
  <a class="day-btn" href="https://seagwang1124.github.io/90html" aria-label="통독 목록으로 이동">통독 목록</a>
</nav>
      
<br>범위: 시1, 91, 119편 / 느11장-12:30절 / 시120-127편</br></strong>
<br>&nbsp;</br>


<strong><br><font color="#4682b4">시편 1편, 91편, 119편</font></br></strong>
<strong><br><font color="#4682b4">시편 1 편</font></br></strong>
<br>1 복 있는 사람은 악인들의 꾀를 따르지 아니하며 죄인들의 길에 서지 아니하며 오만한 자들의 자리에 앉지 아니하고</br>
<br>2 오직 여호와의 율법을 즐거워하여 그의 율법을 주야로 묵상하는도다</br>
<br>3 그는 시냇가에 심은 나무가 철을 따라 열매를 맺으며 그 잎사귀가 마르지 아니함 같으니 그가 하는 모든 일이 다 형통하리로다</br>
<br>4 악인들은 그렇지 아니함이여 오직 바람에 나는 겨와 같도다</br>
<br>5 그러므로 악인들은 심판을 견디지 못하며 죄인들이 의인들의 모임에 들지 못하리로다</br>
<br>6 무릇 의인들의 길은 여호와께서 인정하시나 악인들의 길은 망하리로다</br>
<br>&nbsp;</br>
<strong><br><font color="#4682b4">시편 91 편</font></br></strong>
<br>1 지존자의 은밀한 곳에 거주하며 전능자의 그늘 아래에 사는 자여,</br>
<br>2 나는 여호와를 향하여 말하기를 그는 나의 피난처요 나의 요새요 내가 의뢰하는 하나님이라 하리니</br>
<br>3 이는 그가 너를 새 사냥꾼의 올무에서와 심한 전염병에서 건지실 것임이로다</br>
<br>4 그가 너를 그의 깃으로 덮으시리니 네가 그의 날개 아래에 피하리로다 그의 진실함은 방패와 손 방패가 되시나니</br>
<br>5 너는 밤에 찾아오는 공포와 낮에 날아드는 화살과</br>
<br>6 어두울 때 퍼지는 전염병과 밝을 때 닥쳐오는 재앙을 두려워하지 아니하리로다</br>
<br>7 천 명이 네 왼쪽에서, 만 명이 네 오른쪽에서 엎드러지나 이 재앙이 네게 가까이 하지 못하리로다</br>
<br>8 오직 너는 똑똑히 보리니 악인들의 보응을 네가 보리로다</br>
<br>9 네가 말하기를 여호와는 나의 피난처시라 하고 지존자를 너의 거처로 삼았으므로</br>
<br>10 화가 네게 미치지 못하며 재앙이 네 장막에 가까이 오지 못하리니</br>
<br>11 그가 너를 위하여 그의 천사들을 명령하사 네 모든 길에서 너를 지키게 하심이라</br>
<br>12 그들이 그들의 손으로 너를 붙들어 발이 돌에 부딪히지 아니하게 하리로다</br>
<br>13 네가 사자와 독사를 밟으며 젊은 사자와 뱀을 발로 누르리로다</br>
<br>14 하나님이 이르시되 그가 나를 사랑한즉 내가 그를 건지리라 그가 내 이름을 안즉 내가 그를 높이리라</br>
<br>15 그가 내게 간구하리니 내가 그에게 응답하리라 그들이 환난 당할 때에 내가 그와 함께 하여 그를 건지고 영화롭게 하리라</br>
<br>16 내가 그를 장수하게 함으로 그를 만족하게 하며 나의 구원을 그에게 보이리라 하시도다</br>
<br>&nbsp;</br>
<strong><br><font color="#4682b4">시편 119 편</font></br></strong>
<br>1 행위가 온전하여 여호와의 율법을 따라 행하는 자들은 복이 있음이여</br>
<br>2 여호와의 증거들을 지키고 전심으로 여호와를 구하는 자는 복이 있도다</br>
<br>3 참으로 그들은 불의를 행하지 아니하고 주의 도를 행하는도다</br>
<br>4 주께서 명령하사 주의 법도를 잘 지키게 하셨나이다</br>
<br>5 내 길을 굳게 정하사 주의 율례를 지키게 하소서</br>
<br>6 내가 주의 모든 계명에 주의할 때에는 부끄럽지 아니하리이다</br>
<br>7 내가 주의 의로운 판단을 배울 때에는 정직한 마음으로 주께 감사하리이다</br>
<br>8 내가 주의 율례들을 지키오리니 나를 아주 버리지 마옵소서</br>
<br>9 청년이 무엇으로 그의 행실을 깨끗하게 하리이까 주의 말씀만 지킬 따름이니이다</br>
<br>10 내가 전심으로 주를 찾았사오니 주의 계명에서 떠나지 말게 하소서</br>
<br>11 내가 주께 범죄하지 아니하려 하여 주의 말씀을 내 마음에 두었나이다</br>
<br>12 찬송을 받으실 주 여호와여 주의 율례들을 내게 가르치소서</br>
<br>13 주의 입의 모든 규례들을 나의 입술로 선포하였으며</br>
<br>14 내가 모든 재물을 즐거워함 같이 주의 증거들의 도를 즐거워하였나이다</br>
<br>15 내가 주의 법도들을 작은 소리로 읊조리며 주의 길들에 주의하며</br>
<br>16 주의 율례들을 즐거워하며 주의 말씀을 잊지 아니하리이다</br>
<br>17 주의 종을 후대하여 살게 하소서 그리하시면 주의 말씀을 지키리이다</br>
<br>18 내 눈을 열어서 주의 율법에서 놀라운 것을 보게 하소서</br>
<br>19 나는 땅에서 나그네가 되었사오니 주의 계명들을 내게 숨기지 마소서</br>
<br>20 주의 규례들을 항상 사모함으로 내 마음이 상하나이다</br>
<br>21 교만하여 저주를 받으며 주의 계명들에서 떠나는 자들을 주께서 꾸짖으셨나이다</br>
<br>22 내가 주의 교훈들을 지켰사오니 비방과 멸시를 내게서 떠나게 하소서</br>
<br>23 고관들도 앉아서 나를 비방하였사오나 주의 종은 주의 율례들을 작은 소리로 읊조렸나이다</br>
<br>24 주의 증거들은 나의 즐거움이요 나의 충고자니이다</br>
<br>25 내 영혼이 진토에 붙었사오니 주의 말씀대로 나를 살아나게 하소서</br>
<br>26 내가 나의 행위를 아뢰매 주께서 내게 응답하셨사오니 주의 율례들을 내게 가르치소서</br>
<br>27 나에게 주의 법도들의 길을 깨닫게 하여 주소서 그리하시면 내가 주의 기이한 일들을 작은 소리로 읊조리리이다</br>
<br>28 나의 영혼이 눌림으로 말미암아 녹사오니 주의 말씀대로 나를 세우소서</br>
<br>29 거짓 행위를 내게서 떠나게 하시고 주의 법을 내게 은혜로이 베푸소서</br>
<br>30 내가 성실한 길을 택하고 주의 규례들을 내 앞에 두었나이다</br>
<br>31 내가 주의 증거들에 매달렸사오니 여호와여 내가 수치를 당하지 말게 하소서</br>
<br>32 주께서 내 마음을 넓히시면 내가 주의 계명들의 길로 달려가리이다</br>
<br>33 여호와여 주의 율례들의 도를 내게 가르치소서 내가 끝까지 지키리이다</br>
<br>34 나로 하여금 깨닫게 하여 주소서 내가 주의 법을 준행하며 전심으로 지키리이다</br>
<br>35 나로 하여금 주의 계명들의 길로 행하게 하소서 내가 이를 즐거워함이니이다</br>
<br>36 내 마음을 주의 증거들에게 향하게 하시고 탐욕으로 향하지 말게 하소서</br>
<br>37 내 눈을 돌이켜 허탄한 것을 보지 말게 하시고 주의 길에서 나를 살아나게 하소서</br>
<br>38 주를 경외하게 하는 주의 말씀을 주의 종에게 세우소서</br>
<br>39 내가 두려워하는 비방을 내게서 떠나게 하소서 주의 규례들은 선하심이니이다</br>
<br>40 내가 주의 법도들을 사모하였사오니 주의 의로 나를 살아나게 하소서</br>
<br>41 여호와여 주의 말씀대로 주의 인자하심과 주의 구원을 내게 임하게 하소서</br>
<br>42 그리하시면 내가 나를 비방하는 자들에게 대답할 말이 있사오리니 내가 주의 말씀을 의지함이니이다</br>
<br>43 진리의 말씀이 내 입에서 조금도 떠나지 말게 하소서 내가 주의 규례를 바랐음이니이다</br>
<br>44 내가 주의 율법을 항상 지키리이다 영원히 지키리이다</br>
<br>45 내가 주의 법도들을 구하였사오니 자유롭게 걸어갈 것이오며</br>
<br>46 또 왕들 앞에서 주의 교훈들을 말할 때에 수치를 당하지 아니하겠사오며</br>
<br>47 내가 사랑하는 주의 계명들을 스스로 즐거워하며</br>
<br>48 또 내가 사랑하는 주의 계명들을 향하여 내 손을 들고 주의 율례들을 작은 소리로 읊조리리이다</br>
<br>49 주의 종에게 하신 말씀을 기억하소서 주께서 내게 소망을 가지게 하셨나이다</br>
<br>50 이 말씀은 나의 고난 중의 위로라 주의 말씀이 나를 살리셨기 때문이니이다</br>
<br>51 교만한 자들이 나를 심히 조롱하였어도 나는 주의 법을 떠나지 아니하였나이다</br>
<br>52 여호와여 주의 옛 규례들을 내가 기억하고 스스로 위로하였나이다</br>
<br>53 주의 율법을 버린 악인들로 말미암아 내가 맹렬한 분노에 사로잡혔나이다</br>
<br>54 내가 나그네 된 집에서 주의 율례들이 나의 노래가 되었나이다</br>
<br>55 여호와여 내가 밤에 주의 이름을 기억하고 주의 법을 지켰나이다</br>
<br>56 내 소유는 이것이니 곧 주의 법도들을 지킨 것이니이다</br>
<br>57 여호와는 나의 분깃이시니 나는 주의 말씀을 지키리라 하였나이다</br>
<br>58 내가 전심으로 주께 간구하였사오니 주의 말씀대로 내게 은혜를 베푸소서</br>
<br>59 내가 내 행위를 생각하고 주의 증거들을 향하여 내 발길을 돌이켰사오며</br>
<br>60 주의 계명들을 지키기에 신속히 하고 지체하지 아니하였나이다</br>
<br>61 악인들의 줄이 내게 두루 얽혔을지라도 나는 주의 법을 잊지 아니하였나이다</br>
<br>62 내가 주의 의로운 규례들로 말미암아 밤중에 일어나 주께 감사하리이다</br>
<br>63 나는 주를 경외하는 모든 자들과 주의 법도들을 지키는 자들의 친구라</br>
<br>64 여호와여 주의 인자하심이 땅에 충만하였사오니 주의 율례들로 나를 가르치소서</br>
<br>65 여호와여 주의 말씀대로 주의 종을 선대하셨나이다</br>
<br>66 내가 주의 계명들을 믿었사오니 좋은 명철과 지식을 내게 가르치소서</br>
<br>67 고난 당하기 전에는 내가 그릇 행하였더니 이제는 주의 말씀을 지키나이다</br>
<br>68 주는 선하사 선을 행하시오니 주의 율례들로 나를 가르치소서</br>
<br>69 교만한 자들이 거짓을 지어 나를 치려 하였사오나 나는 전심으로 주의 법도들을 지키리이다</br>
<br>70 그들의 마음은 살져서 기름덩이 같으나 나는 주의 법을 즐거워하나이다</br>
<br>71 고난 당한 것이 내게 유익이라 이로 말미암아 내가 주의 율례들을 배우게 되었나이다</br>
<br>72 주의 입의 법이 내게는 천천 금은보다 좋으니이다</br>
<br>73 주의 손이 나를 만들고 세우셨사오니 내가 깨달아 주의 계명들을 배우게 하소서</br>
<br>74 주를 경외하는 자들이 나를 보고 기뻐하는 것은 내가 주의 말씀을 바라는 까닭이니이다</br>
<br>75 여호와여 내가 알거니와 주의 심판은 의로우시고 주께서 나를 괴롭게 하심은 성실하심 때문이니이다</br>
<br>76 구하오니 주의 종에게 하신 말씀대로 주의 인자하심이 나의 위안이 되게 하시며</br>
<br>77 주의 긍휼히 여기심이 내게 임하사 내가 살게 하소서 주의 법은 나의 즐거움이니이다</br>
<br>78 교만한 자들이 거짓으로 나를 엎드러뜨렸으니 그들이 수치를 당하게 하소서 나는 주의 법도들을 작은 소리로 읊조리리이다</br>
<br>79 주를 경외하는 자들이 내게 돌아오게 하소서 그리하시면 그들이 주의 증거들을 알리이다</br>
<br>80 내 마음으로 주의 율례들에 완전하게 하사 내가 수치를 당하지 아니하게 하소서</br>
<br>81 나의 영혼이 주의 구원을 사모하기에 피곤하오나 나는 주의 말씀을 바라나이다</br>
<br>82 나의 말이 주께서 언제나 나를 안위하실까 하면서 내 눈이 주의 말씀을 바라기에 피곤하니이다</br>
<br>83 내가 연기 속의 가죽 부대 같이 되었으나 주의 율례들을 잊지 아니하나이다</br>
<br>84 주의 종의 날이 얼마나 되나이까 나를 핍박하는 자들을 주께서 언제나 심판하시리이까</br>
<br>85 주의 법을 따르지 아니하는 교만한 자들이 나를 해하려고 웅덩이를 팠나이다</br>
<br>86 주의 모든 계명들은 신실하니이다 그들이 이유 없이 나를 핍박하오니 나를 도우소서</br>
<br>87 그들이 나를 세상에서 거의 멸하였으나 나는 주의 법도들을 버리지 아니하였사오니</br>
<br>88 주의 인자하심을 따라 나를 살아나게 하소서 그리하시면 주의 입의 교훈들을 내가 지키리이다</br>
<br>89 여호와여 주의 말씀은 영원히 하늘에 굳게 섰사오며</br>
<br>90 주의 성실하심은 대대에 이르나이다 주께서 땅을 세우셨으므로 땅이 항상 있사오니</br>
<br>91 천지가 주의 규례들대로 오늘까지 있음은 만물이 주의 종이 된 까닭이니이다</br>
<br>92 주의 법이 나의 즐거움이 되지 아니하였더면 내가 내 고난 중에 멸망하였으리이다</br>
<br>93 내가 주의 법도들을 영원히 잊지 아니하오니 주께서 이것들 때문에 나를 살게 하심이니이다</br>
<br>94 나는 주의 것이오니 나를 구원하소서 내가 주의 법도들만을 찾았나이다</br>
<br>95 악인들이 나를 멸하려고 엿보오나 나는 주의 증거들만을 생각하겠나이다</br>
<br>96 내가 보니 모든 완전한 것이 다 끝이 있어도 주의 계명들은 심히 넓으니이다</br>
<br>97 내가 주의 법을 어찌 그리 사랑하는지요 내가 그것을 종일 작은 소리로 읊조리나이다</br>
<br>98 주의 계명들이 항상 나와 함께 하므로 그것들이 나를 원수보다 지혜롭게 하나이다</br>
<br>99 내가 주의 증거들을 늘 읊조리므로 나의 명철함이 나의 모든 스승보다 나으며</br>
<br>100 주의 법도들을 지키므로 나의 명철함이 노인보다 나으니이다</br>
<br>101 내가 주의 말씀을 지키려고 발을 금하여 모든 악한 길로 가지 아니하였사오며</br>
<br>102 주께서 나를 가르치셨으므로 내가 주의 규례들에서 떠나지 아니하였나이다</br>
<br>103 주의 말씀의 맛이 내게 어찌 그리 단지요 내 입에 꿀보다 더 다니이다</br>
<br>104 주의 법도들로 말미암아 내가 명철하게 되었으므로 모든 거짓 행위를 미워하나이다</br>
<br>105 주의 말씀은 내 발에 등이요 내 길에 빛이니이다</br>
<br>106 주의 의로운 규례들을 지키기로 맹세하고 굳게 정하였나이다</br>
<br>107 나의 고난이 매우 심하오니 여호와여 주의 말씀대로 나를 살아나게 하소서</br>
<br>108 여호와여 구하오니 내 입이 드리는 자원제물을 받으시고 주의 공의를 내게 가르치소서</br>
<br>109 나의 생명이 항상 위기에 있사오나 나는 주의 법을 잊지 아니하나이다</br>
<br>110 악인들이 나를 해하려고 올무를 놓았사오나 나는 주의 법도들에서 떠나지 아니하였나이다</br>
<br>111 주의 증거들로 내가 영원히 나의 기업을 삼았사오니 이는 내 마음의 즐거움이 됨이니이다</br>
<br>112 내가 주의 율례들을 영원히 행하려고 내 마음을 기울였나이다</br>
<br>113 내가 두 마음 품는 자들을 미워하고 주의 법을 사랑하나이다</br>
<br>114 주는 나의 은신처요 방패시라 내가 주의 말씀을 바라나이다</br>
<br>115 너희 행악자들이여 나를 떠날지어다 나는 내 하나님의 계명들을 지키리로다</br>
<br>116 주의 말씀대로 나를 붙들어 살게 하시고 내 소망이 부끄럽지 않게 하소서</br>
<br>117 나를 붙드소서 그리하시면 내가 구원을 얻고 주의 율례들에 항상 주의하리이다</br>
<br>118 주의 율례들에서 떠나는 자는 주께서 다 멸시하셨으니 그들의 속임수는 허무함이니이다</br>
<br>119 주께서 세상의 모든 악인들을 찌꺼기 같이 버리시니 그러므로 내가 주의 증거들을 사랑하나이다</br>
<br>120 내 육체가 주를 두려워함으로 떨며 내가 또 주의 심판을 두려워하나이다</br>
<br>121 내가 정의와 공의를 행하였사오니 나를 박해하는 자들에게 나를 넘기지 마옵소서</br>
<br>122 주의 종을 보증하사 복을 얻게 하시고 교만한 자들이 나를 박해하지 못하게 하소서</br>
<br>123 내 눈이 주의 구원과 주의 의로운 말씀을 사모하기에 피곤하니이다</br>
<br>124 주의 인자하심대로 주의 종에게 행하사 내게 주의 율례들을 가르치소서</br>
<br>125 나는 주의 종이오니 나를 깨닫게 하사 주의 증거들을 알게 하소서</br>
<br>126 그들이 주의 법을 폐하였사오니 지금은 여호와께서 일하실 때니이다</br>
<br>127 그러므로 내가 주의 계명들을 금 곧 순금보다 더 사랑하나이다</br>
<br>128 그러므로 내가 범사에 모든 주의 법도들을 바르게 여기고 모든 거짓 행위를 미워하나이다</br>
<br>129 주의 증거들은 놀라우므로 내 영혼이 이를 지키나이다</br>
<br>130 주의 말씀을 열면 빛이 비치어 우둔한 사람들을 깨닫게 하나이다</br>
<br>131 내가 주의 계명들을 사모하므로 내가 입을 열고 헐떡였나이다</br>
<br>132 주의 이름을 사랑하는 자들에게 베푸시던 대로 내게 돌이키사 내게 은혜를 베푸소서</br>
<br>133 나의 발걸음을 주의 말씀에 굳게 세우시고 어떤 죄악도 나를 주관하지 못하게 하소서</br>
<br>134 사람의 박해에서 나를 구원하소서 그리하시면 내가 주의 법도들을 지키리이다</br>
<br>135 주의 얼굴을 주의 종에게 비추시고 주의 율례로 나를 가르치소서</br>
<br>136 그들이 주의 법을 지키지 아니하므로 내 눈물이 시냇물 같이 흐르나이다</br>
<br>137 여호와여 주는 의로우시고 주의 판단은 옳으니이다</br>
<br>138 주께서 명령하신 증거들은 의롭고 지극히 성실하니이다</br>
<br>139 내 대적들이 주의 말씀을 잊어버렸으므로 내 열정이 나를 삼켰나이다</br>
<br>140 주의 말씀이 심히 순수하므로 주의 종이 이를 사랑하나이다</br>
<br>141 내가 미천하여 멸시를 당하나 주의 법도를 잊지 아니하였나이다</br>
<br>142 주의 의는 영원한 의요 주의 율법은 진리로소이다</br>
<br>143 환난과 우환이 내게 미쳤으나 주의 계명은 나의 즐거움이니이다</br>
<br>144 주의 증거들은 영원히 의로우시니 나로 하여금 깨닫게 하사 살게 하소서</br>
<br>145 여호와여 내가 전심으로 부르짖었사오니 내게 응답하소서 내가 주의 교훈들을 지키리이다</br>
<br>146 내가 주께 부르짖었사오니 나를 구원하소서 내가 주의 증거들을 지키리이다</br>
<br>147 내가 날이 밝기 전에 부르짖으며 주의 말씀을 바랐사오며</br>
<br>148 주의 말씀을 조용히 읊조리려고 내가 새벽녘에 눈을 떴나이다</br>
<br>149 주의 인자하심을 따라 내 소리를 들으소서 여호와여 주의 규례들을 따라 나를 살리소서</br>
<br>150 악을 따르는 자들이 가까이 왔사오니 그들은 주의 법에서 머니이다</br>
<br>151 여호와여 주께서 가까이 계시오니 주의 모든 계명들은 진리니이다</br>
<br>152 내가 전부터 주의 증거들을 알고 있었으므로 주께서 영원히 세우신 것인 줄을 알았나이다</br>
<br>153 나의 고난을 보시고 나를 건지소서 내가 주의 율법을 잊지 아니함이니이다</br>
<br>154 주께서 나를 변호하시고 나를 구하사 주의 말씀대로 나를 살리소서</br>
<br>155 구원이 악인들에게서 멀어짐은 그들이 주의 율례들을 구하지 아니함이니이다</br>
<br>156 여호와여 주의 긍휼이 많으오니 주의 규례들에 따라 나를 살리소서</br>
<br>157 나를 핍박하는 자들과 나의 대적들이 많으나 나는 주의 증거들에서 떠나지 아니하였나이다</br>
<br>158 주의 말씀을 지키지 아니하는 거짓된 자들을 내가 보고 슬퍼하였나이다</br>
<br>159 내가 주의 법도들을 사랑함을 보옵소서 여호와여 주의 인자하심을 따라 나를 살리소서</br>
<br>160 주의 말씀의 강령은 진리이오니 주의 의로운 모든 규례들은 영원하리이다</br>
<br>161 고관들이 거짓으로 나를 핍박하오나 나의 마음은 주의 말씀만 경외하나이다</br>
<br>162 사람이 많은 탈취물을 얻은 것처럼 나는 주의 말씀을 즐거워하나이다</br>
<br>163 나는 거짓을 미워하며 싫어하고 주의 율법을 사랑하나이다</br>
<br>164 주의 의로운 규례들로 말미암아 내가 하루 일곱 번씩 주를 찬양하나이다</br>
<br>165 주의 법을 사랑하는 자에게는 큰 평안이 있으니 그들에게 장애물이 없으리이다</br>
<br>166 여호와여 내가 주의 구원을 바라며 주의 계명들을 행하였나이다</br>
<br>167 내 영혼이 주의 증거들을 지켰사오며 내가 이를 지극히 사랑하나이다</br>
<br>168 내가 주의 법도들과 증거들을 지켰사오니 나의 모든 행위가 주 앞에 있음이니이다</br>
<br>169 여호와여 나의 부르짖음이 주의 앞에 이르게 하시고 주의 말씀대로 나를 깨닫게 하소서</br>
<br>170 나의 간구가 주의 앞에 이르게 하시고 주의 말씀대로 나를 건지소서</br>
<br>171 주께서 율례를 내게 가르치시므로 내 입술이 주를 찬양하리이다</br>
<br>172 주의 모든 계명들이 의로우므로 내 혀가 주의 말씀을 노래하리이다</br>
<br>173 내가 주의 법도들을 택하였사오니 주의 손이 항상 나의 도움이 되게 하소서</br>
<br>174 여호와여 내가 주의 구원을 사모하였사오며 주의 율법을 즐거워하나이다</br>
<br>175 내 영혼을 살게 하소서 그리하시면 주를 찬송하리이다 주의 규례들이 나를 돕게 하소서</br>
<br>176 잃은 양 같이 내가 방황하오니 주의 종을 찾으소서 내가 주의 계명들을 잊지 아니함이니이다</br>
<br>&nbsp;</br>
<strong><br><font color="#4682b4">느헤미야 11장- 12장 30절</font></br></strong>
<strong><br><font color="#4682b4">느헤미야 11장</font></br></strong>
<br><i><font color="#808080">*예루살렘에 거주하는 백성들*</font></i></br>
<br>1 백성의 지도자들은 예루살렘에 거주하였고 그 남은 백성은 제비 뽑아 십분의 일은 거룩한 성 예루살렘에서 거주하게 하고 그 십분의 구는 다른 성읍에 거주하게 하였으며</br>
<br>2 예루살렘에 거주하기를 자원하는 모든 자를 위하여 백성들이 복을 빌었느니라</br>
<br>3 이스라엘과 제사장들과 레위 사람들과 느디님 사람들과 솔로몬의 신하들의 자손은 유다 여러 성읍에서 각각 자기 성읍 자기 기업에 거주하였느니라 예루살렘에 거주한 그 지방의 지도자들은 이러하니</br>
<br>4 예루살렘에 거주한 자는 유다 자손과 베냐민 자손 몇 명이라 유다 자손 중에는 베레스 자손 아다야이니 그는 웃시야의 아들이요 스가랴의 손자요 아마랴의 증손이요 스바댜의 현손이요 마할랄렐의 오대 손이며</br>
<br>5 또 마아세야니 그는 바룩의 아들이요 골호세의 손자요 하사야의 증손이요 아다야의 현손이요 요야립의 오대 손이요 스가랴의 육대 손이요 실로 사람의 칠대 손이라</br>
<br>6 예루살렘에 거주한 베레스 자손은 모두 사백육십팔 명이니 다 용사였느니라</br>
<br>7 베냐민 자손은 살루이니 그는 므술람의 아들이요 요엣의 손자요 브다야의 증손이요 골라야의 현손이요 마아세야의 오대 손이요 이디엘의 육대 손이요 여사야의 칠대 손이며</br>
<br>8 그 다음은 갑배와 살래 등이니 모두 구백이십팔 명이라</br>
<br>9 시그리의 아들 요엘이 그들의 감독이 되었고 핫스누아의 아들 유다는 버금이 되어 성읍을 다스렸느니라</br>
<br>10 제사장 중에는 요야립의 아들 여다야와 야긴이며</br>
<br>11 또 하나님의 전을 맡은 자 스라야이니 그는 힐기야의 아들이요 므술람의 손자요 사독의 증손이요 므라욧의 현손이요 아히둡의 오대 손이며</br>
<br>12 또 전에서 일하는 그들의 형제니 모두 팔백이십이 명이요 또 아다야이니 그는 여로함의 아들이요 블라야의 손자요 암시의 증손이요 스가랴의 현손이요 바스훌의 오대 손이요 말기야의 육대 손이며</br>
<br>13 또 그 형제의 족장된 자이니 모두 이백사십이 명이요 또 아맛새이니 그는 아사렐의 아들이요 아흐새의 손자요 므실레못의 증손이요 임멜의 현손이며</br>
<br>14 또 그들의 형제의 큰 용사들이니 모두 백이십팔 명이라 하그돌림의 아들 삽디엘이 그들의 감독이 되었느니라</br>
<br>15 레위 사람 중에는 스마야이니 그는 핫숩의 아들이요 아스리감의 손자요 하사뱌의 증손이요 분니의 현손이며</br>
<br>16 또 레위 사람의 족장 삽브대와 요사밧이니 그들은 하나님의 전 바깥 일을 맡았고</br>
<br>17 또 아삽의 증손 삽디의 손자 미가의 아들 맛다냐이니 그는 기도할 때에 감사하는 말씀을 인도하는 자가 되었고 형제 중에 박부갸가 버금이 되었으며 또 여두둔의 증손 갈랄의 손자 삼무아의 아들 압다니</br>
<br>18 거룩한 성에 레위 사람은 모두 이백팔십사 명이었느니라</br>
<br>19 성 문지기는 악굽과 달몬과 그 형제이니 모두 백칠십이 명이며</br>
<br>20 그 나머지 이스라엘 백성과 제사장과 레위 사람은 유다 모든 성읍에 흩어져 각각 자기 기업에 살았고</br>
<br>21 느디님 사람은 오벨에 거주하니 시하와 기스바가 그들의 책임자가 되었느니라</br>
<br>22 노래하는 자들인 아삽 자손 중 미가의 현손 맛다냐의 증손 하사뱌의 손자 바니의 아들 웃시는 예루살렘에 거주하는 레위 사람의 감독이 되어 하나님의 전 일을 맡아 다스렸으니</br>
<br>23 이는 왕의 명령대로 노래하는 자들에게 날마다 할 일을 정해 주었기 때문이며</br>
<br>24 유다의 아들 세라의 자손 곧 므세사벨의 아들 브다히야는 왕의 수하에서 백성의 일을 다스렸느니라</br>
<br><i><font color="#808080">*마을과 주변 동네들에 거주하는 백성들*</font></i></br>
<br>25 마을과 들로 말하면 유다 자손의 일부는 기럇 아르바와 그 주변 동네들과 디본과 그 주변 동네들과 여갑스엘과 그 마을들에 거주하며</br>
<br>26 또 예수아와 몰라다와 벧벨렛과</br>
<br>27 하살수알과 브엘세바와 그 주변 동네들에 거주하며</br>
<br>28 또 시글락과 므고나와 그 주변 동네들에 거주하며</br>
<br>29 또 에느림몬과 소라와 야르뭇에 거주하며</br>
<br>30 또 사노아와 아둘람과 그 마을들과 라기스와 그 들판과 아세가와 그 주변 동네들에 살았으니 그들은 브엘세바에서부터 힌놈의 골짜기까지 장막을 쳤으며</br>
<br>31 또 베냐민 자손은 게바에서부터 믹마스와 아야와 벧엘과 그 주변 동네들에 거주하며</br>
<br>32 아나돗과 놉과 아나냐와</br>
<br>33 하솔과 라마와 깃다임과</br>
<br>34 하딧과 스보임과 느발랏과</br>
<br>35 로드와 오노와 장인들의 골짜기에 거주하였으며</br>
<br>36 유다에 있던 레위 사람의 일부는 베냐민과 합하였느니라</br>
<br>&nbsp;</br>
<strong><br><font color="#4682b4">느헤미야 12장 1절- 30절</font></br></strong>
<br><i><font color="#808080">*제사장과 레위 사람들*</font></i></br>
<br>1 스알디엘의 아들 스룹바벨과 예수아와 함께 돌아온 제사장들과 레위 사람들은 이러하니라 제사장들은 스라야와 예레미야와 에스라와</br>
<br>2 아마랴와 말룩과 핫두스와</br>
<br>3 스가냐와 르훔과 므레못과</br>
<br>4 잇도와 긴느도이와 아비야와</br>
<br>5 미야민과 마아댜와 빌가와</br>
<br>6 스마야와 요야립과 여다야와</br>
<br>7 살루와 아목과 힐기야와 여다야니 이상은 예수아 때에 제사장들과 그들의 형제의 지도자들이었느니라</br>
<br><i><font color="#808080">*대제사장 예수아의 자손들*</font></i></br>
<br>8 레위 사람들은 예수아와 빈누이와 갓미엘과 세레뱌와 유다와 맛다냐니 이 맛다냐는 그의 형제와 함께 찬송하는 일을 맡았고</br>
<br>9 또 그들의 형제 박부갸와 운노는 직무를 따라 그들의 맞은편에 있으며</br>
<br>10 예수아는 요야김을 낳고 요야김은 엘리아십을 낳고 엘리아십은 요야다를 낳고</br>
<br>11 요야다는 요나단을 낳고 요나단은 얏두아를 낳았느니라</br>
<br><i><font color="#808080">*제사장의 족장들*</font></i></br>
<br>12 요야김 때에 제사장, 족장 된 자는 스라야 족속에는 므라야요 예레미야 족속에는 하나냐요</br>
<br>13 에스라 족속에는 므술람이요 아마랴 족속에는 여호하난이요</br>
<br>14 말루기 족속에는 요나단이요 스바냐 족속에는 요셉이요</br>
<br>15 하림 족속에는 아드나요 므라욧 족속에는 헬개요</br>
<br>16 잇도 족속에는 스가랴요 긴느돈 족속에는 므술람이요</br>
<br>17 아비야 족속에는 시그리요 미냐민 곧 모아댜 족속에는 빌대요</br>
<br>18 빌가 족속에는 삼무아요 스마야 족속에는 여호나단이요</br>
<br>19 요야립 족속에는 맛드내요 여다야 족속에는 웃시요</br>
<br>20 살래 족속에는 갈래요 아목 족속에는 에벨이요</br>
<br>21 힐기야 족속에는 하사뱌요 여다야 족속에는 느다넬이었느니라</br>
<br><i><font color="#808080">*제사장과 레위 사람들에 관한 기록*</font></i></br>
<br>22 엘리아십과 요야다와 요하난과 얏두아 때에 레위 사람의 족장이 모두 책에 기록되었고 바사 왕 다리오 때에 제사장도 책에 기록되었고</br>
<br>23 레위 자손의 족장들은 엘리아십의 아들 요하난 때까지 역대지략에 기록되었으며</br>
<br>24 레위 족속의 지도자들은 하사뱌와 세레뱌와 갓미엘의 아들 예수아라 그들은 그들의 형제의 맞은편에 있어 하나님의 사람 다윗의 명령대로 순서를 따라 주를 찬양하며 감사하고</br>
<br>25 맛다냐와 박부갸와 오바댜와 므술람과 달몬과 악굽은 다 문지기로서 순서대로 문안의 곳간을 파수하였나니</br>
<br>26 이상의 모든 사람들은 요사닥의 손자 예수아의 아들 요야김과 총독 느헤미야와 제사장 겸 학사 에스라 때에 있었느니라</br>
<br><i><font color="#808080">*느헤미야가 성벽을 봉헌하다*</font></i></br>
<br>27 예루살렘 성벽을 봉헌하게 되니 각처에서 레위 사람들을 찾아 예루살렘으로 데려다가 감사하며 노래하며 제금을 치며 비파와 수금을 타며 즐거이 봉헌식을 행하려 하매</br>
<br>28 이에 노래하는 자들이 예루살렘 사방 들과 느도바 사람의 마을에서 모여들고</br>
<br>29 또 벧길갈과 게바와 아스마웻 들에서 모여들었으니 이 노래하는 자들은 자기들을 위하여 예루살렘 사방에 마을들을 이루었음이라</br>
<br>30 제사장들과 레위 사람들이 몸을 정결하게 하고 또 백성과 성문과 성벽을 정결하게 하니라</br>
<br>&nbsp;</br>
<strong><br><font color="#4682b4">시편 120-127 편</font></br></strong>
<strong><br><font color="#4682b4">시편 120 편</font></br></strong>
<br><i><font color="#808080">*성전에 올라가는 노래*</font></i></br>
<br>1 내가 환난 중에 여호와께 부르짖었더니 내게 응답하셨도다</br>
<br>2 여호와여 거짓된 입술과 속이는 혀에서 내 생명을 건져 주소서</br>
<br>3 너 속이는 혀여 무엇을 네게 주며 무엇을 네게 더할꼬</br>
<br>4 장사의 날카로운 화살과 로뎀 나무 숯불이리로다</br>
<br>5 메섹에 머물며 게달의 장막 중에 머무는 것이 내게 화로다</br>
<br>6 내가 화평을 미워하는 자들과 함께 오래 거주하였도다</br>
<br>7 나는 화평을 원할지라도 내가 말할 때에 그들은 싸우려 하는도다</br>
<br>&nbsp;</br>
<strong><br><font color="#4682b4">시편 121 편</font></br></strong>
<br><i><font color="#808080">*성전에 올라가는 노래*</font></i></br>
<br>1 내가 산을 향하여 눈을 들리라 나의 도움이 어디서 올까</br>
<br>2 나의 도움은 천지를 지으신 여호와에게서로다</br>
<br>3 여호와께서 너를 실족하지 아니하게 하시며 너를 지키시는 이가 졸지 아니하시리로다</br>
<br>4 이스라엘을 지키시는 이는 졸지도 아니하시고 주무시지도 아니하시리로다</br>
<br>5 여호와는 너를 지키시는 이시라 여호와께서 네 오른쪽에서 네 그늘이 되시나니</br>
<br>6 낮의 해가 너를 상하게 하지 아니하며 밤의 달도 너를 해치지 아니하리로다</br>
<br>7 여호와께서 너를 지켜 모든 환난을 면하게 하시며 또 네 영혼을 지키시리로다</br>
<br>8 여호와께서 너의 출입을 지금부터 영원까지 지키시리로다</br>
<br>&nbsp;</br>
<strong><br><font color="#4682b4">시편 122 편</font></br></strong>
<br><i><font color="#808080">*다윗의 시 곧 성전에 올라가는 노래*</font></i></br>
<br>1 사람이 내게 말하기를 여호와의 집에 올라가자 할 때에 내가 기뻐하였도다</br>
<br>2 예루살렘아 우리 발이 네 성문 안에 섰도다</br>
<br>3 예루살렘아 너는 잘 짜여진 성읍과 같이 건설되었도다</br>
<br>4 지파들 곧 여호와의 지파들이 여호와의 이름에 감사하려고 이스라엘의 전례대로 그리로 올라가는도다</br>
<br>5 거기에 심판의 보좌를 두셨으니 곧 다윗의 집의 보좌로다</br>
<br>6 예루살렘을 위하여 평안을 구하라 예루살렘을 사랑하는 자는 형통하리로다</br>

<br>7 네 성 안에는 평안이 있고 네 궁중에는 형통함이 있을지어다</br>
<br>8 내가 내 형제와 친구를 위하여 이제 말하리니 네 가운데에 평안이 있을지어다</br>
<br>9 여호와 우리 하나님의 집을 위하여 내가 너를 위하여 복을 구하리로다</br>
<br>&nbsp;</br>
<strong><br><font color="#4682b4">시편 123 편</font></br></strong>
<br><i><font color="#808080">*성전에 올라가는 노래*</font></i></br>
<br>1 하늘에 계시는 주여 내가 눈을 들어 주께 향하나이다</br>
<br>2 상전의 손을 바라보는 종들의 눈 같이, 여주인의 손을 바라보는 여종의 눈 같이 우리의 눈이 여호와 우리 하나님을 바라보며 우리에게 은혜 베풀어 주시기를 기다리나이다</br>
<br>3 여호와여 우리에게 은혜를 베푸시고 또 은혜를 베푸소서 심한 멸시가 우리에게 넘치나이다</br>
<br>4 안일한 자의 조소와 교만한 자의 멸시가 우리 영혼에 넘치나이다</br>
<br>&nbsp;</br>
<strong><br><font color="#4682b4">시편 124 편</font></br></strong>
<br><i><font color="#808080">*다윗의 시 곧 성전에 올라가는 노래*</font></i></br>
<br>1 이스라엘은 이제 말하기를 여호와께서 우리 편에 계시지 아니하셨더라면 우리가 어떻게 하였으랴</br>
<br>2 사람들이 우리를 치러 일어날 때에 여호와께서 우리 편에 계시지 아니하셨더라면</br>
<br>3 그 때에 그들의 노여움이 우리에게 맹렬하여 우리를 산 채로 삼켰을 것이며</br>
<br>4 그 때에 물이 우리를 휩쓸며 시내가 우리 영혼을 삼켰을 것이며</br>
<br>5 그 때에 넘치는 물이 우리 영혼을 삼켰을 것이라 할 것이로다</br>
<br>6 우리를 내주어 그들의 이에 씹히지 아니하게 하신 여호와를 찬송할지로다</br>
<br>7 우리의 영혼이 사냥꾼의 올무에서 벗어난 새 같이 되었나니 올무가 끊어지므로 우리가 벗어났도다</br>
<br>8 우리의 도움은 천지를 지으신 여호와의 이름에 있도다</br>
<br>&nbsp;</br>
<strong><br><font color="#4682b4">시편 125 편</font></br></strong>
<br><i><font color="#808080">*성전에 올라가는 노래*</font></i></br>
<br>1 여호와를 의지하는 자는 시온 산이 흔들리지 아니하고 영원히 있음 같도다</br>
<br>2 산들이 예루살렘을 두름과 같이 여호와께서 그의 백성을 지금부터 영원까지 두르시리로다</br>
<br>3 악인의 규가 의인들의 땅에서는 그 권세를 누리지 못하리니 이는 의인들로 하여금 죄악에 손을 대지 아니하게 함이로다</br>
<br>4 여호와여 선한 자들과 마음이 정직한 자들에게 선대하소서</br>
<br>5 자기의 굽은 길로 치우치는 자들은 여호와께서 죄를 범하는 자들과 함께 다니게 하시리로다 이스라엘에게는 평강이 있을지어다</br>
<br>&nbsp;</br>
<strong><br><font color="#4682b4">시편 126 편</font></br></strong>
<br><i><font color="#808080">*성전에 올라가는 노래*</font></i></br>
<br>1 여호와께서 시온의 포로를 돌려 보내실 때에 우리는 꿈꾸는 것 같았도다</br>
<br>2 그 때에 우리 입에는 웃음이 가득하고 우리 혀에는 찬양이 찼었도다 그 때에 뭇 나라 가운데에서 말하기를 여호와께서 그들을 위하여 큰 일을 행하셨다 하였도다</br>
<br>3 여호와께서 우리를 위하여 큰 일을 행하셨으니 우리는 기쁘도다</br>
<br>4 여호와여 우리의 포로를 남방 시내들 같이 돌려 보내소서</br>
<br>5 눈물을 흘리며 씨를 뿌리는 자는 기쁨으로 거두리로다</br>
<br>6 울며 씨를 뿌리러 나가는 자는 반드시 기쁨으로 그 곡식 단을 가지고 돌아오리로다</br>
<br>&nbsp;</br>
<strong><br><font color="#4682b4">시편 127 편</font></br></strong>
<br><i><font color="#808080">*솔로몬의 시 곧 성전에 올라가는 노래*</font></i></br>
<br>1 여호와께서 집을 세우지 아니하시면 세우는 자의 수고가 헛되며 여호와께서 성을 지키지 아니하시면 파수꾼의 깨어 있음이 헛되도다</br>
<br>2 너희가 일찍이 일어나고 늦게 누우며 수고의 떡을 먹음이 헛되도다 그러므로 여호와께서 그의 사랑하시는 자에게는 잠을 주시는도다</br>
<br>3 보라 자식들은 여호와의 기업이요 태의 열매는 그의 상급이로다</br>
<br>4 젊은 자의 자식은 장사의 수중의 화살 같으니</br>
<br>5 이것이 그의 화살통에 가득한 자는 복되도다 그들이 성문에서 그들의 원수와 담판할 때에 수치를 당하지 아니하리로다</br>
<br>&nbsp;</br>
<br>    64 일차 끝</br>
       <br>&nbsp;</br>
      <br>&nbsp;</br>
      <br>&nbsp;</br>
      <br>&nbsp;</br>
      <br>&nbsp;</br>
      <br>&nbsp;</br>
    </h2>
  </div>

  <!-- 모달 (설명/요약 출력) -->
  <div id="explanation-modal" class="modal" role="dialog" aria-modal="true" aria-labelledby="modal-title">
    <div class="modal-content">
      <span class="close-button" id="close-modal" aria-label="닫기">&times;</span>
      <h3 id="modal-title">구절 설명</h3>
      <img id="modal-image" src="" alt="설명 관련 이미지" />
      <div id="modal-text">구절을 드래그하여 선택하고 '구절설명' 버튼을 누르세요.</div>
    </div>
  </div>

  <div id="scroll-marker-container" class="scroll-marker-container" aria-hidden="true"></div>

  <!-- 기도문 팝업 -->
  <div id="prayerToast" class="prayer-toast" role="dialog" aria-modal="false" aria-label="성경 읽기 전 기도문">
    <div class="prayer-header">
      <div class="prayer-title">
        <span>🙏</span>
        <span>기도하고 읽기</span>
        <span class="prayer-badge">90일 성경통톡</span>
      </div>
      <button class="prayer-close" id="prayerCloseBtn" aria-label="기도문 닫기">×</button>
    </div>

    <div class="prayer-body" id="prayerBody" tabindex="0">
   <style>
  .cross-red {
    color: red;
    font-weight: 900;
    -webkit-text-stroke: 0.6px currentColor; /* 윤곽선으로 두께 보강 */
    text-shadow:
      0 0 0 currentColor,         /* 기본 채움 */
      0.02em 0 currentColor, -0.02em 0 currentColor,
      0 0.02em currentColor,  0 -0.02em currentColor; /* 가장자리 두껍게 */
  }
</style>

<h4>
  <p>👀<span class="cross-red">✝︎</span> "하나님나라 관점" <span class="cross-red">✝︎</span>👀으로</p>
  <p>읽는 📖"90일 통큰통독"📖</p>
</h4>
<p>— 👦🏻 성경 읽기 전 1분 기도 🙏—</p>
<p>내 삶의 주인이 되시는 하나님, 성경을 읽게 하시니 감사합니다. 이 성경이 하나님의 말씀임을 믿습니다. 특별히 나에게 주시는 하나님의 말씀임을 믿습니다. 주시는 말씀을 내 관점으로 읽게 하지 마시고 하나님의 관점으로 읽어 하나님의 마음을 알게 하시고, 그 마음을 받아 나의 중심성을 하나님의 뜻 앞에 내려놓게 하시고 순종하게 하시어 변화되게 하옵소서, 말씀을 삶으로 이루는 성경 읽기가 되게 역사하여 주시옵소서. 예수님의 이름으로 기도합니다. 아멘.</p>
    
    </div>

    <div class="prayer-footer">
  <div></div> <!-- 좌측 자리 균형용(선택) -->
  <div class="prayer-actions">
    <button class="prayer-btn" id="prayerReadAlone">기도 드렸습니다</button>
    <button class="prayer-btn prayer-btn-primary" id="prayerAmen">확인</button>
  </div>
</div>

  <script>
    // ------------------------------
    // API KEY (사용자 입력 상태)
    const apiKey = "AIzaSyDUlSQlSPgnrFBXpnUJMDoUO3s_KsaoFRU";
    // ------------------------------

    // DOM
    const bibleTextEl = document.getElementById('bible-text');
    const searchCountEl = document.getElementById('search-count');
    const nextLocationBtn = document.getElementById('next-location-btn');
    const scrollMarkerContainer = document.getElementById('scroll-marker-container');

    const explanationIconButton = document.getElementById('explanation-icon-button');
    const explanationButtonWrapper = document.getElementById('explanation-button-wrapper');
    const explanationSubButtons = document.getElementById('explanation-sub-buttons');
    const detailedExplanationButton = document.getElementById('detailed-explanation-button');
    const simpleExplanationButton = document.getElementById('simple-explanation-button');

    const summarySimpleMain = document.getElementById('summary-simple-main');
    const summaryDetailedMain = document.getElementById('summary-detailed-main');

    const modal = document.getElementById('explanation-modal');
    const closeModalButton = document.getElementById('close-modal');
    const modalTitle = document.getElementById('modal-title');
    const modalImage = document.getElementById('modal-image');
    const modalText = document.getElementById('modal-text');

    const audio = document.getElementById('audio-file');
    const playBtn = document.getElementById('play-btn');
    const pauseBtn = document.getElementById('pause-btn');
    const stopBtn = document.getElementById('stop-btn');
    const progressBar = document.getElementById('progress-bar');
    const rewindBtn = document.getElementById('rewind-10');
    const forwardBtn = document.getElementById('forward-10');
    const speedDisplay = document.getElementById('speed-display');
    const speedDown02Btn = document.getElementById('speed-down-02');
    const speedDown01Btn = document.getElementById('speed-down-01');
    const speedUp01Btn = document.getElementById('speed-up-01');
    const speedUp02Btn = document.getElementById('speed-up-02');
    const speedResetBtn = document.getElementById('speed-reset');
    const volumeSlider = document.getElementById('volume-slider');
    const muteBtn = document.getElementById('mute-btn');
    const currentTimeEl = document.getElementById('current-time');
    const remainingTimeEl = document.getElementById('remaining-time');

    const upBtn = document.getElementById('up');
    const downBtn = document.getElementById('down');
    const fontSizeEl = document.getElementById('font-size');

    // 상태
    let originalText = "";
    let selectedVerse = "";
    let selectionRange = null;
    let foundSentences = [];
    let currentSearchIndex = -1;
    let currentSpeed = 1.0;
    let isMuted = false;
    let selectionDebounce = null;

    function escapeRegExp(s) { return s.replace(/[.*+?^${}()|[\]\\]/g, '\\$&'); }
    function formatTime(sec) { if (!isFinite(sec) || sec < 0) return '0:00'; const m = Math.floor(sec/60); const s = Math.floor(sec%60); return `${m}:${String(s).padStart(2,'0')}`; }

    window.addEventListener('DOMContentLoaded', () => {
      originalText = bibleTextEl.innerHTML;
      updateFontSizeDisplay();
      updateSpeed();

      // 본문 줄 단위 분리
      const lines = originalText.split(/<br\s*\/?>/i);
      bibleTextEl.innerHTML = lines.map(line => {
        if (line.trim() === "") return "<br>";
        return `<span class="line">${line}</span><br>`;
      }).join("");
      const lineElements = document.querySelectorAll("#bible-text .line");

            // 스크롤 시 중앙 강조 줄 수(2줄/3줄) 반응형으로 처리
function highlightCenterLines() {
  const viewportCenter = window.innerHeight / 2 + window.scrollY;
  const linesToHighlight = window.innerWidth >= 768 ? 3 : 2;

  let closestIndex = -1, minDistance = Infinity;
  lineElements.forEach((line, i) => {
    const rect = line.getBoundingClientRect();
    const lineCenter = rect.top + window.scrollY + rect.height / 2;
    const distance = Math.abs(lineCenter - viewportCenter);
    if (distance < minDistance) { minDistance = distance; closestIndex = i; }
  });

  lineElements.forEach(line => line.classList.remove("highlight"));
  if (closestIndex < 0) return;

  const indices = linesToHighlight === 3
    ? [closestIndex - 1, closestIndex, closestIndex + 1]
    : [closestIndex, closestIndex + 1];

  indices.forEach(idx => {
    if (idx >= 0 && idx < lineElements.length) {
      lineElements[idx].classList.add("highlight");
    }
  });
}

// rAF 스로틀
let ticking = false;
function onScrollOrResize() {
  if (ticking) return;
  ticking = true;
  requestAnimationFrame(() => {
    highlightCenterLines();
    ticking = false;
  });
}

// 이벤트 등록
window.addEventListener("scroll", onScrollOrResize, { passive: true });
window.addEventListener("resize", onScrollOrResize);
// (옵션) 기기 회전 이벤트도 묶어서 처리하면 좋아요
window.addEventListener("orientationchange", onScrollOrResize);

// 최초 1회 적용
highlightCenterLines();

      // PC에서 2줄씩 부드럽게 스크롤
      window.addEventListener("wheel", function(e) {
        if (e.ctrlKey) return;
        const modal = document.getElementById('explanation-modal');
        if (modal && modal.style.display === 'block' && modal.contains(e.target)) return;
        const firstLine = document.querySelector("#bible-text .line");
        if (!firstLine) return;
        const lineHeight = firstLine.getBoundingClientRect().height;
        e.preventDefault();
        window.scrollBy({ top: e.deltaY > 0 ? lineHeight * 2 : -lineHeight * 2, behavior: "smooth" });
      }, { passive: false });

      // 폰트 버튼
      upBtn.addEventListener('click', () => {
        const current = parseFloat(getComputedStyle(bibleTextEl).fontSize);
        if (current + 4 <= 80) { bibleTextEl.style.fontSize = (current + 4) + 'px'; updateFontSizeDisplay(); }
      });
      downBtn.addEventListener('click', () => {
        const current = parseFloat(getComputedStyle(bibleTextEl).fontSize);
        if (current - 4 >= 12) { bibleTextEl.style.fontSize = (current - 4) + 'px'; updateFontSizeDisplay(); }
      });

      // 검색
      const searchForm = document.forms.f1;
      searchForm.addEventListener('submit', (e) => { e.preventDefault(); findString(searchForm.t1.value); });
      searchForm.b2.addEventListener('click', () => { clearHighlight(); });
      nextLocationBtn.addEventListener('click', nextLocation);

      // 오디오
      playBtn.addEventListener('click', () => { audio.play().catch(()=>{}); });
      pauseBtn.addEventListener('click', () => audio.pause());
      stopBtn.addEventListener('click', () => { audio.pause(); audio.currentTime = 0; });
      speedDown02Btn.addEventListener('click', () => { currentSpeed = Math.max(0.5, currentSpeed - 0.2); updateSpeed(); });
      speedDown01Btn.addEventListener('click', () => { currentSpeed = Math.max(0.5, currentSpeed - 0.1); updateSpeed(); });
      speedUp01Btn.addEventListener('click', () => { currentSpeed = Math.min(2.0, currentSpeed + 0.1); updateSpeed(); });
      speedUp02Btn.addEventListener('click', () => { currentSpeed = Math.min(2.0, currentSpeed + 0.2); updateSpeed(); });
      speedResetBtn.addEventListener('click', () => { currentSpeed = 1.0; updateSpeed(); });
      volumeSlider.addEventListener('input', () => { audio.volume = Number(volumeSlider.value); });
      muteBtn.addEventListener('click', () => { isMuted = !isMuted; audio.muted = isMuted; muteBtn.textContent = isMuted ? '🔇' : '🔊'; });

      audio.addEventListener('timeupdate', () => {
        if (!isFinite(audio.duration) || audio.duration <= 0) return;
        const pct = (audio.currentTime / audio.duration) * 100;
        progressBar.value = pct;
        currentTimeEl.textContent = formatTime(audio.currentTime);
        remainingTimeEl.textContent = '-' + formatTime(audio.duration - audio.currentTime);
      }, { passive: true });
      audio.addEventListener('loadedmetadata', () => {
        currentTimeEl.textContent = '0:00';
        remainingTimeEl.textContent = '-' + formatTime(audio.duration || 0);
      });
      progressBar.addEventListener('input', () => {
        if (!isFinite(audio.duration) || audio.duration <= 0) return;
        const pct = progressBar.value / 100;
        audio.currentTime = audio.duration * pct;
      }, { passive: true });
      rewindBtn.addEventListener('click', () => { audio.currentTime = Math.max(0, audio.currentTime - 10); });
      forwardBtn.addEventListener('click', () => { if (isFinite(audio.duration)) audio.currentTime = Math.min(audio.duration, audio.currentTime + 10); });

      // 책 버튼 토글 & 선택 복원
      explanationIconButton.addEventListener('pointerdown', () => {
        const sel = window.getSelection();
        try { if (sel && sel.rangeCount > 0) selectionRange = sel.getRangeAt(0).cloneRange(); } catch(e) { selectionRange = null; }
      }, { passive: true });
      explanationIconButton.addEventListener('click', (ev) => {
        ev.stopPropagation();
        const sel = window.getSelection();
        try { if (sel && sel.rangeCount > 0) selectionRange = sel.getRangeAt(0).cloneRange(); } catch(e){ selectionRange = null; }
        explanationButtonWrapper.classList.toggle('active');
        setTimeout(() => {
          if (selectionRange) {
            const sel2 = window.getSelection();
            sel2.removeAllRanges();
            try { sel2.addRange(selectionRange); } catch(e){}
            updateSelectedVerseFromRange(selectionRange);
          }
        }, 60);
      });
      document.body.addEventListener('click', (ev) => {
        if (!explanationButtonWrapper.contains(ev.target)) explanationButtonWrapper.classList.remove('active');
      });

      // 구절 설명 버튼
      detailedExplanationButton.addEventListener('click', () => {
        const v = (selectedVerse || '').trim();
        if (!v) { showModal("구절을 먼저 선택하세요","본문에서 구절이나 단어를 드래그하여 선택한 후 다시 버튼을 눌러주세요."); }
        else { fetchExplanation(v, 'detailed'); }
        explanationButtonWrapper.classList.remove('active');
      });
      simpleExplanationButton.addEventListener('click', () => {
        const v = (selectedVerse || '').trim();
        if (!v) { showModal("구절을 먼저 선택하세요","본문에서 구절이나 단어를 드래그하여 선택한 후 다시 버튼을 눌러주세요."); }
        else { fetchExplanation(v, 'simple'); }
        explanationButtonWrapper.classList.remove('active');
      });

      // 본문 요약 버튼
      summarySimpleMain.addEventListener('click', () => {
        const full = getFullBibleText();
        if (!full.trim()) { showModal("본문이 없습니다","요약할 성경 본문이 없습니다."); }
        else { fetchSummary(full, 'simple'); }
      });
      summaryDetailedMain.addEventListener('click', () => {
        const full = getFullBibleText();
        if (!full.trim()) { showModal("본문이 없습니다","요약할 성경 본문이 없습니다."); }
        else { fetchSummary(full, 'detailed'); }
      });

      // 설명 모달 닫기
      closeModalButton.addEventListener('click', () => {
        modal.style.display = 'none';
        document.body.classList.remove('modal-open');
      });
      window.addEventListener('click', (ev) => {
        if (ev.target === modal) {
          modal.style.display = 'none';
          document.body.classList.remove('modal-open');
        }
      });

      // 선택 이벤트(디바운스)
      const scheduleSelectionUpdate = () => {
        clearTimeout(selectionDebounce);
        selectionDebounce = setTimeout(handleSelectionChange, 160);
      };
      document.addEventListener('mouseup', scheduleSelectionUpdate, { passive:true });
      document.addEventListener('touchend', scheduleSelectionUpdate, { passive:true });
      document.addEventListener('selectionchange', scheduleSelectionUpdate);

      // 기도문 팝업 초기화
      initPrayerToast();
    });

    // 선택 관리
    function handleSelectionChange(){
      const sel = window.getSelection();
      if (!sel) return clearSelectionState();
      const text = (sel.toString() || "").trim();

      const modalEl = document.getElementById('explanation-modal');
      if (modalEl && modalEl.style.display === 'block') {
        const sel2 = window.getSelection();
        if (sel2 && (modalEl.contains(sel2.anchorNode) || modalEl.contains(sel2.focusNode))) return;
      }

      let isInBible = false;
      try {
        if (sel.anchorNode && sel.focusNode) {
          isInBible = bibleTextEl.contains(sel.anchorNode) && bibleTextEl.contains(sel.focusNode);
        }
      } catch(e){ isInBible = false; }

      if (text && isInBible) {
        selectedVerse = text;
        try { selectionRange = sel.getRangeAt(0).cloneRange(); } catch(e){ selectionRange = null; }
        try {
          const range = sel.getRangeAt(0);
          const rects = Array.from(range.getClientRects());
          const rect = rects.length
            ? rects.reduce((u, r) => ({
                top: Math.min(u.top, r.top),
                left: Math.min(u.left, r.left),
                right: Math.max(u.right, r.right),
                bottom: Math.max(u.bottom, r.bottom),
                width: 0, height: 0
              }), { top:Infinity, left:Infinity, right:-Infinity, bottom:-Infinity })
            : range.getBoundingClientRect();
          rect.width  = rect.right - rect.left;
          rect.height = rect.bottom - rect.top;
          positionExplanationButton(rect);
        } catch(e){ resetExplanationButton(); }
      } else {
        clearSelectionState();
      }
    }
    function updateSelectedVerseFromRange(range) {
      if (!range) return;
      const txt = (range.toString() || "").trim();
      if (txt) selectedVerse = txt;
      try {
        const rect = range.getBoundingClientRect();
        positionExplanationButton(rect);
      } catch(e){ resetExplanationButton(); }
    }
    function resetExplanationButton(){
      const container = document.getElementById('explanation-button-container');
      if (!container) return;
      container.style.position = 'fixed';
      container.style.left = '30%';
      container.style.top = '100px';
      container.style.transform = 'translateX(-50%)';
      container.style.display = 'block';
      explanationButtonWrapper.classList.remove('active');
    }
    function clearSelectionState(){ selectedVerse = ""; selectionRange = null; resetExplanationButton(); }

    // 책 버튼 위치
    function positionExplanationButton(rect){
      const container = document.getElementById('explanation-button-container');
      if (!container) return;

      const vw = window.innerWidth;
      const vh = window.innerHeight;
      const margin = 8;
      const pad = 10;
      const viewportCenter = vw / 2;

      const isWide = rect.width >= vw * 0.6 || (rect.left <= margin*2 && rect.right >= vw - margin*2);

      let baseX, transformX;
      if (isWide) { baseX = rect.left + rect.width / 2; transformX = 'translateX(-50%)'; }
      else if (rect.left < viewportCenter * 0.4) { baseX = rect.right; transformX = 'translateX(0)'; }
      else if (rect.right > viewportCenter * 1.6) { baseX = rect.left; transformX = 'translateX(-100%)'; }
      else { baseX = rect.left + rect.width / 2; transformX = 'translateX(-50%)'; }

      const cw = container.offsetWidth || 60;
      const ch = container.offsetHeight || 60;

      const leftEdge =
        transformX === 'translateX(0)'     ? baseX :
        transformX === 'translateX(-50%)'  ? baseX - cw/2 :
                                             baseX - cw;

      let clampedLeftEdge = Math.min(Math.max(leftEdge, margin), vw - margin - cw);

      let finalLeft;
      if (transformX === 'translateX(0)')        finalLeft = clampedLeftEdge;
      else if (transformX === 'translateX(-50%)') finalLeft = clampedLeftEdge + cw/2;
      else                                        finalLeft = clampedLeftEdge + cw;

      let finalTop = rect.bottom + pad;
      if (finalTop + ch + margin > vh) finalTop = Math.max(rect.top - pad - ch, margin);
      finalTop = Math.min(Math.max(finalTop, margin), vh - margin - ch);

      container.style.position = 'fixed';
      container.style.left = `${finalLeft}px`;
      container.style.top  = `${finalTop}px`;
      container.style.transform = transformX;
      container.style.display = 'block';
    }

    // 검색
    function findString(searchText){
      clearHighlight();
      if (searchText == null || searchText.trim() === '') { searchCountEl.textContent = ''; nextLocationBtn.style.display = 'none'; return; }
      const escaped = escapeRegExp(searchText.trim());
      const regex = new RegExp(escaped, 'gi');
      const newContent = originalText.replace(regex, (match) => `<span class="search-highlight">${match}</span>`);
      bibleTextEl.innerHTML = newContent;
      foundSentences = Array.from(bibleTextEl.getElementsByClassName('search-highlight'));
      searchCountEl.textContent = `총 ${foundSentences.length}개 검색됨`;
      if (foundSentences.length > 0) {
        currentSearchIndex = 0;
        foundSentences[currentSearchIndex].scrollIntoView({ behavior:'smooth', block:'center' });
        nextLocationBtn.style.display = 'inline-block';
        updateScrollMarkers();
      } else {
        showModal("검색 결과 없음", `"${searchText}"에 대한 검색 결과가 없습니다.`);
        nextLocationBtn.style.display = 'none';
      }
    }
    function nextLocation(){
      if (!foundSentences.length) return;
      currentSearchIndex = (currentSearchIndex + 1) % foundSentences.length;
      foundSentences[currentSearchIndex].scrollIntoView({ behavior:'smooth', block:'center' });
      updateScrollMarkers();
    }
    function clearHighlight(){
      bibleTextEl.innerHTML = originalText;
      searchCountEl.textContent = '';
      nextLocationBtn.style.display = 'none';
      while (scrollMarkerContainer.firstChild) scrollMarkerContainer.removeChild(scrollMarkerContainer.firstChild);
      foundSentences = [];
      currentSearchIndex = -1;
    }
    function updateScrollMarkers(){
      while (scrollMarkerContainer.firstChild) scrollMarkerContainer.removeChild(scrollMarkerContainer.firstChild);
      const docH = document.documentElement.scrollHeight;
      const vh = window.innerHeight;
      foundSentences.forEach((el) => {
        const marker = document.createElement('div');
        marker.className = 'scroll-marker';
        const topPos = el.getBoundingClientRect().top + window.scrollY;
        const markerPos = Math.min(Math.max((topPos / docH) * vh, 2), vh - 10);
        marker.style.top = markerPos + 'px';
        marker.addEventListener('click', () => { el.scrollIntoView({ behavior:'smooth', block:'center' }); });
        scrollMarkerContainer.appendChild(marker);
      });
    }

    // 모달
    function showModal(title, text, imageUrl=null){
      modalTitle.textContent = title || '';
      modalText.innerHTML = (text || '').toString().replace(/\n/g, '<br>');
      if (imageUrl) { modalImage.src = imageUrl; modalImage.style.display = 'block'; } else { modalImage.src=''; modalImage.style.display='none'; }
      modal.style.display = 'block';
      document.body.classList.add('modal-open');
      setTimeout(() => {
        if (selectionRange) {
          const sel = window.getSelection();
          sel.removeAllRanges();
          try { sel.addRange(selectionRange); } catch(e) {}
        }
      }, 60);
    }
    function showLoadingModal(isImage=false){
      modalTitle.innerHTML = `<span class="loader"></span> ${isImage ? '그림 생성 중...' : '설명 생성 중...'}`;
      modalText.textContent = '설명을 생성 중입니다. 잠시만 기다려 주세요...';
      modalImage.style.display = 'none';
      modal.style.display = 'block';
    }

    modal.addEventListener('wheel', (e) => {
      if (modal.style.display === 'block') e.stopPropagation();
    }, { passive: true });

    function getFullBibleText(){
      const tmp = document.createElement('div');
      tmp.innerHTML = originalText;
      return tmp.textContent.replace(/\s+/g,' ').trim();
    }

    // Generative API 호출
    async function callGenerativeAPI(modalTitleText, prompt){
      const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-05-20:generateContent?key=${apiKey}`;
      const payload = { contents: [ { parts: [ { text: prompt } ] } ] };

      let retryCount = 0; const maxRetries = 3;
      let response = null;
      while (retryCount < maxRetries) {
        try {
          response = await fetch(apiUrl, {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify(payload)
          });
          if (response.ok) break;
          if (response.status === 429) {
            retryCount++;
            const delay = Math.pow(2, retryCount)*1000 + Math.random()*1000;
            await new Promise(r=>setTimeout(r, delay));
          } else throw new Error(`API Error: ${response.status} ${response.statusText}`);
        } catch (err) {
          console.error('API call failed:', err);
          showModal("오류 발생", "API 호출 중 오류가 발생했습니다. 다시 시도해 주세요.");
          return;
        }
      }
      if (!response || !response.ok) { showModal("오류", "설명을 불러오는 데 실패했습니다. 잠시 후 다시 시도해 주세요."); return; }

      try {
        const data = await response.json();
        const content = data?.candidates?.[0]?.content?.parts?.[0]?.text || "응답을 가져오지 못했습니다.";
        showModal(modalTitleText, content);
      } catch (err) {
        console.error('Error processing response:', err);
        showModal("오류", "응답을 처리하는 중 오류가 발생했습니다.");
      }
    }

    async function fetchExplanation(promptText, type){
      let prompt;
      if (type === 'simple') {
        prompt = `[역할] 성경 주석가.
[작업] 선택한 용어/구절을 350–500자 한국어로 간결 설명.
[유형 규칙]
- 지명: 위치·시대·관련 사건
- 인물: 이름의 뜻·역할·연관 지명
- 제사/성물: 용도·상징적 의미
- 동·식물·광물: 상징성
필요 시 대비/유사 2–12가지만 간단히. (이름↔지명 직접 연결이 있으면 함께 언급)
[금지] 장황함·추측·인용.
[입력] "${promptText}"`;
      } else {
        prompt = `[역할] 성경 주석가.
[작업] 선택 구절을 2,500–3,500자 한국어 해설로 심화 분석.
[구성] 개요 → 배경(역사·지리·문화) → 본문 주제·핵심 논지 → 핵심 단어/도상 해석
→ 인물·사건·장소의 기능 → 성경 전체 맥락과의 연결(언약/교리, 유사·대조 2–12가지)
→ (선택) 3–6행 표로 요점 정리.
[규칙] 본문 근거 중심, 난해한 부분은 간명히, 과도한 인용/주석어/반복 금지, 분량 준수.
[긴 입력 시] 절/단락 단위로 요약 후 통합(최종 분량 준수).
[입력] "${promptText}"`;
      }
      showLoadingModal(false);
      await callGenerativeAPI('구절 설명', prompt);
    }

    async function fetchSummary(fullText, type){
      let prompt;
      if (type === 'simple') {
        prompt = `[역할] 성경 주석가.
[작업] 입력된 성경 본문 전체를 450–650자 한국어 한 단락으로 간결 요약.
[중점] 핵심 주제·메시지, 주요 사건 흐름, 하나님 행위/인간 반응. 배경은 한두 문장만. 삶 적용 2–3문장 추가.
[금지] 장황함·추측·인용·소제목·서론/결론 문구. 분량 엄수.
[긴 입력 시] 장 단위로 요약→최종 450–650자로 통합.
[입력] "${fullText}"`;
      } else {
        prompt = `[역할] 성경 주석가.
[작업] 입력 본문을 3,500–5,000자 한국어 해설로 정리.
[구성] 1) 개요  2) 배경(역사·지리·문화)  3) 핵심 주제/신학적 의미
4) 인물·사건·장소의 역할  5) 성경 전체 맥락과 연결(필요 시 유사/대조 2–12가지)
6) (선택) 3–12행 표로 핵심 정리.  7) 결론  8) 삶 적용 4–5문장.
[규칙] 사실 기반, 과장/추측/설교체 금지, 불필요한 반복 금지, 분량 준수.
[긴 입력 시] 장 단위로 개요→통합(최종 분량 준수).
[입력] "${fullText}"`;
      }
      showLoadingModal(false);
      await callGenerativeAPI('본문 요약', prompt);
    }

    function updateSpeed(){ audio.playbackRate = currentSpeed; speedDisplay.textContent = currentSpeed.toFixed(1) + 'x'; }
    function updateFontSizeDisplay(){ const cur = parseFloat(getComputedStyle(bibleTextEl).fontSize); fontSizeEl.textContent = Math.round(cur); }

    // 토글 버튼 로직
    const progressContainer = document.querySelector('.progress-container');
    const speedControls = document.querySelector('.speed-controls');
    const volumeControl = document.querySelector('.volume-control');
    const showProgressBtn = document.getElementById('show-progress');
    const showSpeedBtn = document.getElementById('show-speed');
    const showVolumeBtn = document.getElementById('show-volume');
    let hideTimeout;
    function showOnly(target) {
      progressContainer.style.display = "none";
      speedControls.style.display = "none";
      volumeControl.style.display = "none";
      target.style.display = "flex";
      if (hideTimeout) clearTimeout(hideTimeout);
      hideTimeout = setTimeout(() => { target.style.display = "none"; }, 10000);
    }
    showProgressBtn.addEventListener('click', () => showOnly(progressContainer));
    showSpeedBtn.addEventListener('click', () => showOnly(speedControls));
    showVolumeBtn.addEventListener('click', () => showOnly(volumeControl));

    // ===== 기도문 팝업 제어 =====
  function initPrayerToast(){
  const toast = document.getElementById('prayerToast');
  const closeBtn = document.getElementById('prayerCloseBtn');
  const amenBtn = document.getElementById('prayerAmen');
  const readBtn = document.getElementById('prayerReadAlone');

  const isSiteModalOpen = () => document.body.classList.contains('modal-open');

  function openToast(){
    if (!toast) return;
    if (isSiteModalOpen()) return;            // 사이트 모달이 열려 있으면 숨김
    toast.style.display = 'block';
    document.getElementById('prayerBody')?.focus({ preventScroll:true });
  }
  function closeToast(){
    if (!toast) return;
    toast.style.display = 'none';             // 저장/기억 없음 → 다음 방문 시 다시 표시
  }

  // 페이지 로드 시 항상 표시 (약간 지연)
  setTimeout(openToast, 700);

  // 버튼 동작: 전부 단순 닫기
  closeBtn?.addEventListener('click', () => closeToast());
  amenBtn?.addEventListener('click', () => closeToast());
  readBtn?.addEventListener('click', () => closeToast());

  // 사이트 모달 열림/닫힘에 따라 토스트 표시/숨김
  const observer = new MutationObserver(() => {
    if (isSiteModalOpen()) {
      toast.style.display = 'none';
    } else {
      // 모달이 닫히면 다시 보여줌(사용자가 이미 닫았더라도 새로고침/재방문 시 다시 뜨게 하려면 유지)
      if (toast.style.display !== 'block') toast.style.display = 'block';
    }
  });
  observer.observe(document.body, { attributes:true, attributeFilter:['class'] });
}
  </script>
</body>
</html>

