<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
  <title>통큰통독-08일차</title>
  <link rel="apple-touch-icon" type="image/png" href="https://i.postimg.cc/Qtnq0gFJ/Ezra-icon.png">
  <meta name="apple-mobile-web-app-title" content="통큰통독">
  <link rel="shortcut icon" type="image/png" href="https://i.postimg.cc/Qtnq0gFJ/Ezra-icon.png">
  <link rel="mask-icon" type="image/png" href="https://i.postimg.cc/Qtnq0gFJ/Ezra-icon.png">

  <style>
    /* ---------------------------
       전체 스타일 (원 디자인 유지)
       --------------------------- */
    :root{
      --blue:#007BFF;
      --pink:#ff99cc;
      --shadow: 0 2px 5px rgba(0,0,0,0.2);
    }
    * { box-sizing: border-box; -webkit-tap-highlight-color: transparent; }
    html,body { height:100%; margin:0; padding:0; font-family: Arial, sans-serif; -webkit-font-smoothing:antialiased; }
    body { padding-top:150px; background:#fdfdf8; color:#222; }

    a:link { color:#0000FF; } a:visited{ color:#660099; }

    /* 상단 고정 테이블 */
    .top-fixed-table {
      position: fixed; top:0; left:0; width:100%; background:transparent; border-bottom:none; z-index:100;
      table-layout: fixed; padding:10px 0; box-sizing:border-box;
    }
    .search-cell { text-align:left; padding-left:10px; vertical-align:top; width:30%; }
    .search-cell input[type="text"]{ width:50%; font-size:12pt; }
    .search-cell input[type="submit"], .search-cell input[type="reset"]{ font-size:10pt; padding:5px 8px; height:auto; }

    .audio-cell { text-align:right; padding-right:50px; vertical-align:top; width:30%; }
    #custom-audio-player { display:flex; flex-direction:column; align-items:center; }
    .player-controls{ display:flex; align-items:center; justify-content:center; gap:10px; margin-bottom:5px; }
    .time-display{ font-size:16px; font-weight:bold; color:black; margin:0 5px; min-width:44px; text-align:center; }

    .progress-container { display: flex; align-items: center; justify-content: center; gap: 6px; margin: 6px 0; }
    .skip-btn { width: 48px; height: 28px; font-size: 13px; cursor: pointer; border: 1px solid #ccc; border-radius: 5px; background: #fff; }
    .skip-btn:hover { background: #e0e0e0; }

    .control-btn{ width:28px; height:28px; font-size:14px; cursor:pointer; border:1px solid #ccc; background:#fff; border-radius:5px; }
    .control-btn:hover{ background:#e0e0e0; }
    #play-btn{ background:#d1f3d4; } #pause-btn{ background:#fff6d6; } #stop-btn{ background:#fddddd; }

    .speed-controls{ display:flex; align-items:center; justify-content:center; gap:5px; margin-bottom:5px; }
    .speed-btn{ width:21px; height:21px; font-size:10px; cursor:pointer; border:1px solid #ccc; border-radius:3px; background:#fff; }
    .speed-btn:hover{ background:#e0e0e0; }
    .speed-display{ font-weight:bold; color:var(--blue); width:50px; text-align:center; }

    .volume-control{ display:flex; align-items:center; justify-content:center; gap:5px; }
    input[type="range"]{ -webkit-appearance:none; width:160px; height:5px; background:#d3d3d3; outline:none; opacity:0.9; transition:opacity .2s; border-radius:3px;}
    input[type="range"]::-webkit-slider-thumb{ -webkit-appearance:none; appearance:none; width:15px; height:15px; background:var(--blue); border-radius:50%; cursor:pointer; }

    /* progress */
    #progress-bar { width: 60%; max-width: 100px; }

    /* volume */
    #volume-slider { width: 80%; max-width: 120px; }

    /* 설명 버튼 컨테이너 (플로팅) */
    .explanation-button-container{ position:fixed; top:100px; left:30%; transform:translateX(-50%); z-index:100; display:block; padding:0 10px; transition:top .2s ease,left .2s ease,transform .2s ease; }
    .explanation-button-wrapper{ position:relative; display:inline-block; cursor:pointer; }
    .explanation-icon-button{ width:50px; height:50px; border-radius:50%; background:var(--pink); box-shadow:var(--shadow); border:none; display:flex; align-items:center; justify-content:center; font-size:40px; z-index:2; }
    .explanation-sub-buttons{ display:flex; flex-direction:column; gap:10px; opacity:0; visibility:hidden; transition:opacity .3s ease,visibility .3s ease, transform .3s ease; position:absolute; left:45%; transform:translateX(-50%) translateY(25px); z-index:1; }
    .explanation-button-wrapper.active .explanation-sub-buttons{ opacity:1; visibility:visible; transform:translateX(-50%) translateY(0); }
    .explanation-sub-button{ padding:5px 10px; font-size:18px; background:var(--pink); border:none; border-radius:5px; cursor:pointer; box-shadow:var(--shadow); white-space:nowrap; }
    .explanation-sub-button:hover{ transform:scale(1.03); }

    /* 폰트 사이즈 및 본문 요약 버튼 (항상 표시) */
    .container{ width:100%; text-align:center; margin-top:8px; }
    .font-size-label{ font-size:20px !important; margin-right:12px; font-weight:bold; color:blue; display:inline-block; vertical-align:middle; }
    #font-size{ font-size:20px !important; margin:0 8px; font-weight:bold; color:red; display:inline-block; vertical-align:middle; width:48px; }
    #down,#up{ width:27px; height:27px; font-size:20px; color:red; background:#fff; border:1px solid #ccc; border-radius:5px; cursor:pointer; display:inline-block; vertical-align:middle; }

    /* 본문 요약 버튼 - 항상 노출 (요구사항) */
    .summary-buttons { display:inline-block; margin-left:16px; vertical-align:middle; }
    .summary-btn { padding:6px 10px; margin-left:6px; font-size:14px; border-radius:6px; border:1px solid #ccc; background:#fff; cursor:pointer; }
    .summary-btn:hover{ background:#f2f2f2; }

    /* 본문 */
    h2{ padding:0; text-align:left; margin-left:15px; margin-right:15px; }
    p{ display:inline-block; }


    /*본문 중앙 색상*/
    .highlight { background-color: #fdf6e3;    /* 연한 베이지 톤 (눈부심 최소화) */
    -webkit-text-stroke:0.2px #76d6c6;
     border-left: 4px solid #c0a060; /* 옆에 차분한 금색 포인트 */
     font-weight:bold;
     box-shadow: 0 0 8px rgba(0, 0, 0, 0.1);
     padding: 2px 6px;
    }



    /* 모달 */
    .modal{ display:none; position:fixed; z-index:200; inset:0; width:100%; height:100%; overflow:auto; background:rgba(0,0,0,0.4); }
    .modal-content{ background:#fff; margin:12% auto; padding:20px; border-radius:10px; width:80%; max-width:900px; box-shadow:0 4px 8px rgba(0,0,0,0.2); text-align:left; line-height:1.6; word-break:keep-all; white-space:pre-wrap; }
    .close-button{ color:#aaa; float:right; font-size:28px; font-weight:bold; cursor:pointer; }
    .close-button:hover{ color:#000; }
    #modal-image{ max-width:100%; height:auto; margin-bottom:12px; display:none; border-radius:8px; }

    /* 로딩 스피너 */
    .loader{ border:4px solid #f3f3f3; border-top:4px solid #3498db; border-radius:50%; width:20px; height:20px; animation:spin 1s linear infinite; display:inline-block; vertical-align:middle; margin-right:8px; }
    @keyframes spin{ 0%{transform:rotate(0deg);} 100%{transform:rotate(360deg);} }

    /* 스크롤 마커 */
    .search-highlight{ background:yellow; color:#000; }
    .scroll-marker-container{ position:fixed; top:0; right:0; width:8px; height:100vh; z-index:99; pointer-events:none; }
    .scroll-marker{ position:absolute; right:0; width:8px; height:8px; background:red; border-radius:50%; box-shadow:0 0 5px rgba(255,0,0,0.7); cursor:pointer; pointer-events:auto; }
    .scroll-marker:hover{ transform:scale(1.5); transition:transform .2s ease; }

    /* 선택 관련 (iOS) */
    #bible-text{ -webkit-user-select:text; user-select:text; -webkit-touch-callout:none; }

    /* 반응형 보완 */
    @media (max-width:800px){
      .search-cell{ width:55%; } .audio-cell{ width:45%; } .search-cell input[type="text"]{ width:60%; } #progress-bar{ width:160px; }
    }
    @media (max-width:600px){
      .search-cell input[type="text"]{ width:68%; font-size:11pt; } .time-display{ font-size:13px; } #progress-bar{ width:140px; }
      .explanation-sub-button{ font-size:16px; padding:6px 8px; }
      .explanation-icon-button{ width:46px; height:46px; font-size:34px; }
      .summary-btn{ padding:5px 8px; font-size:13px; }
    }

     /* --- 새 버튼 그룹 스타일 --- */
    .toggle-buttons {
      display: flex;
      justify-content: center;
      gap: 8px;
      margin-bottom: 6px;
    }
    .toggle-buttons button {
      padding: 4px 8px;
      font-size: 13px;
      border: 1px solid #ccc;
      border-radius: 5px;
      background: #fff;
      cursor: pointer;
    }
    .toggle-buttons button:hover {
      background: #f0f0f0;
    }
  </style>
</head>
<body>
  <!-- 상단: 검색 + 오디오 -->
  <table class="top-fixed-table" id="main-table" cellpadding="0" cellspacing="0">
    <tr>
      <td class="search-cell">
        <form name="f1" action="">
          <input type="reset" name="b2" value="X">
          <input type="text" placeholder="검색어를 입력하세요" name="t1" value="">
          <input type="submit" name="b1" value="검색">
          <div id="search-count-container">
            <span id="search-count"></span>
            <button type="button" id="next-location-btn" style="display:none;">다음 위치</button>
          </div>
        </form>
      </td>
      
       <td class="audio-cell">
        <div id="custom-audio-player" role="region" aria-label="오디오 플레이어">
          <audio id="audio-file" preload="auto" playsinline>
            <source src="https://vod47.anyline.co.kr/vod_ezra/%EC%9D%BD%EA%B8%B0%2008.mp3" type="audio/mpeg">
            브라우저가 오디오 요소를 지원하지 않습니다.
          </audio>

          <!-- 기본 컨트롤 -->
          <div class="player-controls">
            <strong><span style="font-size:16px; background-color: #fcfcfc;" id="current-time" class="time-display">0:00</span></strong>
            <button id="play-btn" class="control-btn" aria-label="재생">▶</button>
            <button id="pause-btn" class="control-btn" aria-label="일시정지">⏸</button>
            <button id="stop-btn" class="control-btn" aria-label="정지">■</button>
            <strong><span style="font-size:16px; background-color: #fcfcfc;" id="remaining-time" class="time-display">0:00</span></strong>
          </div>

          <!-- ✅ 새 버튼 그룹 -->
          <div class="toggle-buttons">
            <button id="show-progress">재생 위치</button>
            <button id="show-speed">재생 속도</button>
            <button id="show-volume">볼륨 조절</button>
          </div>

          <!-- 기본은 숨김 -->
          <div class="progress-container" style="display:none;">
            <button id="rewind-10" class="skip-btn">⏪10s</button>
            <input type="range" id="progress-bar" min="0" max="100" value="0" step="0.01" aria-label="재생 위치">
            <button id="forward-10" class="skip-btn">10s⏩</button>
          </div>

          <div class="speed-controls" style="display:none;">
            <button id="speed-down-02" class="speed-btn">&laquo;</button>
            <button id="speed-down-01" class="speed-btn">&lt;</button>
            <span id="speed-display" class="speed-display">1.0x</span>
            <button id="speed-up-01" class="speed-btn">&gt;</button>
            <button id="speed-up-02" class="speed-btn">&raquo;</button>
            <button id="speed-reset">1.0</button>
          </div>

          <div class="volume-control" style="display:none;">
            <span style="font-size:14px;">볼륨</span>
            <button id="mute-btn">🔊</button>
            <input type="range" id="volume-slider" min="0" max="1" step="0.01" value="1">
          </div>
        </div>
      </td>
    </tr>
  </table>

  <!-- 플로팅 책 버튼 (구절설명 토글) -->
  <div class="explanation-button-container" id="explanation-button-container">
    <div class="explanation-button-wrapper" id="explanation-button-wrapper">
      <button class="explanation-icon-button" id="explanation-icon-button" aria-label="구절설명 열기">
        <span>📖</span>
      </button>
      <div class="explanation-sub-buttons" id="explanation-sub-buttons" role="menu">
        <button class="explanation-sub-button" id="detailed-explanation-button">상세 구절설명</button>
        <button class="explanation-sub-button" id="simple-explanation-button">간단 구절설명</button>
      </div>
    </div>
  </div>

  <!-- 폰트 크기 + 항상 표시되는 본문 요약 버튼 -->
  <div class="container" style="margin-top:6px;">
    <p class="font-size-label">Font Size</p>
    <button id="down">-</button>
    <p id="font-size">20</p>
    <button id="up">+</button>

    <span class="summary-buttons" aria-hidden="false">
      <button class="summary-btn" id="summary-simple-main">본문요약 간단</button>
      <button class="summary-btn" id="summary-detailed-main">본문요약 상세</button>
    </span>
  </div>

  <!-- 본문 (원문 유지: <br></br> 포함) -->
  <div>
    <h2 id="bible-text" style="line-height:1.2em;margin-left:15px;margin-right:15px;font-style:normal;font-weight:normal;color:black;font-size:20px;word-break:break-all;">
    <strong>

통독 8일차
<br>범위: 레위기 1장- 10장</br>
<br>&nbsp;</br>

</strong>
<strong><br><font color="#4682b4">레위기 1 장</font></br></strong>
<br><i><font color="#808080">*번제*</font></i></br>
<br>1 여호와께서 회막에서 모세를 부르시고 그에게 말씀하여 이르시되</br>
<br>2 이스라엘 자손에게 말하여 이르라 너희 중에 누구든지 여호와께 예물을 드리려거든 가축 중에서 소나 양으로 예물을 드릴지니라</br>
<br>3 그 예물이 소의 번제이면 흠 없는 수컷으로 회막 문에서 여호와 앞에 기쁘게 받으시도록 드릴지니라</br>
<br>4 그는 번제물의 머리에 안수할지니 그를 위하여 기쁘게 받으심이 되어 그를 위하여 속죄가 될 것이라</br>
<br>5 그는 여호와 앞에서 그 수송아지를 잡을 것이요 아론의 자손 제사장들은 그 피를 가져다가 회막 문 앞 제단 사방에 뿌릴 것이며</br>
<br>6 그는 또 그 번제물의 가죽을 벗기고 각을 뜰 것이요</br>
<br>7 제사장 아론의 자손들은 제단 위에 불을 붙이고 불 위에 나무를 벌여 놓고</br>
<br>8 아론의 자손 제사장들은 그 뜬 각과 머리와 기름을 제단 위의 불 위에 있는 나무에 벌여 놓을 것이며</br>
<br>9 그 내장과 정강이를 물로 씻을 것이요 제사장은 그 전부를 제단 위에서 불살라 번제를 드릴지니 이는 화제라 여호와께 향기로운 냄새니라</br>
<br>10 만일 그 예물이 가축 떼의 양이나 염소의 번제이면 흠 없는 수컷으로 드릴지니</br>
<br>11 그가 제단 북쪽 여호와 앞에서 그것을 잡을 것이요 아론의 자손 제사장들은 그것의 피를 제단 사방에 뿌릴 것이며</br>
<br>12 그는 그것의 각을 뜨고 그것의 머리와 그것의 기름을 베어낼 것이요 제사장은 그것을 다 제단 위의 불 위에 있는 나무 위에 벌여 놓을 것이며</br>
<br>13 그 내장과 그 정강이를 물로 씻을 것이요 제사장은 그 전부를 가져다가 제단 위에서 불살라 번제를 드릴지니 이는 화제라 여호와께 향기로운 냄새니라</br>
<br>14 만일 여호와께 드리는 예물이 새의 번제이면 산비둘기나 집비둘기 새끼로 예물을 드릴 것이요</br>
<br>15 제사장은 그것을 제단으로 가져다가 그것의 머리를 비틀어 끊고 제단 위에서 불사르고 피는 제단 곁에 흘릴 것이며</br>
<br>16 그것의 모이주머니와 그 더러운 것은 제거하여 제단 동쪽 재 버리는 곳에 던지고</br>
<br>17 또 그 날개 자리에서 그 몸을 찢되 아주 찢지 말고 제사장이 그것을 제단 위의 불 위에 있는 나무 위에서 불살라 번제를 드릴지니 이는 화제라 여호와께 향기로운 냄새니라</br>
<br>&nbsp;</br>
<strong><br><font color="#4682b4">레위기 2 장</font></br></strong>
<br><i><font color="#808080">*소제의 예물*</font></i></br>
<br>1 누구든지 소제의 예물을 여호와께 드리려거든 고운 가루로 예물을 삼아 그 위에 기름을 붓고 또 그 위에 유향을 놓아</br>
<br>2 아론의 자손 제사장들에게로 가져갈 것이요 제사장은 그 고운 가루 한 움큼과 기름과 그 모든 유향을 가져다가 기념물로 제단 위에서 불사를지니 이는 화제라 여호와께 향기로운 냄새니라</br>
<br>3 그 소제물의 남은 것은 아론과 그의 자손에게 돌릴지니 이는 여호와의 화제물 중에 지극히 거룩한 것이니라</br>
<br>4 네가 화덕에 구운 것으로 소제의 예물을 드리려거든 고운 가루에 기름을 섞어 만든 무교병이나 기름을 바른 무교전병을 드릴 것이요</br>
<br>5 철판에 부친 것으로 소제의 예물을 드리려거든 고운 가루에 누룩을 넣지 말고 기름을 섞어</br>
<br>6 조각으로 나누고 그 위에 기름을 부을지니 이는 소제니라</br>
<br>7 네가 냄비의 것으로 소제를 드리려거든 고운 가루와 기름을 섞어 만들지니라</br>
<br>8 너는 이것들로 만든 소제물을 여호와께로 가져다가 제사장에게 줄 것이요 제사장은 그것을 제단으로 가져가서</br>
<br>9 그 소제물 중에서 기념할 것을 가져다가 제단 위에서 불사를지니 이는 화제라 여호와께 향기로운 냄새니라</br>
<br>10 소제물의 남은 것은 아론과 그의 아들들에게 돌릴지니 이는 여호와의 화제물 중에 지극히 거룩한 것이니라</br>
<br>11 너희가 여호와께 드리는 모든 소제물에는 누룩을 넣지 말지니 너희가 누룩이나 꿀을 여호와께 화제로 드려 사르지 못할지니라</br>
<br>12 처음 익은 것으로는 그것을 여호와께 드릴지나 향기로운 냄새를 위하여는 제단에 올리지 말지며</br>
<br>13 네 모든 소제물에 소금을 치라 네 하나님의 언약의 소금을 네 소제에 빼지 못할지니 네 모든 예물에 소금을 드릴지니라</br>
<br>14 너는 첫 이삭의 소제를 여호와께 드리거든 첫 이삭을 볶아 찧은 것으로 네 소제를 삼되</br>
<br>15 그 위에 기름을 붓고 그 위에 유향을 더할지니 이는 소제니라</br>
<br>16 제사장은 찧은 곡식과 기름을 모든 유향과 함께 기념물로 불사를지니 이는 여호와께 드리는 화제니라</br>
<br>&nbsp;</br>
<strong><br><font color="#4682b4">레위기 3 장</font></br></strong>
<br><i><font color="#808080">*화목제의 예물*</font></i></br>
<br>1 사람이 만일 화목제의 제물을 예물로 드리되 소로 드리려면 수컷이나 암컷이나 흠 없는 것으로 여호와 앞에 드릴지니</br>
<br>2 그 예물의 머리에 안수하고 회막 문에서 잡을 것이요 아론의 자손 제사장들은 그 피를 제단 사방에 뿌릴 것이며</br>
<br>3 그는 또 그 화목제의 제물 중에서 여호와께 화제를 드릴지니 곧 내장에 덮인 기름과 내장에 붙은 모든 기름과</br>
<br>4 두 콩팥과 그 위의 기름 곧 허리 쪽에 있는 것과 간에 덮인 꺼풀을 콩팥과 함께 떼어낼 것이요</br>
<br>5 아론의 자손은 그것을 제단 위의 불 위에 있는 나무 위의 번제물 위에서 사를지니 이는 화제라 여호와께 향기로운 냄새니라</br>
<br>6 만일 여호와께 예물로 드리는 화목제의 제물이 양이면 수컷이나 암컷이나 흠 없는 것으로 드릴지며</br>
<br>7 만일 그의 예물로 드리는 것이 어린 양이면 그것을 여호와 앞으로 끌어다가</br>
<br>8 그 예물의 머리에 안수하고 회막 앞에서 잡을 것이요 아론의 자손은 그 피를 제단 사방에 뿌릴 것이며</br>
<br>9 그는 그 화목제의 제물 중에서 여호와께 화제를 드릴지니 그 기름 곧 미골에서 벤 기름진 꼬리와 내장에 덮인 기름과 내장에 붙은 모든 기름과</br>
<br>10 두 콩팥과 그 위의 기름 곧 허리 쪽에 있는 것과 간에 덮인 꺼풀을 콩팥과 함께 떼어낼 것이요</br>
<br>11 제사장은 그것을 제단 위에서 불사를지니 이는 화제로 여호와께 드리는 음식이니라</br>
<br>12 만일 그의 예물이 염소면 그것을 여호와 앞으로 끌어다가</br>
<br>13 그것의 머리에 안수하고 회막 앞에서 잡을 것이요 아론의 자손은 그 피를 제단 사방에 뿌릴 것이며</br>
<br>14 그는 그 중에서 예물을 가져다가 여호와께 화제를 드릴지니 곧 내장에 덮인 기름과 내장에 붙은 모든 기름과</br>
<br>15 두 콩팥과 그 위의 기름 곧 허리 쪽에 있는 것과 간에 덮인 꺼풀을 콩팥과 함께 떼어낼 것이요</br>
<br>16 제사장은 그것을 제단 위에서 불사를지니 이는 화제로 드리는 음식이요 향기로운 냄새라 모든 기름은 여호와의 것이니라</br>
<br>17 너희는 기름과 피를 먹지 말라 이는 너희의 모든 처소에서 너희 대대로 지킬 영원한 규례니라</br>
<br>&nbsp;</br>
<strong><br><font color="#4682b4">레위기 4 장</font></br></strong>
<br><i><font color="#808080">*속죄제를 드리는 규례*</font></i></br>
<br>1 여호와께서 모세에게 말씀하여 이르시되</br>
<br>2 이스라엘 자손에게 말하여 이르라 누구든지 여호와의 계명 중 하나라도 그릇 범하였으되</br>
<br>3 만일 기름 부음을 받은 제사장이 범죄하여 백성의 허물이 되었으면 그가 범한 죄로 말미암아 흠 없는 수송아지로 속죄제물을 삼아 여호와께 드릴지니</br>
<br>4 그 수송아지를 회막 문 여호와 앞으로 끌어다가 그 수송아지의 머리에 안수하고 그것을 여호와 앞에서 잡을 것이요</br>
<br>5 기름 부음을 받은 제사장은 그 수송아지의 피를 가지고 회막에 들어가서</br>
<br>6 그 제사장이 손가락에 그 피를 찍어 여호와 앞 곧 성소의 휘장 앞에 일곱 번 뿌릴 것이며</br>
<br>7 제사장은 또 그 피를 여호와 앞 곧 회막 안 향단 뿔들에 바르고 그 송아지의 피 전부를 회막 문 앞 번제단 밑에 쏟을 것이며</br>
<br>8 또 그 속죄제물이 된 수송아지의 모든 기름을 떼어낼지니 곧 내장에 덮인 기름과 내장에 붙은 모든 기름과</br>
<br>9 두 콩팥과 그 위의 기름 곧 허리쪽에 있는 것과 간에 덮인 꺼풀을 콩팥과 함께 떼어내되</br>
<br>10 화목제 제물의 소에게서 떼어냄 같이 할 것이요 제사장은 그것을 번제단 위에서 불사를 것이며</br>
<br>11 그 수송아지의 가죽과 그 모든 고기와 그것의 머리와 정강이와 내장과</br>
<br>12 똥 곧 그 송아지의 전체를 진영 바깥 재 버리는 곳인 정결한 곳으로 가져다가 불로 나무 위에서 사르되 곧 재 버리는 곳에서 불사를지니라</br>
<br>13 만일 이스라엘 온 회중이 여호와의 계명 중 하나라도 부지중에 범하여 허물이 있으나 스스로 깨닫지 못하다가</br>
<br>14 그 범한 죄를 깨달으면 회중은 수송아지를 속죄제로 드릴지니 그것을 회막 앞으로 끌어다가</br>
<br>15 회중의 장로들이 여호와 앞에서 그 수송아지 머리에 안수하고 그것을 여호와 앞에서 잡을 것이요</br>
<br>16 기름 부음을 받은 제사장은 그 수송아지의 피를 가지고 회막에 들어가서</br>
<br>17 그 제사장이 손가락으로 그 피를 찍어 여호와 앞, 휘장 앞에 일곱 번 뿌릴 것이며</br>
<br>18 또 그 피로 회막 안 여호와 앞에 있는 제단 뿔들에 바르고 그 피 전부는 회막 문 앞 번제단 밑에 쏟을 것이며</br>
<br>19 그것의 기름은 다 떼어 제단 위에서 불사르되</br>
<br>20 그 송아지를 속죄제의 수송아지에게 한 것 같이 할지며 제사장이 그것으로 회중을 위하여 속죄한즉 그들이 사함을 받으리라</br>
<br>21 그는 그 수송아지를 진영 밖으로 가져다가 첫번 수송아지를 사름 같이 불사를지니 이는 회중의 속죄제니라</br>
<br>22 만일 족장이 그의 하나님 여호와의 계명 중 하나라도 부지중에 범하여 허물이 있었는데</br>
<br>23 그가 범한 죄를 누가 그에게 깨우쳐 주면 그는 흠 없는 숫염소를 예물로 가져다가</br>
<br>24 그 숫염소의 머리에 안수하고 여호와 앞 번제물을 잡는 곳에서 잡을지니 이는 속죄제라</br>
<br>25 제사장은 그 속죄 제물의 피를 손가락에 찍어 번제단 뿔들에 바르고 그 피는 번제단 밑에 쏟고</br>
<br>26 그 모든 기름은 화목제 제물의 기름 같이 제단 위에서 불사를지니 이같이 제사장이 그 범한 죄에 대하여 그를 위하여 속죄한즉 그가 사함을 얻으리라</br>
<br>27 만일 평민의 한 사람이 여호와의 계명 중 하나라도 부지중에 범하여 허물이 있었는데</br>
<br>28 그가 범한 죄를 누가 그에게 깨우쳐 주면 그는 흠 없는 암염소를 끌고 와서 그 범한 죄로 말미암아 그것을 예물로 삼아</br>
<br>29 그 속죄제물의 머리에 안수하고 그 제물을 번제물을 잡는 곳에서 잡을 것이요</br>
<br>30 제사장은 손가락으로 그 피를 찍어 번제단 뿔들에 바르고 그 피 전부를 제단 밑에 쏟고</br>
<br>31 그 모든 기름을 화목제물의 기름을 떼어낸 것 같이 떼어내 제단 위에서 불살라 여호와께 향기롭게 할지니 제사장이 그를 위하여 속죄한즉 그가 사함을 받으리라</br>
<br>32 그가 만일 어린 양을 속죄제물로 가져오려거든 흠 없는 암컷을 끌어다가</br>
<br>33 그 속죄제 제물의 머리에 안수하고 번제물을 잡는 곳에서 속죄제물로 잡을 것이요</br>
<br>34 제사장은 그 속죄제물의 피를 손가락으로 찍어 번제단 뿔들에 바르고 그 피는 전부 제단 밑에 쏟고</br>
<br>35 그 모든 기름을 화목제 어린 양의 기름을 떼낸 것 같이 떼내어 제단 위 여호와의 화제물 위에서 불사를지니 이같이 제사장이 그가 범한 죄에 대하여 그를 위하여 속죄한즉 그가 사함을 받으리라</br>
<br>&nbsp;</br>
<strong><br><font color="#4682b4">레위기 5 장</font></br></strong>
<br>1 만일 누구든지 저주하는 소리를 듣고서도 증인이 되어 그가 본 것이나 알고 있는 것을 알리지 아니하면 그는 자기의 죄를 져야 할 것이요 그 허물이 그에게로 돌아갈 것이며</br>
<br>2 만일 누구든지 부정한 것들 곧 부정한 들짐승의 사체나 부정한 가축의 사체나 부정한 곤충의 사체를 만졌으면 부지중이라고 할지라도 그 몸이 더러워져서 허물이 있을 것이요</br>
<br>3 만일 부지중에 어떤 사람의 부정에 닿았는데 그 사람의 부정이 어떠한 부정이든지 그것을 깨달았을 때에는 허물이 있을 것이요</br>
<br>4 만일 누구든지 입술로 맹세하여 악한 일이든지 선한 일이든지 하리라고 함부로 말하면 그 사람이 함부로 말하여 맹세한 것이 무엇이든지 그가 깨닫지 못하다가 그것을 깨닫게 되었을 때에는 그 중 하나에 그에게 허물이 있을 것이니</br>
<br>5 이 중 하나에 허물이 있을 때에는 아무 일에 잘못하였노라 자복하고</br>
<br>6 그 잘못으로 말미암아 여호와께 속죄제를 드리되 양 떼의 암컷 어린 양이나 염소를 끌어다가 속죄제를 드릴 것이요 제사장은 그의 허물을 위하여 속죄할지니라</br>
<br>7 만일 그의 힘이 어린 양을 바치는 데에 미치지 못하면 그가 지은 죄를 속죄하기 위하여 산비둘기 두 마리나 집비둘기 새끼 두 마리를 여호와께로 가져가되 하나는 속죄제물을 삼고 하나는 번제물을 삼아</br>
<br>8 제사장에게로 가져갈 것이요 제사장은 그 속죄제물을 먼저 드리되 그 머리를 목에서 비틀어 끊고 몸은 아주 쪼개지 말며</br>
<br>9 그 속죄제물의 피를 제단 곁에 뿌리고 그 남은 피는 제단 밑에 흘릴지니 이는 속죄제요</br>
<br>10 그 다음 것은 규례대로 번제를 드릴지니 제사장이 그의 잘못을 위하여 속죄한즉 그가 사함을 받으리라</br>
<br>11 만일 그의 손이 산비둘기 두 마리나 집비둘기 두 마리에도 미치지 못하면 그의 범죄로 말미암아 고운 가루 십분의 일 에바를 예물로 가져다가 속죄제물로 드리되 이는 속죄제인즉 그 위에 기름을 붓지 말며 유향을 놓지 말고</br>
<br>12 그것을 제사장에게로 가져갈 것이요 제사장은 그것을 기념물로 한 움큼을 가져다가 제단 위 여호와의 화제물 위에서 불사를지니 이는 속죄제라</br>
<br>13 제사장이 그가 이 중에서 하나를 범하여 얻은 허물을 위하여 속죄한즉 그가 사함을 받으리라 그 나머지는 소제물 같이 제사장에게 돌릴지니라</br>
<br><i><font color="#808080">*속건제를 드리는 규례*</font></i></br>
<br>14 여호와께서 모세에게 말씀하여 이르시되</br>
<br>15 누구든지 여호와의 성물에 대하여 부지중에 범죄하였으면 여호와께 속건제를 드리되 네가 지정한 가치를 따라 성소의 세겔로 몇 세겔 은에 상당한 흠 없는 숫양을 양 떼 중에서 끌어다가 속건제로 드려서</br>
<br>16 성물에 대한 잘못을 보상하되 그것에 오분의 일을 더하여 제사장에게 줄 것이요 제사장은 그 속건제의 숫양으로 그를 위하여 속죄한즉 그가 사함을 받으리라</br>
<br>17 만일 누구든지 여호와의 계명 중 하나를 부지중에 범하여도 허물이라 벌을 당할 것이니</br>
<br>18 그는 네가 지정한 가치대로 양 떼 중 흠 없는 숫양을 속건제물로 제사장에게로 가져갈 것이요 제사장은 그가 부지중에 범죄한 허물을 위하여 속죄한즉 그가 사함을 받으리라</br>
<br>19 이는 속건제니 그가 여호와 앞에 참으로 잘못을 저질렀음이니라</br>
<br>&nbsp;</br>
<strong><br><font color="#4682b4">레위기 6 장</font></br></strong>
<br>1 여호와께서 모세에게 말씀하여 이르시되</br>
<br>2 누구든지 여호와께 신실하지 못하여 범죄하되 곧 이웃이 맡긴 물건이나 전당물을 속이거나 도둑질하거나 착취하고도 사실을 부인하거나</br>
<br>3 남의 잃은 물건을 줍고도 사실을 부인하여 거짓 맹세하는 등 사람이 이 모든 일 중의 하나라도 행하여 범죄하면</br>
<br>4 이는 죄를 범하였고 죄가 있는 자니 그 훔친 것이나 착취한 것이나 맡은 것이나 잃은 물건을 주운 것이나</br>
<br>5 그 거짓 맹세한 모든 물건을 돌려보내되 곧 그 본래 물건에 오분의 일을 더하여 돌려보낼 것이니 그 죄가 드러나는 날에 그 임자에게 줄 것이요</br>
<br>6 그는 또 그 속건제물을 여호와께 가져갈지니 곧 네가 지정한 가치대로 양 떼 중 흠 없는 숫양을 속건제물을 위하여 제사장에게로 끌고 갈 것이요</br>
<br>7 제사장은 여호와 앞에서 그를 위하여 속죄한즉 그는 무슨 허물이든지 사함을 받으리라</br>
<br><i><font color="#808080">*번제를 드리는 규례*</font></i></br>
<br>8 여호와께서 모세에게 말씀하여 이르시되</br>
<br>9 아론과 그의 자손에게 명령하여 이르라 번제의 규례는 이러하니라 번제물은 아침까지 제단 위에 있는 석쇠 위에 두고 제단의 불이 그 위에서 꺼지지 않게 할 것이요</br>
<br>10 제사장은 세마포 긴 옷을 입고 세마포 속바지로 하체를 가리고 제단 위에서 불태운 번제의 재를 가져다가 제단 곁에 두고</br>
<br>11 그 옷을 벗고 다른 옷을 입고 그 재를 진영 바깥 정결한 곳으로 가져갈 것이요</br>
<br>12 제단 위의 불은 항상 피워 꺼지지 않게 할지니 제사장은 아침마다 나무를 그 위에서 태우고 번제물을 그 위에 벌여 놓고 화목제의 기름을 그 위에서 불사를지며</br>
<br>13 불은 끊임이 없이 제단 위에 피워 꺼지지 않게 할지니라</br>
<br><i><font color="#808080">*소제를 드리는 규례*</font></i></br>
<br>14 소제의 규례는 이러하니라 아론의 자손은 그것을 제단 앞 여호와 앞에 드리되</br>
<br>15 그 소제의 고운 가루 한 움큼과 기름과 소제물 위의 유향을 다 가져다가 기념물로 제단 위에서 불살라 여호와 앞에 향기로운 냄새가 되게 하고</br>
<br>16 그 나머지는 아론과 그의 자손이 먹되 누룩을 넣지 말고 거룩한 곳 회막 뜰에서 먹을지니라</br>
<br>17 그것에 누룩을 넣어 굽지 말라 이는 나의 화제물 중에서 내가 그들에게 주어 그들의 소득이 되게 하는 것이라 속죄제와 속건제 같이 지극히 거룩한즉</br>
<br>18 아론 자손의 남자는 모두 이를 먹을지니 이는 여호와의 화제물 중에서 대대로 그들의 영원한 소득이 됨이라 이를 만지는 자마다 거룩하리라</br>
<br>19 여호와께서 모세에게 말씀하여 이르시되</br>
<br>20 아론과 그의 자손이 기름 부음을 받는 날에 여호와께 드릴 예물은 이러하니라 고운 가루 십분의 일 에바를 항상 드리는 소제물로 삼아 그 절반은 아침에, 절반은 저녁에 드리되</br>
<br>21 그것을 기름으로 반죽하여 철판에 굽고 기름에 적셔 썰어서 소제로 여호와께 드려 향기로운 냄새가 되게 하라</br>
<br>22 이 소제는 아론의 자손 중 기름 부음을 받고 그를 이어 제사장 된 자가 드릴 것이요 영원한 규례로 여호와께 온전히 불사를 것이니</br>
<br>23 제사장의 모든 소제물은 온전히 불사르고 먹지 말지니라</br>
<br><i><font color="#808080">*속죄제를 드리는 규례*</font></i></br>
<br>24 여호와께서 모세에게 말씀하여 이르시되</br>
<br>25 아론과 그의 아들들에게 말하여 이르라 속죄제의 규례는 이러하니라 속죄제 제물은 지극히 거룩하니 여호와 앞 번제물을 잡는 곳에서 그 속죄제 제물을 잡을 것이요</br>
<br>26 죄를 위하여 제사 드리는 제사장이 그것을 먹되 곧 회막 뜰 거룩한 곳에서 먹을 것이며</br>
<br>27 그 고기에 접촉하는 모든 자는 거룩할 것이며 그 피가 어떤 옷에든지 묻었으면 묻은 그것을 거룩한 곳에서 빨 것이요</br>
<br>28 그 고기를 토기에 삶았으면 그 그릇을 깨뜨릴 것이요 유기에 삶았으면 그 그릇을 닦고 물에 씻을 것이며</br>
<br>29 제사장인 남자는 모두 그것을 먹을지니 그것은 지극히 거룩하니라</br>
<br>30 그러나 피를 가지고 회막에 들어가 성소에서 속죄하게 한 속죄제 제물의 고기는 먹지 못할지니 불사를지니라</br>
<br>&nbsp;</br>
<strong><br><font color="#4682b4">레위기 7 장</font></br></strong>
<br><i><font color="#808080">*속건제를 드리는 규례*</font></i></br>
<br>1 속건제의 규례는 이러하니라 이는 지극히 거룩하니</br>
<br>2 번제물을 잡는 곳에서 속건제의 번제물을 잡을 것이요 제사장은 그 피를 제단 사방에 뿌릴 것이며</br>
<br>3 그 기름을 모두 드리되 곧 그 기름진 꼬리와 내장에 덮인 기름과</br>
<br>4 두 콩팥과 그 위의 기름 곧 허리 쪽에 있는 것과 간에 덮인 꺼풀을 콩팥과 함께 떼어내고</br>
<br>5 제사장은 그것을 다 제단 위에서 불살라 여호와께 화제로 드릴 것이니 이는 속건제니라</br>
<br>6 제사장인 남자는 모두 그것을 먹되 거룩한 곳에서 먹을지니라 그것은 지극히 거룩하니라</br>
<br>7 속죄제와 속건제는 규례가 같으니 그 제물은 속죄하는 제사장에게로 돌아갈 것이요</br>
<br>8 사람을 위하여 번제를 드리는 제사장 곧 그 제사장은 그 드린 번제물의 가죽을 자기가 가질 것이며</br>
<br>9 화덕에 구운 소제물과 냄비에나 철판에서 만든 소제물은 모두 그 드린 제사장에게로 돌아갈 것이니</br>
<br>10 소제물은 기름 섞은 것이나 마른 것이나 모두 아론의 모든 자손이 균등하게 분배할 것이니라</br>
<br><i><font color="#808080">*화목제물을 드리는 규례*</font></i></br>
<br>11 여호와께 드릴 화목제물의 규례는 이러하니라</br>
<br>12 만일 그것을 감사함으로 드리려면 기름 섞은 무교병과 기름 바른 무교전병과 고운 가루에 기름 섞어 구운 과자를 그 감사제물과 함께 드리고</br>
<br>13 또 유교병을 화목제의 감사제물과 함께 그 예물로 드리되</br>
<br>14 그 전체의 예물 중에서 하나씩 여호와께 거제로 드리고 그것을 화목제의 피를 뿌린 제사장들에게로 돌릴지니라</br>
<br>15 감사함으로 드리는 화목제물의 고기는 드리는 그 날에 먹을 것이요 조금이라도 이튿날 아침까지 두지 말 것이니라</br>
<br>16 그러나 그의 예물의 제물이 서원이나 자원하는 것이면 그 제물을 드린 날에 먹을 것이요 그 남은 것은 이튿날에도 먹되</br>
<br>17 그 제물의 고기가 셋째 날까지 남았으면 불사를지니</br>
<br>18 만일 그 화목제물의 고기를 셋째 날에 조금이라도 먹으면 그 제사는 기쁘게 받아들여지지 않을 것이라 드린 자에게도 예물답게 되지 못하고 도리어 가증한 것이 될 것이며 그것을 먹는 자는 그 죄를 짊어지리라</br>
<br>19 그 고기가 부정한 물건에 접촉되었으면 먹지 말고 불사를 것이라 그 고기는 깨끗한 자만 먹을 것이니</br>
<br>20 만일 몸이 부정한 자가 여호와께 속한 화목제물의 고기를 먹으면 그 사람은 자기 백성 중에서 끊어질 것이요</br>
<br>21 만일 누구든지 부정한 것 곧 사람의 부정이나 부정한 짐승이나 부정하고 가증한 무슨 물건을 만지고 여호와께 속한 화목제물의 고기를 먹으면 그 사람도 자기 백성 중에서 끊어지리라</br>
<br><i><font color="#808080">*피와 기름은 먹지 말라*</font></i></br>
<br>22 여호와께서 모세에게 말씀하여 이르시되</br>
<br>23 이스라엘 자손에게 말하여 이르라 너희는 소나 양이나 염소의 기름을 먹지 말 것이요</br>
<br>24 스스로 죽은 것의 기름이나 짐승에게 찢긴 것의 기름은 다른 데는 쓰려니와 결단코 먹지는 말지니라</br>
<br>25 사람이 여호와께 화제로 드리는 제물의 기름을 먹으면 그 먹는 자는 자기 백성 중에서 끊어지리라</br>
<br>26 너희가 사는 모든 곳에서 새나 짐승의 피나 무슨 피든지 먹지 말라</br>
<br>27 무슨 피든지 먹는 사람이 있으면 그 사람은 다 자기 백성 중에서 끊어지리라</br>
<br><i><font color="#808080">*화목제물 중에서 제사장이 받을 소득*</font></i></br>
<br>28 여호와께서 모세에게 말씀하여 이르시되</br>
<br>29 이스라엘 자손에게 말하여 이르라 화목제물을 여호와께 드리려는 자는 그 화목제물 중에서 그의 예물을 여호와께 가져오되</br>
<br>30 여호와의 화제물은 그 사람이 자기 손으로 가져올지니 곧 그 제물의 기름과 가슴을 가져올 것이요 제사장은 그 가슴을 여호와 앞에 흔들어 요제를 삼고</br>
<br>31 그 기름은 제단 위에서 불사를 것이며 가슴은 아론과 그의 자손에게 돌릴 것이며</br>
<br>32 또 너희는 그 화목제물의 오른쪽 뒷다리를 제사장에게 주어 거제를 삼을지니</br>
<br>33 아론의 자손 중에서 화목제물의 피와 기름을 드리는 자는 그 오른쪽 뒷다리를 자기의 소득으로 삼을 것이니라</br>
<br>34 내가 이스라엘 자손의 화목제물 중에서 그 흔든 가슴과 든 뒷다리를 가져다가 제사장 아론과 그의 자손에게 주었나니 이는 이스라엘 자손에게서 받을 영원한 소득이니라</br>
<br><i><font color="#808080">*맺는 말(1)*</font></i></br>
<br>35 이는 여호와의 화제물 중에서 아론에게 돌릴 것과 그의 아들들에게 돌릴 것이니 그들을 세워 여호와의 제사장의 직분을 행하게 한 날</br>
<br>36 곧 그들에게 기름 부은 날에 여호와께서 명령하사 이스라엘 자손 중에서 그들에게 돌리게 하신 것이라 대대로 영원히 받을 소득이니라</br>
<br><i><font color="#808080">*맺는 말(2)*</font></i></br>
<br>37 이는 번제와 소제와 속죄제와 속건제와 위임식과 화목제의 규례라</br>
<br>38 여호와께서 시내 광야에서 이스라엘 자손에게 그 예물을 여호와께 드리라 명령하신 날에 시내 산에서 이같이 모세에게 명령하셨더라</br>
<br>&nbsp;</br>
<strong><br><font color="#4682b4">레위기 8 장</font></br></strong>
<br><i><font color="#808080">*아론과 그의 아들들의 제사장 위임식*</font></i></br>
<br>1 여호와께서 모세에게 말씀하여 이르시되</br>
<br>2 너는 아론과 그의 아들들과 함께 그 의복과 관유와 속죄제의 수송아지와 숫양 두 마리와 무교병 한 광주리를 가지고</br>
<br>3 온 회중을 회막 문에 모으라</br>
<br>4 모세가 여호와께서 자기에게 명령하신 대로 하매 회중이 회막 문에 모인지라</br>
<br>5 모세가 회중에게 이르되 여호와께서 행하라고 명령하신 것이 이러하니라 하고</br>
<br>6 모세가 아론과 그의 아들들을 데려다가 물로 그들을 씻기고</br>
<br>7 아론에게 속옷을 입히며 띠를 띠우고 겉옷을 입히며 에봇을 걸쳐 입히고 에봇의 장식 띠를 띠워서 에봇을 몸에 매고</br>
<br>8 흉패를 붙이고 흉패에 우림과 둠밈을 넣고</br>
<br>9 그의 머리에 관을 씌우고 그 관 위 전면에 금 패를 붙이니 곧 거룩한 관이라 여호와께서 모세에게 명령하신 것과 같았더라</br>
<br>10 모세가 관유를 가져다가 성막과 그 안에 있는 모든 것에 발라 거룩하게 하고</br>
<br>11 또 제단에 일곱 번 뿌리고 또 그 제단과 그 모든 기구와 물두멍과 그 받침에 발라 거룩하게 하고</br>
<br>12 또 관유를 아론의 머리에 붓고 그에게 발라 거룩하게 하고</br>
<br>13 모세가 또 아론의 아들들을 데려다가 그들에게 속옷을 입히고 띠를 띠우며 관을 씌웠으니 여호와께서 모세에게 명령하신 것과 같았더라</br>
<br>14 모세가 또 속죄제의 수송아지를 끌어오니 아론과 그의 아들들이 그 속죄제의 수송아지 머리에 안수하매</br>
<br>15 모세가 잡고 그 피를 가져다가 손가락으로 그 피를 제단의 네 귀퉁이 뿔에 발라 제단을 깨끗하게 하고 그 피는 제단 밑에 쏟아 제단을 속하여 거룩하게 하고</br>
<br>16 또 내장에 덮인 모든 기름과 간 꺼풀과 두 콩팥과 그 기름을 가져다가 모세가 제단 위에 불사르고</br>
<br>17 그 수송아지 곧 그 가죽과 고기와 똥은 진영 밖에서 불살랐으니 여호와께서 모세에게 명령하심과 같았더라</br>
<br>18 또 번제의 숫양을 드릴새 아론과 그의 아들들이 그 숫양의 머리에 안수하매</br>
<br>19 모세가 잡아 그 피를 제단 사방에 뿌리고</br>
<br>20 그 숫양의 각을 뜨고 모세가 그 머리와 각 뜬 것과 기름을 불사르고</br>
<br>21 물로 내장과 정강이들을 씻고 모세가 그 숫양의 전부를 제단 위에서 불사르니 이는 향기로운 냄새를 위하여 드리는 번제로 여호와께 드리는 화제라 여호와께서 모세에게 명령하심과 같았더라</br>
<br>22 또 다른 숫양 곧 위임식의 숫양을 드릴새 아론과 그의 아들들이 그 숫양의 머리에 안수하매</br>
<br>23 모세가 잡고 그 피를 가져다가 아론의 오른쪽 귓부리와 그의 오른쪽 엄지 손가락과 그의 오른쪽 엄지 발가락에 바르고</br>
<br>24 아론의 아들들을 데려다가 모세가 그 오른쪽 귓부리와 그들의 손의 오른쪽 엄지 손가락과 그들의 발의 오른쪽 엄지 발가락에 그 피를 바르고 또 모세가 그 피를 제단 사방에 뿌리고</br>
<br>25 그가 또 그 기름과 기름진 꼬리와 내장에 덮인 모든 기름과 간 꺼풀과 두 콩팥과 그 기름과 오른쪽 뒷다리를 떼어내고</br>
<br>26 여호와 앞 무교병 광주리에서 무교병 한 개와 기름 섞은 떡 한 개와 전병 한 개를 가져다가 그 기름 위에와 오른쪽 뒷다리 위에 놓아</br>
<br>27 그 전부를 아론의 손과 그의 아들들의 손에 두어 여호와 앞에 흔들어 요제를 삼게 하고</br>
<br>28 모세가 그것을 그들의 손에서 가져다가 제단 위에 있는 번제물 위에 불사르니 이는 향기로운 냄새를 위하여 드리는 위임식 제사로 여호와께 드리는 화제라</br>
<br>29 이에 모세가 그 가슴을 가져다가 여호와 앞에 흔들어 요제를 삼았으니 이는 위임식에서 잡은 숫양 중 모세의 몫이라 여호와께서 모세에게 명령하심과 같았더라</br>
<br>30 모세가 관유와 제단 위의 피를 가져다가 아론과 그의 옷과 그의 아들들과 그의 아들들의 옷에 뿌려서 아론과 그의 옷과 그의 아들들과 그의 아들들의 옷을 거룩하게 하고</br>
<br>31 모세가 아론과 그의 아들들에게 이르되 내게 이미 명령하시기를 아론과 그의 아들들은 먹으라 하셨은즉 너희는 회막 문에서 그 고기를 삶아 위임식 광주리 안의 떡과 아울러 그 곳에서 먹고</br>
<br>32 고기와 떡의 나머지는 불사를지며</br>
<br>33 위임식은 이레 동안 행하나니 위임식이 끝나는 날까지 이레 동안은 회막 문에 나가지 말라</br>
<br>34 오늘 행한 것은 여호와께서 너희를 위하여 속죄하게 하시려고 명령하신 것이니</br>
<br>35 너희는 칠 주야를 회막 문에 머물면서 여호와께서 지키라고 하신 것을 지키라 그리하면 사망을 면하리라 내가 이같이 명령을 받았느니라</br>
<br>36 아론과 그의 아들들이 여호와께서 모세를 통하여 명령하신 모든 일을 준행하니라</br>
<br>&nbsp;</br>
<strong><br><font color="#4682b4">레위기 9 장</font></br></strong>
<br><i><font color="#808080">*아론이 첫 제사를 드리다*</font></i></br>
<br>1 여덟째 날에 모세가 아론과 그의 아들들과 이스라엘 장로들을 불러다가</br>
<br>2 아론에게 이르되 속죄제를 위하여 흠 없는 송아지를 가져오고 번제를 위하여 흠 없는 숫양을 여호와 앞에 가져다 드리고</br>
<br>3 이스라엘 자손에게 말하여 이르기를 너희는 속죄제를 위하여 숫염소를 가져오고 또 번제를 위하여 일 년 되고 흠 없는 송아지와 어린 양을 가져오고</br>
<br>4 또 화목제를 위하여 여호와 앞에 드릴 수소와 숫양을 가져오고 또 기름 섞은 소제물을 가져오라 하라 오늘 여호와께서 너희에게 나타나실 것임이니라 하매</br>
<br>5 그들이 모세가 명령한 모든 것을 회막 앞으로 가져오고 온 회중이 나아와 여호와 앞에 선지라</br>
<br>6 모세가 이르되 이는 여호와께서 너희에게 하라고 명령하신 것이니 여호와의 영광이 너희에게 나타나리라</br>
<br>7 모세가 또 아론에게 이르되 너는 제단에 나아가 네 속죄제와 네 번제를 드려서 너를 위하여, 백성을 위하여 속죄하고 또 백성의 예물을 드려서 그들을 위하여 속죄하되 여호와의 명령대로 하라</br>
<br>8 이에 아론이 제단에 나아가 자기를 위한 속죄제 송아지를 잡으매</br>
<br>9 아론의 아들들이 그 피를 아론에게 가져오니 아론이 손가락으로 그 피를 찍어 제단 뿔들에 바르고 그 피는 제단 밑에 쏟고</br>
<br>10 그 속죄제물의 기름과 콩팥과 간 꺼풀을 제단 위에서 불사르니 여호와께서 모세에게 명령하심과 같았고</br>
<br>11 그 고기와 가죽은 진영 밖에서 불사르니라</br>
<br>12 아론이 또 번제물을 잡으매 아론의 아들들이 그 피를 그에게로 가져오니 그가 그 피를 제단 사방에 뿌리고</br>
<br>13 그들이 또 번제의 제물 곧 그의 각과 머리를 그에게로 가져오매 그가 제단 위에서 불사르고</br>
<br>14 또 내장과 정강이는 씻어서 단 위에 있는 번제물 위에서 불사르니라</br>
<br>15 그가 또 백성의 예물을 드리되 곧 백성을 위한 속죄제의 염소를 가져다가 잡아 전과 같이 죄를 위하여 드리고</br>
<br>16 또 번제물을 드리되 규례대로 드리고</br>
<br>17 또 소제를 드리되 그 중에서 그의 손에 한 움큼을 채워서 아침 번제물에 더하여 제단 위에서 불사르고</br>
<br>18 또 백성을 위하는 화목제물의 수소와 숫양을 잡으매 아론의 아들들이 그 피를 그에게로 가져오니 그가 제단 사방에 뿌리고</br>
<br>19 그들이 또 수소와 숫양의 기름과 기름진 꼬리와 내장에 덮인 것과 콩팥과 간 꺼풀을 아론에게로 가져다가</br>
<br>20 그 기름을 가슴들 위에 놓으매 아론이 그 기름을 제단 위에서 불사르고</br>
<br>21 가슴들과 오른쪽 뒷다리를 그가 여호와 앞에 요제로 흔드니 모세가 명령한 것과 같았더라</br>
<br>22 아론이 백성을 향하여 손을 들어 축복함으로 속죄제와 번제와 화목제를 마치고 내려오니라</br>
<br>23 모세와 아론이 회막에 들어갔다가 나와서 백성에게 축복하매 여호와의 영광이 온 백성에게 나타나며</br>
<br>24 불이 여호와 앞에서 나와 제단 위의 번제물과 기름을 사른지라 온 백성이 이를 보고 소리 지르며 엎드렸더라</br>
<br>&nbsp;</br>
<strong><br><font color="#4682b4">레위기 10 장</font></br></strong>
<br><i><font color="#808080">*나답과 아비후가 벌을 받아 죽다*</font></i></br>
<br>1 아론의 아들 나답과 아비후가 각기 향로를 가져다가 여호와께서 명령하시지 아니하신 다른 불을 담아 여호와 앞에 분향하였더니</br>
<br>2 불이 여호와 앞에서 나와 그들을 삼키매 그들이 여호와 앞에서 죽은지라</br>
<br>3 모세가 아론에게 이르되 이는 여호와의 말씀이라 이르시기를 나는 나를 가까이 하는 자 중에서 내 거룩함을 나타내겠고 온 백성 앞에서 내 영광을 나타내리라 하셨느니라 아론이 잠잠하니</br>
<br>4 모세가 아론의 삼촌 웃시엘의 아들 미사엘과 엘사반을 불러 그들에게 이르되 나아와 너희 형제들을 성소 앞에서 진영 밖으로 메고 나가라 하매</br>
<br>5 그들이 나와 모세가 말한 대로 그들을 옷 입은 채 진영 밖으로 메어 내니</br>
<br>6 모세가 아론과 그의 아들 엘르아살과 이다말에게 이르되 너희는 머리를 풀거나 옷을 찢지 말라 그리하여 너희가 죽음을 면하고 여호와의 진노가 온 회중에게 미침을 면하게 하라 오직 너희 형제 이스라엘 온 족속은 여호와께서 치신 불로 말미암아 슬퍼할 것이니라</br>
<br>7 여호와의 관유가 너희에게 있은즉 너희는 회막 문에 나가지 말라 그리하면 죽음을 면하리라 그들이 모세의 말대로 하니라</br>
<br><i><font color="#808080">*제사장이 회막에 들어갈 때의 규례*</font></i></br>
<br>8 여호와께서 아론에게 말씀하여 이르시되</br>
<br>9 너와 네 자손들이 회막에 들어갈 때에는 포도주나 독주를 마시지 말라 그리하여 너희 죽음을 면하라 이는 너희 대대로 지킬 영영한 규례라</br>
<br>10 그리하여야 너희가 거룩하고 속된 것을 분별하며 부정하고 정한 것을 분별하고</br>
<br>11 또 나 여호와가 모세를 통하여 모든 규례를 이스라엘 자손에게 가르치리라</br>
<br><i><font color="#808080">*제사장이 거룩한 곳에서 먹을 제물*</font></i></br>
<br>12 모세가 아론과 그 남은 아들 엘르아살에게와 이다말에게 이르되 여호와께 드린 화제물 중 소제의 남은 것은 지극히 거룩하니 너희는 그것을 취하여 누룩을 넣지 말고 제단 곁에서 먹되</br>
<br>13 이는 여호와의 화제물 중 네 소득과 네 아들들의 소득인즉 너희는 그것을 거룩한 곳에서 먹으라 내가 명령을 받았느니라</br>
<br>14 흔든 가슴과 들어올린 뒷다리는 너와 네 자녀가 너와 함께 정결한 곳에서 먹을지니 이는 이스라엘 자손의 화목제물 중에서 네 소득과 네 아들들의 소득으로 주신 것임이니라</br>
<br>15 그 들어올린 뒷다리와 흔든 가슴을 화제물의 기름과 함께 가져다가 여호와 앞에 흔들어 요제를 삼을지니 이는 여호와의 명령대로 너와 네 자손의 영원한 소득이니라</br>
<br>16 모세가 속죄제 드린 염소를 찾은즉 이미 불살랐는지라 그가 아론의 남은 아들 엘르아살과 이다말에게 노하여 이르되</br>
<br>17 이 속죄제물은 지극히 거룩하거늘 너희가 어찌하여 거룩한 곳에서 먹지 아니하였느냐 이는 너희로 회중의 죄를 담당하여 그들을 위하여 여호와 앞에 속죄하게 하려고 너희에게 주신 것이니라</br>
<br>18 그 피는 성소에 들여오지 아니하는 것이었으니 그 제물은 너희가 내가 명령한 대로 거룩한 곳에서 먹었어야 했을 것이니라</br>
<br>19 아론이 모세에게 이르되 오늘 그들이 그 속죄제와 번제를 여호와께 드렸어도 이런 일이 내게 임하였거늘 오늘 내가 속죄제물을 먹었더라면 여호와께서 어찌 좋게 여기셨으리요</br>
<br>20 모세가 그 말을 듣고 좋게 여겼더라</br>
<br>&nbsp;</br>
<br>    8일차 끝</br>
<br>&nbsp;</br>
    </h2>
  </div>

  <!-- 모달 (설명/요약 출력) -->
  <div id="explanation-modal" class="modal" role="dialog" aria-modal="true" aria-labelledby="modal-title">
    <div class="modal-content">
      <span class="close-button" id="close-modal" aria-label="닫기">&times;</span>
      <h3 id="modal-title">구절 설명</h3>
      <img id="modal-image" src="" alt="설명 관련 이미지" />
      <div id="modal-text">구절을 드래그하여 선택하고 '구절설명' 버튼을 누르세요.</div>
    </div>
  </div>

  <div id="scroll-marker-container" class="scroll-marker-container" aria-hidden="true"></div>

  <script>
    // ------------------------------
    // API KEY (사용자 입력 상태)
    const apiKey = "AIzaSyDUlSQlSPgnrFBXpnUJMDoUO3s_KsaoFRU";
    // ------------------------------

    // DOM
    const bibleTextEl = document.getElementById('bible-text');
    const searchCountEl = document.getElementById('search-count');
    const nextLocationBtn = document.getElementById('next-location-btn');
    const scrollMarkerContainer = document.getElementById('scroll-marker-container');

    const explanationIconButton = document.getElementById('explanation-icon-button');
    const explanationButtonWrapper = document.getElementById('explanation-button-wrapper');
    const explanationSubButtons = document.getElementById('explanation-sub-buttons');
    const detailedExplanationButton = document.getElementById('detailed-explanation-button');
    const simpleExplanationButton = document.getElementById('simple-explanation-button');

    const summarySimpleMain = document.getElementById('summary-simple-main');
    const summaryDetailedMain = document.getElementById('summary-detailed-main');

    const modal = document.getElementById('explanation-modal');
    const closeModalButton = document.getElementById('close-modal');
    const modalTitle = document.getElementById('modal-title');
    const modalImage = document.getElementById('modal-image');
    const modalText = document.getElementById('modal-text');

    const audio = document.getElementById('audio-file');
    const playBtn = document.getElementById('play-btn');
    const pauseBtn = document.getElementById('pause-btn');
    const stopBtn = document.getElementById('stop-btn');
    const progressBar = document.getElementById('progress-bar');
    const rewindBtn = document.getElementById('rewind-10');
    const forwardBtn = document.getElementById('forward-10');
    const speedDisplay = document.getElementById('speed-display');
    const speedDown02Btn = document.getElementById('speed-down-02');
    const speedDown01Btn = document.getElementById('speed-down-01');
    const speedUp01Btn = document.getElementById('speed-up-01');
    const speedUp02Btn = document.getElementById('speed-up-02');
    const speedResetBtn = document.getElementById('speed-reset');
    const volumeSlider = document.getElementById('volume-slider');
    const muteBtn = document.getElementById('mute-btn');
    const currentTimeEl = document.getElementById('current-time');
    const remainingTimeEl = document.getElementById('remaining-time');

    const upBtn = document.getElementById('up');
    const downBtn = document.getElementById('down');
    const fontSizeEl = document.getElementById('font-size');

    // 상태
    let originalText = "";
    let selectedVerse = "";
    let selectionRange = null; // 선택 영역 복원용
    let foundSentences = [];
    let currentSearchIndex = -1;
    let currentSpeed = 1.0;
    let isMuted = false;
    let selectionDebounce = null;

    // 유틸
    function escapeRegExp(s) { return s.replace(/[.*+?^${}()|[\]\\]/g, '\\$&'); }
    function formatTime(sec) { if (!isFinite(sec) || sec < 0) return '0:00'; const m = Math.floor(sec/60); const s = Math.floor(sec%60); return `${m}:${String(s).padStart(2,'0')}`; }

    // 초기화
    window.addEventListener('DOMContentLoaded', () => {
      originalText = bibleTextEl.innerHTML; // 원본 보관
      updateFontSizeDisplay();
      updateSpeed();

      // ---------------------------
  // (추가 1) 본문 줄 단위 분리
  // ---------------------------
  const lines = originalText.split(/<br\s*\/?>/i);
  bibleTextEl.innerHTML = lines.map(line => {
    if (line.trim() === "") return "<br>";
    return `<span class="line">${line}</span><br>`;
  }).join("");

  const lineElements = document.querySelectorAll("#bible-text .line");

  // ---------------------------
  // (추가 2) 스크롤 시 중앙 두 줄 강조
  // ---------------------------
  function highlightCenterLines() {
    const viewportCenter = window.innerHeight / 2 + window.scrollY;
    let closestIndex = -1;
    let minDistance = Infinity;

    lineElements.forEach((line, i) => {
      const rect = line.getBoundingClientRect();
      const lineCenter = rect.top + window.scrollY + rect.height / 2;
      const distance = Math.abs(lineCenter - viewportCenter);

      if (distance < minDistance) {
        minDistance = distance;
        closestIndex = i;
      }
    });

    // 강조 초기화
    lineElements.forEach(line => line.classList.remove("highlight"));

    // 중앙 두 줄 강조
    if (closestIndex >= 0) {
      lineElements[closestIndex].classList.add("highlight");
      if (closestIndex + 1 < lineElements.length) {
        lineElements[closestIndex + 1].classList.add("highlight");
      }
    }
  }

  // 스크롤 이벤트 등록
  window.addEventListener("scroll", highlightCenterLines);
  // 초기 실행
  highlightCenterLines();
// ---------------------------
    // (추가 3) PC에서 2줄씩 부드럽게 스크롤
    // ---------------------------
    window.addEventListener("wheel", function(e) {
      if (e.ctrlKey) return;

      const firstLine = document.querySelector("#bible-text .line");
      if (!firstLine) return;

      const lineHeight = firstLine.getBoundingClientRect().height;

      e.preventDefault();
      window.scrollBy({
        top: e.deltaY > 0 ? lineHeight * 2 : -lineHeight * 2,
        behavior: "smooth"
      });
    }, { passive: false });
// ---------------------------

      // 폰트 버튼
      upBtn.addEventListener('click', () => {
        const current = parseFloat(getComputedStyle(bibleTextEl).fontSize);
        if (current + 4 <= 80) { bibleTextEl.style.fontSize = (current + 4) + 'px'; updateFontSizeDisplay(); }
      });
      downBtn.addEventListener('click', () => {
        const current = parseFloat(getComputedStyle(bibleTextEl).fontSize);
        if (current - 4 >= 12) { bibleTextEl.style.fontSize = (current - 4) + 'px'; updateFontSizeDisplay(); }
      });

      // 검색 폼
      const searchForm = document.forms.f1;
      searchForm.addEventListener('submit', (e) => { e.preventDefault(); findString(searchForm.t1.value); });
      searchForm.b2.addEventListener('click', () => { clearHighlight(); });

      // nextLocation
      nextLocationBtn.addEventListener('click', nextLocation);

      // 오디오
      playBtn.addEventListener('click', () => { audio.play().catch(()=>{}); });
      pauseBtn.addEventListener('click', () => audio.pause());
      stopBtn.addEventListener('click', () => { audio.pause(); audio.currentTime = 0; });

      speedDown02Btn.addEventListener('click', () => { currentSpeed = Math.max(0.5, currentSpeed - 0.2); updateSpeed(); });
      speedDown01Btn.addEventListener('click', () => { currentSpeed = Math.max(0.5, currentSpeed - 0.1); updateSpeed(); });
      speedUp01Btn.addEventListener('click', () => { currentSpeed = Math.min(2.0, currentSpeed + 0.1); updateSpeed(); });
      speedUp02Btn.addEventListener('click', () => { currentSpeed = Math.min(2.0, currentSpeed + 0.2); updateSpeed(); });
      speedResetBtn.addEventListener('click', () => { currentSpeed = 1.0; updateSpeed(); });

      volumeSlider.addEventListener('input', () => { audio.volume = Number(volumeSlider.value); });
      muteBtn.addEventListener('click', () => { isMuted = !isMuted; audio.muted = isMuted; muteBtn.textContent = isMuted ? '🔇' : '🔊'; });

      // progress bar updates
      audio.addEventListener('timeupdate', () => {
        if (!isFinite(audio.duration) || audio.duration <= 0) return;
        const pct = (audio.currentTime / audio.duration) * 100;
        progressBar.value = pct;
        currentTimeEl.textContent = formatTime(audio.currentTime);
        remainingTimeEl.textContent = '-' + formatTime(audio.duration - audio.currentTime);
      }, { passive: true });

      audio.addEventListener('loadedmetadata', () => {
        currentTimeEl.textContent = '0:00';
        remainingTimeEl.textContent = '-' + formatTime(audio.duration || 0);
      });

      progressBar.addEventListener('input', () => {
        if (!isFinite(audio.duration) || audio.duration <= 0) return;
        const pct = progressBar.value / 100;
        audio.currentTime = audio.duration * pct;
      }, { passive: true });

      rewindBtn.addEventListener('click', () => {
        audio.currentTime = Math.max(0, audio.currentTime - 10);
      });

      forwardBtn.addEventListener('click', () => {
        if (isFinite(audio.duration)) {
          audio.currentTime = Math.min(audio.duration, audio.currentTime + 10);
        }
      });

      // 설명 버튼(책) - 클릭시 서브버튼 토글
      // iOS에서 선택이 사라지는 문제를 피하기 위해 클릭/터치 이전 선택영역을 저장하고, 토글 후 복원
      explanationIconButton.addEventListener('pointerdown', (ev) => {
        // pointerdown에서 기본 동작을 방지하면 iOS가 선택을 잃지 않는 경우가 있지만, 안전하게 클론을 저장
        const sel = window.getSelection();
        try {
          if (sel && sel.rangeCount > 0) selectionRange = sel.getRangeAt(0).cloneRange();
        } catch(e) {
          selectionRange = null;
        }
      }, { passive: true });

      explanationIconButton.addEventListener('click', (ev) => {
        ev.stopPropagation();
        // 토글하기 전에 현재 선택을 저장(안전)
        const sel = window.getSelection();
        try { if (sel && sel.rangeCount > 0) selectionRange = sel.getRangeAt(0).cloneRange(); } catch(e){ selectionRange = null; }
        explanationButtonWrapper.classList.toggle('active');

        // 토글 후 약간 뒤에 선택 복원 (iOS에서 클릭으로 인해 사라졌다면 복원)
        setTimeout(() => {
          if (selectionRange) {
            const sel2 = window.getSelection();
            sel2.removeAllRanges();
            try { sel2.addRange(selectionRange); } catch(e){ /* ignore */ }
            // update selectedVerse accordingly
            updateSelectedVerseFromRange(selectionRange);
          }
        }, 60);
      });

      // 책 버튼 외부 클릭으로 닫기
      document.body.addEventListener('click', (ev) => {
        if (!explanationButtonWrapper.contains(ev.target)) explanationButtonWrapper.classList.remove('active');
      });

      // 상세/간단 구절설명 버튼 - 클릭시 선택문구 사용
      detailedExplanationButton.addEventListener('click', () => {
        const v = (selectedVerse || '').trim();
        if (!v) { showModal("구절을 먼저 선택하세요","본문에서 구절이나 단어를 드래그하여 선택한 후 다시 버튼을 눌러주세요."); }
        else { fetchExplanation(v, 'detailed'); }
        explanationButtonWrapper.classList.remove('active');
      });
      simpleExplanationButton.addEventListener('click', () => {
        const v = (selectedVerse || '').trim();
        if (!v) { showModal("구절을 먼저 선택하세요","본문에서 구절이나 단어를 드래그하여 선택한 후 다시 버튼을 눌러주세요."); }
        else { fetchExplanation(v, 'simple'); }
        explanationButtonWrapper.classList.remove('active');
      });

      // 본문 요약 버튼 (항상 보이는 위치)
      summarySimpleMain.addEventListener('click', () => {
        const full = getFullBibleText();
        if (!full.trim()) { showModal("본문이 없습니다","요약할 성경 본문이 없습니다."); }
        else { fetchSummary(full, 'simple'); }
      });
      summaryDetailedMain.addEventListener('click', () => {
        const full = getFullBibleText();
        if (!full.trim()) { showModal("본문이 없습니다","요약할 성경 본문이 없습니다."); }
        else { fetchSummary(full, 'detailed'); }
      });

      // 모달 닫기
      closeModalButton.addEventListener('click', () => { modal.style.display = 'none'; });
      window.addEventListener('click', (ev) => { if (ev.target === modal) modal.style.display = 'none'; });

      // 선택 이벤트: 데스크탑 + 모바일 대응 (디바운스)
      const scheduleSelectionUpdate = () => {
        clearTimeout(selectionDebounce);
        selectionDebounce = setTimeout(handleSelectionChange, 160);
      };
      document.addEventListener('mouseup', scheduleSelectionUpdate, { passive:true });
      document.addEventListener('touchend', scheduleSelectionUpdate, { passive:true });
      document.addEventListener('selectionchange', scheduleSelectionUpdate);

      // 초기 speed 표시
      updateSpeed();
    });

    // --------------------------
    // 선택 관리: iOS에서 선택이 사라지는 문제를 보완
    function handleSelectionChange(){
      const sel = window.getSelection();
      if (!sel) return clearSelectionState();
      const text = (sel.toString() || "").trim();
      // 선택이 본문 내에 있는지 체크
      let isInBible = false;
      try {
        if (sel.anchorNode && sel.focusNode) {
          isInBible = bibleTextEl.contains(sel.anchorNode) && bibleTextEl.contains(sel.focusNode);
        }
      } catch(e){ isInBible = false; }

      if (text && isInBible) {
        selectedVerse = text;
        try {
          selectionRange = sel.getRangeAt(0).cloneRange();
        } catch(e){ selectionRange = null; }
        // 버튼 위치 표시
        try {
          const range = sel.getRangeAt(0);
          const rect = range.getBoundingClientRect();
          positionExplanationButton(rect);
        } catch(e){
          // fallback: 고정 위치
          resetExplanationButton();
        }
      } else {
        clearSelectionState();
      }
    }
    function updateSelectedVerseFromRange(range) {
      if (!range) return;
      const txt = (range.toString() || "").trim();
      if (txt) selectedVerse = txt;
      // position button
      try {
        const rect = range.getBoundingClientRect();
        positionExplanationButton(rect);
      } catch(e){ resetExplanationButton(); }
    }
    function clearSelectionState(){
      selectedVerse = "";
      selectionRange = null;
      resetExplanationButton();
    }

    // 버튼 위치 설정: 화면 밖으로 나가지 않도록 하기
    function positionExplanationButton(rect){
      const container = document.getElementById('explanation-button-container');
      const scrollY = window.scrollY || window.pageYOffset;
      const vh = window.innerHeight;
      const containerHeight = container.offsetHeight || 80;
      // 기본 top 계산
      let topPos = rect.bottom + scrollY + 10;
      // 화면 아래로 넘지 않게
      const maxTop = (window.scrollY || window.pageYOffset) + window.innerHeight - containerHeight - 10;
      topPos = Math.min(topPos, maxTop);
      // 화면 위로 넘지 않게
      const minTop = (window.scrollY || window.pageYOffset) + 10;
      topPos = Math.max(topPos, minTop);
      container.style.position = 'absolute';
      container.style.top = topPos + 'px';

      // 좌우
      const screenCenterX = window.innerWidth / 2;
      if (rect.left < screenCenterX) {
        container.style.left = (rect.right) + 'px';
        container.style.transform = 'translateX(10px)';
      } else {
        container.style.left = rect.left + 'px';
        container.style.transform = 'translateX(-100%) translateX(-10px)';
      }
      container.style.display = 'block';
    }
    function resetExplanationButton(){
      const container = document.getElementById('explanation-button-container');
      container.style.position = 'fixed';
      container.style.left = '30%';
      container.style.top = '100px';
      container.style.transform = 'translateX(-50%)';
      // 노출 유지 (기본 상태)
      //container.style.display = 'block';
    }

    // --------------------------
    // 검색 / 하이라이트 / 스크롤 마커
    function findString(searchText){
      clearHighlight();
      if (searchText == null || searchText.trim() === '') { searchCountEl.textContent = ''; nextLocationBtn.style.display = 'none'; return; }
      const escaped = escapeRegExp(searchText.trim());
      const regex = new RegExp(escaped, 'gi');
      const newContent = originalText.replace(regex, (match) => `<span class="search-highlight">${match}</span>`);
      bibleTextEl.innerHTML = newContent;
      foundSentences = Array.from(bibleTextEl.getElementsByClassName('search-highlight'));
      searchCountEl.textContent = `총 ${foundSentences.length}개 검색됨`;
      if (foundSentences.length > 0) {
        currentSearchIndex = 0;
        foundSentences[currentSearchIndex].scrollIntoView({ behavior:'smooth', block:'center' });
        nextLocationBtn.style.display = 'inline-block';
        updateScrollMarkers();
      } else {
        showModal("검색 결과 없음", `"${searchText}"에 대한 검색 결과가 없습니다.`);
        nextLocationBtn.style.display = 'none';
      }
    }
    function nextLocation(){
      if (!foundSentences.length) return;
      currentSearchIndex = (currentSearchIndex + 1) % foundSentences.length;
      foundSentences[currentSearchIndex].scrollIntoView({ behavior:'smooth', block:'center' });
      // 마커 동기화
      updateScrollMarkers();
    }
    function clearHighlight(){
      bibleTextEl.innerHTML = originalText;
      searchCountEl.textContent = '';
      nextLocationBtn.style.display = 'none';
      while (scrollMarkerContainer.firstChild) scrollMarkerContainer.removeChild(scrollMarkerContainer.firstChild);
      foundSentences = [];
      currentSearchIndex = -1;
    }
    function updateScrollMarkers(){
      while (scrollMarkerContainer.firstChild) scrollMarkerContainer.removeChild(scrollMarkerContainer.firstChild);
      const docH = document.documentElement.scrollHeight;
      const vh = window.innerHeight;
      foundSentences.forEach((el, idx) => {
        const marker = document.createElement('div');
        marker.className = 'scroll-marker';
        const topPos = el.getBoundingClientRect().top + window.scrollY;
        const markerPos = Math.min(Math.max((topPos / docH) * vh, 2), vh - 10);
        marker.style.top = markerPos + 'px';
        marker.addEventListener('click', () => { el.scrollIntoView({ behavior:'smooth', block:'center' }); });
        scrollMarkerContainer.appendChild(marker);
      });
    }

    // --------------------------
    // 모달
    function showModal(title, text, imageUrl=null){
      modalTitle.textContent = title || '';
      modalText.innerHTML = (text || '').toString().replace(/\n/g, '<br>');
      if (imageUrl) { modalImage.src = imageUrl; modalImage.style.display = 'block'; } else { modalImage.src=''; modalImage.style.display='none'; }
      modal.style.display = 'block';
      // 선택영역 유지: 모달 열려도 선택 유지하도록 약간의 복원 시도
      setTimeout(() => {
        if (selectionRange) {
          const sel = window.getSelection();
          sel.removeAllRanges();
          try { sel.addRange(selectionRange); } catch(e) { /* ignore */ }
        }
      }, 60);
    }
    function showLoadingModal(isImage=false){
      modalTitle.innerHTML = `<span class="loader"></span> ${isImage ? '그림 생성 중...' : '설명 생성 중...'}`;
      modalText.textContent = '설명을 생성 중입니다. 잠시만 기다려 주세요...';
      modalImage.style.display = 'none';
      modal.style.display = 'block';
    }

    // --------------------------
    // 본문 전체 텍스트 획득 (요약용)
    function getFullBibleText(){
      const tmp = document.createElement('div');
      tmp.innerHTML = originalText;
      return tmp.textContent.replace(/\s+/g,' ').trim();
    }

    // --------------------------
    // 설명/요약 API 호출 (Generative API 호출 핸들러)
    async function callGenerativeAPI(modalTitleText, prompt){
      const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-05-20:generateContent?key=${apiKey}`;
      const payload = { contents: [ { parts: [ { text: prompt } ] } ] };

      let retryCount = 0; const maxRetries = 3;
      let response = null;
      while (retryCount < maxRetries) {
        try {
          response = await fetch(apiUrl, {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify(payload)
          });
          if (response.ok) break;
          if (response.status === 429) { retryCount++; const delay = Math.pow(2, retryCount)*1000 + Math.random()*1000; await new Promise(r=>setTimeout(r, delay)); }
          else throw new Error(`API Error: ${response.status} ${response.statusText}`);
        } catch (err) {
          console.error('API call failed:', err);
          showModal("오류 발생", "API 호출 중 오류가 발생했습니다. 다시 시도해 주세요.");
          return;
        }
      }
      if (!response || !response.ok) { showModal("오류", "설명을 불러오는 데 실패했습니다. 잠시 후 다시 시도해 주세요."); return; }

      try {
        const data = await response.json();
        const content = data?.candidates?.[0]?.content?.parts?.[0]?.text || "응답을 가져오지 못했습니다.";
        showModal(modalTitleText, content);
      } catch (err) {
        console.error('Error processing response:', err);
        showModal("오류", "응답을 처리하는 중 오류가 발생했습니다.");
      }
    }

    // fetchExplanation + fetchSummary
    async function fetchExplanation(promptText, type){
      let prompt;
      if (type === 'simple') {
        prompt = `**명령:**다음 성경 용어/구절에 대해 모두 합쳐서 300자에서 500자 사이의 짧고 간결한 설명을 작성해 주세요. 만약에 선택어가 지명이름 또는 사람이름이면 (예: 단, 가나안, 하란, 브니엘, 세겜 등) 지명이면 인물을 검색하고 인물이면 지명을 검색해서 두 가지 다 설명해 주세요. 핵심 내용을 중심으로 요약해 주세요.\n**요청 용어/구절:** "${promptText}"\n**지침(요약):**- 지명/족속/민족: 거주지와 위치 간단 설명(필요하면 지도 언급)\n- 이름(인물): 이름의 뜻/주요활동/간단한 배경\n- 제사 도구/성물 등: 간단한 설명\n- 동물/식물/광물: 성경적 의미 간단 설명\n- 비교 가능한 개념(선택적): 핵심 비교 항목 간단 나열`;
      } else {
        prompt = `**명령:**다음 성경 용어/구절에 대해 성경적 관점에서 자세히 설명해 주세요. 답변은 모두 합쳐서 2,000자에서 3,000자 사이로 작성해 주세요. 필요하면 표 또는 간단한 지도를 포함하거나 참조해 주세요.\n**요청 용어/구절:** "${promptText}"\n**지침:**A. 지명, 족속, 민족, 나라: 지리적 위치, 역사적 배경, 성경 관련 사건\nB. 인물: 이름의 뜻, 주요 사건, 활동 지역\nC. 제사 도구/성물: 사용 목적 및 신학적 의미\nD. 동물/식물: 성경적 상징성\n출력은 한국어로 작성하세요.`;
      }
      showLoadingModal(false);
      await callGenerativeAPI('구절 설명', prompt);
    }

    async function fetchSummary(fullText, type){
      let prompt;
      if (type === 'simple') {
        prompt = `당신은 성경 주석가이자 성경 연구자입니다. 사용자가 선택한 성경 본문을 학문적·신학적 배경에서 분석하여, 핵심 주제와 메시지를 모두 합쳐서 300자에서 500자 사이로 간단하게 요약해 주세요. 불필요한 장황한 설명은 피하고 핵심 의미와 교훈에 집중하세요.\n선택된 성경 본문: "${fullText}"`;
      } else {
        prompt = `당신은 성경 주석가이자 성경 연구자입니다. 다음 성경 본문을 학문적·신학적 배경에서 분석하여, 본문의 주요 주제와 등장인물의 역할, 시대적 배경, 신학적 의미 등을 포함하여 자세히 설명해 주세요. 답변은 2,500자에서 3,500자 사이로 작성하세요.\n선택된 성경 본문: "${fullText}"`;
      }
      showLoadingModal(false);
      await callGenerativeAPI('본문 요약', prompt);
    }

    // --------------------------
    // updateSpeed
    function updateSpeed(){ audio.playbackRate = currentSpeed; speedDisplay.textContent = currentSpeed.toFixed(1) + 'x'; }

    // --------------------------
    // 선택관련 helper (외부에서 range 직접 설정 등)
    // selectionRange는 이미 클론된 Range를 보유하거나 null
    // handleSelectionChange()에서 selectedVerse 업데이트

    // --------------------------
    // selection 유지 보장: 유저가 터치/클릭 후 선택이 사라지는 경우, 이전에 저장된 selectionRange를 복원 시도
    // 이 파일에서 selectionRange는 선택 직후 저장되며, 버튼 클릭 등으로 선택이 사라지면 복원 시도함.

    // --------------------------
    // 추가 유틸 (폰트 표시)
    function updateFontSizeDisplay(){
      const cur = parseFloat(getComputedStyle(bibleTextEl).fontSize);
      fontSizeEl.textContent = Math.round(cur);
    }

    // --------------------------
    // 안전한 context: window 전역에서 사용할 수 있도록 일부 함수 노출 (선택사항)
    window.findString = findString;
    window.nextLocation = nextLocation;

    // --------------------------
    // --- ✅ 새 토글 버튼 로직 ---
  const progressContainer = document.querySelector('.progress-container');
  const speedControls = document.querySelector('.speed-controls');
  const volumeControl = document.querySelector('.volume-control');
  const showProgressBtn = document.getElementById('show-progress');
  const showSpeedBtn = document.getElementById('show-speed');
  const showVolumeBtn = document.getElementById('show-volume');

  let hideTimeout;

  function showOnly(target) {
    progressContainer.style.display = "none";
    speedControls.style.display = "none";
    volumeControl.style.display = "none";

    target.style.display = "flex";

    if (hideTimeout) clearTimeout(hideTimeout);
    hideTimeout = setTimeout(() => {
      target.style.display = "none";
    }, 10000);
  }

  showProgressBtn.addEventListener('click', () => showOnly(progressContainer));
  showSpeedBtn.addEventListener('click', () => showOnly(speedControls));
  showVolumeBtn.addEventListener('click', () => showOnly(volumeControl));
  </script>
</body>
</html>
